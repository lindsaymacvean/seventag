{"version":3,"sources":["node_modules/browser-pack/_prelude.js","app.js","src/admin-panel/app/app-prod.js","src/admin-panel/app/app.js","src/admin-panel/app/modules/condition/condition.js","src/admin-panel/app/modules/condition/entity/Condition.js","src/admin-panel/app/modules/condition/resource/ConditionResource.js","src/admin-panel/app/modules/condition/services/Condition.js","src/admin-panel/app/modules/debug/controllers/DebugOptionsController.js","src/admin-panel/app/modules/debug/controllers/WebsitesController.js","src/admin-panel/app/modules/debug/debug.js","src/admin-panel/app/modules/debug/entity/Website.js","src/admin-panel/app/modules/debug/resource/WebsiteResource.js","src/admin-panel/app/modules/integration/controllers/BaseController.js","src/admin-panel/app/modules/integration/controllers/CreateController.js","src/admin-panel/app/modules/integration/controllers/EditController.js","src/admin-panel/app/modules/integration/controllers/ManageController.js","src/admin-panel/app/modules/integration/entity/Integration.js","src/admin-panel/app/modules/integration/integration.js","src/admin-panel/app/modules/integration/resource/IntegrationResource.js","src/admin-panel/app/modules/security/controller/LoginController.js","src/admin-panel/app/modules/security/interceptor/DeleteRequestInterceptor.js","src/admin-panel/app/modules/security/interceptor/LocaleInterceptor.js","src/admin-panel/app/modules/security/interceptor/SecurityInterceptor.js","src/admin-panel/app/modules/security/resource/OAuthResource.js","src/admin-panel/app/modules/security/security.js","src/admin-panel/app/modules/security/service/Authorization.js","src/admin-panel/app/modules/security/service/Security.js","src/admin-panel/app/modules/security/service/TokenStorage.js","src/admin-panel/app/modules/security/token/AuthToken.js","src/admin-panel/app/modules/tag/controllers/BaseController.js","src/admin-panel/app/modules/tag/controllers/CreateController.js","src/admin-panel/app/modules/tag/controllers/EditController.js","src/admin-panel/app/modules/tag/controllers/ManageController.js","src/admin-panel/app/modules/tag/entity/Tag.js","src/admin-panel/app/modules/tag/entity/Template.js","src/admin-panel/app/modules/tag/entity/TemplateType.js","src/admin-panel/app/modules/tag/providers/TemplatesProvider.js","src/admin-panel/app/modules/tag/resource/TagResource.js","src/admin-panel/app/modules/tag/services/Templates.js","src/admin-panel/app/modules/tag/tag.js","src/admin-panel/app/modules/tagContainer/controllers/CreateController.js","src/admin-panel/app/modules/tagContainer/controllers/EditController.js","src/admin-panel/app/modules/tagContainer/controllers/ExplanationController.js","src/admin-panel/app/modules/tagContainer/controllers/ManageController.js","src/admin-panel/app/modules/tagContainer/controllers/PermissionsController.js","src/admin-panel/app/modules/tagContainer/controllers/PrivacyController.js","src/admin-panel/app/modules/tagContainer/entity/Container.js","src/admin-panel/app/modules/tagContainer/entity/Permission.js","src/admin-panel/app/modules/tagContainer/resource/ContainerResource.js","src/admin-panel/app/modules/tagContainer/resource/PermissionResource.js","src/admin-panel/app/modules/tagContainer/service/CurrentContainer.js","src/admin-panel/app/modules/tagContainer/service/ParamConverter.js","src/admin-panel/app/modules/tagContainer/tagContainer.js","src/admin-panel/app/modules/trigger/controllers/BaseController.js","src/admin-panel/app/modules/trigger/controllers/CreateController.js","src/admin-panel/app/modules/trigger/controllers/EditController.js","src/admin-panel/app/modules/trigger/controllers/EditInsideTagController.js","src/admin-panel/app/modules/trigger/controllers/ManageController.js","src/admin-panel/app/modules/trigger/entity/Trigger.js","src/admin-panel/app/modules/trigger/resource/TriggerResource.js","src/admin-panel/app/modules/trigger/trigger.js","src/admin-panel/app/modules/update/controllers/VersionController.js","src/admin-panel/app/modules/update/directives/setVersionDirective.js","src/admin-panel/app/modules/update/resources/UpdateResource.js","src/admin-panel/app/modules/update/services/Version.js","src/admin-panel/app/modules/update/update.js","src/admin-panel/app/modules/user/controllers/BaseController.js","src/admin-panel/app/modules/user/controllers/ChangePasswordController.js","src/admin-panel/app/modules/user/controllers/CreateController.js","src/admin-panel/app/modules/user/controllers/EditController.js","src/admin-panel/app/modules/user/controllers/ManageController.js","src/admin-panel/app/modules/user/controllers/OthersSettingsController.js","src/admin-panel/app/modules/user/controllers/ResetRequestController.js","src/admin-panel/app/modules/user/controllers/SetPasswordController.js","src/admin-panel/app/modules/user/entities/User.js","src/admin-panel/app/modules/user/resources/UserResource.js","src/admin-panel/app/modules/user/user.js","src/admin-panel/app/modules/variable/controllers/BaseController.js","src/admin-panel/app/modules/variable/controllers/CreateController.js","src/admin-panel/app/modules/variable/controllers/EditController.js","src/admin-panel/app/modules/variable/controllers/ManageController.js","src/admin-panel/app/modules/variable/controllers/SelectorController.js","src/admin-panel/app/modules/variable/directives/variableClickOutside.js","src/admin-panel/app/modules/variable/directives/variableSelector.js","src/admin-panel/app/modules/variable/entity/Variable.js","src/admin-panel/app/modules/variable/entity/VariableType.js","src/admin-panel/app/modules/variable/providers/VariableFormProvider.js","src/admin-panel/app/modules/variable/resource/VariableResource.js","src/admin-panel/app/modules/variable/resource/VariableTypeResource.js","src/admin-panel/app/modules/variable/services/VariableSelector.js","src/admin-panel/app/modules/variable/variable.js","src/admin-panel/modules/alert/alert.js","src/admin-panel/modules/alert/controllers/AlertController.js","src/admin-panel/modules/alert/directives/AlertDirective.js","src/admin-panel/modules/alert/providers/AlertProvider.js","src/admin-panel/modules/alert/services/Alert.js","src/admin-panel/modules/alert/services/AlertStorage.js","src/admin-panel/modules/alert/services/RefreshAlert.js","src/admin-panel/modules/alert/services/UniqueStorage.js","src/admin-panel/modules/clipboard/clipboard.js","src/admin-panel/modules/clipboard/directives/clipboardDirective.js","src/admin-panel/modules/confirm/confirm.js","src/admin-panel/modules/confirm/directives/ConfirmDirective.js","src/admin-panel/modules/form/controller/AlertFormController.js","src/admin-panel/modules/form/directives/AlertFormDirective.js","src/admin-panel/modules/form/directives/CheckboxDirective.js","src/admin-panel/modules/form/directives/RadioButtonDirective.js","src/admin-panel/modules/form/directives/SelectDirective.js","src/admin-panel/modules/form/form.js","src/admin-panel/modules/form/services/AlertForm.js","src/admin-panel/modules/helpSystem/directives/HelpSystemDirective.js","src/admin-panel/modules/helpSystem/helpSystem.js","src/admin-panel/modules/pageInfo/controllers/BreadcrumbController.js","src/admin-panel/modules/pageInfo/controllers/TitleController.js","src/admin-panel/modules/pageInfo/directives/BreadcrumbDirective.js","src/admin-panel/modules/pageInfo/directives/TitleDirective.js","src/admin-panel/modules/pageInfo/pageInfo.js","src/admin-panel/modules/pageInfo/services/PageInfo.js","src/admin-panel/modules/sanitize/filters/tmCeilFilter.js","src/admin-panel/modules/sanitize/filters/tmDateFilter.js","src/admin-panel/modules/sanitize/sanitize.js","src/admin-panel/modules/textEditor/service/HTMLLinter.js","src/admin-panel/modules/textEditor/service/LintingRules.js","src/admin-panel/modules/textEditor/service/TagTemplateLinter.js","src/admin-panel/modules/textEditor/service/TagTemplateToJsConverter.js","src/admin-panel/modules/textEditor/service/TextEditorConfig.js","src/admin-panel/modules/textEditor/textEditor.js","src/admin-panel/modules/translation/factory/TranslationFactory.js","src/admin-panel/modules/translation/services/Translation.js","src/admin-panel/modules/translation/translation.js","src/admin-panel/modules/validator/directives/stgFormDirective.js","src/admin-panel/modules/validator/validator.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"module","_app","MODULE_NAME","angular","element","document","ready","bootstrap","./app.js",2,"_security","_update","_user","_tagContainer","_tag","_trigger","_variable","_integration","_condition","_debug","_alert","_translation","_form","_confirm","_sanitize","_clipboard","_pageInfo","_helpSystem","_validator","_textEditor","run","$rootScope","$state","$alertProvider","security","OAuthResource","tokenStorage","authService","$variableFormProvider","addType","templateUrl","addMessagePattern","animateSidebarReady","isContainerView","$on","event","toState","toStateParams","hasContainerList","undefined","data","isAuthenticated","activeContainerId","containerId","authToken","getItem","refreshToken","then","addItem","loginConfirmed","config","headers","Authorization","getToken","loginCancelled","$urlRouterProvider","ngClipProvider","$translateProvider","otherwise","setPath","useSanitizeValueStrategy","useStaticFilesLoader","prefix","suffix","preferredLanguage","useLocalStorage","value","wrapperClass","filter","items","slice","reverse","./../modules/alert/alert.js","./../modules/clipboard/clipboard.js","./../modules/confirm/confirm.js","./../modules/form/form.js","./../modules/helpSystem/helpSystem.js","./../modules/pageInfo/pageInfo.js","./../modules/sanitize/sanitize.js","./../modules/textEditor/textEditor.js","./../modules/translation/translation.js","./../modules/validator/validator.js","./modules/condition/condition.js","./modules/debug/debug.js","./modules/integration/integration.js","./modules/security/security.js","./modules/tag/tag.js","./modules/tagContainer/tagContainer.js","./modules/trigger/trigger.js","./modules/update/update.js","./modules/user/user.js","./modules/variable/variable.js",3,"_interopRequireDefault","obj","__esModule","default","_ConditionResource","_ConditionResource2","_Condition","_Condition2","$inject","service","./resource/ConditionResource.js","./services/Condition.js",4,"_classCallCheck","instance","Constructor","TypeError","Object","defineProperty","conditionFactory","Condition","this","id","variable","condition",5,"_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","ConditionResource","$http","$q","http","q","deferred","defer","method","url","success","resp","resolve","error","err","reject","promise","../entity/Condition.js",6,"mergeVariables","arrayFirst","arraySecond","final","indexFirst","shared","indexSecond","isVariablesNameEqual","push","concat","variableFirst","variableSecond","name","findTypeByType","array","type","tempType","currentContainer","conditionResource","$conditionResource","$currentContainer","getId","conditionResourcePromise","query","typesTemp","typesIndex","variables","index","self","responsedTypes","actions",7,"state","stateParams","scope","BREADCRUMB_TEXT","DebugOptionsController","containerResource","$stateParams","CurrentContainer","PageInfo","$scope","$translate","_this","container","getEntityObject","containerPromise","get","translate","getContainer","$container","hasPermission","go","translations","clear","add","broadcast","args",8,"alert","websitesResource","WebsitesController","$websitesResource","$alert","websites","websitesPromise","parameterTypes","getWebsiteUrlWithParameter","website","getUrlWithParameter","splice","_this2","parameterType","websitePromise","put","validateContainer",9,"_DebugOptionsController","_DebugOptionsController2","_WebsitesController","_WebsitesController2","_WebsiteResource","_WebsiteResource2","MODULE_CONTAINER","MODULE_DIR","currentContainerLoading","loadContainer","currentContainerPromise","$broadcast","toParams","$stateProvider","controller","roles","permission","./controllers/DebugOptionsController.js","./controllers/WebsitesController.js","./resource/WebsiteResource.js",10,"websiteFactory","resource","DEBUG_PARAM_NAME","URL_MIN_LENGTH","Website","hasUrl","getSeparator","separator","indexOf",11,"isResponseSuccess","status","_Website","_Website2","transformResponse","isArray","map","websiteData","parameter_type","appendTransform","defaults","transform","WebsiteResource","params","header","_this3","../entity/Website.js",12,"BaseController","$Integration","$PageInfo","integration","getBreadcrumbText","formTouched","Integration","integrationPromise","save","getAlertType","includes","integrationId","validateIntegration",13,"_possibleConstructorReturn","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","_BaseController2","_BaseController3","CreateController","_BaseController","$IntegrationResource","getPrototypeOf","./BaseController.js",14,"EditController",15,"ManageController","TableParams","paramConverter","permissions","tableParams","page","count","sorting","total","getData","$defer","list","remove","reload",16,"integrationFactory","clientId","clientSecret","createdAt","updatedAt","user","result","excludedProperty","property","isFunction","hasOwnProperty","email","post",17,"_ManageController","_ManageController2","_CreateController","_CreateController2","_EditController","_EditController2","_IntegrationResource","_IntegrationResource2","./controllers/CreateController.js","./controllers/EditController.js","./controllers/ManageController.js","./resource/IntegrationResource.js",18,"_Integration","_Integration2","client_id","client_secret","created_at","updated_at","IntegrationResource","entity","_this4","../entity/Integration.js",19,"$oauthResource","$tokenStorage","$alertForm","LoginController","oauthResource","alertForm","auth","identity","password","loginPromise","getStorage","clean","loading",20,"deleteRequestInterceptor","$injector","METHOD_DELETE","POST_DELETE_URL_SUFIX","request","toUpperCase","deleteHeaderNotSupported","responseError","rejection",21,"DEFAULT_LANGUAGE","localeInterceptor","$window","localStorageLang","localStorage","test","Locale",22,"securityInterceptor","removeItem",23,"_AuthToken","_AuthToken2","RESOURCE_ROUTE","LOGOUT_ROUTE","GRANT_TYPE","getEntity","accessToken","access_token","expiresIn","expires_in","tokenType","token_type","refresh_token","OAuthClientSettings","grant_type","username","ignoreAuthModule","token","../token/AuthToken.js",24,"_LoginController","_LoginController2","_Authorization","_Authorization2","_Security","_Security2","_OAuthResource","_OAuthResource2","_TokenStorage","_TokenStorage2","_SecurityInterceptor","_SecurityInterceptor2","_LocaleInterceptor","_LocaleInterceptor2","_DeleteRequestInterceptor","_DeleteRequestInterceptor2","$httpProvider","interceptors","controllerAs","secure","authorization","logout","disableDebugMode","isSecure","isDataDefined","authorize","OAUTH_CLIENT_ID","OAUTH_CLIENT_SECRET","factory","./controller/LoginController.js","./interceptor/DeleteRequestInterceptor.js","./interceptor/LocaleInterceptor.js","./interceptor/SecurityInterceptor.js","./resource/OAuthResource.js","./service/Authorization.js","./service/Security.js","./service/TokenStorage.js",25,"getUser","hasAnyRole",26,"Security","$timeout","userResource","timeout","authenticated","checked","roleString","isSuperAdmin","hasRole","use","language","force","reloadUser","authenticate","getMe",27,"TokenStorage","$localStorage","JSON","parse","capitalizeFirstLetter","stringify","string","charAt",28,"AuthToken",29,"$tagResource","$triggerResource","$variableResource","$TableParams","$paramConverter","templatesStorage","BREADCRUMB_GLOBAL","triggerResource","tag","tagPromise","triggers","chosenTriggers","triggerPromise","templates","getAll","template","textEditorConfig","isCodeEditorFocused","queryAllAvailable","onLoad","cm","options","insertVariableIntoCode","doc","replaceSelection","focus","on","addTrigger","showTriggerForm","validateTriggers","editTrigger","editTriggerForm","placeholder","types","setTemplateType","templateFields","getOptions","getTemplateUrl","templateOptions","setOptions","fieldsLength","prepareExistingTriggersList","showListTriggersForm","existingTable","parameters","trigger","chosenLength","tagId","makeChanges","validateTag",30,"TemplatesStorage",31,"initTagTemplate",32,"tagResource","showTriggers","showMenu","$watch","newParams","oldParams","settings","changeStatus","$index","isRowExpanded",33,"tagFactory","Tag","noScriptUri","priority","documentWrite","disableInDebugMode","respectVisitorsPrivacy","isActive","statusChangePending","collection","copy",34,"_TemplateType","_TemplateType2","templateFactory","TemplateType","Template","brandUrl","fields","field","../entity/TemplateType.js",35,"templateTypeFactory",36,"_Template","_Template2","TemplatesProvider","templateLength","../entity/Template.js",37,"_Tag","_Tag2","no_script_uri","document_write","disable_in_debug_mode","is_active","respect_visitors_privacy","template_options","TagResource","../entity/Tag.js",38,"findByKey","collectionLength","Templates","$templates","typeId",39,"_TagResource","_TagResource2","_Templates","_Templates2","_TemplatesProvider","_TemplatesProvider2","MODULE_TRIGGER","MODULE_VARIABLE","provider","./providers/TemplatesProvider.js","./resource/TagResource.js","./services/Templates.js",40,41,"pageInfo","refreshBreadcrumb","breadcrumbText",42,"PAGE_TITLE","ExplanationController",43,44,"permissionsResource","PermissionsController","$permissionsResource","permissionsPromise","usersTable","tempRequest",45,"PrivacyController","privacyPromise","getPrivacyOptOut",46,"containerFactory","Container","version","hasUnpublishedChanges","publishedAt","delay","permissionsPrioritiedArray","text","permissionIndex",47,"permissionFactory","Permission",48,"_Container","_Container2","description","has_unpublished_changes","published_at","ContainerResource","../entity/Container.js",49,"_Permission","_Permission2","permissionList","PermissionResource","../entity/Permission.js",50,"$containerResource","rootScope","cookies","PREVIEW_KEY","DEBUG_KEY","$cookies","debugMode","previewedContainer","verifyDebugMode","setTypes","publishPromise","publishVersion","restorePromise","restoreVersion","isDebugModeEnabled","cookiesDebug","previewedContainerText","cookiesPreview","respIndex","mapped",51,"ParamConverter","limit","offset",52,"_ExplanationController","_ExplanationController2","_PermissionsController","_PermissionsController2","_PrivacyController","_PrivacyController2","_ContainerResource","_ContainerResource2","_PermissionResource","_PermissionResource2","_ParamConverter","_ParamConverter2","_CurrentContainer","_CurrentContainer2","DEBUG_MODULE_NAME","./controllers/ExplanationController.js","./controllers/PermissionsController.js","./controllers/PrivacyController.js","./resource/ContainerResource.js","./resource/PermissionResource.js","./service/CurrentContainer.js","./service/ParamConverter.js",53,"$condition","required","typesArrayPromise","getArrayOfTypes","typesArray","conditions","getVariables","getActions","getRequired","requiredIndex","addCondition","form","$name","$setPristine","conditionLength","$valid","$invalid","variablesIndex","conditionName","conditionsIndex","view",54,"setType","$emit",55,"triggerId","triggerResp","typesResp",56,57,58,"triggerFactory","Trigger","tagsCount",59,"_Trigger","_Trigger2","tags_count","TriggerResource","../entity/Trigger.js",60,"_EditInsideTagController","_EditInsideTagController2","_TriggerResource","_TriggerResource2","CONDITION_MODULE_NAME","./controllers/EditInsideTagController.js","./resource/TriggerResource.js",61,"updateResource","window","VersionController","$updateResource","latest","isUpToDate","setSession","location","href",62,"setVersionDirective","restrict","stgVersion","link","current","getLatest",63,"UpdateResource","$location","domain","host","Access-Control-Request-Headers",64,"Version",65,"_VersionController","_VersionController2","_UpdateResource","_UpdateResource2","_Version","_Version2","_setVersionDirective","_setVersionDirective2","directive","./controllers/VersionController.js","./directives/setVersionDirective.js","./resources/UpdateResource.js","./services/Version.js",66,"refreshAlert","BREADCRUMB_SECTION","ACTIVATION_SET_PASSWORD","ROLE_API","ROLE_USER","ROLE_SUPER_ADMIN","ROLE_CONTAINERS_CREATE","userPromise","activation","role","createContainerRole","getUserRole","roleIndex","saveMe",67,"ChangePasswordController","$userResource","validationForce","changePasswordPromise","currentPassword","plainPassword","first","second","newPassword","current_password","changePassword","changePasswordForm","$error",68,"ACTIVATION_EMAIL","RefreshAlert","isValid","createUserForm","$dirty",69,"setUser","userId","editUserForm",70,"resetPromise","resetPassword",71,"translation","OthersSettingsController","$translation","languages","getLanguages","loadTranslationsPromise","loadAvailableTranslations","storedLanguage","othersSettingsPromise","saveOthersSettings","User",72,"ResetRequestController","formTitle",73,"setPassword","resetPasswordForm",74,"userFactory","firstName","lastName","displayName","excludedInEdit","putMe","othersSettingsMe",75,"_User","_User2","CHANGE_PASSWORD_ROUTE","RESET_REQUEST_ROUTE","RESET_PASSWORD_ROUTE","first_name","last_name","display_name","UserResource","_this5","_this6","_this7","../entities/User.js",76,"_OthersSettingsController","_OthersSettingsController2","_ChangePasswordController","_ChangePasswordController2","_ResetRequestController","_ResetRequestController2","_SetPasswordController","_SetPasswordController2","_UserResource","_UserResource2","./controllers/ChangePasswordController.js","./controllers/OthersSettingsController.js","./controllers/ResetRequestController.js","./controllers/SetPasswordController.js","./resources/UserResource.js",77,"$typeResource","typeResource","variableFormProvider","typesPromise","getType","variablePromise","refresh","validateVariable",78,"getVariableTypes",79,"variableId",80,"variableResource",81,"stopBubblingEvent","stopPropagation","cancelBubble","compileListView","listTemplate","getElementById","html","compile","createWrapper","listElement","btnElement","variableSelector","getTemplate","inputGroupWrapper","wrap","getElementWrapper","parent","append","SelectorController","$compile","$variableSelector","allVariables","$element","$ngModel","ngModel","ulElement","children","elementValue","val","trim","isVariablesListVisible","removeVariablePrompt","addVariablePrompt","toggleClass","removeClass","$setViewValue","selectVariable","$render","hasClass",82,"variableClickOutside","$document","attrs","selectorCtrl","documentOnClick","outside","contains","listVisible","closeVariablePrompt","off",83,"_SelectorController","_SelectorController2","variableSelectorDirective","controllers","selectorController","init","bindToController","../controllers/SelectorController.js",84,"variableFactory","Variable",85,"variableTypeFactory","VariableType","helper",86,"VariableFormProvider",87,"_Variable","_Variable2","VariableResource","../entity/Variable.js",88,"_VariableType","_VariableType2","VariableTypeResource","../entity/VariableType.js",89,"isVariablePromptOpen","openVariablePrompt","_removeVariablePrompt","substring","elementWrapper","VariableSelector",90,"_VariableResource","_VariableResource2","_VariableTypeResource","_VariableTypeResource2","_VariableFormProvider","_VariableFormProvider2","_VariableSelector","_VariableSelector2","_variableSelector","_variableSelector2","_variableClickOutside","_variableClickOutside2","./controllers/SelectorController","./directives/variableClickOutside.js","./directives/variableSelector.js","./providers/VariableFormProvider.js","./resource/VariableResource.js","./resource/VariableTypeResource.js","./services/VariableSelector.js",91,"_AlertProvider","_AlertProvider2","_AlertController","_AlertController2","_AlertDirective","_AlertDirective2","_Alert","_Alert2","_RefreshAlert","_RefreshAlert2","_AlertStorage","_AlertStorage2","_UniqueStorage","_UniqueStorage2","./controllers/AlertController.js","./directives/AlertDirective.js","./providers/AlertProvider.js","./services/Alert.js","./services/AlertStorage.js","./services/RefreshAlert.js","./services/UniqueStorage.js",92,"AlertController","AlertStorage","storage","getAlerts",93,"alertDirective","Alert","alertProvider","interval","isDefined",94,"_typeof","Symbol","iterator","AlertProvider","messagePatterns","pattern","patterns","forEach","isObject","elem",95,"removeAfterTimeout","addAlert","message","convertToMessage","extend","INFO_TYPE","ERROR_TYPE","SUCCESS_TYPE","arguments","getMessagePattern","vsprintf",96,"indicator",97,"_get","object","receiver","Function","desc","getOwnPropertyDescriptor","getter","_Alert3","localStorageKey","./Alert.js",98,"_AlertStorage3","UniqueStorage","apply","has","./AlertStorage.js",99,"_clipboardDirective","_clipboardDirective2","./directives/clipboardDirective.js",100,"clipboardDirective","tplElement","clipboard","button","find","addClass","copyToClipboard",101,"_ConfirmDirective","_ConfirmDirective2","./directives/ConfirmDirective.js",102,"confirmDirective","transclude","replace","ccConfirm","turnOn","approve","cancel","confirm",103,"_AlertController3","AlertFormController","../../alert/controllers/AlertController.js",104,"alertFormDirective",105,"CheckboxDirective","checkedClass","ngTrueValue",106,"RadioButtonDirective","ccRadioModel","ccDisabled","defaultValue",107,"SelectDirective","ccSelectOptions","ccSelectValue","ccSelectLabel","tmpElement","searchByValue","getActiveOptionLabel","changeSelection",108,"_CheckboxDirective","_CheckboxDirective2","_RadioButtonDirective","_RadioButtonDirective2","_SelectDirective","_SelectDirective2","_AlertForm","_AlertForm2","_AlertFormDirective","_AlertFormDirective2","_AlertFormController","_AlertFormController2","./controller/AlertFormController.js","./directives/AlertFormDirective.js","./directives/CheckboxDirective.js","./directives/RadioButtonDirective.js","./directives/SelectDirective.js","./services/AlertForm.js",109,"AlertForm","../../alert/services/Alert.js",110,"helpSystemDirective","content","placement",111,"_HelpSystemDirective","_HelpSystemDirective2","./directives/HelpSystemDirective.js",112,"BreadcrumbController","breadcrumb",113,"DEFAULT_TITLE","TitleController","title","info","setTitle","reduce","previous",114,"breadcrumbDirective",115,"titleDirective",116,"_BreadcrumbController","_BreadcrumbController2","_TitleController","_TitleController2","_BreadcrumbDirective","_BreadcrumbDirective2","_PageInfo","_PageInfo2","_TitleDirective","_TitleDirective2","./controllers/BreadcrumbController.js","./controllers/TitleController.js","./directives/BreadcrumbDirective.js","./directives/TitleDirective.js","./services/PageInfo.js",117,"navigation",118,"tmCeilFilter","number","Math","ceil",119,"tmDateFilter","$filter","defaultDateFormat","angularDateFilter","theDate","format",120,"_tmDateFilter","_tmDateFilter2","_tmCeilFilter","_tmCeilFilter2","./filters/tmCeilFilter.js","./filters/tmDateFilter.js",121,"HTMLLinter","lintRules","HTMLHint","verify",122,"HTML_LINT_RULES","tagname-lowercase","attr-lowercase","attr-value-double-quotes","attr-value-not-empty","attr-no-duplication","doctype-first","tag-pair","tag-self-close","spec-char-escape","id-unique","src-not-empty","title-require","head-script-disabled","doctype-html5","id-class-value","style-disabled","inline-style-disabled","inline-script-disabled","space-tab-mixed-disabled","id-class-ad-disabled","href-abs-or-rel","attr-unsafe-chars","JS_LINT_RULES","browser","devel","dojo","jquery","mootools","nonstandard","prototypejs","yui","bitwise","camelcase","curly","enforceall","eqeqeq","es3","es5","forin","freeze","funcscope","futurehostile","immed","latedef","nocomma","nonew","notypeof","shadow","strict","sub","undef","unused","asi","LintingRules","jsHintRules","htmlHintRules","jshint",123,"HTML_HEAD_WRAP_START","HTML_HEAD_WRAP_END","TagTemplateLinter","tagTemplateToJsConverter","lintingRules","htmlLinter","deactivate","htmlWrappedText","wrapInHtmlTag","lines","split","convert","tagTemplateWithFixedJsText","join","allErrors","lint","jsErrors","filterOutHtmlErrors","errors","mapToLintRepresentation","lineCount","isHtmlError","line","lastLineIdx","getLintingRules","from","CodeMirror","Pos","to","severity",124,"TAG_TEMPLATE_VARIABLE_START","TAG_TEMPLATE_VARIABLE_END","TagTemplateToJsConverter","textLines","lineIdx","isCursorAfterTheEndOfText","lineContainsVariable","replaceVariablesExpressions","totalLines","words","variableObj","createVariableSearchPattern","replacement","variableName","whitespace","regexStr","RegExp",125,"DEFAULT_CONFIG","mode","lineNumbers","styleActiveLine","matchBrackets","theme","gutters","TextEditorConfig","tagTemplateLinter","configOverrides","overrides","cfg","getAnnotations","opt","validate",126,"_TextEditorConfig","_TextEditorConfig2","_TagTemplateLinter","_TagTemplateLinter2","_TagTemplateToJsConverter","_TagTemplateToJsConverter2","_LintingRules","_LintingRules2","_HTMLLinter","_HTMLLinter2","./service/HTMLLinter.js","./service/LintingRules.js","./service/TagTemplateLinter.js","./service/TagTemplateToJsConverter.js","./service/TextEditorConfig.js",127,"translationFactory","cache",128,"Translation",129,"_TranslationFactory","_TranslationFactory2","_Translation","_Translation2","./factory/TranslationFactory.js","./services/Translation.js",130,"isPromise","stgFormDirective","formResource","formPromise","$parent","attributes","Array","$setDirty","nested",131,"_stgFormDirective","_stgFormDirective2","./directives/stgFormDirective.js"],"mappings":"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","file":"app.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nvar _app = require('./app.js');\n\nvar MODULE_NAME = 'admin.application.prod'; /**\n                                             * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n                                             *\n                                             * This program is free software: you can redistribute it and/or modify it under\n                                             * the terms of the GNU Affero General Public License as published by the Free\n                                             * Software Foundation, either version 3 of the License, or (at your option) any\n                                             * later version.\n                                             *\n                                             * This program is distrubuted in the hope that it will be useful,\n                                             * but WITHOUT ANY WARRANTY; without even the implied warranty of\n                                             * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n                                             * GNU Affero General Public License for more details.\n                                             *\n                                             * You should have received a copy of the GNU Affero General Public License\n                                             * along with this program. If not, see <http://www.gnu.org/licenses/>.\n                                             */\n\nangular.module(MODULE_NAME, [_app.MODULE_NAME]);\n\nangular.element(document).ready(function () {\n\n    angular.bootstrap(document, [MODULE_NAME]);\n});\n\n},{\"./app.js\":2}],2:[function(require,module,exports){\n'use strict';\n\nvar _security = require('./modules/security/security.js');\n\nvar _update = require('./modules/update/update.js');\n\nvar _user = require('./modules/user/user.js');\n\nvar _tagContainer = require('./modules/tagContainer/tagContainer.js');\n\nvar _tag = require('./modules/tag/tag.js');\n\nvar _trigger = require('./modules/trigger/trigger.js');\n\nvar _variable = require('./modules/variable/variable.js');\n\nvar _integration = require('./modules/integration/integration.js');\n\nvar _condition = require('./modules/condition/condition.js');\n\nvar _debug = require('./modules/debug/debug.js');\n\nvar _alert = require('./../modules/alert/alert.js');\n\nvar _translation = require('./../modules/translation/translation.js');\n\nvar _form = require('./../modules/form/form.js');\n\nvar _confirm = require('./../modules/confirm/confirm.js');\n\nvar _sanitize = require('./../modules/sanitize/sanitize.js');\n\nvar _clipboard = require('./../modules/clipboard/clipboard.js');\n\nvar _pageInfo = require('./../modules/pageInfo/pageInfo.js');\n\nvar _helpSystem = require('./../modules/helpSystem/helpSystem.js');\n\nvar _validator = require('./../modules/validator/validator.js');\n\nvar _textEditor = require('./../modules/textEditor/textEditor.js');\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar MODULE_NAME = 'admin.application';\n\nangular.module('admin.application.plugins', [_tag.MODULE_NAME]);\n\nangular.module(MODULE_NAME, ['pascalprecht.translate', 'cgBusy', 'ui.router', 'ui.bootstrap', 'checklist-model', 'http-auth-interceptor', _security.MODULE_NAME, _update.MODULE_NAME, _user.MODULE_NAME, _condition.MODULE_NAME, _trigger.MODULE_NAME, _variable.MODULE_NAME, _integration.MODULE_NAME, _tag.MODULE_NAME, _tagContainer.MODULE_NAME, _alert.MODULE_NAME, _translation.MODULE_NAME, _form.MODULE_NAME, _confirm.MODULE_NAME, _sanitize.MODULE_NAME, _clipboard.MODULE_NAME, _pageInfo.MODULE_NAME, _helpSystem.MODULE_NAME, _validator.MODULE_NAME, _debug.MODULE_NAME, _textEditor.MODULE_NAME, 'ngClipboard', 'admin.application.plugins']).run(['$rootScope', '$state', 'clearcode.tm.alert.$alert', 'clearcode.tm.security.security', 'clearcode.tm.security.oauthResource', 'clearcode.tm.security.tokenStorage', 'authService', 'clearcode.tm.variable.$variableForm', function ($rootScope, $state, $alertProvider, security, OAuthResource, tokenStorage, authService, $variableFormProvider) {\n\n    $variableFormProvider.addType('dataLayer', {\n        templateUrl: 'app/modules/variable/views/types/dataLayer.html'\n    }).addType('cookie', {\n        templateUrl: 'app/modules/variable/views/types/cookie.html'\n    }).addType('constant', {\n        templateUrl: 'app/modules/variable/views/types/constant.html'\n    }).addType('document', {\n        templateUrl: 'app/modules/variable/views/types/document.html'\n    }).addType('random', {\n        templateUrl: 'app/modules/variable/views/types/random.html'\n    }).addType('url', {\n        templateUrl: 'app/modules/variable/views/types/url.html'\n    });\n\n    $alertProvider.addMessagePattern('error.invalid', 'Form is invalid. Please correct selected fields');\n\n    $alertProvider.addMessagePattern('success.create', 'Settings saved successfully');\n\n    $alertProvider.addMessagePattern('success.edit', 'Settings saved successfully');\n\n    $alertProvider.addMessagePattern('success.remove', 'Deleted successfully');\n\n    $rootScope.$state = $state;\n    $rootScope.animateSidebarReady = false;\n\n    $rootScope.isContainerView = function () {\n        return false;\n    };\n\n    $rootScope.$on('$stateChangeStart', function (event, toState, toStateParams) {\n\n        $rootScope.isContainerView = function () {\n\n            var hasContainerList = toState.data.hasContainerList !== undefined ? toState.data.hasContainerList : false,\n                isAuthenticated = security.isAuthenticated();\n\n            if ($rootScope.animateSidebarReady === false && hasContainerList && isAuthenticated) {\n\n                $rootScope.animateSidebarReady = true;\n            }\n\n            return hasContainerList && isAuthenticated;\n        };\n\n        $rootScope.activeContainerId = toStateParams.containerId;\n    });\n\n    $rootScope.$on('event:auth-loginRequired', function () {\n\n        var authToken = tokenStorage.getItem();\n\n        if (undefined !== authToken) {\n\n            OAuthResource.refreshToken(authToken.refreshToken).then(function (data) {\n\n                tokenStorage.addItem(data);\n\n                authService.loginConfirmed('success', function (config) {\n\n                    config.headers.Authorization = tokenStorage.getToken();\n\n                    return config;\n                });\n            }, function () {\n\n                authService.loginCancelled('invalid');\n            });\n        }\n    });\n}]).config(['$urlRouterProvider', 'ngClipProvider', '$translateProvider', function ($urlRouterProvider, ngClipProvider, $translateProvider) {\n\n    $urlRouterProvider.otherwise('/containers');\n    ngClipProvider.setPath('ZeroClipboard.swf');\n\n    $translateProvider.useSanitizeValueStrategy('escape');\n\n    $translateProvider.useStaticFilesLoader({\n        prefix: '/api/translations/',\n        suffix: '.json'\n    });\n\n    $translateProvider.preferredLanguage('en');\n    $translateProvider.useLocalStorage();\n}]).value('cgBusyDefaults', {\n    wrapperClass: 'loading'\n}).value('longDataFormat', 'dd MMMM yyyy').value('defaultDateFormat', 'yyyy-MM-dd HH:mm').filter('reverse', function () {\n\n    return function (items) {\n\n        return items.slice().reverse();\n    };\n});\n\nmodule.exports = { MODULE_NAME: MODULE_NAME };\n\n},{\"./../modules/alert/alert.js\":91,\"./../modules/clipboard/clipboard.js\":99,\"./../modules/confirm/confirm.js\":101,\"./../modules/form/form.js\":108,\"./../modules/helpSystem/helpSystem.js\":111,\"./../modules/pageInfo/pageInfo.js\":116,\"./../modules/sanitize/sanitize.js\":120,\"./../modules/textEditor/textEditor.js\":126,\"./../modules/translation/translation.js\":129,\"./../modules/validator/validator.js\":131,\"./modules/condition/condition.js\":3,\"./modules/debug/debug.js\":9,\"./modules/integration/integration.js\":17,\"./modules/security/security.js\":24,\"./modules/tag/tag.js\":39,\"./modules/tagContainer/tagContainer.js\":52,\"./modules/trigger/trigger.js\":60,\"./modules/update/update.js\":65,\"./modules/user/user.js\":76,\"./modules/variable/variable.js\":90}],3:[function(require,module,exports){\n'use strict';\n\nvar _ConditionResource = require('./resource/ConditionResource.js');\n\nvar _ConditionResource2 = _interopRequireDefault(_ConditionResource);\n\nvar _Condition = require('./services/Condition.js');\n\nvar _Condition2 = _interopRequireDefault(_Condition);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar MODULE_NAME = 'clearcode.tm.condition';\n\n_Condition2.default.$inject = [MODULE_NAME + '.conditionResource', 'clearcode.tm.tagContainer.currentContainer'];\n\n_ConditionResource2.default.$inject = ['$http', '$q'];\n\nangular.module(MODULE_NAME, ['clearcode.tm.tagContainer']).service(MODULE_NAME + '.conditionResource', _ConditionResource2.default).service(MODULE_NAME + '.condition', _Condition2.default);\n\nmodule.exports = { MODULE_NAME: MODULE_NAME };\n\n},{\"./resource/ConditionResource.js\":5,\"./services/Condition.js\":6}],4:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar conditionFactory = function conditionFactory() {\n\n  /**\n   * @name Condition\n   * @description Condition entity\n   */\n\n  var Condition = function Condition() {\n    _classCallCheck(this, Condition);\n\n    /**\n     * @type {number}\n     */\n    this.id = undefined;\n\n    /**\n     * @type {string}\n     */\n    this.variable = undefined;\n\n    /**\n     * @type {string}\n     */\n    this.condition = undefined;\n\n    /**\n     * @type {string}\n     */\n    this.value = undefined;\n  };\n\n  return Condition;\n};\n\nexports.default = conditionFactory;\n\n},{}],5:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * This program is free software: you can redistribute it and/or modify it under\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * the terms of the GNU Affero General Public License as published by the Free\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Software Foundation, either version 3 of the License, or (at your option) any\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * later version.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * This program is distrubuted in the hope that it will be useful,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * but WITHOUT ANY WARRANTY; without even the implied warranty of\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * GNU Affero General Public License for more details.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * You should have received a copy of the GNU Affero General Public License\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * along with this program. If not, see <http://www.gnu.org/licenses/>.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\n\nvar _Condition = require('../entity/Condition.js');\n\nvar _Condition2 = _interopRequireDefault(_Condition);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * @name ConditionResource\n */\n\nvar ConditionResource = function () {\n\n    /**\n     * @param  {$http} $http\n     * @param  {$q} $q\n     */\n\n    function ConditionResource($http, $q) {\n        _classCallCheck(this, ConditionResource);\n\n        this.http = $http;\n        this.q = $q;\n    }\n\n    /**\n     * @returns {Condition}\n     */\n\n\n    _createClass(ConditionResource, [{\n        key: 'getEntityObject',\n        value: function getEntityObject() {\n\n            var Condition = (0, _Condition2.default)();\n\n            return new Condition();\n        }\n\n        /**\n         * @description Send request to get conditions with their specific variables\n         *\n         * @param {number} id\n         *\n         * @returns {deferred.promise}\n         */\n\n    }, {\n        key: 'query',\n        value: function query(id) {\n\n            var deferred = this.q.defer();\n\n            this.http({\n                method: 'GET',\n                url: '/api/containers/' + id + '/conditions'\n            }).success(function (resp) {\n\n                deferred.resolve(resp);\n            }).error(function (err) {\n\n                deferred.reject(err);\n            });\n\n            return deferred.promise;\n        }\n    }]);\n\n    return ConditionResource;\n}();\n\nexports.default = ConditionResource;\n\n},{\"../entity/Condition.js\":4}],6:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * Finding type by type id\n * @param  {Array} array\n * @param  {Number} type\n * @return {Object}\n */\nvar findTypeByType = function findTypeByType(array, type) {\n\n    var tempType = type;\n\n    return array.filter(function (element) {\n        return element.type === tempType;\n    });\n};\n\nvar currentContainer = undefined;\nvar conditionResource = undefined;\n\nvar Condition = function () {\n\n    /**\n     * @param  {ConditionResource} $conditionResource\n     * @param {CurrentContainer} $currentContainer\n     */\n\n    function Condition($conditionResource, $currentContainer) {\n        _classCallCheck(this, Condition);\n\n        currentContainer = $currentContainer;\n        conditionResource = $conditionResource;\n\n        if (currentContainer.getId() !== undefined) {\n            this.conditionResourcePromise = conditionResource.query(currentContainer.getId());\n        }\n    }\n\n    /**\n     * Return array of all types indexed by their type\n     * @return {Array}\n     */\n\n\n    _createClass(Condition, [{\n        key: 'getArrayOfTypes',\n        value: function getArrayOfTypes() {\n\n            return this.conditionResourcePromise.then(function (resp) {\n\n                var typesTemp = [],\n                    typesIndex = resp.length;\n\n                while (typesIndex--) {\n\n                    typesTemp[resp[typesIndex].type] = resp[typesIndex].name;\n                }\n\n                return typesTemp;\n            });\n        }\n\n        /**\n         * All variables from specific condition\n         * @return {Array}\n         */\n\n    }, {\n        key: 'allVariables',\n        value: function allVariables() {\n\n            return this.conditionResourcePromise.then(function (resp) {\n                var variables = [];\n                for (var index = 0; index < resp.length; index++) {\n                    variables = variables.length ? mergeVariables(variables, resp[index].variables) : resp[index].variables;\n                }\n\n                return variables;\n            });\n        }\n\n        /**\n         * Get variables from specific condition\n         * @param  {Number} type\n         * @return {Array}\n         */\n\n    }, {\n        key: 'getVariables',\n        value: function getVariables(type) {\n\n            var self = this;\n\n            this.type = type;\n\n            return this.conditionResourcePromise.then(function (resp) {\n\n                var responsedTypes = findTypeByType(resp, self.type);\n\n                if (responsedTypes.length === 1) {\n\n                    return responsedTypes[0].variables;\n                } else {\n\n                    return false;\n                }\n            });\n        }\n\n        /**\n         * Get required variables from specific condition\n         * @param  {Number} type\n         * @return {Array}\n         */\n\n    }, {\n        key: 'getRequired',\n        value: function getRequired(type) {\n\n            var self = this;\n\n            this.type = type;\n\n            return this.conditionResourcePromise.then(function (resp) {\n\n                var responsedTypes = findTypeByType(resp, self.type);\n\n                if (responsedTypes.length === 1) {\n\n                    return responsedTypes[0].variables.filter(function (variable) {\n\n                        return variable.name === 'Event' && responsedTypes[0].name === 'Event';\n                    });\n                } else {\n\n                    return false;\n                }\n            });\n        }\n\n        /**\n         * Get actions from specific condition\n         * @param  {Number} type\n         * @return {Array}\n         */\n\n    }, {\n        key: 'getActions',\n        value: function getActions(type) {\n\n            var self = this;\n\n            this.type = type;\n\n            return this.conditionResourcePromise.then(function (resp) {\n\n                var responsedTypes = findTypeByType(resp, self.type);\n\n                if (responsedTypes.length === 1) {\n\n                    return responsedTypes[0].actions;\n                } else {\n\n                    return false;\n                }\n            });\n        }\n    }, {\n        key: 'refresh',\n        value: function refresh() {\n\n            this.conditionResourcePromise = conditionResource.query(currentContainer.getId());\n        }\n    }]);\n\n    return Condition;\n}();\n\nfunction mergeVariables(arrayFirst, arraySecond) {\n    var final = [];\n    for (var indexFirst in arrayFirst) {\n        var shared = false;\n        for (var indexSecond in arraySecond) {\n            if (isVariablesNameEqual(arraySecond[indexSecond], arrayFirst[indexFirst])) {\n                shared = true;\n                break;\n            }\n        }\n        if (!shared) {\n            final.push(arrayFirst[indexFirst]);\n        }\n    }\n\n    return final.concat(arraySecond);\n}\n\nfunction isVariablesNameEqual(variableFirst, variableSecond) {\n    return variableFirst.name === variableSecond.name;\n}\n\nexports.default = Condition;\n\n},{}],7:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @type {$state}\n */\nvar state;\n\n/**\n * @type {$stateParams}\n */\nvar stateParams;\n\n/**\n * @type {Alert}\n */\nvar alert;\n\n/**\n * @type {CurrentContainer}\n */\nvar currentContainer;\n\n/**\n * @type {$scope}\n */\nvar scope;\n\n/**\n * @type {String}\n */\nvar BREADCRUMB_TEXT = 'Debug';\n\n/**\n * @name DebugOptionsController\n */\n\nvar DebugOptionsController =\n\n/**\n * @param {ContainerResource} containerResource\n * @param {$state} $state\n * @param {$stateParams} $stateParams\n * @param {currentContainer} CurrentContainer\n * @param {PageInfo} PageInfo\n * @param {$scope} $scope\n * @param {$translate} $translate\n */\nfunction DebugOptionsController(containerResource, $state, $stateParams, CurrentContainer, PageInfo, $scope, $translate) {\n    var _this = this;\n\n    _classCallCheck(this, DebugOptionsController);\n\n    var self = this;\n\n    state = $state;\n    stateParams = $stateParams;\n    currentContainer = CurrentContainer;\n    scope = $scope;\n\n    this.container = containerResource.getEntityObject();\n\n    this.containerPromise = containerResource.get(stateParams.containerId);\n\n    this.containerPromise.then(function (resp) {\n\n        self.container = resp;\n    });\n\n    this.translate = $translate;\n\n    currentContainer.getContainer().then(function () {\n\n        if (currentContainer.$container.hasPermission('noaccess')) {\n\n            state.go('container');\n        }\n\n        _this.translate([BREADCRUMB_TEXT]).then(function (translations) {\n\n            PageInfo.clear().add(currentContainer.$container.name, 'tags', {\n                containerId: currentContainer.$container.id\n            }).add(translations[BREADCRUMB_TEXT]).broadcast();\n        });\n    });\n\n    scope.$on('pageInfo.reload', function (event, args) {\n\n        _this.translate([BREADCRUMB_TEXT]).then(function (translations) {\n\n            PageInfo.clear().add(args.name, 'tags', {\n                containerId: args.id\n            }).add(translations[BREADCRUMB_TEXT]).broadcast();\n        });\n    });\n};\n\nexports.default = DebugOptionsController;\n\n},{}],8:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @type {$state}\n */\nvar state;\n\n/**\n * @type {$stateParams}\n */\nvar stateParams;\n\n/**\n * @type {Alert}\n */\nvar alert;\n\n/**\n * @type {CurrentContainer}\n */\nvar currentContainer;\n\n/**\n * @type {WebsiteResource}\n */\nvar websitesResource;\n\n/**\n * @name WebsitesController\n */\n\nvar WebsitesController = function () {\n\n    /**\n     * @param {WebsiteResource} $websitesResource\n     * @param {$state} $state\n     * @param {$stateParams} $stateParams\n     * @param {Alert} $alert\n     * @param {CurrentContainer} $currentContainer\n     * @param $translate\n     * @param $scope\n     */\n\n    function WebsitesController($websitesResource, $state, $stateParams, $alert, $currentContainer, $translate, $scope) {\n        var _this = this;\n\n        _classCallCheck(this, WebsitesController);\n\n        state = $state;\n        stateParams = $stateParams;\n        alert = $alert;\n        currentContainer = $currentContainer;\n        websitesResource = $websitesResource;\n\n        this.websites = [];\n        this.websitesPromise = websitesResource.query(stateParams.containerId);\n\n        this.websitesPromise.then(function (resp) {\n\n            _this.websites = resp.data;\n        });\n\n        $translate(['by hash', 'by query']).then(function (translations) {\n\n            _this.parameterTypes = [{\n                value: 0,\n                name: translations['by query']\n            }, {\n                value: 1,\n                name: translations['by hash']\n            }];\n        });\n\n        $scope.getWebsiteUrlWithParameter = function (website) {\n\n            return website.getUrlWithParameter();\n        };\n    }\n\n    /**\n     * Method to create new container website\n     */\n\n\n    _createClass(WebsitesController, [{\n        key: 'addContainerWebsite',\n        value: function addContainerWebsite() {\n\n            if (!currentContainer.$container.hasPermission('edit')) {\n                return;\n            }\n\n            if (!this.websites) {\n\n                this.websites = [];\n            }\n\n            this.websites.push(websitesResource.getEntityObject());\n        }\n\n        /**\n         * Method to remove container websites\n         *\n         * @param {Number} index\n         */\n\n    }, {\n        key: 'removeContainerWebsite',\n        value: function removeContainerWebsite(index) {\n\n            this.websites.splice(index, 1);\n        }\n\n        /**\n         * Handle form submit action\n         */\n\n    }, {\n        key: 'submitForm',\n        value: function submitForm() {\n            var _this2 = this;\n\n            var websites = [];\n\n            for (var i = 0; this.websites && i < this.websites.length; i++) {\n\n                var website = websitesResource.getEntityObject();\n\n                website.url = this.websites[i].url;\n                website.parameterType = this.websites[i].parameterType;\n\n                websites.push(website);\n            }\n\n            this.websitePromise = websitesResource.put(stateParams.containerId, websites);\n\n            this.websitePromise.then(function () {\n\n                currentContainer.get(stateParams.containerId); // triggers refresh of data in f.e. 'Preview and debug'\n                alert.success('success.edit');\n\n                state.go('debug', { containerId: stateParams.containerId });\n            }, function () {\n\n                alert.error('error.invalid');\n\n                _this2.validateContainer = true;\n            });\n        }\n    }]);\n\n    return WebsitesController;\n}();\n\nexports.default = WebsitesController;\n\n},{}],9:[function(require,module,exports){\n'use strict';\n\nvar _DebugOptionsController = require('./controllers/DebugOptionsController.js');\n\nvar _DebugOptionsController2 = _interopRequireDefault(_DebugOptionsController);\n\nvar _WebsitesController = require('./controllers/WebsitesController.js');\n\nvar _WebsitesController2 = _interopRequireDefault(_WebsitesController);\n\nvar _WebsiteResource = require('./resource/WebsiteResource.js');\n\nvar _WebsiteResource2 = _interopRequireDefault(_WebsiteResource);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar MODULE_NAME = 'clearcode.tm.debug'; /**\n                                         * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n                                         *\n                                         * This program is free software: you can redistribute it and/or modify it under\n                                         * the terms of the GNU Affero General Public License as published by the Free\n                                         * Software Foundation, either version 3 of the License, or (at your option) any\n                                         * later version.\n                                         *\n                                         * This program is distrubuted in the hope that it will be useful,\n                                         * but WITHOUT ANY WARRANTY; without even the implied warranty of\n                                         * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n                                         * GNU Affero General Public License for more details.\n                                         *\n                                         * You should have received a copy of the GNU Affero General Public License\n                                         * along with this program. If not, see <http://www.gnu.org/licenses/>.\n                                         */\n\nvar MODULE_CONTAINER = 'clearcode.tm.tagContainer';\nvar MODULE_DIR = 'app/modules/debug';\n\n_WebsiteResource2.default.$inject = ['$http', '$q'];\n\n_WebsitesController2.default.$inject = [MODULE_NAME + '.websiteResource', '$state', '$stateParams', 'clearcode.tm.alert.alert', MODULE_CONTAINER + '.currentContainer', '$translate', '$scope'];\n\n_DebugOptionsController2.default.$inject = [MODULE_CONTAINER + '.containerResource', '$state', '$stateParams', MODULE_CONTAINER + '.currentContainer', 'clearcode.tm.pageInfo.pageInfo', '$scope', '$translate'];\n\nangular.module(MODULE_NAME, ['pascalprecht.translate', 'ui.router', 'ngTable', 'ngCookies', 'clearcode.tm.condition', 'clearcode.tm.alert', 'clearcode.tm.pageInfo', 'clearcode.tm.user']).run(['$rootScope', MODULE_CONTAINER + '.currentContainer', '$stateParams', 'clearcode.tm.alert.$alert', function ($rootScope, currentContainer, $stateParams, $alertProvider) {\n\n    $rootScope.currentContainerLoading = true;\n    $rootScope.currentContainer = currentContainer;\n\n    var loadContainer = function loadContainer(containerId) {\n\n        if (containerId !== $stateParams.containerId) {\n\n            var currentContainerPromise = currentContainer.get(containerId);\n\n            currentContainerPromise.then(function (container) {\n\n                $rootScope.$broadcast('pageInfo.reload', container);\n            });\n        }\n    };\n\n    $rootScope.$on('$stateChangeStart', function (event, toState, toParams) {\n\n        loadContainer(toParams.containerId);\n    });\n}]).config(['$stateProvider', function ($stateProvider) {\n\n    $stateProvider.state('debug', {\n        url: '/containers/{containerId}/debug',\n        controller: MODULE_NAME + '.DebugOptionsController as view',\n        templateUrl: MODULE_DIR + '/views/options.html',\n        data: {\n            roles: ['ROLE_SUPER_ADMIN'],\n            hasContainerList: true,\n            permission: ['view']\n        }\n    });\n}]).controller(MODULE_NAME + '.DebugOptionsController', _DebugOptionsController2.default).controller(MODULE_NAME + '.WebsitesController', _WebsitesController2.default).service(MODULE_NAME + '.websiteResource', _WebsiteResource2.default);\n\nmodule.exports = { MODULE_NAME: MODULE_NAME };\n\n},{\"./controllers/DebugOptionsController.js\":7,\"./controllers/WebsitesController.js\":8,\"./resource/WebsiteResource.js\":11}],10:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar websiteFactory = function websiteFactory(resource) {\n\n    var DEBUG_PARAM_NAME = '_stg_debug';\n    var URL_MIN_LENGTH = 10;\n\n    /**\n     * @name Website\n     * @description Website entity\n     */\n\n    var Website = function () {\n        function Website() {\n            _classCallCheck(this, Website);\n\n            /**\n             * @type {string}\n             */\n            this.url = '';\n\n            /**\n             * @type {Integer}\n             */\n            this.parameterType = 0;\n        }\n\n        /**\n         * @returns {string}\n         */\n\n\n        _createClass(Website, [{\n            key: 'getUrlWithParameter',\n            value: function getUrlWithParameter() {\n\n                if (this.hasUrl() === false) {\n\n                    return '';\n                }\n\n                return this.url + this.getSeparator() + DEBUG_PARAM_NAME;\n            }\n\n            /**\n             * @returns {string}\n             */\n\n        }, {\n            key: 'getSeparator',\n            value: function getSeparator() {\n\n                var separator = this.parameterType === 1 ? '#' : '?';\n\n                if (this.hasUrl() === false) {\n\n                    return separator;\n                }\n\n                return this.url.indexOf(separator) === -1 ? separator : '&';\n            }\n        }, {\n            key: 'hasUrl',\n            value: function hasUrl() {\n\n                return this.url !== undefined && this.url.length > URL_MIN_LENGTH;\n            }\n        }]);\n\n        return Website;\n    }();\n\n    return Website;\n};\n\nexports.default = websiteFactory;\n\n},{}],11:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * This program is free software: you can redistribute it and/or modify it under\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * the terms of the GNU Affero General Public License as published by the Free\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Software Foundation, either version 3 of the License, or (at your option) any\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * later version.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * This program is distrubuted in the hope that it will be useful,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * but WITHOUT ANY WARRANTY; without even the implied warranty of\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * GNU Affero General Public License for more details.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * You should have received a copy of the GNU Affero General Public License\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * along with this program. If not, see <http://www.gnu.org/licenses/>.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\n\nvar _Website = require('../entity/Website.js');\n\nvar _Website2 = _interopRequireDefault(_Website);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar transformResponse = function transformResponse(resp) {\n    var _this = this;\n\n    if (angular.isArray(resp)) {\n        return resp.map(function (websiteData) {\n            return transformResponse.call(_this, websiteData);\n        });\n    }\n\n    var website = this.getEntityObject();\n\n    if (resp !== undefined) {\n\n        website.url = resp.url;\n        website.parameterType = resp.parameter_type;\n    }\n\n    return website;\n};\n\nvar appendTransform = function appendTransform(defaults, transform) {\n\n    // We can't guarantee that the default transformation is an array\n    defaults = angular.isArray(defaults) ? defaults : [defaults];\n\n    // Append the new transformation to the defaults\n    return defaults.concat(transform);\n};\n\n/**\n * @name WebsiteResource\n *\n */\n\nvar WebsiteResource = function () {\n    /**\n     * @param {$http} $http\n     * @param {$q} $q\n     */\n\n    function WebsiteResource($http, $q) {\n        _classCallCheck(this, WebsiteResource);\n\n        this.http = $http;\n        this.q = $q;\n    }\n\n    /**\n     * @returns {Website}\n     */\n\n\n    _createClass(WebsiteResource, [{\n        key: 'getEntityObject',\n        value: function getEntityObject() {\n\n            var Website = (0, _Website2.default)(this);\n\n            return new Website();\n        }\n\n        /**\n         * @description Send request to get list of entity\n         *\n         * @param {number} containerId\n         * @param {Object} params\n         *\n         * @returns {deferred.promise}\n         */\n\n    }, {\n        key: 'query',\n        value: function query(containerId, params) {\n            var _this2 = this;\n\n            var deferred = this.q.defer();\n\n            this.http({\n                method: 'GET',\n                url: '/api/containers/' + containerId + '/websites',\n                params: params,\n                transformResponse: appendTransform(this.http.defaults.transformResponse, function (resp, header, status) {\n\n                    if (isResponseSuccess(resp, status)) {\n                        for (var i = 0; i < resp.data.length; i++) {\n                            if (resp.data[i] instanceof Object) {\n                                resp.data[i] = transformResponse.call(_this2, resp.data[i]);\n                            }\n                        }\n                    }\n\n                    return resp;\n                })\n            }).success(function (resp) {\n                deferred.resolve(resp);\n            }).error(function (err) {\n                deferred.reject(err);\n            });\n\n            return deferred.promise;\n        }\n    }, {\n        key: 'put',\n        value: function put(containerId, websites) {\n            var _this3 = this;\n\n            var deferred = this.q.defer();\n\n            this.http({\n                method: 'PUT',\n                data: {\n                    websites: websites\n                },\n                url: 'api/containers/' + containerId + '/websites',\n                transformResponse: appendTransform(this.http.defaults.transformResponse, function (resp, header, status) {\n\n                    if (isResponseSuccess(resp, status)) {\n                        return transformResponse.call(_this3, resp.data);\n                    }\n\n                    return resp;\n                })\n            }).success(function (resp) {\n                deferred.resolve(resp);\n            }).error(function (err) {\n                deferred.reject(err);\n            });\n\n            return deferred.promise;\n        }\n    }]);\n\n    return WebsiteResource;\n}();\n\nfunction isResponseSuccess(resp, status) {\n    return status < 400 && resp.data !== undefined;\n}\n\nexports.default = WebsiteResource;\n\n},{\"../entity/Website.js\":10}],12:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @name BaseController\n */\n\nvar BaseController = function () {\n\n    /**\n     * @param {IntegrationResource} $Integration\n     * @param {PageInfo} $PageInfo\n     * @param {$stateParams} $stateParams\n     * @param {Alert} $alert\n     * @param {$state} $state\n     * @param {$translate} $translate\n     */\n\n    function BaseController($Integration, $PageInfo, $stateParams, $alert, $state, $translate) {\n        var _this = this;\n\n        _classCallCheck(this, BaseController);\n\n        this.integration = $Integration.getEntityObject();\n\n        var BREADCRUMB_TEXT = 'Integrations';\n\n        $translate([BREADCRUMB_TEXT, this.getBreadcrumbText()]).then(function (translations) {\n\n            $PageInfo.clear().add(translations[BREADCRUMB_TEXT], 'integration').add(translations[_this.getBreadcrumbText()]).broadcast();\n        });\n\n        this.stateParams = $stateParams;\n        this.alert = $alert;\n        this.state = $state;\n\n        this.formTouched = false;\n    }\n\n    /**\n     * Handle form submit action\n     *\n     * @param {Integration} Integration\n     */\n\n\n    _createClass(BaseController, [{\n        key: 'submitForm',\n        value: function submitForm(Integration) {\n            var _this2 = this;\n\n            this.integrationPromise = Integration.save(this.stateParams.id);\n\n            this.integrationPromise.then(function (resp) {\n\n                _this2.alert.success(_this2.getAlertType());\n\n                if (_this2.state.includes('integrationCreate')) {\n\n                    _this2.state.go('integrationEdit', {\n                        'integrationId': resp.id\n                    });\n                } else {\n                    _this2.state.go('integration');\n                }\n            }, function () {\n\n                _this2.alert.error('error.invalid');\n            });\n        }\n\n        /**\n         * Display error if form is invalid\n         */\n\n    }, {\n        key: 'displayInvalidFormMessage',\n        value: function displayInvalidFormMessage() {\n            this.validateIntegration = true;\n            this.alert.error('error.invalid');\n        }\n    }]);\n\n    return BaseController;\n}();\n\nexports.default = BaseController;\n\n},{}],13:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _BaseController2 = require('./BaseController.js');\n\nvar _BaseController3 = _interopRequireDefault(_BaseController2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This program is free software: you can redistribute it and/or modify it under\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * the terms of the GNU Affero General Public License as published by the Free\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Software Foundation, either version 3 of the License, or (at your option) any\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * later version.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This program is distrubuted in the hope that it will be useful,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * but WITHOUT ANY WARRANTY; without even the implied warranty of\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * GNU Affero General Public License for more details.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * You should have received a copy of the GNU Affero General Public License\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * along with this program. If not, see <http://www.gnu.org/licenses/>.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n/**\n * @name CreateController\n */\n\nvar CreateController = function (_BaseController) {\n  _inherits(CreateController, _BaseController);\n\n  /**\n   * @param {IntegrationResource} $IntegrationResource\n   * @param {PageInfo} $PageInfo\n   * @param {$stateParams} $stateParams\n   * @param {Alert} $alert\n   * @param {$state} $state\n   * @param {$translate} $translate\n   */\n\n  function CreateController($IntegrationResource, $PageInfo, $stateParams, $alert, $state, $translate) {\n    _classCallCheck(this, CreateController);\n\n    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(CreateController).call(this, $IntegrationResource, $PageInfo, $stateParams, $alert, $state, $translate));\n\n    _this.integration = $IntegrationResource.getEntityObject();\n    return _this;\n  }\n\n  /**\n   * Get breadcrumb text\n   */\n\n\n  _createClass(CreateController, [{\n    key: 'getBreadcrumbText',\n    value: function getBreadcrumbText() {\n\n      return 'Add a new integration';\n    }\n\n    /**\n     * Get alert type\n     */\n\n  }, {\n    key: 'getAlertType',\n    value: function getAlertType() {\n\n      return 'success.create';\n    }\n  }]);\n\n  return CreateController;\n}(_BaseController3.default);\n\nexports.default = CreateController;\n\n},{\"./BaseController.js\":12}],14:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _BaseController2 = require('./BaseController.js');\n\nvar _BaseController3 = _interopRequireDefault(_BaseController2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This program is free software: you can redistribute it and/or modify it under\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * the terms of the GNU Affero General Public License as published by the Free\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Software Foundation, either version 3 of the License, or (at your option) any\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * later version.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This program is distrubuted in the hope that it will be useful,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * but WITHOUT ANY WARRANTY; without even the implied warranty of\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * GNU Affero General Public License for more details.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * You should have received a copy of the GNU Affero General Public License\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * along with this program. If not, see <http://www.gnu.org/licenses/>.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n/**\n * @name EditController\n */\n\nvar EditController = function (_BaseController) {\n    _inherits(EditController, _BaseController);\n\n    /**\n     * @param {IntegrationResource} $IntegrationResource\n     * @param {PageInfo} $PageInfo\n     * @param {$stateParams} $stateParams\n     * @param {Alert} $alert\n     * @param {$state} $state\n     * @param {$translate} $translate\n     */\n\n    function EditController($IntegrationResource, $PageInfo, $stateParams, $alert, $state, $translate) {\n        _classCallCheck(this, EditController);\n\n        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(EditController).call(this, $IntegrationResource, $PageInfo, $stateParams, $alert, $state, $translate));\n\n        _this.integrationPromise = $IntegrationResource.get($stateParams.integrationId);\n\n        _this.integrationPromise.then(function (resp) {\n            _this.integration = resp;\n        });\n\n        _this.formTouched = true;\n        return _this;\n    }\n\n    /**\n     * Get breadcrumb text\n     *\n     */\n\n\n    _createClass(EditController, [{\n        key: 'getBreadcrumbText',\n        value: function getBreadcrumbText() {\n\n            return 'Edit integration';\n        }\n\n        /**\n         * Get alert type\n         *\n         */\n\n    }, {\n        key: 'getAlertType',\n        value: function getAlertType() {\n\n            return 'success.edit';\n        }\n    }]);\n\n    return EditController;\n}(_BaseController3.default);\n\nexports.default = EditController;\n\n},{\"./BaseController.js\":12}],15:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @type {Alert}\n */\nvar $alert;\n\n/**\n * @type {$stateParams}\n */\nvar stateParams;\n\n/**\n * @name ManageController\n */\n\nvar ManageController = function () {\n\n    /**\n     * @param {ngTableParams} TableParams\n     * @param {$stateParams} $stateParams\n     * @param {IntegrationResource} Integration\n     * @param {Alert} alert\n     * @param {ParamConverter} paramConverter\n     * @param {PageInfo} PageInfo\n     * @param {$translate} $translate\n     */\n\n    function ManageController(TableParams, $stateParams, Integration, alert, paramConverter, PageInfo, $translate) {\n        _classCallCheck(this, ManageController);\n\n        $alert = alert;\n        stateParams = $stateParams;\n\n        this.permissions = [];\n\n        this.tableParams = new TableParams({\n            page: 1,\n            count: 10,\n            sorting: {\n                name: 'asc'\n            }\n        }, {\n            total: 0,\n            getData: function getData($defer, params) {\n\n                Integration.query(paramConverter.list(params.url())).then(function (resp) {\n\n                    params.total(resp.total);\n\n                    $defer.resolve(resp.data);\n                });\n            }\n        });\n\n        var BREADCRUMB_TEXT = 'Integrations';\n\n        $translate([BREADCRUMB_TEXT]).then(function (translations) {\n\n            PageInfo.clear().add(translations[BREADCRUMB_TEXT]).broadcast();\n        });\n    }\n\n    _createClass(ManageController, [{\n        key: 'removeIntegration',\n        value: function removeIntegration(Integration) {\n            var _this = this;\n\n            Integration.remove().then(function () {\n\n                $alert.success('success.remove');\n\n                if (_this.tableParams.data.length === 1 && _this.tableParams.page() > 1) {\n\n                    _this.tableParams.page(_this.tableParams.page() - 1);\n                } else {\n\n                    _this.tableParams.reload();\n                }\n            }, function () {\n\n                $alert.error('error.remove');\n\n                _this.tableParams.reload();\n            });\n        }\n    }]);\n\n    return ManageController;\n}();\n\nexports.default = ManageController;\n\n},{}],16:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar integrationFactory = function integrationFactory(resource) {\n\n    /**\n     * @name Integration\n     * @description Integration entity\n     */\n\n    var Integration = function () {\n        function Integration() {\n            _classCallCheck(this, Integration);\n\n            /**\n             * @type {number}\n             */\n            this.id = undefined;\n\n            /**\n             * @type {string}\n             */\n            this.name = undefined;\n\n            /**\n             * @type {string}\n             */\n            this.clientId = undefined;\n\n            /**\n             * @type {string}\n             */\n            this.clientSecret = undefined;\n\n            /**\n             * @type {string}\n             */\n            this.createdAt = undefined;\n            /**\n             * @type {string}\n             */\n            this.updatedAt = undefined;\n            /**\n             * @type {Object}\n             */\n            this.user = undefined;\n        }\n\n        /**\n         * @returns {deferred.promise}\n         */\n\n\n        _createClass(Integration, [{\n            key: 'save',\n            value: function save() {\n\n                var result = {},\n                    promise;\n\n                var excludedProperty = ['id', 'updatedAt', 'createdAt', 'clientId', 'clientSecret', 'user'];\n\n                for (var property in this) {\n\n                    if (!angular.isFunction(this[property]) && this.hasOwnProperty(property) && excludedProperty.indexOf(property) === -1) {\n\n                        if (property === 'type') {\n\n                            result[property] = this[property].id;\n                        } else {\n\n                            result[property] = this[property];\n                        }\n                    }\n                }\n\n                if (this.id === undefined) {\n\n                    if (this.user.email) {\n                        result.user = {};\n                        result.user.email = this.user.email;\n                    }\n\n                    promise = resource.post(result);\n                } else {\n\n                    promise = resource.put(this.id, result);\n                }\n\n                return promise;\n            }\n\n            /**\n             * @returns {deferred.promise|Boolean}\n             */\n\n        }, {\n            key: 'remove',\n            value: function remove() {\n\n                if (this.id === undefined) {\n\n                    return false;\n                }\n\n                return resource.delete(this.id);\n            }\n        }]);\n\n        return Integration;\n    }();\n\n    return Integration;\n};\n\nexports.default = integrationFactory;\n\n},{}],17:[function(require,module,exports){\n'use strict';\n\nvar _ManageController = require('./controllers/ManageController.js');\n\nvar _ManageController2 = _interopRequireDefault(_ManageController);\n\nvar _CreateController = require('./controllers/CreateController.js');\n\nvar _CreateController2 = _interopRequireDefault(_CreateController);\n\nvar _EditController = require('./controllers/EditController.js');\n\nvar _EditController2 = _interopRequireDefault(_EditController);\n\nvar _IntegrationResource = require('./resource/IntegrationResource.js');\n\nvar _IntegrationResource2 = _interopRequireDefault(_IntegrationResource);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar MODULE_NAME = 'clearcode.tm.integration';\nvar MODULE_DIR = 'app/modules/integration';\n\n_ManageController2.default.$inject = ['ngTableParams', '$stateParams', MODULE_NAME + '.IntegrationResource', 'clearcode.tm.alert.alert', 'clearcode.tm.tagContainer.paramConverter', 'clearcode.tm.pageInfo.pageInfo', '$translate'];\n\n_CreateController2.default.$inject = [MODULE_NAME + '.IntegrationResource', 'clearcode.tm.pageInfo.pageInfo', '$stateParams', 'clearcode.tm.alert.alert', '$state', '$translate'];\n\n_EditController2.default.$inject = [MODULE_NAME + '.IntegrationResource', 'clearcode.tm.pageInfo.pageInfo', '$stateParams', 'clearcode.tm.alert.alert', '$state', '$translate'];\n\n_IntegrationResource2.default.$inject = ['$http', '$q'];\n\nangular.module(MODULE_NAME, ['pascalprecht.translate', 'ui.router', 'ngTable', 'clearcode.tm.alert', 'clearcode.tm.pageInfo', 'clearcode.tm.tagContainer']).config(['$stateProvider', function ($stateProvider) {\n\n    $stateProvider.state('integration', {\n        url: '/integration',\n        controller: MODULE_NAME + '.ManageController as view',\n        templateUrl: MODULE_DIR + '/views/manage.html',\n        data: {\n            roles: ['ROLE_SUPER_ADMIN'],\n            hasContainerList: false\n        }\n    }).state('integrationCreate', {\n        url: '/integration/create',\n        controller: MODULE_NAME + '.CreateController as view',\n        templateUrl: MODULE_DIR + '/views/create.html',\n        data: {\n            roles: ['ROLE_SUPER_ADMIN'],\n            hasContainerList: false\n        }\n    }).state('integrationEdit', {\n        url: '/integration/{integrationId}/edit',\n        controller: MODULE_NAME + '.EditController as view',\n        templateUrl: MODULE_DIR + '/views/edit.html',\n        data: {\n            roles: ['ROLE_SUPER_ADMIN'],\n            hasContainerList: false\n        }\n    });\n}]).run(['clearcode.tm.alert.$alert', function ($alertProvider) {\n\n    $alertProvider.addMessagePattern('integration.close', 'You are trying to close unsaved OAuth client.');\n}]).controller(MODULE_NAME + '.ManageController', _ManageController2.default).controller(MODULE_NAME + '.CreateController', _CreateController2.default).controller(MODULE_NAME + '.EditController', _EditController2.default).service(MODULE_NAME + '.IntegrationResource', _IntegrationResource2.default);\n\nmodule.exports = { MODULE_NAME: MODULE_NAME };\n\n},{\"./controllers/CreateController.js\":13,\"./controllers/EditController.js\":14,\"./controllers/ManageController.js\":15,\"./resource/IntegrationResource.js\":18}],18:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * This program is free software: you can redistribute it and/or modify it under\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * the terms of the GNU Affero General Public License as published by the Free\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Software Foundation, either version 3 of the License, or (at your option) any\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * later version.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * This program is distrubuted in the hope that it will be useful,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * but WITHOUT ANY WARRANTY; without even the implied warranty of\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * GNU Affero General Public License for more details.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * You should have received a copy of the GNU Affero General Public License\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * along with this program. If not, see <http://www.gnu.org/licenses/>.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\n\nvar _Integration = require('../entity/Integration.js');\n\nvar _Integration2 = _interopRequireDefault(_Integration);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar transformResponse = function transformResponse(resp) {\n\n    var Integration = (0, _Integration2.default)(this);\n    var integration = new Integration();\n\n    integration.id = resp.id;\n    integration.name = resp.name;\n    integration.clientId = resp.client_id;\n    integration.clientSecret = resp.client_secret;\n    integration.createdAt = resp.created_at;\n    integration.updatedAt = resp.updated_at;\n\n    integration.user = {\n        id: undefined,\n        status: undefined,\n        roles: [],\n        email: undefined\n    };\n\n    if (resp.user) {\n        integration.user.id = resp.user.id;\n        integration.user.status = resp.user.status;\n        integration.user.roles = resp.user.roles;\n\n        if (resp.user.email) {\n            integration.user.email = resp.user.email;\n        }\n    }\n\n    return integration;\n};\n\nvar appendTransform = function appendTransform(defaults, transform) {\n\n    // We can't guarantee that the default transformation is an array\n    defaults = angular.isArray(defaults) ? defaults : [defaults];\n\n    // Append the new transformation to the defaults\n    return defaults.concat(transform);\n};\n\n/**\n * @name IntegrationResource\n */\n\nvar IntegrationResource = function () {\n    /**\n     * @param {$http} $http\n     * @param {$q} $q\n     */\n\n    function IntegrationResource($http, $q) {\n        _classCallCheck(this, IntegrationResource);\n\n        this.http = $http;\n        this.q = $q;\n    }\n\n    /**\n     * @returns {Integration}\n     */\n\n\n    _createClass(IntegrationResource, [{\n        key: 'getEntityObject',\n        value: function getEntityObject() {\n\n            var Integration = (0, _Integration2.default)(this);\n\n            return new Integration();\n        }\n\n        /**\n         * @description Send request to get specific entity\n         *\n         * @param {number} id\n         *\n         * @returns {deferred.promise}\n         */\n\n    }, {\n        key: 'get',\n        value: function get(id) {\n            var _this = this;\n\n            var deferred = this.q.defer();\n\n            this.http({\n                method: 'GET',\n                url: '/api/integration/' + id,\n                transformResponse: appendTransform(this.http.defaults.transformResponse, function (resp, header, status) {\n\n                    if (status < 400) {\n\n                        return transformResponse.call(_this, resp.data);\n                    } else {\n\n                        return resp;\n                    }\n                })\n            }).success(function (resp) {\n\n                deferred.resolve(resp);\n            }).error(function (err) {\n\n                deferred.reject(err);\n            });\n\n            return deferred.promise;\n        }\n\n        /**\n         * @description Send request to get list of entity\n         *\n         * @param {Object} params\n         *\n         * @returns {deferred.promise}\n         */\n\n    }, {\n        key: 'query',\n        value: function query(params) {\n            var _this2 = this;\n\n            var deferred = this.q.defer();\n\n            this.http({\n                method: 'GET',\n                url: '/api/integration',\n                params: params,\n                transformResponse: appendTransform(this.http.defaults.transformResponse, function (resp) {\n\n                    for (var element in resp.data) {\n\n                        if (resp.data[element] instanceof Object) {\n\n                            resp.data[element] = transformResponse.call(_this2, resp.data[element]);\n                        }\n                    }\n\n                    return resp;\n                })\n            }).success(function (resp) {\n\n                deferred.resolve(resp);\n            }).error(function (err) {\n\n                deferred.reject(err);\n            });\n\n            return deferred.promise;\n        }\n\n        /**\n         * @description Send request to delete entity\n         *\n         * @param {number} id\n         *\n         * @returns {deferred.promise}\n         */\n\n    }, {\n        key: 'delete',\n        value: function _delete(id) {\n\n            var deferred = this.q.defer();\n\n            this.http({\n                method: 'DELETE',\n                url: '/api/integration/' + id\n            }).success(function (data) {\n\n                deferred.resolve(data);\n            }).error(function (err) {\n\n                deferred.reject(err);\n            });\n\n            return deferred.promise;\n        }\n\n        /**\n         * @description Send request to create entity\n         *\n         * @param {object} entity\n         *\n         * @returns {deferred.promise}\n         */\n\n    }, {\n        key: 'post',\n        value: function post(entity) {\n            var _this3 = this;\n\n            var deferred = this.q.defer();\n\n            this.http({\n                method: 'POST',\n                url: '/api/integration',\n                data: entity,\n                transformResponse: appendTransform(this.http.defaults.transformResponse, function (resp, header, status) {\n\n                    if (status < 400) {\n\n                        return transformResponse.call(_this3, resp.data);\n                    } else {\n\n                        return resp;\n                    }\n                })\n            }).success(function (resp) {\n\n                deferred.resolve(resp);\n            }).error(function (err) {\n\n                deferred.reject(err);\n            });\n\n            return deferred.promise;\n        }\n\n        /**\n         * Send request to update entity\n         *\n         * @param {number} id\n         * @param {object} entity\n         *\n         * @returns {deferred.promise}\n         */\n\n    }, {\n        key: 'put',\n        value: function put(id, entity) {\n            var _this4 = this;\n\n            var deferred = this.q.defer();\n\n            this.http({\n                method: 'PUT',\n                url: '/api/integration/' + id,\n                data: entity,\n                transformResponse: appendTransform(this.http.defaults.transformResponse, function (resp, header, status) {\n\n                    if (status < 400) {\n\n                        return transformResponse.call(_this4, resp.data);\n                    } else {\n\n                        return resp;\n                    }\n                })\n            }).success(function (resp) {\n\n                deferred.resolve(resp);\n            }).error(function (err) {\n\n                deferred.reject(err);\n            });\n\n            return deferred.promise;\n        }\n    }]);\n\n    return IntegrationResource;\n}();\n\nexports.default = IntegrationResource;\n\n},{\"../entity/Integration.js\":16}],19:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @type {OAuthResource}\n */\nvar $oauthResource;\n\n/**\n * @type {TokenStorage}\n */\nvar $tokenStorage;\n\n/**\n * @type {$state}\n */\nvar state;\n\n/**\n * @type {AlertForm}\n */\nvar $alertForm;\n\n/**\n * @type {String}\n */\nvar BREADCRUMB_TEXT = '7tag Welcome';\n\n/**\n * @name security#LoginController\n * @description Controller for login view\n *\n * @author Arek Zajc <a.zajac@clearcode.cc>\n */\n\nvar LoginController = function () {\n\n  /**\n   * @param {OAuthResource} oauthResource\n   * @param {TokenStorage} tokenStorage\n   * @param {$state} $state\n   * @param {AlertForm} alertForm\n   * @param {PageInfo} PageInfo\n   *\n   */\n\n  function LoginController(oauthResource, tokenStorage, $state, alertForm, PageInfo) {\n    _classCallCheck(this, LoginController);\n\n    this.auth = {\n      identity: '',\n      password: ''\n    };\n\n    this.loginPromise = undefined;\n\n    $oauthResource = oauthResource;\n    $tokenStorage = tokenStorage;\n    state = $state;\n    $alertForm = alertForm;\n\n    $alertForm.getStorage().clean();\n\n    PageInfo.clear().add(BREADCRUMB_TEXT).broadcast();\n  }\n\n  /**\n   * @description Submit action for login form\n   *\n   * @param {LoginController.auth} auth\n   */\n\n\n  _createClass(LoginController, [{\n    key: 'submitForm',\n    value: function submitForm(auth) {\n      var _this = this;\n\n      this.loading = true;\n\n      this.loginPromise = $oauthResource.post(auth.identity, auth.password);\n\n      this.loginPromise.then(function (resp) {\n\n        $alertForm.getStorage().clean();\n        $tokenStorage.addItem(resp);\n        state.go('container');\n      }, function () {\n\n        _this.loading = false;\n      });\n    }\n  }, {\n    key: 'displayInvalidLoginMessage',\n    value: function displayInvalidLoginMessage() {\n\n      $alertForm.error('login.invalid');\n    }\n  }]);\n\n  return LoginController;\n}();\n\nexports.default = LoginController;\n\n},{}],20:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar deleteRequestInterceptor = function deleteRequestInterceptor($q, $rootScope, $injector) {\n\n    var METHOD_DELETE = 'DELETE';\n    var POST_DELETE_URL_SUFIX = '/remove';\n\n    return {\n        request: function request(config) {\n\n            if (config.method.toUpperCase() === METHOD_DELETE && $rootScope.deleteHeaderNotSupported === true) {\n                config.method = 'POST';\n                config.url = config.url + POST_DELETE_URL_SUFIX;\n            }\n\n            return config;\n        },\n\n        responseError: function responseError(rejection) {\n\n            var $http = $injector.get('$http');\n\n            if (rejection.config.method.toUpperCase() === METHOD_DELETE) {\n\n                if (rejection.status === 405) {\n\n                    $rootScope.deleteHeaderNotSupported = true;\n\n                    return $http.post(rejection.config.url + POST_DELETE_URL_SUFIX);\n                }\n            }\n\n            return $q.reject(rejection);\n        }\n    };\n};\n\nexports.default = deleteRequestInterceptor;\n\n},{}],21:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar DEFAULT_LANGUAGE = 'en';\n\nvar localeInterceptor = function localeInterceptor($window) {\n\n    return {\n        request: function request(config) {\n\n            var localStorageLang = $window.localStorage['NG_TRANSLATE_LANG_KEY'];\n\n            if (!/^https?:\\/\\//i.test(config.url)) {\n                config.headers.Locale = localStorageLang ? localStorageLang : DEFAULT_LANGUAGE;\n            }\n\n            return config;\n        }\n    };\n};\n\nexports.default = localeInterceptor;\n\n},{}],22:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar securityInterceptor = function securityInterceptor($q, tokenStorage, $injector) {\n\n    return {\n        request: function request(config) {\n\n            if (undefined !== tokenStorage.getItem() && /(.js|.html|.css|version.json)$/.test(config.url) === false) {\n\n                if (tokenStorage.getItem() !== undefined) {\n\n                    config.headers.Authorization = tokenStorage.getToken();\n                }\n            }\n\n            return config;\n        },\n\n        responseError: function responseError(rejection) {\n\n            // TODO: change this to state ( problem with dependency injection )\n            var $state = $injector.get('$state');\n\n            if (rejection.status === 400) {\n\n                if (rejection.data && (rejection.data.error === 'invalid_request' || rejection.data.error === 'invalid_grant')) {\n\n                    tokenStorage.removeItem();\n                    $state.go('signIn');\n                }\n            }\n\n            if (rejection.status === 403) {\n\n                $state.go('accessDenied');\n            }\n\n            return $q.reject(rejection);\n        }\n    };\n};\n\nexports.default = securityInterceptor;\n\n},{}],23:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * This program is free software: you can redistribute it and/or modify it under\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * the terms of the GNU Affero General Public License as published by the Free\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Software Foundation, either version 3 of the License, or (at your option) any\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * later version.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * This program is distrubuted in the hope that it will be useful,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * but WITHOUT ANY WARRANTY; without even the implied warranty of\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * GNU Affero General Public License for more details.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * You should have received a copy of the GNU Affero General Public License\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * along with this program. If not, see <http://www.gnu.org/licenses/>.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\n\nvar _AuthToken = require('../token/AuthToken.js');\n\nvar _AuthToken2 = _interopRequireDefault(_AuthToken);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar RESOURCE_ROUTE = '/api/oauth/v2/token';\nvar LOGOUT_ROUTE = '/api/users/me/logout';\nvar GRANT_TYPE = 'password';\n\nvar transformResponse = function transformResponse(resp, header, status) {\n\n    if (status < 400) {\n\n        var authToken = this.getEntity();\n\n        authToken.accessToken = resp.access_token;\n        authToken.expiresIn = resp.expires_in;\n        authToken.tokenType = resp.token_type;\n        authToken.scope = resp.scope;\n        authToken.refreshToken = resp.refresh_token;\n\n        return authToken;\n    } else {\n\n        return resp;\n    }\n};\n\nvar appendTransform = function appendTransform(defaults, transform) {\n\n    // We can't guarantee that the default transformation is an array\n    defaults = angular.isArray(defaults) ? defaults : [defaults];\n\n    // Append the new transformation to the defaults\n    return defaults.concat(transform);\n};\n\n/**\n * @name OAuthResource\n *\n * @author Arek Zajc <a.zajac@clearcode.cc>\n */\n\nvar OAuthResource = function () {\n\n    /**\n     * @param {$http} $http\n     * @param {$q} $q\n     * @param {TokenStorage} tokenStorage\n     * @param OAuthClientSettings\n     */\n\n    function OAuthResource($http, $q, tokenStorage, OAuthClientSettings) {\n        _classCallCheck(this, OAuthResource);\n\n        this.http = $http;\n        this.q = $q;\n        this.tokenStorage = tokenStorage;\n        this.OAuthClientSettings = OAuthClientSettings;\n    }\n\n    /**\n     * @returns {AuthToken}\n     */\n\n\n    _createClass(OAuthResource, [{\n        key: 'getEntity',\n        value: function getEntity() {\n            var _this = this;\n\n            _AuthToken2.default.prototype.save = function () {\n\n                var deferred = _this.q.defer();\n\n                _this.tokenStorage.add(_this);\n                deferred.resolve(_this);\n\n                return deferred.promise;\n            };\n\n            _AuthToken2.default.prototype.remove = function () {\n\n                var deferred = _this.q.defer();\n\n                _this.tokenStorage.remove();\n                deferred.resolve(_this);\n\n                return deferred.promise;\n            };\n\n            return new _AuthToken2.default();\n        }\n\n        /**\n         * @description Send request to get oauth\n         *\n         * @param {string} identity of user ( email or username )\n         * @param {string} password\n         *\n         * @returns {deferred.promise}\n         */\n\n    }, {\n        key: 'post',\n        value: function post(identity, password) {\n            var _this2 = this;\n\n            var deferred = this.q.defer();\n\n            this.http({\n                method: 'POST',\n                url: RESOURCE_ROUTE,\n                data: {\n                    /* eslint-disable */\n                    client_id: this.OAuthClientSettings.clientId,\n                    client_secret: this.OAuthClientSettings.clientSecret,\n                    grant_type: GRANT_TYPE,\n                    username: identity,\n                    password: password\n                    /* eslint-enable */\n                },\n                ignoreAuthModule: true,\n                transformResponse: appendTransform(this.http.defaults.transformResponse, function (resp, header, status) {\n\n                    return transformResponse.call(_this2, resp, header, status);\n                })\n            }).success(function (resp) {\n\n                deferred.resolve(resp);\n            }).error(function (err) {\n\n                deferred.reject(err);\n            });\n\n            return deferred.promise;\n        }\n\n        /**\n         * @description Send request to get new tokens\n         *\n         * @param {string} token\n         *\n         * @returns {deferred.promise}\n         */\n\n    }, {\n        key: 'refreshToken',\n        value: function refreshToken(token) {\n            var _this3 = this;\n\n            var deferred = this.q.defer();\n\n            this.http({\n                method: 'POST',\n                url: RESOURCE_ROUTE,\n                data: {\n                    /* eslint-disable */\n                    client_id: this.OAuthClientSettings.clientId,\n                    client_secret: this.OAuthClientSettings.clientSecret,\n                    grant_type: 'refresh_token',\n                    refresh_token: token\n                    /* eslint-enable */\n                },\n                ignoreAuthModule: true,\n                transformResponse: appendTransform(this.http.defaults.transformResponse, function (resp, header, status) {\n\n                    if (resp.error !== undefined) {\n\n                        return resp;\n                    }\n\n                    return transformResponse.call(_this3, resp, header, status);\n                })\n            }).success(function (resp) {\n\n                deferred.resolve(resp);\n            }).error(function (err) {\n\n                deferred.reject(err);\n            });\n\n            return deferred.promise;\n        }\n\n        /**\n         * @description Send request to logout\n         *\n         * @returns {Promise}\n         */\n\n    }, {\n        key: 'logout',\n        value: function logout() {\n\n            var deferred = this.q.defer();\n\n            this.http({\n                method: 'GET',\n                url: LOGOUT_ROUTE\n            }).success(function (resp) {\n\n                deferred.resolve(resp);\n            }).error(function (err) {\n\n                deferred.reject(err);\n            });\n\n            return deferred.promise;\n        }\n    }]);\n\n    return OAuthResource;\n}();\n\nexports.default = OAuthResource;\n\n},{\"../token/AuthToken.js\":28}],24:[function(require,module,exports){\n'use strict';\n\nvar _LoginController = require('./controller/LoginController.js');\n\nvar _LoginController2 = _interopRequireDefault(_LoginController);\n\nvar _Authorization = require('./service/Authorization.js');\n\nvar _Authorization2 = _interopRequireDefault(_Authorization);\n\nvar _Security = require('./service/Security.js');\n\nvar _Security2 = _interopRequireDefault(_Security);\n\nvar _OAuthResource = require('./resource/OAuthResource.js');\n\nvar _OAuthResource2 = _interopRequireDefault(_OAuthResource);\n\nvar _TokenStorage = require('./service/TokenStorage.js');\n\nvar _TokenStorage2 = _interopRequireDefault(_TokenStorage);\n\nvar _SecurityInterceptor = require('./interceptor/SecurityInterceptor.js');\n\nvar _SecurityInterceptor2 = _interopRequireDefault(_SecurityInterceptor);\n\nvar _LocaleInterceptor = require('./interceptor/LocaleInterceptor.js');\n\nvar _LocaleInterceptor2 = _interopRequireDefault(_LocaleInterceptor);\n\nvar _DeleteRequestInterceptor = require('./interceptor/DeleteRequestInterceptor.js');\n\nvar _DeleteRequestInterceptor2 = _interopRequireDefault(_DeleteRequestInterceptor);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar MODULE_NAME = 'clearcode.tm.security';\n\n_Authorization2.default.$inject = [MODULE_NAME + '.security', '$state'];\n\n_Security2.default.$inject = ['$q', '$timeout', MODULE_NAME + '.tokenStorage', 'clearcode.tm.user.userResource', MODULE_NAME + '.oauthResource', '$translate'];\n\n_OAuthResource2.default.$inject = ['$http', '$q', MODULE_NAME + '.tokenStorage', 'OAuthClientSettings'];\n\n_LoginController2.default.$inject = [MODULE_NAME + '.oauthResource', MODULE_NAME + '.tokenStorage', '$state', 'clearcode.tm.form.alertForm', 'clearcode.tm.pageInfo.pageInfo'];\n\n_SecurityInterceptor2.default.$inject = ['$q', MODULE_NAME + '.tokenStorage', '$injector'];\n\n_TokenStorage2.default.$inject = ['$localStorage'];\n\n_LocaleInterceptor2.default.$inject = ['$window'];\n\n_DeleteRequestInterceptor2.default.$inject = ['$q', '$rootScope', '$injector'];\n\nangular.module(MODULE_NAME, ['pascalprecht.translate', 'ui.router', 'clearcode.tm.alert', 'clearcode.tm.tagContainer', 'clearcode.tm.user', 'clearcode.tm.pageInfo', 'clearcode.tm.form', 'clearcode.tm.update']).config(['$stateProvider', '$httpProvider', function ($stateProvider, $httpProvider) {\n\n    $httpProvider.interceptors.push(MODULE_NAME + '.securityInterceptor');\n    $httpProvider.interceptors.push(MODULE_NAME + '.deleteRequestInterceptor');\n    $httpProvider.interceptors.push(MODULE_NAME + '.localeInterceptor');\n\n    $stateProvider.state('signIn', {\n        url: '/sign-in',\n        controller: MODULE_NAME + '.LoginController',\n        controllerAs: 'view',\n        data: {\n            roles: [],\n            secure: false\n        },\n        templateUrl: '/app/modules/security/views/signIn.html'\n    }).state('accessDenied', {\n        url: '/access-denied',\n        data: {\n            roles: []\n        },\n        templateUrl: '/app/modules/security/views/accessDenied.html'\n    });\n}]).run(['$rootScope', MODULE_NAME + '.authorization', '$state', MODULE_NAME + '.security', 'clearcode.tm.alert.$alert', 'clearcode.tm.tagContainer.currentContainer', function ($rootScope, authorization, $state, security, $alertProvider, currentContainer) {\n\n    $alertProvider.addMessagePattern('login.invalid', 'Login or password is incorrect. Please try again.');\n\n    $alertProvider.addMessagePattern('request.error', 'User with passed email address does not exist.');\n\n    $alertProvider.addMessagePattern('request.success', 'The email with the activation link has been sent successfully.');\n\n    $alertProvider.addMessagePattern('changePassword.success', 'Password has been changed successfully.');\n\n    $alertProvider.addMessagePattern('changePassword.error', 'Sorry, something went wrong. Try to reset your password one more time.');\n\n    $alertProvider.addMessagePattern('changePassword.token', 'Reset password token is required.');\n\n    $alertProvider.addMessagePattern('changePassword.notCurrentPassword', 'This value should be the users current password.');\n\n    $alertProvider.addMessagePattern('invalid.email', 'Your email address is invalid.');\n\n    $alertProvider.addMessagePattern('password.different', 'Repeat password does not match.');\n\n    $alertProvider.addMessagePattern('password.both', 'Both password fields requires at least 8 characters.');\n\n    $alertProvider.addMessagePattern('password.first', 'First password field requires at least 8 characters.');\n\n    $alertProvider.addMessagePattern('password.second', 'Second password field requires at least 8 characters.');\n\n    $rootScope.logout = function () {\n\n        security.logout().then(function () {\n\n            currentContainer.disableDebugMode();\n            $state.go('signIn');\n        });\n    };\n\n    $rootScope.deleteHeaderNotSupported = false;\n\n    $rootScope.security = security;\n\n    $rootScope.$on('$stateChangeStart', function (event, toState) {\n\n        var isDataDefined = toState.data !== undefined,\n            isSecure,\n            roles;\n\n        if (isDataDefined) {\n\n            isSecure = toState.data.secure !== undefined ? toState.data.secure : true;\n            roles = toState.data.roles !== undefined ? toState.data.roles : [];\n        }\n\n        authorization.authorize(roles).then(function () {}, function () {\n\n            if (isSecure) {\n\n                $state.go('signIn');\n            }\n        });\n    });\n}]).value('$localStorage', localStorage).controller(MODULE_NAME + '.LoginController', _LoginController2.default).service(MODULE_NAME + '.authorization', _Authorization2.default).service(MODULE_NAME + '.security', _Security2.default).service(MODULE_NAME + '.oauthResource', _OAuthResource2.default).service(MODULE_NAME + '.tokenStorage', _TokenStorage2.default).value('OAuthClientSettings', {\n    \"clientId\": typeof OAUTH_CLIENT_ID === \"undefined\" ? '1_1234567890' : OAUTH_CLIENT_ID,\n    \"clientSecret\": typeof OAUTH_CLIENT_SECRET === \"undefined\" ? 'sec1234567890' : OAUTH_CLIENT_SECRET\n}).factory(MODULE_NAME + '.securityInterceptor', _SecurityInterceptor2.default).factory(MODULE_NAME + '.localeInterceptor', _LocaleInterceptor2.default).factory(MODULE_NAME + '.deleteRequestInterceptor', _DeleteRequestInterceptor2.default);\n\nmodule.exports = { MODULE_NAME: MODULE_NAME };\n\n},{\"./controller/LoginController.js\":19,\"./interceptor/DeleteRequestInterceptor.js\":20,\"./interceptor/LocaleInterceptor.js\":21,\"./interceptor/SecurityInterceptor.js\":22,\"./resource/OAuthResource.js\":23,\"./service/Authorization.js\":25,\"./service/Security.js\":26,\"./service/TokenStorage.js\":27}],25:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @name security#Authorization\n * @description\n * Service for authorization\n *\n * @author Arek Zajc <a.zajac@clearcode.cc>\n */\n\nvar Authorization = function () {\n\n    /**\n     * @param {Security} security\n     */\n\n    function Authorization(security, $state) {\n        _classCallCheck(this, Authorization);\n\n        this.security = security;\n        this.state = $state;\n    }\n\n    /**\n     * @description Check if user have permission\n     *\n     * @param {Array} roles\n     * @returns {User}\n     */\n\n\n    _createClass(Authorization, [{\n        key: 'authorize',\n        value: function authorize(roles) {\n\n            var self = this;\n\n            return this.security.getUser().then(function () {\n\n                var isAuthenticated = self.security.isAuthenticated();\n\n                if (roles && roles.length > 0 && !self.security.hasAnyRole(roles)) {\n\n                    if (!isAuthenticated) {\n\n                        self.state.go('signIn');\n                    }\n                }\n            });\n        }\n    }]);\n\n    return Authorization;\n}();\n\nexports.default = Authorization;\n\n},{}],26:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @name Security\n * @description\n * Store information about current user access token\n *\n * @author Arek Zajc <a.zajac@clearcode.cc>\n */\n\nvar Security = function () {\n\n    /**\n     * @param {$q} $q\n     * @param {$timeout} $timeout\n     * @param {TokenStorage} tokenStorage\n     * @param {UserResource} userResource\n     * @param {OAuthResource} oauthResource\n     * @param {translate} $translate\n     */\n\n    function Security($q, $timeout, tokenStorage, userResource, oauthResource, $translate) {\n        _classCallCheck(this, Security);\n\n        this.q = $q;\n        this.timeout = $timeout;\n        this.user = undefined;\n        this.authenticated = false;\n        this.tokenStorage = tokenStorage;\n        this.userResource = userResource;\n        this.oauthResource = oauthResource;\n        this.translate = $translate;\n        this.checked = false;\n    }\n\n    /**\n     * @returns {boolean}\n     */\n\n\n    _createClass(Security, [{\n        key: 'hasUser',\n        value: function hasUser() {\n\n            return this.user !== undefined;\n        }\n\n        /**\n         * @description Determines if user is logged in\n         *\n         * @return {boolean}\n         */\n\n    }, {\n        key: 'isAuthenticated',\n        value: function isAuthenticated() {\n\n            return this.authenticated;\n        }\n\n        /**\n         * Returns true when security is checked\n         *\n         * @returns {Boolean}\n         */\n\n    }, {\n        key: 'isChecked',\n        value: function isChecked() {\n\n            return this.checked;\n        }\n\n        /**\n         * @description Determines if user has provided role\n         *\n         * @param {string} roleString\n         * @returns {boolean}\n         */\n\n    }, {\n        key: 'hasRole',\n        value: function hasRole(roleString) {\n\n            if (!this.authenticated || roleString === undefined) {\n\n                return false;\n            }\n\n            return this.user.roles.indexOf(roleString) !== -1 || this.isSuperAdmin();\n        }\n    }, {\n        key: 'isSuperAdmin',\n        value: function isSuperAdmin() {\n\n            return this.user.roles.indexOf('ROLE_SUPER_ADMIN') !== -1;\n        }\n\n        /**\n         * @description Determines if user has at least one of provide roles\n         *\n         * @param {array} roles\n         */\n\n    }, {\n        key: 'hasAnyRole',\n        value: function hasAnyRole(roles) {\n\n            if (!this.authenticated || roles === undefined) {\n\n                return false;\n            }\n\n            for (var i = 0; i < roles.length; i++) {\n\n                if (this.hasRole(roles[i])) {\n\n                    return true;\n                }\n            }\n\n            return false;\n        }\n\n        /**\n         * @description Authenticate user\n         *\n         * @param {User} user\n         */\n\n    }, {\n        key: 'authenticate',\n        value: function authenticate(user) {\n\n            this.user = user;\n            this.authenticated = true;\n\n            this.translate.use(user.language);\n        }\n\n        /**\n         * Send request to logout from oauth\n         * and remove access token\n         *\n         * @returns {Promise}\n         */\n\n    }, {\n        key: 'logout',\n        value: function logout() {\n\n            var deferred = this.q.defer();\n\n            var self = this;\n\n            this.oauthResource.logout().then(function () {\n\n                self.user = undefined;\n                self.authenticated = false;\n                self.tokenStorage.removeItem();\n\n                deferred.resolve();\n            }, function (err) {\n\n                deferred.reject(err);\n            });\n\n            return deferred.promise;\n        }\n\n        /**\n         * @description Get current user\n         *\n         * @param {boolean} force\n         * @returns {deferred.promise}\n         */\n\n    }, {\n        key: 'getUser',\n        value: function getUser(force) {\n\n            var self = this;\n\n            var deferred = this.q.defer();\n\n            // Force reload identity from server if necessary\n            if (force === true) {\n\n                this.reloadUser();\n            }\n\n            // Check if we retrieved the user identity from server. If we have return immediately\n            if (this.user !== undefined) {\n\n                deferred.resolve(this.user);\n                self.authenticate(this.user);\n\n                return deferred.promise;\n            }\n\n            if (undefined !== self.tokenStorage.getItem()) {\n\n                if (!this.isAuthenticated()) {\n\n                    this.reloadUser();\n                }\n            } else {\n\n                self.checked = true;\n\n                deferred.reject();\n            }\n\n            return deferred.promise;\n        }\n    }, {\n        key: 'reloadUser',\n        value: function reloadUser() {\n\n            var self = this;\n            var deferred = this.q.defer();\n\n            this.userResource.getMe().then(function (resp) {\n\n                self.checked = true;\n\n                self.authenticate(resp);\n                deferred.resolve(self.user);\n            }, function () {\n\n                self.checked = true;\n            });\n        }\n    }]);\n\n    return Security;\n}();\n\nexports.default = Security;\n\n},{}],27:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar localStorage = undefined;\n\n/**\n * @name TokenStorage\n *\n * @author Arek Zajc <a.zajac@clearcode.cc>\n */\n\nvar TokenStorage = function () {\n    function TokenStorage($localStorage) {\n        _classCallCheck(this, TokenStorage);\n\n        localStorage = $localStorage;\n    }\n\n    /**\n     * @description get token from localStorage\n     *\n     * @returns {AuthToken|boolean}\n     */\n\n\n    _createClass(TokenStorage, [{\n        key: 'getItem',\n        value: function getItem() {\n\n            var accessToken = localStorage.accessToken;\n\n            if (undefined !== accessToken) {\n\n                accessToken = JSON.parse(accessToken);\n            }\n\n            return accessToken;\n        }\n    }, {\n        key: 'getToken',\n        value: function getToken() {\n\n            var authToken = this.getItem();\n\n            return TokenStorage.capitalizeFirstLetter(authToken.tokenType) + ' ' + authToken.accessToken;\n        }\n    }, {\n        key: 'addItem',\n\n\n        /**\n         * @description save token in localStorage\n         *\n         * @param {AuthToken} authToken\n         *\n         * @returns {AuthToken}\n         */\n        value: function addItem(authToken) {\n\n            localStorage.accessToken = JSON.stringify(authToken);\n\n            return authToken;\n        }\n\n        /**\n         * @description remove token from localStorage\n         */\n\n    }, {\n        key: 'removeItem',\n        value: function removeItem() {\n\n            localStorage.removeItem('accessToken');\n        }\n    }], [{\n        key: 'capitalizeFirstLetter',\n        value: function capitalizeFirstLetter(string) {\n\n            return string.charAt(0).toUpperCase() + string.slice(1);\n        }\n    }]);\n\n    return TokenStorage;\n}();\n\nexports.default = TokenStorage;\n\n},{}],28:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @name AuthToken\n *\n * @author Arek Zajc <a.zajac@clearcode.cc>\n */\n\nvar AuthToken = function AuthToken() {\n  _classCallCheck(this, AuthToken);\n\n  /**\n   * @type {string}\n   */\n  this.accessToken = undefined;\n\n  /**\n   * @type {number}\n   */\n  this.expiresIn = undefined;\n\n  /**\n   * @type {string}\n   */\n  this.tokenType = undefined;\n\n  /**\n   * @type {string}\n   */\n  this.scope = undefined;\n\n  /**\n   * @type {string}\n   */\n  this.refreshToken = undefined;\n};\n\nexports.default = AuthToken;\n\n},{}],29:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @name BaseController\n */\n\nvar BaseController = function () {\n\n    /**\n     * @param {TagResource} $tagResource\n     * @param {TriggerResource} $triggerResource\n     * @param {VariableResource} $variableResource\n     * @param {$state} $state\n     * @param {$stateParams} $stateParams\n     * @param {Alert} $alert\n     * @param {$scope} $scope\n     * @param {ngTableParams} $TableParams\n     * @param {paramConverter} $paramConverter\n     * @param {currentContainer} CurrentContainer\n     * @param {PageInfo} PageInfo\n     * @param {Templates} templatesStorage\n     * @param {$translate} $translate\n     */\n\n    function BaseController($tagResource, $triggerResource, $variableResource, $state, $stateParams, $alert, $scope, $TableParams, $paramConverter, CurrentContainer, PageInfo, templatesStorage, $translate) {\n        var _this = this;\n\n        _classCallCheck(this, BaseController);\n\n        var BREADCRUMB_GLOBAL = 'Tags';\n\n        this.alert = $alert;\n        this.state = $state;\n        this.stateParams = $stateParams;\n        this.triggerResource = $triggerResource;\n        this.TableParams = $TableParams;\n        this.paramConverter = $paramConverter;\n        this.currentContainer = CurrentContainer;\n\n        this.tag = $tagResource.getEntityObject();\n\n        this.tagPromise = undefined;\n\n        this.triggers = [];\n        this.chosenTriggers = [];\n        this.triggerPromise = undefined;\n        this.formTouched = false;\n        this.templatesStorage = templatesStorage;\n        this.templates = templatesStorage.getAll();\n        this.template = undefined;\n        this.translate = $translate;\n        this.variables = [];\n\n        this.textEditorConfig = {};\n        this.isCodeEditorFocused = false;\n\n        $variableResource.queryAllAvailable(this.stateParams.containerId).then(function (resp) {\n\n            _this.variables = resp.data;\n        });\n\n        this.textEditorConfig.onLoad = function (cm) {\n\n            cm.options.variables = _this.variables;\n\n            $scope.insertVariableIntoCode = function (variable) {\n\n                cm.doc.replaceSelection('{{ ' + variable.name + ' }}');\n\n                cm.focus();\n            };\n\n            cm.on('focus', function () {\n\n                _this.isCodeEditorFocused = true;\n            });\n\n            cm.on('blur', function () {\n\n                _this.isCodeEditorFocused = false;\n            });\n        };\n\n        $scope.$on('trigger.add', function (event, resp) {\n\n            _this.tag.addTrigger(resp);\n            _this.showTriggerForm = false;\n            _this.validateTriggers = false;\n        });\n\n        $scope.$on('trigger.edit', function (event, resp) {\n\n            _this.tag.editTrigger(resp);\n            _this.editTriggerForm = false;\n            _this.validateTriggers = false;\n        });\n\n        this.translate(['Place the code']).then(function (translations) {\n\n            _this.textEditorConfig.placeholder = translations['Place the code'];\n        });\n\n        this.currentContainer.getContainer().then(function () {\n\n            if (_this.currentContainer.$container.hasPermission('noaccess')) {\n\n                $state.go('container');\n            }\n\n            _this.translate([_this.getBreadcrumbText(), BREADCRUMB_GLOBAL]).then(function (translations) {\n\n                PageInfo.clear().add(_this.currentContainer.$container.name, 'tags', {\n                    containerId: _this.currentContainer.$container.id\n                }).add(translations[BREADCRUMB_GLOBAL], 'tags', {\n                    containerId: _this.currentContainer.$container.id\n                }).add(translations[_this.getBreadcrumbText()]).broadcast();\n            });\n        });\n\n        $scope.$on('pageInfo.reload', function (event, args) {\n\n            _this.translate([_this.getBreadcrumbText(), BREADCRUMB_GLOBAL]).then(function (translations) {\n\n                PageInfo.clear().add(args.name, 'tags', {\n                    containerId: args.id\n                }).add(translations[BREADCRUMB_GLOBAL], 'tags', {\n                    containerId: args.id\n                }).add(translations[_this.getBreadcrumbText()]).broadcast();\n            });\n        });\n    }\n\n    _createClass(BaseController, [{\n        key: 'hasVariables',\n        value: function hasVariables() {\n\n            return angular.isArray(this.variables) && this.variables.length > 0;\n        }\n\n        /**\n         *\n         * @param {string} id\n         */\n\n    }, {\n        key: 'setTagTemplate',\n        value: function setTagTemplate(id) {\n\n            if (this.tag.template === id) {\n\n                this.template = undefined;\n                this.tag.template = null;\n                this.formTouched = false;\n\n                return false;\n            }\n\n            this.tag.template = id;\n\n            if (this.tag.template) {\n\n                this.template = this.templatesStorage.get(id);\n                this.tag.code = undefined;\n\n                if (this.template.types.length === 0) {\n\n                    this.setTemplateType(id);\n                } else {\n\n                    this.formTouched = false;\n                }\n            } else {\n\n                this.formTouched = true;\n            }\n        }\n\n        /**\n         * @param {string} id\n         * @param {object} options\n         */\n\n    }, {\n        key: 'initTagTemplate',\n        value: function initTagTemplate(id, options) {\n\n            this.tag.template = id;\n\n            if (this.tag.template) {\n\n                this.template = this.templatesStorage.get(id);\n                this.tag.code = undefined;\n\n                if (this.template.types.length === 0) {\n\n                    this.templateFields = this.templatesStorage.getOptions(id);\n                    this.template.templateUrl = this.templatesStorage.getTemplateUrl(id);\n                    this.tag.templateOptions = options;\n                } else {\n\n                    this.templateFields = this.templatesStorage.getOptions(id, options.type);\n                    this.tag.templateOptions.type = options.type;\n                    this.template.templateUrl = this.templatesStorage.getTemplateUrl(id, options.type);\n                }\n            }\n\n            this.formTouched = true;\n        }\n    }, {\n        key: 'setTemplateType',\n        value: function setTemplateType(id, type) {\n\n            if (this.tag.templateOptions.type !== undefined && this.tag.templateOptions.type === type) {\n\n                return false;\n            }\n\n            this.templateFields = this.templatesStorage.getOptions(id, type);\n\n            this.setOptions();\n            this.tag.templateOptions.type = type;\n            this.template.templateUrl = this.templatesStorage.getTemplateUrl(id, type);\n\n            this.formTouched = true;\n        }\n    }, {\n        key: 'setOptions',\n        value: function setOptions() {\n\n            var fieldsLength = this.templateFields.length;\n\n            this.tag.templateOptions = {};\n\n            while (fieldsLength--) {\n\n                this.tag.templateOptions[this.templateFields[fieldsLength].name] = this.templateFields[fieldsLength].hasOwnProperty('value') ? this.templateFields[fieldsLength].value : undefined;\n            }\n        }\n\n        /**\n         * @desc Show existing triggers\n         */\n\n    }, {\n        key: 'showExistingTriggers',\n        value: function showExistingTriggers() {\n\n            this.chosenTriggers = [];\n            this.prepareExistingTriggersList();\n            this.showListTriggersForm = true;\n        }\n\n        /**\n         * @desc Prepare existing triggers list\n         */\n\n    }, {\n        key: 'prepareExistingTriggersList',\n        value: function prepareExistingTriggersList() {\n            var _this2 = this;\n\n            this.triggers = [];\n\n            this.types = ['Page View', 'Click', 'Event', 'Form submission'];\n\n            this.existingTable = new this.TableParams({\n                page: 1,\n                count: 10,\n                sorting: {\n                    name: 'asc'\n                }\n            }, {\n                total: 0,\n                getData: function getData($defer, params) {\n\n                    var parameters = _this2.paramConverter.list(params.url());\n\n                    parameters['exclude[]'] = _this2.tag.triggers.map(function (trigger) {\n                        return trigger.id;\n                    });\n\n                    _this2.triggerResource.query(_this2.currentContainer.$container.id, parameters).then(function (resp) {\n\n                        params.total(resp.total);\n                        $defer.resolve(resp.data);\n                    });\n                }\n            });\n        }\n\n        /**\n         * @desc Function provides adding existing triggers\n         */\n\n    }, {\n        key: 'addExistingTriggers',\n        value: function addExistingTriggers() {\n\n            var chosenLength = this.chosenTriggers.length;\n\n            while (chosenLength--) {\n\n                this.tag.triggers.push(this.chosenTriggers[chosenLength]);\n            }\n        }\n    }, {\n        key: 'submitForm',\n        value: function submitForm(tag) {\n            var _this3 = this;\n\n            this.tagPromise = tag.save(this.stateParams.containerId);\n\n            this.tagPromise.then(function () {\n\n                _this3.alert.success(_this3.getAlertType(_this3.stateParams.tagId));\n\n                _this3.currentContainer.makeChanges();\n\n                _this3.state.go('tags', { containerId: _this3.stateParams.containerId });\n            }, function () {\n\n                _this3.alert.error('error.invalid');\n            });\n        }\n\n        /**\n         * Display error if form is invalid\n         */\n\n    }, {\n        key: 'displayInvalidFormMessage',\n        value: function displayInvalidFormMessage() {\n\n            this.validateTag = true;\n            this.alert.error('error.invalid');\n        }\n    }]);\n\n    return BaseController;\n}();\n\nexports.default = BaseController;\n\n},{}],30:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _BaseController2 = require('./BaseController.js');\n\nvar _BaseController3 = _interopRequireDefault(_BaseController2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This program is free software: you can redistribute it and/or modify it under\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * the terms of the GNU Affero General Public License as published by the Free\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Software Foundation, either version 3 of the License, or (at your option) any\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * later version.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This program is distrubuted in the hope that it will be useful,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * but WITHOUT ANY WARRANTY; without even the implied warranty of\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * GNU Affero General Public License for more details.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * You should have received a copy of the GNU Affero General Public License\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * along with this program. If not, see <http://www.gnu.org/licenses/>.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n/**\n * @name CreateController\n */\n\nvar CreateController = function (_BaseController) {\n  _inherits(CreateController, _BaseController);\n\n  /**\n   * @param {TagResource} $tagResource\n   * @param {TriggerResource} $triggerResource\n   * @param {VariableResource} $variableResource\n   * @param {$state} $state\n   * @param {$stateParams} $stateParams\n   * @param {Alert} $alert\n   * @param {$scope} $scope\n   * @param {ngTableParams} $TableParams\n   * @param {paramConverter} $paramConverter\n   * @param {currentContainer} CurrentContainer\n   * @param {PageInfo} PageInfo\n   * @param {Templates} TemplatesStorage\n   * @param {$translate} $translate\n   */\n\n  function CreateController($tagResource, $triggerResource, $variableResource, $state, $stateParams, $alert, $scope, $TableParams, $paramConverter, CurrentContainer, PageInfo, TemplatesStorage, $translate) {\n    _classCallCheck(this, CreateController);\n\n    return _possibleConstructorReturn(this, Object.getPrototypeOf(CreateController).call(this, $tagResource, $triggerResource, $variableResource, $state, $stateParams, $alert, $scope, $TableParams, $paramConverter, CurrentContainer, PageInfo, TemplatesStorage, $translate));\n  }\n\n  /**\n   * Get breadcrumb text\n   *\n   */\n\n\n  _createClass(CreateController, [{\n    key: 'getBreadcrumbText',\n    value: function getBreadcrumbText() {\n\n      return 'Add a new tag';\n    }\n\n    /**\n     * Get alert type\n     *\n     */\n\n  }, {\n    key: 'getAlertType',\n    value: function getAlertType() {\n\n      return 'success.create';\n    }\n  }]);\n\n  return CreateController;\n}(_BaseController3.default);\n\nexports.default = CreateController;\n\n},{\"./BaseController.js\":29}],31:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _BaseController2 = require('./BaseController.js');\n\nvar _BaseController3 = _interopRequireDefault(_BaseController2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This program is free software: you can redistribute it and/or modify it under\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * the terms of the GNU Affero General Public License as published by the Free\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Software Foundation, either version 3 of the License, or (at your option) any\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * later version.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This program is distrubuted in the hope that it will be useful,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * but WITHOUT ANY WARRANTY; without even the implied warranty of\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * GNU Affero General Public License for more details.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * You should have received a copy of the GNU Affero General Public License\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * along with this program. If not, see <http://www.gnu.org/licenses/>.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n/**\n * @name EditController\n */\n\nvar EditController = function (_BaseController) {\n    _inherits(EditController, _BaseController);\n\n    /**\n     * @param {TagResource} $tagResource\n     * @param {TriggerResource} $triggerResource\n     * @param {VariableResource} $variableResource\n     * @param {$state} $state\n     * @param {$stateParams} $stateParams\n     * @param {Alert} $alert\n     * @param {$scope} $scope\n     * @param {ngTableParams} $TableParams\n     * @param {paramConverter} $paramConverter\n     * @param {currentContainer} CurrentContainer\n     * @param {PageInfo} PageInfo\n     * @param {Templates} templatesStorage\n     * @param {$translate} $translate\n     */\n\n    function EditController($tagResource, $triggerResource, $variableResource, $state, $stateParams, $alert, $scope, $TableParams, $paramConverter, CurrentContainer, PageInfo, templatesStorage, $translate) {\n        _classCallCheck(this, EditController);\n\n        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(EditController).call(this, $tagResource, $triggerResource, $variableResource, $state, $stateParams, $alert, $scope, $TableParams, $paramConverter, CurrentContainer, PageInfo, templatesStorage, $translate));\n\n        _this.tagPromise = $tagResource.get($stateParams.tagId);\n\n        _this.tagPromise.then(function (resp) {\n\n            _this.tag = resp;\n\n            _this.initTagTemplate(_this.tag.template, _this.tag.templateOptions);\n        });\n\n        return _this;\n    }\n\n    /**\n     * Get breadcrumb text\n     *\n     */\n\n\n    _createClass(EditController, [{\n        key: 'getBreadcrumbText',\n        value: function getBreadcrumbText() {\n\n            return 'Configure tag';\n        }\n\n        /**\n         * Get alert type\n         *\n         */\n\n    }, {\n        key: 'getAlertType',\n        value: function getAlertType() {\n\n            return 'success.edit';\n        }\n    }]);\n\n    return EditController;\n}(_BaseController3.default);\n\nexports.default = EditController;\n\n},{\"./BaseController.js\":29}],32:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @type {Alert}\n */\nvar $alert;\n\n/**\n * @type {$stateParams}\n */\nvar stateParams;\n\n/**\n * @type {$scope}\n */\nvar scope;\n\n/**\n * @type {String}\n */\nvar BREADCRUMB_TEXT = 'Tags';\n\n/**\n * @name ManageController\n */\n\nvar ManageController = function () {\n\n    /**\n     * @param {ngTableParams} TableParams\n     * @param {$stateParams} $stateParams\n     * @param {TagResource} tagResource\n     * @param {Alert} alert\n     * @param {ParamConverter} paramConverter\n     * @param {CurrentContainer} CurrentContainer\n     * @param {PageInfo} PageInfo\n     * @param {$scope} $scope\n     * @param {$state} state\n     * @param {$translate} $translate\n     */\n\n    function ManageController(TableParams, $stateParams, tagResource, alert, paramConverter, CurrentContainer, PageInfo, $scope, state, $translate) {\n        var _this = this;\n\n        _classCallCheck(this, ManageController);\n\n        $alert = alert;\n        stateParams = $stateParams;\n        scope = $scope;\n        this.permissions = [];\n\n        this.containerId = stateParams.containerId;\n        this.translate = $translate;\n        this.currentContainer = CurrentContainer;\n\n        this.currentContainer.getContainer().then(function (container) {\n\n            if (!_this.currentContainer.$container.hasPermission('view')) {\n\n                state.go('container');\n            } else {\n\n                _this.permissions = _this.currentContainer.$container.permissions;\n            }\n\n            _this.translate([BREADCRUMB_TEXT]).then(function (translations) {\n\n                PageInfo.clear().add(container.name, 'tags', {\n                    containerId: container.id\n                }).add(translations[BREADCRUMB_TEXT]).broadcast();\n            });\n        });\n\n        this.tableParams = new TableParams({\n            page: 1,\n            count: 10,\n            sorting: {\n                name: 'asc'\n            }\n        }, {\n            total: 0,\n            $scope: $scope, // important\n            getData: function getData($defer, params) {\n\n                tagResource.query(stateParams.containerId, paramConverter.list(params.url())).then(function (resp) {\n\n                    params.total(resp.total);\n\n                    $defer.resolve(resp.data);\n                });\n            }\n        });\n\n        this.tableParams.reload();\n\n        scope.params = this.tableParams;\n\n        // behaviour after page change\n        $scope.$on('ngTableAfterReloadData', function () {\n\n            _this.showTriggers = -1;\n            _this.showMenu = -1;\n        }, true);\n\n        $scope.$watch('params.$params', function (newParams, oldParams) {\n\n            if (newParams === oldParams) {\n                return;\n            }\n\n            $scope.params.settings().$scope = $scope;\n\n            $scope.params.reload();\n        }, true);\n\n        scope.$on('pageInfo.reload', function (event, args) {\n\n            _this.translate([BREADCRUMB_TEXT]).then(function (translations) {\n\n                PageInfo.clear().add(args.name, 'tags', {\n                    containerId: args.id\n                }).add(translations[BREADCRUMB_TEXT]).broadcast();\n            });\n        });\n    }\n\n    _createClass(ManageController, [{\n        key: 'removeTag',\n        value: function removeTag(tag) {\n            var _this2 = this;\n\n            tag.remove().then(function () {\n\n                $alert.success('success.remove');\n                _this2.currentContainer.makeChanges();\n\n                if (_this2.tableParams.data.length === 1 && _this2.tableParams.page() > 1) {\n\n                    _this2.tableParams.page(_this2.tableParams.page() - 1);\n                } else {\n\n                    _this2.tableParams.reload();\n                }\n            }, function () {\n\n                $alert.error('error.remove');\n\n                _this2.tableParams.reload();\n            });\n        }\n    }, {\n        key: 'changeStatus',\n        value: function changeStatus(tag) {\n            var _this3 = this;\n\n            tag.changeStatus(this.containerId).then(function () {\n                _this3.currentContainer.makeChanges();\n                $alert.success('status.change');\n            }, function () {\n                $alert.error('status.failed');\n            });\n        }\n    }, {\n        key: 'toggleActionMenu',\n        value: function toggleActionMenu($index) {\n\n            if (this.permissions.indexOf('edit') !== -1) {\n\n                this.showMenu = this.showMenu === $index ? -1 : $index;\n                this.showTriggers = -1;\n            }\n        }\n    }, {\n        key: 'toggleTriggerList',\n        value: function toggleTriggerList($index) {\n\n            this.showMenu = -1;\n            this.showTriggers = this.isRowExpanded($index) ? -1 : $index;\n        }\n    }, {\n        key: 'isRowExpanded',\n        value: function isRowExpanded($index) {\n\n            return this.showTriggers === $index;\n        }\n    }]);\n\n    return ManageController;\n}();\n\nexports.default = ManageController;\n\n},{}],33:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar tagFactory = function tagFactory(resource) {\n\n    /**\n     * @name Variable\n     * @description Variable entity\n     */\n\n    var Tag = function () {\n        function Tag() {\n            _classCallCheck(this, Tag);\n\n            /**\n             * @type {number}\n             */\n            this.id = undefined;\n\n            /**\n             * @type {string}\n             */\n            this.name = undefined;\n\n            /**\n             * @type {string}\n             */\n            this.code = undefined;\n\n            /**\n             * @type {string}\n             */\n            this.noScriptUri = undefined;\n\n            /**\n             * @type {Array}\n             */\n            this.triggers = [];\n\n            /**\n             * @type {string}\n             */\n            this.updatedAt = undefined;\n\n            /**\n             * @type {number}\n             */\n            this.priority = 0;\n\n            /**\n             * @type {boolean}\n             */\n            this.documentWrite = false;\n\n            /**\n             * @type {boolean}\n             */\n            this.disableInDebugMode = false;\n\n            /**\n             * @type {boolean}\n             */\n            this.respectVisitorsPrivacy = false;\n\n            /**\n             * @type {boolean}\n             */\n            this.isActive = true;\n\n            /**\n             * @type {string}\n             */\n            this.template = null;\n\n            /**\n             * @type {Object}\n             */\n            this.templateOptions = {};\n\n            /**\n             * @type {boolean}\n             */\n            this.statusChangePending = false;\n        }\n\n        /**\n         * @param {Trigger} trigger\n         */\n\n\n        _createClass(Tag, [{\n            key: 'addTrigger',\n            value: function addTrigger(trigger) {\n\n                this.triggers.push(trigger);\n            }\n\n            /**\n             * @param {Trigger} trigger\n             */\n\n        }, {\n            key: 'editTrigger',\n            value: function editTrigger(trigger) {\n\n                var index = this.triggers.length;\n\n                while (index--) {\n\n                    if (this.triggers[index].id === trigger.id) {\n\n                        this.triggers[index] = trigger;\n                        return true;\n                    }\n                }\n\n                return false;\n            }\n\n            /**\n             * @param {Trigger} trigger\n             */\n\n        }, {\n            key: 'removeTrigger',\n            value: function removeTrigger(trigger) {\n\n                var index = this.triggers.indexOf(trigger);\n\n                if (index > -1) {\n\n                    this.triggers.splice(index, 1);\n\n                    return true;\n                }\n\n                return false;\n            }\n\n            /**\n             * @param {Number} id\n             */\n\n        }, {\n            key: 'removeTriggerById',\n            value: function removeTriggerById(id) {\n\n                var index = this.triggers.length;\n\n                while (index--) {\n\n                    if (this.triggers[index].id === id) {\n\n                        this.triggers.splice(index, 1);\n                        return true;\n                    }\n                }\n\n                return false;\n            }\n\n            /**\n             * @param {number} containerId\n             *\n             * @returns {deferred.promise}\n             */\n\n        }, {\n            key: 'save',\n            value: function save(containerId) {\n\n                var result = {},\n                    promise;\n\n                var excludedProperty = ['id', 'updatedAt', 'statusChangePending'];\n\n                if (this.template === undefined) {\n\n                    excludedProperty.push('templateOptions');\n                } else {\n\n                    excludedProperty.push('code');\n                    excludedProperty.push('noScriptUri');\n                    excludedProperty.push('documentWrite');\n                }\n\n                for (var property in this) {\n\n                    if (!angular.isFunction(this[property]) && this.hasOwnProperty(property) && excludedProperty.indexOf(property) === -1) {\n\n                        if (property === 'triggers') {\n\n                            var collection = [];\n\n                            for (var index in this[property]) {\n\n                                if (this[property][index] instanceof Object) {\n\n                                    collection.push(this[property][index].id);\n                                }\n                            }\n\n                            result[property] = collection;\n                        } else {\n\n                            result[property] = this[property];\n                        }\n                    }\n                }\n\n                if (this.id === undefined) {\n\n                    promise = resource.post(containerId, result);\n                } else {\n\n                    promise = resource.put(this.id, result);\n                }\n\n                return promise;\n            }\n\n            /**\n             * @returns {deferred.promise|Boolean}\n             */\n\n        }, {\n            key: 'remove',\n            value: function remove() {\n\n                if (this.id === undefined) {\n\n                    return false;\n                }\n\n                return resource.delete(this.id);\n            }\n\n            /**\n             * @param containerId\n             * @returns {deferred.promise}\n             */\n\n        }, {\n            key: 'changeStatus',\n            value: function changeStatus(containerId) {\n                var _this = this;\n\n                var tag = angular.copy(this);\n\n                tag.isActive = !tag.isActive;\n\n                this.statusChangePending = true;\n\n                var promise = tag.save(containerId).then(function () {\n\n                    _this.isActive = !_this.isActive;\n                }).finally(function () {\n\n                    _this.statusChangePending = false;\n                });\n\n                return promise;\n            }\n        }]);\n\n        return Tag;\n    }();\n\n    return Tag;\n};\n\nexports.default = tagFactory;\n\n},{}],34:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * This program is free software: you can redistribute it and/or modify it under\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * the terms of the GNU Affero General Public License as published by the Free\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Software Foundation, either version 3 of the License, or (at your option) any\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * later version.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * This program is distrubuted in the hope that it will be useful,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * but WITHOUT ANY WARRANTY; without even the implied warranty of\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * GNU Affero General Public License for more details.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * You should have received a copy of the GNU Affero General Public License\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * along with this program. If not, see <http://www.gnu.org/licenses/>.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\n\nvar _TemplateType = require('../entity/TemplateType.js');\n\nvar _TemplateType2 = _interopRequireDefault(_TemplateType);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar templateFactory = function templateFactory() {\n\n  var TemplateType = (0, _TemplateType2.default)();\n\n  var Template = function () {\n\n    /**\n     * @constructor\n     * @param {string} id\n     * @param {string} name\n     */\n\n    function Template(id, name) {\n      _classCallCheck(this, Template);\n\n      /**\n       * @type {string}\n       */\n      this.id = id;\n\n      /**\n       * @type {string}\n       */\n      this.name = name;\n\n      /**\n       * @type {string}\n       */\n      this.brandUrl = undefined;\n\n      /**\n       * @type {string}\n       */\n      this.templateUrl = undefined;\n\n      /**\n       * @type {string}\n       */\n      this.type = undefined;\n\n      /**\n       * @type {Array}\n       */\n      this.types = [];\n\n      /**\n       * @type {object}\n       */\n      this.fields = [];\n    }\n\n    /**\n     * @param {object} params\n     * @returns {Template}\n     */\n\n\n    _createClass(Template, [{\n      key: 'addTextField',\n      value: function addTextField(params) {\n\n        var field = params ? params : {};\n\n        field.type = 'text';\n\n        this.fields.push(field);\n\n        return this;\n      }\n\n      /**\n       * @param {object} params\n       * @returns {Template}\n       */\n\n    }, {\n      key: 'addHiddenField',\n      value: function addHiddenField(name, value) {\n\n        var field = {};\n\n        field.name = name;\n        field.value = value;\n        field.type = 'hidden';\n\n        this.fields.push(field);\n\n        return this;\n      }\n\n      /**\n       * @param {object} params\n       * @returns {Template}\n       */\n\n    }, {\n      key: 'addSelectField',\n      value: function addSelectField(params) {\n\n        var field = params ? params : {};\n\n        field.type = 'select';\n\n        this.fields.push(field);\n\n        return this;\n      }\n\n      /**\n       * @param {string} id\n       * @param {string} name\n       * @returns {Template}\n       */\n\n    }, {\n      key: 'addType',\n      value: function addType(id, name) {\n\n        var type = new TemplateType(id, name);\n\n        this.types.push(type);\n\n        return type;\n      }\n\n      /**\n       * @param {string} url\n       * @returns {Template}\n       */\n\n    }, {\n      key: 'addBrand',\n      value: function addBrand(url) {\n\n        this.brandUrl = url;\n\n        return this;\n      }\n\n      /**\n       * @param {string} url\n       * @returns {Template}\n       */\n\n    }, {\n      key: 'addTemplateUrl',\n      value: function addTemplateUrl(url) {\n\n        this.templateUrl = url;\n\n        return this;\n      }\n    }]);\n\n    return Template;\n  }();\n\n  return Template;\n};\n\nexports.default = templateFactory;\n\n},{\"../entity/TemplateType.js\":35}],35:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\nvar templateTypeFactory = function templateTypeFactory() {\n  var TemplateType = function () {\n\n    /**\n     * @constructor\n     * @param {string} id\n     * @param {string} name\n     */\n\n    function TemplateType(id, name) {\n      _classCallCheck(this, TemplateType);\n\n      /**\n       * @type {string}\n       */\n      this.id = id;\n\n      /**\n       * @type {string}\n       */\n      this.name = name;\n\n      /**\n       * @type {string}\n       */\n      this.templateUrl = undefined;\n\n      /**\n       * @type {object}\n       */\n      this.fields = [];\n    }\n\n    /**\n     * @param {object} params\n     * @returns {TemplateType}\n     */\n\n\n    _createClass(TemplateType, [{\n      key: 'addTextField',\n      value: function addTextField(params) {\n\n        var field = params ? params : {};\n\n        field.type = 'text';\n\n        this.fields.push(field);\n\n        return this;\n      }\n\n      /**\n       * @param {string} name\n       * @param {string} value\n       * @returns {TemplateType}\n       */\n\n    }, {\n      key: 'addHiddenField',\n      value: function addHiddenField(name, value) {\n\n        var field = {};\n\n        field.name = name;\n        field.value = value;\n        field.type = 'hidden';\n\n        this.fields.push(field);\n\n        return this;\n      }\n\n      /**\n       * @param {string} url\n       * @returns {TemplateType}\n       */\n\n    }, {\n      key: 'addTemplateUrl',\n      value: function addTemplateUrl(url) {\n\n        this.templateUrl = url;\n\n        return this;\n      }\n    }]);\n\n    return TemplateType;\n  }();\n\n  return TemplateType;\n};\n\nexports.default = templateTypeFactory;\n\n},{}],36:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * This program is free software: you can redistribute it and/or modify it under\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * the terms of the GNU Affero General Public License as published by the Free\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Software Foundation, either version 3 of the License, or (at your option) any\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * later version.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * This program is distrubuted in the hope that it will be useful,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * but WITHOUT ANY WARRANTY; without even the implied warranty of\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * GNU Affero General Public License for more details.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * You should have received a copy of the GNU Affero General Public License\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * along with this program. If not, see <http://www.gnu.org/licenses/>.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\n\nvar _Template = require('../entity/Template.js');\n\nvar _Template2 = _interopRequireDefault(_Template);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Template = (0, _Template2.default)();\n\n/**\n * @name TemplatesProvider\n */\n\nvar TemplatesProvider = function () {\n    function TemplatesProvider() {\n        _classCallCheck(this, TemplatesProvider);\n\n        /**\n         * @type {Array} collection\n         */\n        this.collection = [];\n    }\n\n    /**\n     * @param {string} id\n     * @param {string} name\n     * @returns {Template}\n     */\n\n\n    _createClass(TemplatesProvider, [{\n        key: 'add',\n        value: function add(id, name) {\n\n            var template = new Template(id, name);\n\n            this.collection.push(template);\n\n            return template;\n        }\n\n        /**\n         * @param {string} id\n         * @returns {Template|boolean}\n         */\n\n    }, {\n        key: 'get',\n        value: function get(id) {\n\n            var templateLength = this.collection.length;\n\n            while (templateLength--) {\n\n                if (this.collection[templateLength].id === id) {\n\n                    return this.collection[templateLength];\n                }\n            }\n\n            return false;\n        }\n\n        /**\n         * @returns {array}\n         */\n\n    }, {\n        key: 'getAll',\n        value: function getAll() {\n\n            return this.collection;\n        }\n    }, {\n        key: '$get',\n        value: function $get() {\n\n            return this;\n        }\n    }]);\n\n    return TemplatesProvider;\n}();\n\nexports.default = TemplatesProvider;\n\n},{\"../entity/Template.js\":34}],37:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * This program is free software: you can redistribute it and/or modify it under\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * the terms of the GNU Affero General Public License as published by the Free\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Software Foundation, either version 3 of the License, or (at your option) any\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * later version.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * This program is distrubuted in the hope that it will be useful,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * but WITHOUT ANY WARRANTY; without even the implied warranty of\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * GNU Affero General Public License for more details.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * You should have received a copy of the GNU Affero General Public License\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * along with this program. If not, see <http://www.gnu.org/licenses/>.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\n\nvar _Tag = require('../entity/Tag.js');\n\nvar _Tag2 = _interopRequireDefault(_Tag);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar transformResponse = function transformResponse(resp) {\n\n    var Tag = (0, _Tag2.default)(this);\n\n    var tag = new Tag();\n\n    tag.id = resp.id;\n    tag.name = resp.name;\n    tag.code = resp.code;\n    tag.noScriptUri = resp.no_script_uri;\n    tag.priority = resp.priority;\n    tag.updatedAt = resp.updated_at;\n    tag.documentWrite = resp.document_write;\n    tag.disableInDebugMode = resp.disable_in_debug_mode;\n    tag.isActive = resp.is_active;\n    tag.respectVisitorsPrivacy = resp.respect_visitors_privacy;\n\n    if (resp.template !== null) {\n\n        tag.template = resp.template;\n        tag.templateOptions = resp.template_options;\n    } else {\n\n        tag.template = undefined;\n    }\n\n    for (var key in resp.triggers) {\n\n        if (resp.triggers[key] instanceof Object) {\n\n            tag.addTrigger(resp.triggers[key]);\n        }\n    }\n\n    return tag;\n};\n\nvar appendTransform = function appendTransform(defaults, transform) {\n\n    // We can't guarantee that the default transformation is an array\n    defaults = angular.isArray(defaults) ? defaults : [defaults];\n\n    // Append the new transformation to the defaults\n    return defaults.concat(transform);\n};\n\n/**\n * @name TagResource\n */\n\nvar TagResource = function () {\n    /**\n     * @param {$http} $http\n     * @param {$q} $q\n     */\n\n    function TagResource($http, $q) {\n        _classCallCheck(this, TagResource);\n\n        this.http = $http;\n        this.q = $q;\n    }\n\n    /**\n     * @returns {Tag}\n     */\n\n\n    _createClass(TagResource, [{\n        key: 'getEntityObject',\n        value: function getEntityObject() {\n\n            var Tag = (0, _Tag2.default)(this);\n\n            return new Tag();\n        }\n\n        /**\n         * @description Send request to get specific entity\n         *\n         * @param {number} id\n         *\n         * @returns {deferred.promise}\n         */\n\n    }, {\n        key: 'get',\n        value: function get(id) {\n            var _this = this;\n\n            var deferred = this.q.defer();\n\n            this.http({\n                method: 'GET',\n                url: '/api/tags/' + id,\n                transformResponse: appendTransform(this.http.defaults.transformResponse, function (resp, header, status) {\n\n                    if (status < 400) {\n\n                        return transformResponse.call(_this, resp.data);\n                    } else {\n\n                        return resp;\n                    }\n                })\n            }).success(function (resp) {\n\n                deferred.resolve(resp);\n            }).error(function (err) {\n\n                deferred.reject(err);\n            });\n\n            return deferred.promise;\n        }\n\n        /**\n         * @description Send request to get list of entities\n         *\n         * @param {number} containerId\n         * @param {Object} params\n         *\n         * @returns {deferred.promise}\n         */\n\n    }, {\n        key: 'query',\n        value: function query(containerId, params) {\n            var _this2 = this;\n\n            var deferred = this.q.defer();\n\n            this.http({\n                method: 'GET',\n                url: '/api/containers/' + containerId + '/tags',\n                params: params,\n                transformResponse: appendTransform(this.http.defaults.transformResponse, function (resp) {\n\n                    for (var element in resp.data) {\n\n                        if (resp.data[element] instanceof Object) {\n\n                            resp.data[element] = transformResponse.call(_this2, resp.data[element]);\n                        }\n                    }\n\n                    return resp;\n                })\n            }).success(function (resp) {\n\n                deferred.resolve(resp);\n            }).error(function (err) {\n\n                deferred.reject(err);\n            });\n\n            return deferred.promise;\n        }\n\n        /**\n         * @description Send request to delete entity\n         *\n         * @param {number} id\n         *\n         * @returns {deferred.promise}\n         */\n\n    }, {\n        key: 'delete',\n        value: function _delete(id) {\n\n            var deferred = this.q.defer();\n\n            this.http({\n                method: 'DELETE',\n                url: '/api/tags/' + id\n            }).success(function (data) {\n\n                deferred.resolve(data);\n            }).error(function (err) {\n\n                deferred.reject(err);\n            });\n\n            return deferred.promise;\n        }\n\n        /**\n         * @description Send request to create entity\n         *\n         * @param {number} containerId\n         * @param {object} entity\n         *\n         * @returns {deferred.promise}\n         */\n\n    }, {\n        key: 'post',\n        value: function post(containerId, entity) {\n            var _this3 = this;\n\n            var deferred = this.q.defer();\n\n            this.http({\n                method: 'POST',\n                url: '/api/containers/' + containerId + '/tags',\n                data: entity,\n                transformResponse: appendTransform(this.http.defaults.transformResponse, function (resp, header, status) {\n\n                    if (status < 400) {\n\n                        return transformResponse.call(_this3, resp.data);\n                    } else {\n\n                        return resp;\n                    }\n                })\n            }).success(function (resp) {\n\n                deferred.resolve(resp);\n            }).error(function (err) {\n\n                deferred.reject(err);\n            });\n\n            return deferred.promise;\n        }\n\n        /**\n         * Send request to update entity\n         *\n         * @param {number} id\n         * @param {object} entity\n         *\n         * @returns {deferred.promise}\n         */\n\n    }, {\n        key: 'put',\n        value: function put(id, entity) {\n            var _this4 = this;\n\n            var deferred = this.q.defer();\n\n            this.http({\n                method: 'PUT',\n                url: '/api/tags/' + id,\n                data: entity,\n                transformResponse: appendTransform(this.http.defaults.transformResponse, function (resp, header, status) {\n\n                    if (status < 400) {\n\n                        return transformResponse.call(_this4, resp.data);\n                    } else {\n\n                        return resp;\n                    }\n                })\n            }).success(function (resp) {\n\n                deferred.resolve(resp);\n            }).error(function (err) {\n\n                deferred.reject(err);\n            });\n\n            return deferred.promise;\n        }\n    }]);\n\n    return TagResource;\n}();\n\nexports.default = TagResource;\n\n},{\"../entity/Tag.js\":33}],38:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar findByKey = function findByKey(collection, key, value) {\n\n    var collectionLength = collection.length;\n\n    while (collectionLength--) {\n\n        if (collection[collectionLength][key] === value) {\n\n            return collection[collectionLength];\n        }\n    }\n\n    return false;\n};\n\n/**\n * @name Templates\n */\n\nvar Templates = function () {\n\n    /**\n     * @constructor\n     * @param {TemplateProvider} $templates\n     */\n\n    function Templates($templates) {\n        _classCallCheck(this, Templates);\n\n        this.collection = $templates.getAll();\n    }\n\n    _createClass(Templates, [{\n        key: 'getAll',\n        value: function getAll() {\n\n            return this.collection;\n        }\n    }, {\n        key: 'get',\n        value: function get(id) {\n\n            var collectionLength = this.collection.length;\n\n            while (collectionLength--) {\n\n                if (this.collection[collectionLength].id === id) {\n\n                    return this.collection[collectionLength];\n                }\n            }\n\n            return false;\n        }\n    }, {\n        key: 'getOptions',\n        value: function getOptions(id, typeId) {\n\n            var template = findByKey(this.collection, 'id', id);\n\n            if (template) {\n\n                if (typeId) {\n\n                    var type = findByKey(template.types, 'id', typeId);\n\n                    return type && type.hasOwnProperty('fields') ? type.fields : false;\n                }\n\n                return template.hasOwnProperty('fields') ? template.fields : false;\n            }\n\n            return false;\n        }\n    }, {\n        key: 'getTemplateUrl',\n        value: function getTemplateUrl(id, typeId) {\n\n            var template = findByKey(this.collection, 'id', id);\n\n            if (typeId) {\n\n                var type = findByKey(template.types, 'id', typeId);\n\n                return type ? type.templateUrl : false;\n            }\n\n            return template.templateUrl;\n        }\n    }]);\n\n    return Templates;\n}();\n\nexports.default = Templates;\n\n},{}],39:[function(require,module,exports){\n'use strict';\n\nvar _CreateController = require('./controllers/CreateController.js');\n\nvar _CreateController2 = _interopRequireDefault(_CreateController);\n\nvar _EditController = require('./controllers/EditController.js');\n\nvar _EditController2 = _interopRequireDefault(_EditController);\n\nvar _ManageController = require('./controllers/ManageController.js');\n\nvar _ManageController2 = _interopRequireDefault(_ManageController);\n\nvar _TagResource = require('./resource/TagResource.js');\n\nvar _TagResource2 = _interopRequireDefault(_TagResource);\n\nvar _Templates = require('./services/Templates.js');\n\nvar _Templates2 = _interopRequireDefault(_Templates);\n\nvar _TemplatesProvider = require('./providers/TemplatesProvider.js');\n\nvar _TemplatesProvider2 = _interopRequireDefault(_TemplatesProvider);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar MODULE_NAME = 'clearcode.tm.tag';\nvar MODULE_TRIGGER = 'clearcode.tm.trigger';\nvar MODULE_VARIABLE = 'clearcode.tm.variable';\nvar MODULE_DIR = 'app/modules/tag';\n\n_Templates2.default.$inject = [MODULE_NAME + '.$template'];\n\n_TagResource2.default.$inject = ['$http', '$q'];\n\n_ManageController2.default.$inject = ['ngTableParams', '$stateParams', MODULE_NAME + '.tagResource', 'clearcode.tm.alert.alert', 'clearcode.tm.tagContainer.paramConverter', 'clearcode.tm.tagContainer.currentContainer', 'clearcode.tm.pageInfo.pageInfo', '$scope', '$state', '$translate'];\n\n_CreateController2.default.$inject = [MODULE_NAME + '.tagResource', MODULE_TRIGGER + '.triggerResource', MODULE_VARIABLE + '.variableResource', '$state', '$stateParams', 'clearcode.tm.alert.alert', '$scope', 'ngTableParams', 'clearcode.tm.tagContainer.paramConverter', 'clearcode.tm.tagContainer.currentContainer', 'clearcode.tm.pageInfo.pageInfo', MODULE_NAME + '.templatesStorage', '$translate'];\n\n_EditController2.default.$inject = [MODULE_NAME + '.tagResource', MODULE_TRIGGER + '.triggerResource', MODULE_VARIABLE + '.variableResource', '$state', '$stateParams', 'clearcode.tm.alert.alert', '$scope', 'ngTableParams', 'clearcode.tm.tagContainer.paramConverter', 'clearcode.tm.tagContainer.currentContainer', 'clearcode.tm.pageInfo.pageInfo', MODULE_NAME + '.templatesStorage', '$translate'];\n\nmodule.exports = { MODULE_NAME: MODULE_NAME };\nangular.module(MODULE_NAME, ['pascalprecht.translate', 'ui.router', 'ngTable', 'clearcode.tm.alert', 'clearcode.tm.pageInfo', 'clearcode.tm.tagContainer', 'clearcode.tm.trigger', 'ui.codemirror']).config(['$stateProvider', function ($stateProvider) {\n\n    $stateProvider.state('tags', {\n        url: '/containers/{containerId}/tags',\n        controller: MODULE_NAME + '.ManageController as view',\n        templateUrl: MODULE_DIR + '/views/manage.html',\n        data: {\n            roles: ['ROLE_SUPER_ADMIN'],\n            hasContainerList: true\n        }\n    }).state('tagCreate', {\n        url: '/containers/{containerId}/tag-create',\n        controller: MODULE_NAME + '.CreateController as view',\n        templateUrl: MODULE_DIR + '/views/create.html',\n        data: {\n            roles: ['ROLE_SUPER_ADMIN'],\n            hasContainerList: true\n        }\n    }).state('tagEdit', {\n        url: '/containers/{containerId}/tag/edit/{tagId}',\n        controller: MODULE_NAME + '.EditController as view',\n        templateUrl: MODULE_DIR + '/views/edit.html',\n        data: {\n            roles: ['ROLE_SUPER_ADMIN'],\n            hasContainerList: true\n        }\n    });\n}]).run(['clearcode.tm.alert.$alert', function ($alertProvider) {\n\n    $alertProvider.addMessagePattern('trigger.close', 'You are trying to close unsaved trigger.');\n\n    $alertProvider.addMessagePattern('status.change', 'Tag status was changed successfully');\n\n    $alertProvider.addMessagePattern('status.failed', 'Sorry, something went wrong.');\n}]).provider(MODULE_NAME + '.$template', _TemplatesProvider2.default).controller(MODULE_NAME + '.ManageController', _ManageController2.default).controller(MODULE_NAME + '.CreateController', _CreateController2.default).controller(MODULE_NAME + '.EditController', _EditController2.default).service(MODULE_NAME + '.tagResource', _TagResource2.default).service(MODULE_NAME + '.templatesStorage', _Templates2.default);\n\n},{\"./controllers/CreateController.js\":30,\"./controllers/EditController.js\":31,\"./controllers/ManageController.js\":32,\"./providers/TemplatesProvider.js\":36,\"./resource/TagResource.js\":37,\"./services/Templates.js\":38}],40:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @type {$state}\n */\nvar state;\n\n/**\n * @type {Alert}\n */\nvar $alert;\n\n/**\n * @type {String}\n */\nvar BREADCRUMB_TEXT = 'Add a container';\n\n/**\n * @name CreateController\n */\n\nvar CreateController = function () {\n\n    /**\n     * @param {ContainerResource} containerResource\n     * @param {$state} $state\n     * @param {Alert} alert\n     * @param {PageInfo} PageInfo\n     * @param {$translate} $translate\n     */\n\n    function CreateController(containerResource, $state, alert, PageInfo, $translate) {\n        _classCallCheck(this, CreateController);\n\n        this.container = containerResource.getEntityObject();\n\n        state = $state;\n\n        $alert = alert;\n\n        this.translate = $translate;\n\n        this.translate([BREADCRUMB_TEXT]).then(function (translations) {\n\n            PageInfo.clear().add(translations[BREADCRUMB_TEXT]).broadcast();\n        });\n    }\n\n    _createClass(CreateController, [{\n        key: 'submitForm',\n        value: function submitForm(container) {\n\n            this.containerPromise = container.save();\n\n            this.containerPromise.then(function (resp) {\n\n                $alert.success('container.create');\n\n                state.go('containerExplanation', { containerId: resp.id });\n            }, function () {\n\n                $alert.error('error.invalid');\n            });\n        }\n\n        /**\n         * Display error if form is invalid\n         */\n\n    }, {\n        key: 'displayInvalidFormMessage',\n        value: function displayInvalidFormMessage() {\n\n            this.validateContainer = true;\n            $alert.error('error.invalid');\n        }\n    }]);\n\n    return CreateController;\n}();\n\nexports.default = CreateController;\n\n},{}],41:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @type {$state}\n */\nvar state;\n\n/**\n * @type {$stateParams}\n */\nvar stateParams;\n\n/**\n * @type {Alert}\n */\nvar alert;\n\n/**\n * @type {CurrentContainer}\n */\nvar currentContainer;\n\n/**\n * @type {$scope}\n */\nvar scope;\n\n/**\n * @type {String}\n */\nvar BREADCRUMB_TEXT = 'Options';\n\n/**\n * @name EditController\n */\n\nvar EditController = function () {\n\n    /**\n     * @param {ContainerResource} containerResource\n     * @param {$state} $state\n     * @param {$stateParams} $stateParams\n     * @param {Alert} $alert\n     * @param {currentContainer} CurrentContainer\n     * @param {PageInfo} PageInfo\n     * @param {$scope} $scope\n     * @param {$translate} $translate\n     */\n\n    function EditController(containerResource, $state, $stateParams, $alert, CurrentContainer, PageInfo, $scope, $translate) {\n        var _this = this;\n\n        _classCallCheck(this, EditController);\n\n        var self = this;\n\n        state = $state;\n        stateParams = $stateParams;\n        alert = $alert;\n        currentContainer = CurrentContainer;\n        scope = $scope;\n\n        this.pageInfo = PageInfo;\n\n        this.container = containerResource.getEntityObject();\n\n        this.containerPromise = containerResource.get(stateParams.containerId);\n\n        this.containerPromise.then(function (resp) {\n\n            self.container = resp;\n        });\n\n        this.translate = $translate;\n\n        currentContainer.getContainer().then(function () {\n\n            if (currentContainer.$container.hasPermission('noaccess')) {\n\n                state.go('container');\n            }\n\n            _this.refreshBreadcrumb(BREADCRUMB_TEXT, currentContainer.$container);\n        });\n\n        scope.$on('pageInfo.reload', function (event, container) {\n\n            _this.refreshBreadcrumb(BREADCRUMB_TEXT, container);\n        });\n    }\n\n    _createClass(EditController, [{\n        key: 'removeContainer',\n        value: function removeContainer() {\n\n            this.container.remove().then(function () {\n\n                alert.success('success.remove');\n\n                state.go('container');\n            }, function () {\n\n                alert.error('error.remove');\n            });\n        }\n    }, {\n        key: 'submitForm',\n        value: function submitForm(container) {\n            var _this2 = this;\n\n            this.containerPromise = container.save();\n\n            this.containerPromise.then(function (container) {\n\n                _this2.refreshBreadcrumb(BREADCRUMB_TEXT, container);\n\n                currentContainer.get(stateParams.containerId);\n                alert.success('success.edit');\n\n                state.go('containerEdit', { containerId: stateParams.containerId });\n            }, function () {\n\n                alert.error('error.invalid');\n            });\n        }\n\n        /**\n         * Display error if form is invalid\n         */\n\n    }, {\n        key: 'displayInvalidFormMessage',\n        value: function displayInvalidFormMessage() {\n\n            this.validateContainer = true;\n            alert.error('error.invalid');\n        }\n    }, {\n        key: 'refreshBreadcrumb',\n        value: function refreshBreadcrumb(breadcrumbText, container) {\n\n            var pageInfo = this.pageInfo;\n\n            this.translate([breadcrumbText]).then(function (translations) {\n\n                pageInfo.clear().add(container.name, 'tags', {\n                    containerId: container.id\n                }).add(translations[breadcrumbText]).broadcast();\n            });\n        }\n    }]);\n\n    return EditController;\n}();\n\nexports.default = EditController;\n\n},{}],42:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @type {$stateParams}\n */\nvar stateParams;\n\n/**\n * @type {String}\n * @readOnly\n */\nvar PAGE_TITLE = 'Container created successfully';\n\n/**\n * @name ExplanationController\n */\n\nvar ExplanationController =\n\n/**\n * @param {ContainerResource} containerResource\n * @param {$stateParams} $stateParams\n * @param {PageInfo} PageInfo\n * @param {CurrentContainer} CurrentContainer\n * @param {$translate} $translate\n */\nfunction ExplanationController(containerResource, $stateParams, PageInfo, CurrentContainer, $translate) {\n    var _this = this;\n\n    _classCallCheck(this, ExplanationController);\n\n    CurrentContainer.makeChanges();\n\n    this.translate = $translate;\n\n    this.translate([PAGE_TITLE]).then(function (translations) {\n\n        PageInfo.clear().add(translations[PAGE_TITLE]).broadcast();\n    });\n\n    stateParams = $stateParams;\n    this.container = containerResource.getEntityObject();\n\n    this.containerPromise = containerResource.get(stateParams.containerId);\n\n    this.containerPromise.then(function (resp) {\n\n        _this.container = resp;\n    });\n};\n\nexports.default = ExplanationController;\n\n},{}],43:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @type {Alert}\n */\nvar $alert;\n\n/**\n * @name ManageController\n */\n\nvar ManageController = function () {\n\n    /**\n     * @param {ngTableParams} TableParams\n     * @param {ContainerResource} containerResource\n     * @param {Alert} alert\n     * @param paramConverter\n     * @param currentContainer\n     */\n\n    function ManageController(TableParams, containerResource, alert, paramConverter, currentContainer) {\n        _classCallCheck(this, ManageController);\n\n        $alert = alert;\n\n        currentContainer.disableDebugMode();\n\n        this.tableParams = new TableParams({\n            page: 1,\n            count: 10,\n            sorting: {\n                name: 'asc'\n            }\n        }, {\n            total: 0,\n            getData: function getData($defer, params) {\n\n                containerResource.query(paramConverter.list(params.url())).then(function (resp) {\n\n                    params.total(resp.total);\n\n                    $defer.resolve(resp.data);\n                });\n            }\n        });\n    }\n\n    _createClass(ManageController, [{\n        key: 'removeContainer',\n        value: function removeContainer(container) {\n\n            var self = this;\n\n            container.remove().then(function () {\n\n                $alert.success('success.remove');\n\n                if (self.tableParams.data.length === 1) {\n\n                    self.tableParams.page(self.tableParams.page() - 1);\n                }\n\n                self.tableParams.reload();\n            }, function () {\n\n                $alert.error('error.remove');\n\n                self.tableParams.reload();\n            });\n        }\n    }]);\n\n    return ManageController;\n}();\n\nexports.default = ManageController;\n\n},{}],44:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar permissionsResource;\n\nvar currentContainer;\n\nvar alert;\n\n/**\n * @name PermissionsController\n */\n\nvar PermissionsController = function () {\n\n    /**\n     * @param TableParams\n     * @param paramConverter\n     * @param $currentContainer\n     * @param $alert\n     * @param $permissionsResource\n     */\n\n    function PermissionsController(TableParams, paramConverter, $currentContainer, $alert, $permissionsResource) {\n        _classCallCheck(this, PermissionsController);\n\n        this.permissionsPromise = undefined;\n        permissionsResource = $permissionsResource;\n        currentContainer = $currentContainer;\n        alert = $alert;\n\n        this.usersTable = new TableParams({\n            page: 1,\n            count: 10,\n            sorting: {\n                name: 'asc'\n            }\n        }, {\n            total: 0,\n            getData: function getData($defer, params) {\n\n                permissionsResource.query(currentContainer.$container.id, paramConverter.list(params.url())).then(function (resp) {\n\n                    params.total(resp.total);\n                    $defer.resolve(resp.data);\n                });\n            }\n        });\n    }\n\n    _createClass(PermissionsController, [{\n        key: 'setPermission',\n        value: function setPermission(permission, value) {\n\n            var tempRequest = angular.copy(permission);\n\n            tempRequest.permissions = value;\n\n            this.permissionsPromise = tempRequest.save(currentContainer.$container.id);\n\n            this.permissionsPromise.then(function (resp) {\n\n                permission.permissions = resp.permissions;\n            }, function () {\n\n                alert.error('permissions.error');\n            });\n        }\n    }, {\n        key: 'isValid',\n        value: function isValid(permission, value) {\n\n            if (permission.permissions === value || permission.user.roles.indexOf('ROLE_SUPER_ADMIN') !== -1) {\n\n                return false;\n            }\n\n            return true;\n        }\n    }]);\n\n    return PermissionsController;\n}();\n\nexports.default = PermissionsController;\n\n},{}],45:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @name PrivacyController\n */\n\nvar PrivacyController = function PrivacyController(stateParams, containerResource) {\n    var _this = this;\n\n    _classCallCheck(this, PrivacyController);\n\n    this.privacyPromise = containerResource.getPrivacyOptOut(stateParams.containerId).then(function (resp) {\n        _this.code = resp.code;\n    });\n};\n\nexports.default = PrivacyController;\n\n},{}],46:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar containerFactory = function containerFactory(resource) {\n\n  /**\n   * @name Container\n   * @description Container entity\n   */\n\n  var Container = function () {\n    function Container() {\n      _classCallCheck(this, Container);\n\n      /**\n       * @type {number}\n       */\n      this.id = undefined;\n\n      /**\n       * @type {string}\n       */\n      this.name = undefined;\n\n      /**\n       * @type {string}\n       */\n      this.code = undefined;\n\n      /**\n       * @type {Object}\n       */\n      this.version = undefined;\n\n      /**\n       * @type {boolean}\n       */\n      this.hasUnpublishedChanges = undefined;\n\n      /**\n       * @type {string}\n       */\n      this.publishedAt = undefined;\n\n      /**\n       * @type {Array}\n       */\n      this.permissions = undefined;\n\n      /**\n       * @type {number}\n       */\n      this.delay = undefined;\n\n      /**\n       * @type {Array}\n       */\n      this.websites = undefined;\n    }\n\n    /**\n     * @returns {deferred.promise}\n     */\n\n\n    _createClass(Container, [{\n      key: 'save',\n      value: function save() {\n\n        var result = {},\n            promise;\n\n        var excludedProperty = ['id', 'code', 'version', 'hasUnpublishedChanges', 'publishedAt', 'permissions', 'websites'];\n\n        for (var property in this) {\n\n          if (!angular.isFunction(this[property]) && this.hasOwnProperty(property) && excludedProperty.indexOf(property) === -1) {\n\n            result[property] = this[property];\n          }\n        }\n\n        if (this.id === undefined) {\n\n          delete result.delay;\n          promise = resource.post(result);\n        } else {\n\n          promise = resource.put(this.id, result);\n        }\n\n        return promise;\n      }\n\n      /**\n       * @returns {deferred.promise|Boolean}\n       */\n\n    }, {\n      key: 'remove',\n      value: function remove() {\n\n        if (this.id === undefined) {\n\n          return false;\n        }\n\n        return resource.delete(this.id);\n      }\n\n      /**\n       * @param {string}\n       * @returns {Boolean}\n       */\n\n    }, {\n      key: 'hasPermission',\n      value: function hasPermission(permission) {\n\n        return this.permissions.indexOf(permission) !== -1;\n      }\n\n      /**\n       * Get permission\n       */\n\n    }, {\n      key: 'getPermission',\n      value: function getPermission() {\n\n        var permissionsPrioritiedArray = [{\n          value: 'operator',\n          text: 'Owner'\n        }, {\n          value: 'publish',\n          text: 'Publish'\n        }, {\n          value: 'edit',\n          text: 'Edit'\n        }, {\n          value: 'view',\n          text: 'View'\n        }];\n\n        for (var permissionIndex in permissionsPrioritiedArray) {\n\n          if (this.permissions.indexOf(permissionsPrioritiedArray[permissionIndex].value) !== -1) {\n\n            return permissionsPrioritiedArray[permissionIndex].text;\n          }\n        }\n      }\n    }]);\n\n    return Container;\n  }();\n\n  return Container;\n};\n\nexports.default = containerFactory;\n\n},{}],47:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar permissionFactory = function permissionFactory(resource) {\n\n  /**\n   * @name Permission\n   * @description Permission entity\n   */\n\n  var Permission = function () {\n    function Permission() {\n      _classCallCheck(this, Permission);\n\n      /**\n       * @type {Object}\n       */\n      this.user = undefined;\n\n      /**\n       * @type {Array}\n       */\n      this.permissions = undefined;\n    }\n\n    /**\n     * @returns {deferred.promise}\n     */\n\n\n    _createClass(Permission, [{\n      key: \"save\",\n      value: function save(containerId) {\n\n        var result = {},\n            promise;\n\n        result = angular.copy(this);\n\n        result.user = result.user.id;\n\n        promise = resource.put(containerId, result);\n\n        return promise;\n      }\n    }]);\n\n    return Permission;\n  }();\n\n  return Permission;\n};\n\nexports.default = permissionFactory;\n\n},{}],48:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * This program is free software: you can redistribute it and/or modify it under\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * the terms of the GNU Affero General Public License as published by the Free\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Software Foundation, either version 3 of the License, or (at your option) any\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * later version.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * This program is distrubuted in the hope that it will be useful,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * but WITHOUT ANY WARRANTY; without even the implied warranty of\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * GNU Affero General Public License for more details.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * You should have received a copy of the GNU Affero General Public License\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * along with this program. If not, see <http://www.gnu.org/licenses/>.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\n\nvar _Container = require('../entity/Container.js');\n\nvar _Container2 = _interopRequireDefault(_Container);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar transformResponse = function transformResponse(resp) {\n\n    var Container = (0, _Container2.default)(this);\n\n    var container = new Container();\n\n    if (resp !== undefined) {\n\n        container.id = resp.id;\n        container.name = resp.name;\n        container.description = resp.description;\n        container.code = resp.code;\n        container.version = resp.version;\n        container.hasUnpublishedChanges = resp.has_unpublished_changes;\n        container.publishedAt = resp.published_at;\n        container.permissions = resp.permissions;\n        container.delay = resp.delay;\n        container.websites = [];\n\n        for (var i = 0; i < resp.websites.length; i++) {\n\n            var website = this.WebsiteResource.getEntityObject();\n\n            website.url = resp.websites[i].url;\n            website.parameterType = resp.websites[i].parameter_type;\n\n            container.websites.push(website);\n        }\n    }\n\n    return container;\n};\n\nvar appendTransform = function appendTransform(defaults, transform) {\n\n    // We can't guarantee that the default transformation is an array\n    defaults = angular.isArray(defaults) ? defaults : [defaults];\n\n    // Append the new transformation to the defaults\n    return defaults.concat(transform);\n};\n\n/**\n * @name ContainerResource\n *\n * @author Arek Zajc <a.zajac@clearcode.cc>\n */\n\nvar ContainerResource = function () {\n    /**\n     * @param {$http} $http\n     * @param {$q} $q\n     */\n\n    function ContainerResource($http, $q, WebsiteResource) {\n        _classCallCheck(this, ContainerResource);\n\n        this.http = $http;\n        this.q = $q;\n        this.WebsiteResource = WebsiteResource;\n    }\n\n    /**\n     * @returns {Container}\n     */\n\n\n    _createClass(ContainerResource, [{\n        key: 'getEntityObject',\n        value: function getEntityObject() {\n\n            var Container = (0, _Container2.default)(this);\n\n            return new Container();\n        }\n\n        /**\n         * @description Send request to get specific entity\n         *\n         * @param {number} id\n         * @returns {deferred.promise}\n         */\n\n    }, {\n        key: 'get',\n        value: function get(id) {\n            var _this = this;\n\n            var deferred = this.q.defer();\n\n            this.http({\n                method: 'GET',\n                url: '/api/containers/' + id,\n                transformResponse: appendTransform(this.http.defaults.transformResponse, function (resp) {\n\n                    return transformResponse.call(_this, resp.data);\n                })\n            }).success(function (data) {\n\n                deferred.resolve(data);\n            }).error(function () {\n\n                deferred.reject();\n            });\n\n            return deferred.promise;\n        }\n\n        /**\n         * @description Send request to get list of entity\n         *\n         * @param {Object} params\n         *\n         * @returns {deferred.promise}\n         */\n\n    }, {\n        key: 'query',\n        value: function query(params) {\n            var _this2 = this;\n\n            var deferred = this.q.defer();\n\n            this.http({\n                method: 'GET',\n                url: '/api/containers',\n                params: params,\n                transformResponse: appendTransform(this.http.defaults.transformResponse, function (resp) {\n\n                    for (var element in resp.data) {\n\n                        if (resp.data[element] instanceof Object) {\n\n                            resp.data[element] = transformResponse.call(_this2, resp.data[element]);\n                        }\n                    }\n\n                    return resp;\n                })\n            }).success(function (data) {\n\n                deferred.resolve(data);\n            }).error(function (err) {\n\n                deferred.reject(err);\n            });\n\n            return deferred.promise;\n        }\n\n        /**\n         * @description Send request to delete entity\n         *\n         * @param {number} id\n         *\n         * @returns {deferred.promise}\n         */\n\n    }, {\n        key: 'delete',\n        value: function _delete(id) {\n\n            var deferred = this.q.defer();\n\n            this.http({\n                method: 'DELETE',\n                url: '/api/containers/' + id\n            }).success(function (resp) {\n\n                deferred.resolve(resp);\n            }).error(function (err) {\n\n                deferred.reject(err);\n            });\n\n            return deferred.promise;\n        }\n\n        /**\n         * @description Send request to create entity\n         *\n         * @param {object} entity\n         */\n\n    }, {\n        key: 'post',\n        value: function post(entity) {\n            var _this3 = this;\n\n            var deferred = this.q.defer();\n\n            this.http({\n                method: 'POST',\n                url: '/api/containers',\n                data: entity,\n                transformResponse: appendTransform(this.http.defaults.transformResponse, function (resp) {\n\n                    return transformResponse.call(_this3, resp.data);\n                })\n            }).success(function (resp) {\n\n                deferred.resolve(resp);\n            }).error(function (err) {\n\n                deferred.reject(err);\n            });\n\n            return deferred.promise;\n        }\n\n        /**\n         * Send request to update entity\n         *\n         * @param {number} id\n         * @param {object} entity\n         *\n         * @returns {deferred.promise}\n         */\n\n    }, {\n        key: 'put',\n        value: function put(id, entity) {\n            var _this4 = this;\n\n            var deferred = this.q.defer();\n\n            this.http({\n                method: 'PUT',\n                url: '/api/containers/' + id,\n                data: entity,\n                transformResponse: appendTransform(this.http.defaults.transformResponse, function (resp) {\n\n                    return transformResponse.call(_this4, resp.data);\n                })\n            }).success(function (resp) {\n\n                deferred.resolve(resp);\n            }).error(function (err) {\n\n                deferred.reject(err);\n            });\n\n            return deferred.promise;\n        }\n    }, {\n        key: 'publishVersion',\n        value: function publishVersion(id) {\n\n            var deferred = this.q.defer();\n\n            this.http({\n                method: 'POST',\n                url: '/api/containers/' + id + '/version-publish'\n            }).success(function (resp) {\n\n                deferred.resolve(resp);\n            }).error(function (err) {\n\n                deferred.reject(err);\n            });\n\n            return deferred.promise;\n        }\n    }, {\n        key: 'restoreVersion',\n        value: function restoreVersion(id) {\n\n            var deferred = this.q.defer();\n\n            this.http({\n                method: 'POST',\n                url: '/api/containers/' + id + '/version-restore'\n            }).success(function (resp) {\n\n                deferred.resolve(resp);\n            }).error(function (err) {\n\n                deferred.reject(err);\n            });\n\n            return deferred.promise;\n        }\n    }, {\n        key: 'getPrivacyOptOut',\n        value: function getPrivacyOptOut(id) {\n\n            var deferred = this.q.defer();\n\n            this.http({\n                method: 'GET',\n                url: 'containers/' + id + '/privacy'\n            }).success(function (resp) {\n\n                deferred.resolve(resp);\n            }).error(function (err) {\n\n                deferred.reject(err);\n            });\n\n            return deferred.promise;\n        }\n    }]);\n\n    return ContainerResource;\n}();\n\nexports.default = ContainerResource;\n\n},{\"../entity/Container.js\":46}],49:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * This program is free software: you can redistribute it and/or modify it under\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * the terms of the GNU Affero General Public License as published by the Free\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Software Foundation, either version 3 of the License, or (at your option) any\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * later version.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * This program is distrubuted in the hope that it will be useful,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * but WITHOUT ANY WARRANTY; without even the implied warranty of\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * GNU Affero General Public License for more details.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * You should have received a copy of the GNU Affero General Public License\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * along with this program. If not, see <http://www.gnu.org/licenses/>.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\n\nvar _Permission = require('../entity/Permission.js');\n\nvar _Permission2 = _interopRequireDefault(_Permission);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar transformResponse = function transformResponse(resp) {\n\n    var permissionList = ['operator', 'publish', 'edit', 'view', 'noaccess'];\n\n    var Permission = (0, _Permission2.default)(this);\n\n    var permission = new Permission();\n\n    permission.user = resp.user;\n\n    if (resp.permissions instanceof Object) {\n\n        for (var permissionIndex in permissionList) {\n\n            if (resp.permissions.indexOf(permissionList[permissionIndex]) !== -1) {\n\n                permission.permissions = permissionList[permissionIndex];\n                break;\n            }\n        }\n    } else {\n\n        permission.permissions = resp.permissions;\n    }\n\n    return permission;\n};\n\nvar appendTransform = function appendTransform(defaults, transform) {\n\n    // We can't guarantee that the default transformation is an array\n    defaults = angular.isArray(defaults) ? defaults : [defaults];\n\n    // Append the new transformation to the defaults\n    return defaults.concat(transform);\n};\n\n/**\n * @name PermissionResource\n *\n */\n\nvar PermissionResource = function () {\n    /**\n     * @param {$http} $http\n     * @param {$q} $q\n     */\n\n    function PermissionResource($http, $q) {\n        _classCallCheck(this, PermissionResource);\n\n        this.http = $http;\n        this.q = $q;\n    }\n\n    /**\n     * @returns {Permission}\n     */\n\n\n    _createClass(PermissionResource, [{\n        key: 'getEntityObject',\n        value: function getEntityObject() {\n\n            var Permission = (0, _Permission2.default)(this);\n\n            return new Permission();\n        }\n    }, {\n        key: 'query',\n        value: function query(id, params) {\n            var _this = this;\n\n            var deferred = this.q.defer();\n\n            this.http({\n                method: 'GET',\n                url: '/api/containers/' + id + '/permissions',\n                params: params,\n                transformResponse: appendTransform(this.http.defaults.transformResponse, function (resp) {\n\n                    for (var element in resp.data) {\n\n                        if (resp.data[element] instanceof Object) {\n\n                            resp.data[element] = transformResponse.call(_this, resp.data[element]);\n                        }\n                    }\n\n                    return resp;\n                })\n            }).success(function (resp) {\n\n                deferred.resolve(resp);\n            }).error(function (err) {\n\n                deferred.reject(err);\n            });\n\n            return deferred.promise;\n        }\n    }, {\n        key: 'put',\n        value: function put(id, entity) {\n            var _this2 = this;\n\n            var deferred = this.q.defer();\n\n            this.http({\n                method: 'PUT',\n                data: entity,\n                url: 'api/containers/' + id + '/permissions',\n                transformResponse: appendTransform(this.http.defaults.transformResponse, function (resp, header, status) {\n\n                    if (status < 400) {\n\n                        return transformResponse.call(_this2, resp.data);\n                    }\n\n                    return resp;\n                })\n            }).success(function (resp) {\n\n                deferred.resolve(resp);\n            }).error(function (err) {\n\n                deferred.reject(err);\n            });\n\n            return deferred.promise;\n        }\n    }]);\n\n    return PermissionResource;\n}();\n\nexports.default = PermissionResource;\n\n},{\"../entity/Permission.js\":47}],50:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @type {$stateParams}\n */\nvar stateParams;\n\n/**\n * @type {ContainerResource}\n */\nvar $containerResource;\n\n/**\n * @type {Alert}\n */\nvar alert;\n\n/**\n * @type {$state}\n */\nvar state;\n\n/**\n * @type {$rootScope}\n */\nvar rootScope;\n\n/**\n * @type {$cookiesProvider}\n */\nvar cookies;\n\n/**\n * @readonly\n * @type {String}\n */\nvar PREVIEW_KEY = 'preview';\n\n/**\n * @readonly\n * @type {String}\n */\nvar DEBUG_KEY = 'debug';\n\n/**\n * @type {ConditionResource}\n */\nvar conditionResource;\n\n/**\n * Convert params for request\n *\n * @name CurrentContainer\n */\n\nvar CurrentContainer = function () {\n    /**\n     * @param {$stateParams} $stateParams\n     * @param {ContainerResource} containerResource\n     * @param {Alert} $alert\n     * @param {$state} $state\n     * @param {$rootScope} $rootScope\n     * @param {$cookiesProvider} $cookies\n     * @param {ConditionResource} $conditionResource\n     * @param {$translate} $translate\n     */\n\n    function CurrentContainer($stateParams, containerResource, $alert, $state, $rootScope, $cookies, $conditionResource, $translate) {\n        _classCallCheck(this, CurrentContainer);\n\n        stateParams = $stateParams;\n        $containerResource = containerResource;\n        alert = $alert;\n        state = $state;\n        rootScope = $rootScope;\n        this.$container = undefined;\n        cookies = $cookies;\n\n        this.types = undefined;\n        this.debugMode = false;\n        this.previewedContainer = undefined;\n        this.translate = $translate;\n        conditionResource = $conditionResource;\n    }\n\n    /**\n     * @param {number} containerId\n     *\n     * @returns {deferred.promise} promise of get current container\n     */\n\n\n    _createClass(CurrentContainer, [{\n        key: 'get',\n        value: function get(containerId) {\n            var _this = this;\n\n            containerId = this.getId(containerId);\n            rootScope.currentContainerLoading = true;\n\n            this.containerPromise = $containerResource.get(containerId).then(function (resp) {\n\n                _this.$container = resp;\n                rootScope.currentContainerLoading = false;\n\n                _this.verifyDebugMode();\n\n                if (_this.types === undefined) {\n\n                    _this.types = _this.setTypes();\n                }\n\n                return _this.$container;\n            });\n\n            return this.containerPromise;\n        }\n\n        /**\n         * Get id of current container\n         *\n         * @param {number} containerId\n         * @returns {number}\n         */\n\n    }, {\n        key: 'getId',\n        value: function getId(containerId) {\n\n            return containerId !== undefined ? containerId : stateParams.containerId;\n        }\n\n        /**\n         * Get container inside promise\n         */\n\n    }, {\n        key: 'getContainer',\n        value: function getContainer() {\n\n            if (this.containerPromise === undefined) {\n\n                return this.get();\n            } else {\n\n                return this.containerPromise;\n            }\n        }\n\n        /**\n         * Publish current container\n         */\n\n    }, {\n        key: 'publish',\n        value: function publish() {\n\n            var self = this,\n                publishPromise = $containerResource.publishVersion(this.getId());\n\n            rootScope.currentContainerLoading = true;\n\n            return publishPromise.then(function () {\n\n                alert.success('success.publish');\n                self.get();\n                rootScope.currentContainerLoading = false;\n            }, function () {\n\n                alert.error('container.error');\n                rootScope.currentContainerLoading = false;\n            });\n        }\n\n        /**\n         * Check restore ability\n         *\n         * @returns {boolean}\n         */\n\n    }, {\n        key: 'canRestore',\n        value: function canRestore() {\n\n            var container = this.$container;\n\n            if (container) {\n\n                return container.publishedAt && container.hasUnpublishedChanges === true;\n            }\n\n            return false;\n        }\n\n        /**\n         * Check if the container has unpublished changes\n         *\n         * @returns {boolean}\n         */\n\n    }, {\n        key: 'isDirty',\n        value: function isDirty() {\n\n            var container = this.$container;\n\n            return container && container.hasUnpublishedChanges;\n        }\n\n        /**\n         * Check publish status\n         *\n         * @returns {boolean}\n         */\n\n    }, {\n        key: 'isPublished',\n        value: function isPublished() {\n\n            var container = this.$container;\n\n            if (container) {\n\n                return container.publishedAt && container.hasUnpublishedChanges === false;\n            }\n\n            return false;\n        }\n\n        /**\n         * Set Container unpublished changes to true\n         *\n         * @returns {boolean}\n         */\n\n    }, {\n        key: 'makeChanges',\n        value: function makeChanges() {\n\n            var container = this.$container;\n\n            if (container) {\n\n                container.hasUnpublishedChanges = true;\n                return true;\n            }\n        }\n\n        /**\n         * Dischard draft changes to latest published version\n         */\n\n    }, {\n        key: 'restore',\n        value: function restore() {\n\n            var self = this;\n\n            var restorePromise = $containerResource.restoreVersion(this.getId());\n\n            rootScope.currentContainerLoading = true;\n\n            restorePromise.then(function () {\n\n                alert.success('success.restore');\n\n                self.get();\n\n                if (state.includes('tags') || state.includes('tagEdit') || state.includes('tagCreate')) {\n\n                    state.go('tags', { containerId: self.getId() }, { reload: true });\n                } else if (state.includes('triggers') || state.includes('triggerCreate') || state.includes('triggerEdit')) {\n\n                    state.go('triggers', { containerId: self.getId() }, { reload: true });\n                } else {\n\n                    state.go('containerEdit', { containerId: self.getId() }, { reload: true });\n                }\n\n                rootScope.currentContainerLoading = false;\n            }, function () {\n\n                alert.error('container.error');\n            });\n        }\n    }, {\n        key: 'verifyDebugMode',\n        value: function verifyDebugMode() {\n\n            if (this.isDebugModeEnabled()) {\n\n                var cookiesDebug = cookies.get(DEBUG_KEY);\n\n                if (cookiesDebug === this.$container.id) {\n\n                    this.debugMode = true;\n                    this.previewedContainer = this.$container;\n                    var self = this;\n\n                    this.translate(['Now Previewing']).then(function (translations) {\n\n                        self.previewedContainerText = translations['Now Previewing'];\n                    });\n                } else {\n\n                    this.disableDebugMode();\n                }\n            }\n        }\n    }, {\n        key: 'isDebugModeEnabled',\n        value: function isDebugModeEnabled() {\n\n            var cookiesDebug = cookies.get(DEBUG_KEY);\n            var cookiesPreview = cookies.get(PREVIEW_KEY);\n\n            return cookiesDebug !== undefined && cookiesPreview !== undefined && cookiesDebug === cookiesPreview;\n        }\n\n        /**\n         * Set debug mode\n         */\n\n    }, {\n        key: 'enableDebugMode',\n        value: function enableDebugMode() {\n\n            this.debugMode = true;\n            this.previewedContainer = this.$container;\n            var self = this;\n\n            this.translate(['Now Previewing']).then(function (translations) {\n\n                self.previewedContainerText = translations['Now Previewing'];\n            });\n\n            cookies.put(PREVIEW_KEY, this.$container.id);\n            cookies.put(DEBUG_KEY, this.$container.id);\n        }\n\n        /**\n         * Leave debug mode\n         */\n\n    }, {\n        key: 'disableDebugMode',\n        value: function disableDebugMode() {\n\n            this.debugMode = false;\n            this.previewedContainer = undefined;\n\n            cookies.remove(PREVIEW_KEY);\n            cookies.remove(DEBUG_KEY);\n        }\n    }, {\n        key: 'setTypes',\n        value: function setTypes() {\n\n            return conditionResource.query(this.getId()).then(function (resp) {\n\n                var respIndex = resp.length,\n                    mapped = [];\n\n                while (respIndex--) {\n\n                    mapped[respIndex] = {\n                        name: resp[respIndex].name,\n                        type: resp[respIndex].type\n                    };\n                }\n\n                return mapped;\n            });\n        }\n    }, {\n        key: 'hasPermission',\n        value: function hasPermission(permission) {\n\n            return this.getContainer().then(function (container) {\n\n                return container.hasPermission(permission);\n            });\n        }\n    }]);\n\n    return CurrentContainer;\n}();\n\nexports.default = CurrentContainer;\n\n},{}],51:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * Convert params for request\n *\n * @name ParamConverter\n */\n\nvar ParamConverter = function () {\n  function ParamConverter() {\n    _classCallCheck(this, ParamConverter);\n  }\n\n  _createClass(ParamConverter, [{\n    key: \"list\",\n\n    /**\n     * Convert list resource parameters\n     *\n     * @param {Object} params\n     * @returns {{limit: (number), offset: number}}\n     */\n    value: function list(params) {\n\n      return {\n        limit: params.count,\n        offset: (params.page - 1) * params.count\n      };\n    }\n  }]);\n\n  return ParamConverter;\n}();\n\nexports.default = ParamConverter;\n\n},{}],52:[function(require,module,exports){\n'use strict';\n\nvar _ManageController = require('./controllers/ManageController.js');\n\nvar _ManageController2 = _interopRequireDefault(_ManageController);\n\nvar _CreateController = require('./controllers/CreateController.js');\n\nvar _CreateController2 = _interopRequireDefault(_CreateController);\n\nvar _EditController = require('./controllers/EditController.js');\n\nvar _EditController2 = _interopRequireDefault(_EditController);\n\nvar _ExplanationController = require('./controllers/ExplanationController.js');\n\nvar _ExplanationController2 = _interopRequireDefault(_ExplanationController);\n\nvar _PermissionsController = require('./controllers/PermissionsController.js');\n\nvar _PermissionsController2 = _interopRequireDefault(_PermissionsController);\n\nvar _PrivacyController = require('./controllers/PrivacyController.js');\n\nvar _PrivacyController2 = _interopRequireDefault(_PrivacyController);\n\nvar _ContainerResource = require('./resource/ContainerResource.js');\n\nvar _ContainerResource2 = _interopRequireDefault(_ContainerResource);\n\nvar _PermissionResource = require('./resource/PermissionResource.js');\n\nvar _PermissionResource2 = _interopRequireDefault(_PermissionResource);\n\nvar _ParamConverter = require('./service/ParamConverter.js');\n\nvar _ParamConverter2 = _interopRequireDefault(_ParamConverter);\n\nvar _CurrentContainer = require('./service/CurrentContainer.js');\n\nvar _CurrentContainer2 = _interopRequireDefault(_CurrentContainer);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar MODULE_NAME = 'clearcode.tm.tagContainer';\nvar DEBUG_MODULE_NAME = 'clearcode.tm.debug';\nvar MODULE_DIR = 'app/modules/tagContainer';\n\n_ContainerResource2.default.$inject = ['$http', '$q', DEBUG_MODULE_NAME + '.websiteResource'];\n\n_PermissionResource2.default.$inject = ['$http', '$q'];\n\n_CurrentContainer2.default.$inject = ['$stateParams', MODULE_NAME + '.containerResource', 'clearcode.tm.alert.alert', '$state', '$rootScope', '$cookieStore', 'clearcode.tm.condition.conditionResource', '$translate'];\n\n_ManageController2.default.$inject = ['ngTableParams', MODULE_NAME + '.containerResource', 'clearcode.tm.alert.alert', MODULE_NAME + '.paramConverter', 'clearcode.tm.tagContainer.currentContainer'];\n\n_CreateController2.default.$inject = [MODULE_NAME + '.containerResource', '$state', 'clearcode.tm.alert.alert', 'clearcode.tm.pageInfo.pageInfo', '$translate'];\n\n_EditController2.default.$inject = [MODULE_NAME + '.containerResource', '$state', '$stateParams', 'clearcode.tm.alert.alert', 'clearcode.tm.tagContainer.currentContainer', 'clearcode.tm.pageInfo.pageInfo', '$scope', '$translate'];\n\n_ExplanationController2.default.$inject = [MODULE_NAME + '.containerResource', '$stateParams', 'clearcode.tm.pageInfo.pageInfo', 'clearcode.tm.tagContainer.currentContainer', '$translate'];\n\n_PermissionsController2.default.$inject = ['ngTableParams', MODULE_NAME + '.paramConverter', MODULE_NAME + '.currentContainer', 'clearcode.tm.alert.alert', MODULE_NAME + '.permissionResource'];\n\n_PrivacyController2.default.$inject = ['$stateParams', MODULE_NAME + '.containerResource'];\n\nangular.module(MODULE_NAME, ['pascalprecht.translate', 'ui.router', 'ngTable', 'ngCookies', 'clearcode.tm.condition', 'clearcode.tm.alert', 'clearcode.tm.pageInfo', 'clearcode.tm.user', DEBUG_MODULE_NAME]).run(['$rootScope', MODULE_NAME + '.currentContainer', '$stateParams', 'clearcode.tm.alert.$alert', function ($rootScope, currentContainer, $stateParams, $alertProvider) {\n\n    $rootScope.currentContainerLoading = true;\n    $rootScope.currentContainer = currentContainer;\n\n    var loadContainer = function loadContainer(containerId) {\n\n        if (containerId !== $stateParams.containerId) {\n\n            var currentContainerPromise = currentContainer.get(containerId);\n\n            currentContainerPromise.then(function (container) {\n\n                $rootScope.$broadcast('pageInfo.reload', container);\n            });\n        }\n    };\n\n    $rootScope.$on('$stateChangeStart', function (event, toState, toParams) {\n\n        loadContainer(toParams.containerId);\n    });\n\n    $alertProvider.addMessagePattern('success.restore', 'Well done! Action completed successfully.');\n\n    $alertProvider.addMessagePattern('container.create', 'Container has been created successfully.');\n\n    $alertProvider.addMessagePattern('container.error', 'Sorry, something went wrong.');\n\n    $alertProvider.addMessagePattern('success.publish', 'Container has been published! Changes are now live!');\n\n    $alertProvider.addMessagePattern('permissions.error', 'Permissions can not be changed.');\n}]).config(['$stateProvider', function ($stateProvider) {\n\n    $stateProvider.state('container', {\n        url: '/containers',\n        controller: MODULE_NAME + '.ManageController as view',\n        templateUrl: MODULE_DIR + '/views/manage.html',\n        data: {\n            roles: ['ROLE_SUPER_ADMIN'],\n            hasContainerList: false,\n            permission: ['view']\n        }\n    }).state('containerCreate', {\n        url: '/containers-create',\n        controller: MODULE_NAME + '.CreateController as view',\n        templateUrl: MODULE_DIR + '/views/create.html',\n        data: {\n            roles: ['ROLE_SUPER_ADMIN'],\n            hasContainerList: false,\n            permission: ['edit']\n        }\n    }).state('containerExplanation', {\n        url: '/containers-explanation/{containerId}',\n        controller: MODULE_NAME + '.ExplanationController as view',\n        templateUrl: MODULE_DIR + '/views/explanation.html',\n        data: {\n            roles: ['ROLE_SUPER_ADMIN'],\n            hasContainerList: true,\n            permission: ['owner']\n        }\n    }).state('containerEdit', {\n        url: '/containers-edit/{containerId}',\n        controller: MODULE_NAME + '.EditController as view',\n        templateUrl: MODULE_DIR + '/views/options.html',\n        data: {\n            roles: ['ROLE_SUPER_ADMIN'],\n            hasContainerList: true,\n            permission: ['edit']\n        }\n    });\n}]).controller(MODULE_NAME + '.ManageController', _ManageController2.default).controller(MODULE_NAME + '.CreateController', _CreateController2.default).controller(MODULE_NAME + '.EditController', _EditController2.default).controller(MODULE_NAME + '.ExplanationController', _ExplanationController2.default).controller(MODULE_NAME + '.PermissionsController', _PermissionsController2.default).controller(MODULE_NAME + '.PrivacyController', _PrivacyController2.default).service(MODULE_NAME + '.containerResource', _ContainerResource2.default).service(MODULE_NAME + '.permissionResource', _PermissionResource2.default).service(MODULE_NAME + '.paramConverter', _ParamConverter2.default).service(MODULE_NAME + '.currentContainer', _CurrentContainer2.default);\n\nmodule.exports = { MODULE_NAME: MODULE_NAME };\n\n},{\"./controllers/CreateController.js\":40,\"./controllers/EditController.js\":41,\"./controllers/ExplanationController.js\":42,\"./controllers/ManageController.js\":43,\"./controllers/PermissionsController.js\":44,\"./controllers/PrivacyController.js\":45,\"./resource/ContainerResource.js\":48,\"./resource/PermissionResource.js\":49,\"./service/CurrentContainer.js\":50,\"./service/ParamConverter.js\":51}],53:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @name BaseController\n */\n\nvar BaseController = function () {\n    /**\n     * @param {$scope} $scope\n     * @param $triggerResource\n     * @param $conditionResource\n     * @param {$stateParams} $stateParams\n     * @param {$state} $state\n     * @param {Alert} $alert\n     * @param {CurrentContainer} CurrentContainer\n     * @param {Condition} $condition\n     * @param {PageInfo} $PageInfo\n     * @param {$translate} $translate\n     */\n\n    function BaseController($scope, $triggerResource, $conditionResource, $stateParams, $state, $alert, CurrentContainer, $condition, $PageInfo, $translate) {\n        var _this = this;\n\n        _classCallCheck(this, BaseController);\n\n        var BREADCRUMB_GLOBAL = 'Triggers';\n\n        this.required = undefined;\n        this.variables = undefined;\n        this.actions = undefined;\n\n        this.triggerPromise = undefined;\n\n        this.triggerResource = $triggerResource;\n        this.conditionResource = $conditionResource;\n\n        this.scope = $scope;\n        this.stateParams = $stateParams;\n        this.state = $state;\n        this.alert = $alert;\n        this.currentContainer = CurrentContainer;\n        this.Condition = $condition;\n        this.PageInfo = $PageInfo;\n\n        this.typesArrayPromise = $condition.getArrayOfTypes();\n\n        this.trigger = $triggerResource.getEntityObject();\n        this.condition = $conditionResource.getEntityObject();\n        this.translate = $translate;\n\n        $scope.$on('pageInfo.reload', function (event, args) {\n\n            _this.translate([_this.getBreadcrumbText(), BREADCRUMB_GLOBAL]).then(function (translations) {\n\n                $PageInfo.clear().add(args.name, 'tags', {\n                    containerId: args.id\n                }).add(translations[BREADCRUMB_GLOBAL], 'triggers', {\n                    containerId: args.id\n                }).add(translations[_this.getBreadcrumbText()]).broadcast();\n            });\n        });\n    }\n\n    /**\n     * Set type of trigger\n     *\n     * @param {Number} type\n     */\n\n\n    _createClass(BaseController, [{\n        key: 'setType',\n        value: function setType(type) {\n            var _this2 = this;\n\n            if (this.typesArray[type] !== undefined) {\n\n                this.trigger.type = type;\n                this.trigger.conditions = [];\n\n                this.Condition.getVariables(type).then(function (resp) {\n\n                    _this2.variables = resp;\n                });\n                this.Condition.getActions(type).then(function (resp) {\n\n                    _this2.actions = resp;\n                });\n                this.Condition.getRequired(type).then(function (resp) {\n\n                    _this2.required = resp;\n                    var requiredIndex = _this2.required.length;\n\n                    while (requiredIndex--) {\n\n                        _this2.trigger.conditions.push({\n                            variable: _this2.required[requiredIndex].name,\n                            condition: _this2.actions[0].type,\n                            value: ''\n                        });\n                    }\n                });\n            } else {\n\n                throw new Error('Invalid type');\n            }\n        }\n\n        /**\n         * Method to create new trigger condition\n         */\n\n    }, {\n        key: 'addCondition',\n        value: function addCondition() {\n\n            this.condition = this.conditionResource.getEntityObject();\n\n            this.condition.variable = this.variables[0].name;\n            this.condition.condition = this.actions[0].type;\n\n            this.trigger.addCondition(this.condition);\n        }\n\n        /**\n         * Method to validate trigger\n         *\n         * @param {Object} form\n         * @returns {Boolean}\n         */\n\n    }, {\n        key: 'validateTrigger',\n        value: function validateTrigger(form) {\n\n            this.scope[form.$name].$setPristine();\n\n            var conditionLength = this.trigger.conditions.length;\n\n            if (this.scope[form.$name].name.$valid) {\n\n                if (conditionLength !== 0) {\n\n                    while (conditionLength--) {\n\n                        if (this.scope[form.$name]['conditionValue[' + conditionLength + ']'].$invalid) {\n\n                            return false;\n                        }\n                    }\n                }\n\n                return true;\n            } else {\n\n                return false;\n            }\n        }\n\n        /**\n         * Check if variable is required\n         * @param {Object} variable\n         */\n\n    }, {\n        key: 'isTypeRequired',\n        value: function isTypeRequired(variable) {\n\n            return this.required !== undefined && this.required.map(function (element) {\n                return element.name;\n            }).indexOf(variable) !== -1;\n        }\n\n        /**\n         * @param  {object} variable\n         * @return {string}\n         */\n\n    }, {\n        key: 'getVariableName',\n        value: function getVariableName(variable) {\n\n            var variablesIndex = this.variables.map(function (element) {\n                return element.name;\n            }).indexOf(variable);\n\n            if (variablesIndex === -1) {\n\n                variablesIndex = this.required.map(function (element) {\n                    return element.name;\n                }).indexOf(variable);\n\n                return variablesIndex !== -1 ? this.required[variablesIndex].name : false;\n            } else {\n\n                return this.variables[variablesIndex].name;\n            }\n        }\n\n        /**\n         * @param  {string} conditionName\n         * @return {string}\n         */\n\n    }, {\n        key: 'getConditionName',\n        value: function getConditionName(conditionName) {\n\n            var conditionsIndex = this.actions.map(function (element) {\n                return element.name;\n            }).indexOf(conditionName);\n\n            return conditionsIndex !== -1 ? this.actions[conditionsIndex].name : false;\n        }\n\n        /**\n         * Function for refreshing breadcrumb and closing add trigger panel\n         * @return {Boolean}\n         */\n\n    }, {\n        key: 'leaveFormInsideTag',\n        value: function leaveFormInsideTag() {\n            var _this3 = this;\n\n            this.translate([this.getBreadcrumbText()]).then(function (translations) {\n\n                _this3.PageInfo.clear().add(_this3.currentContainer.$container.name, 'tags', {\n                    containerId: _this3.currentContainer.$container.id\n                }).add(translations[_this3.getBreadcrumbText()]).broadcast();\n            });\n\n            return false;\n        }\n\n        /**\n         * Handle form submit action\n         *\n         * @param {Trigger} trigger\n         */\n\n    }, {\n        key: 'submitForm',\n        value: function submitForm(trigger) {\n            var _this4 = this;\n\n            this.triggerPromise = trigger.save(this.stateParams.containerId);\n\n            this.triggerPromise.then(function () {\n\n                _this4.currentContainer.makeChanges();\n                _this4.alert.success(_this4.getAlertType());\n\n                _this4.state.go('triggers', {\n                    containerId: _this4.stateParams.containerId\n                });\n            }, function () {\n\n                _this4.alert.error('error.invalid');\n            });\n        }\n\n        /**\n         * Display error if form is invalid\n         */\n\n    }, {\n        key: 'displayInvalidFormMessage',\n        value: function displayInvalidFormMessage(view) {\n\n            view.validateTriggers = true;\n            this.alert.error('error.invalid');\n        }\n    }]);\n\n    return BaseController;\n}();\n\nexports.default = BaseController;\n\n},{}],54:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _BaseController2 = require('./BaseController.js');\n\nvar _BaseController3 = _interopRequireDefault(_BaseController2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This program is free software: you can redistribute it and/or modify it under\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * the terms of the GNU Affero General Public License as published by the Free\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Software Foundation, either version 3 of the License, or (at your option) any\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * later version.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This program is distrubuted in the hope that it will be useful,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * but WITHOUT ANY WARRANTY; without even the implied warranty of\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * GNU Affero General Public License for more details.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * You should have received a copy of the GNU Affero General Public License\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * along with this program. If not, see <http://www.gnu.org/licenses/>.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar BREADCRUMB_GLOBAL = 'Triggers';\n\n/**\n * @name CreateController\n */\n\nvar CreateController = function (_BaseController) {\n    _inherits(CreateController, _BaseController);\n\n    /**\n     * @param {$scope} $scope\n     * @param $triggerResource\n     * @param $conditionResource\n     * @param {$stateParams} $stateParams\n     * @param {$state} $state\n     * @param {Alert} $alert\n     * @param {CurrentContainer} CurrentContainer\n     * @param {Condition} $condition\n     * @param {PageInfo} PageInfo\n     * @param {$translate} $translate\n     */\n\n    function CreateController($scope, $triggerResource, $conditionResource, $stateParams, $state, $alert, CurrentContainer, $condition, PageInfo, $translate) {\n        _classCallCheck(this, CreateController);\n\n        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(CreateController).call(this, $scope, $triggerResource, $conditionResource, $stateParams, $state, $alert, CurrentContainer, $condition, PageInfo, $translate));\n\n        _this.typesArrayPromise.then(function (resp) {\n\n            _this.typesArray = resp;\n            _this.setType(0);\n        });\n\n        CurrentContainer.getContainer().then(function () {\n\n            if (!CurrentContainer.$container.hasPermission('edit')) {\n\n                $state.go('triggers', { containerId: $stateParams.containerId });\n            }\n\n            _this.translate([_this.getBreadcrumbText(), BREADCRUMB_GLOBAL]).then(function (translations) {\n\n                PageInfo.clear().add(CurrentContainer.$container.name, 'tags', {\n                    containerId: CurrentContainer.$container.id\n                }).add(translations[BREADCRUMB_GLOBAL], 'triggers', {\n                    containerId: CurrentContainer.$container.id\n                }).add(translations[_this.getBreadcrumbText()]).broadcast();\n            });\n        });\n\n        return _this;\n    }\n\n    /**\n     * Get breadcrumb text\n     *\n     */\n\n\n    _createClass(CreateController, [{\n        key: 'getBreadcrumbText',\n        value: function getBreadcrumbText() {\n\n            return 'Add a new trigger';\n        }\n\n        /**\n         * Get alert type\n         *\n         */\n\n    }, {\n        key: 'getAlertType',\n        value: function getAlertType() {\n\n            return 'success.create';\n        }\n\n        /**\n         * Add trigger into specific tag\n         *\n         * @param {Object} form\n         * @param {Trigger} trigger\n         */\n\n    }, {\n        key: 'addTrigger',\n        value: function addTrigger(form, trigger) {\n            var _this2 = this;\n\n            this.triggerPromise = trigger.save(this.stateParams.containerId);\n\n            this.triggerPromise.then(function (resp) {\n\n                _this2.scope[form.$name].$setPristine();\n                _this2.trigger = _this2.triggerResource.getEntityObject();\n                _this2.scope.$emit('trigger.add', resp);\n            }, function () {\n                // TODO: handle wrong response\n            });\n        }\n    }]);\n\n    return CreateController;\n}(_BaseController3.default);\n\nexports.default = CreateController;\n\n},{\"./BaseController.js\":53}],55:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _BaseController2 = require('./BaseController.js');\n\nvar _BaseController3 = _interopRequireDefault(_BaseController2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This program is free software: you can redistribute it and/or modify it under\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * the terms of the GNU Affero General Public License as published by the Free\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Software Foundation, either version 3 of the License, or (at your option) any\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * later version.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This program is distrubuted in the hope that it will be useful,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * but WITHOUT ANY WARRANTY; without even the implied warranty of\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * GNU Affero General Public License for more details.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * You should have received a copy of the GNU Affero General Public License\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * along with this program. If not, see <http://www.gnu.org/licenses/>.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar BREADCRUMB_GLOBAL = 'Triggers';\n\n/**\n * @name EditController\n */\n\nvar EditController = function (_BaseController) {\n    _inherits(EditController, _BaseController);\n\n    /**\n     * @param {$scope} $scope\n     * @param $triggerResource\n     * @param $conditionResource\n     * @param {$stateParams} $stateParams\n     * @param {$state} $state\n     * @param $alert\n     * @param {CurrentContainer} CurrentContainer\n     * @param {$condition} $condition\n     * @param {PageInfo} PageInfo\n     * @param {$translate} $translate\n     */\n\n    function EditController($scope, $triggerResource, $conditionResource, $stateParams, $state, $alert, CurrentContainer, $condition, PageInfo, $translate) {\n        _classCallCheck(this, EditController);\n\n        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(EditController).call(this, $scope, $triggerResource, $conditionResource, $stateParams, $state, $alert, CurrentContainer, $condition, PageInfo, $translate));\n\n        _this.triggerPromise = $triggerResource.get($stateParams.triggerId);\n\n        _this.triggerPromise.then(function (triggerResp) {\n\n            _this.trigger = triggerResp;\n\n            _this.typesArrayPromise.then(function (typesResp) {\n\n                _this.typesArray = typesResp;\n\n                _this.Condition.getVariables(_this.trigger.type).then(function (resp) {\n\n                    _this.variables = resp;\n                });\n                _this.Condition.getActions(_this.trigger.type).then(function (resp) {\n\n                    _this.actions = resp;\n                });\n                _this.Condition.getRequired(_this.trigger.type).then(function (resp) {\n\n                    _this.required = resp;\n                });\n            });\n        });\n\n        _this.currentContainer.getContainer().then(function () {\n\n            if (_this.currentContainer.$container.hasPermission('noaccess')) {\n\n                _this.state.go('container');\n            }\n\n            _this.translate([_this.getBreadcrumbText(), BREADCRUMB_GLOBAL]).then(function (translations) {\n\n                PageInfo.clear().add(_this.currentContainer.$container.name, 'tags', {\n                    containerId: _this.currentContainer.$container.id\n                }).add(translations[BREADCRUMB_GLOBAL], 'triggers', {\n                    containerId: _this.currentContainer.$container.id\n                }).add(translations[_this.getBreadcrumbText()]).broadcast();\n            });\n        });\n\n        return _this;\n    }\n\n    /**\n     * Get breadcrumb text\n     *\n     */\n\n\n    _createClass(EditController, [{\n        key: 'getBreadcrumbText',\n        value: function getBreadcrumbText() {\n\n            return 'Configure trigger';\n        }\n\n        /**\n         * Get alert type\n         *\n         */\n\n    }, {\n        key: 'getAlertType',\n        value: function getAlertType() {\n\n            return 'success.edit';\n        }\n    }]);\n\n    return EditController;\n}(_BaseController3.default);\n\nexports.default = EditController;\n\n},{\"./BaseController.js\":53}],56:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _BaseController2 = require('./BaseController.js');\n\nvar _BaseController3 = _interopRequireDefault(_BaseController2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This program is free software: you can redistribute it and/or modify it under\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * the terms of the GNU Affero General Public License as published by the Free\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Software Foundation, either version 3 of the License, or (at your option) any\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * later version.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This program is distrubuted in the hope that it will be useful,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * but WITHOUT ANY WARRANTY; without even the implied warranty of\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * GNU Affero General Public License for more details.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * You should have received a copy of the GNU Affero General Public License\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * along with this program. If not, see <http://www.gnu.org/licenses/>.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n/**\n * @name EditController\n */\n\nvar EditController = function (_BaseController) {\n    _inherits(EditController, _BaseController);\n\n    /**\n     * @param {$scope} $scope\n     * @param {TriggerResource} $triggerResource\n     * @param {ConditionResource} $conditionResource\n     * @param {$stateParams} $stateParams\n     * @param {}$alert} Alert\n     * @param {CurrentContainer} CurrentContainer\n     * @param {$condition} $condition\n     * @param {PageInfo} PageInfo\n     * @param {$translate} $translate\n     */\n\n    function EditController($scope, $triggerResource, $conditionResource, $stateParams, $alert, CurrentContainer, $condition, PageInfo, $translate) {\n        _classCallCheck(this, EditController);\n\n        return _possibleConstructorReturn(this, Object.getPrototypeOf(EditController).call(this, $scope, $triggerResource, $conditionResource, $stateParams, null, $alert, CurrentContainer, $condition, PageInfo, $translate));\n    }\n\n    /**\n     * @desc Init trigger\n     * @param {number} triggerId\n     */\n\n\n    _createClass(EditController, [{\n        key: 'initTrigger',\n        value: function initTrigger(triggerId) {\n            var _this2 = this;\n\n            this.triggerPromise = this.triggerResource.get(triggerId);\n\n            this.triggerPromise.then(function (triggerResp) {\n\n                _this2.trigger = triggerResp;\n\n                _this2.typesArrayPromise.then(function (typesResp) {\n\n                    _this2.typesArray = typesResp;\n\n                    _this2.Condition.getVariables(_this2.trigger.type).then(function (resp) {\n\n                        _this2.variables = resp;\n                    });\n\n                    _this2.Condition.getActions(_this2.trigger.type).then(function (resp) {\n\n                        _this2.actions = resp;\n                    });\n\n                    _this2.Condition.getRequired(_this2.trigger.type).then(function (resp) {\n\n                        _this2.required = resp;\n                    });\n                });\n            });\n        }\n\n        /**\n         * Get breadcrumb text\n         *\n         */\n\n    }, {\n        key: 'getBreadcrumbText',\n        value: function getBreadcrumbText() {\n\n            return 'Configure trigger';\n        }\n\n        /**\n         * Get alert type\n         *\n         */\n\n    }, {\n        key: 'getAlertType',\n        value: function getAlertType() {\n\n            return 'success.edit';\n        }\n\n        /**\n         * Handle form submit action\n         * @param {Trigger} trigger\n         */\n\n    }, {\n        key: 'submitForm',\n        value: function submitForm(trigger) {\n            var _this3 = this;\n\n            this.triggerPromise = trigger.save(this.stateParams.containerId);\n\n            this.triggerPromise.then(function (resp) {\n\n                _this3.currentContainer.makeChanges();\n                _this3.alert.success('trigger.edit');\n                _this3.scope.$emit('trigger.edit', resp);\n            }, function () {\n\n                _this3.alert.error('error.invalid');\n            });\n        }\n    }]);\n\n    return EditController;\n}(_BaseController3.default);\n\nexports.default = EditController;\n\n},{\"./BaseController.js\":53}],57:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @type {Alert}\n */\nvar alert;\n\n/**\n * @type {TriggerResource}\n */\nvar triggerResource;\n\n/**\n * @type {$stateParams}\n */\nvar stateParams;\n\n/**\n * @type {CurrentContainer}\n */\nvar currentContainer;\n\n/**\n * @type {$scope}\n */\nvar scope;\n\n/**\n * @type {Condition}\n */\nvar condition;\n\n/**\n * @type {String}\n */\nvar BREADCRUMB_TEXT = 'Triggers';\n\n/**\n * @name ManageController\n */\n\nvar ManageController = function () {\n    /**\n     * @param {ngTableParams} TableParams\n     * @param {$stateParams} $stateParams\n     * @param {TriggerResource} $triggerResource\n     * @param {Alert} $alert\n     * @param {ParamConverter} $paramConverter\n     * @param {CurrentContainer} CurrentContainer\n     * @param {PageInfo} PageInfo\n     * @param {$scope} $scope\n     * @param {$condition} $condition\n     * @param {state} state\n     * @param {$translate} $translate\n     */\n\n    function ManageController(TableParams, $stateParams, $triggerResource, $alert, $paramConverter, CurrentContainer, PageInfo, $scope, $condition, state, $translate) {\n        var _this = this;\n\n        _classCallCheck(this, ManageController);\n\n        alert = $alert;\n        stateParams = $stateParams;\n        triggerResource = $triggerResource;\n        currentContainer = CurrentContainer;\n        scope = $scope;\n        condition = $condition;\n\n        this.typesArrayPromise = condition.getArrayOfTypes();\n\n        this.typesArrayPromise.then(function (resp) {\n\n            _this.typesArray = resp;\n        });\n\n        this.translate = $translate;\n\n        this.containerId = stateParams.containerId;\n        this.tableParams = new TableParams({\n            page: 1,\n            count: 10,\n            sorting: {\n                name: 'asc'\n            }\n        }, {\n            total: 0,\n            getData: function getData($defer, params) {\n\n                triggerResource.query(stateParams.containerId, $paramConverter.list(params.url())).then(function (resp) {\n\n                    params.total(resp.total);\n\n                    $defer.resolve(resp.data);\n                });\n            }\n        });\n\n        currentContainer.getContainer().then(function () {\n\n            if (!currentContainer.$container.hasPermission('view')) {\n\n                state.go('container');\n            }\n\n            _this.translate([BREADCRUMB_TEXT]).then(function (translations) {\n\n                PageInfo.clear().add(currentContainer.$container.name, 'tags', {\n                    containerId: currentContainer.$container.id\n                }).add(translations[BREADCRUMB_TEXT]).broadcast();\n            });\n        });\n\n        scope.$on('pageInfo.reload', function (event, args) {\n\n            _this.translate([BREADCRUMB_TEXT]).then(function (translations) {\n\n                PageInfo.clear().add(args.name, 'tags', {\n                    containerId: args.id\n                }).add(translations[BREADCRUMB_TEXT]).broadcast();\n            });\n        });\n    }\n\n    _createClass(ManageController, [{\n        key: 'removeTrigger',\n        value: function removeTrigger(trigger) {\n\n            var self = this;\n\n            trigger.remove().then(function () {\n\n                alert.success('success.remove');\n                currentContainer.makeChanges();\n\n                if (self.tableParams.data.length === 1 && self.tableParams.page() > 1) {\n\n                    self.tableParams.page(self.tableParams.page() - 1);\n                } else {\n\n                    self.tableParams.reload();\n                }\n            }, function () {\n\n                alert.error('error.remove');\n\n                self.tableParams.reload();\n            });\n        }\n    }]);\n\n    return ManageController;\n}();\n\nexports.default = ManageController;\n\n},{}],58:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar triggerFactory = function triggerFactory(resource) {\n\n    /**\n     * @name Trigger\n     * @description Trigger entity\n     */\n\n    var Trigger = function () {\n        function Trigger() {\n            _classCallCheck(this, Trigger);\n\n            /**\n             * @type {number}\n             */\n            this.id = undefined;\n\n            /**\n             * @type {string}\n             */\n            this.name = undefined;\n\n            /**\n             * @type {Number}\n             */\n            this.type = 0;\n\n            /**\n            * @type {Array}\n            */\n            this.conditions = [];\n\n            /**\n             * @type {number}\n             */\n            this.tagsCount = undefined;\n\n            /**\n             * @type {string}\n             */\n            this.updatedAt = undefined;\n        }\n\n        /**\n         * @param {Condition} condition\n         */\n\n\n        _createClass(Trigger, [{\n            key: 'addCondition',\n            value: function addCondition(condition) {\n\n                this.conditions.push(condition);\n            }\n\n            /**\n             * @param {number} index\n             */\n\n        }, {\n            key: 'removeCondition',\n            value: function removeCondition(index) {\n\n                this.conditions.splice(index, 1);\n            }\n\n            /**\n             * @param {number} containerId\n             *\n             * @returns {deferred.promise}\n             */\n\n        }, {\n            key: 'save',\n            value: function save(containerId) {\n                var result = {},\n                    promise;\n\n                var excludedProperty = ['id', 'updatedAt', 'createdAt', 'tagsCount'];\n\n                for (var property in this) {\n\n                    if (!angular.isFunction(this[property]) && this.hasOwnProperty(property) && excludedProperty.indexOf(property) === -1) {\n\n                        if (property === 'conditions') {\n\n                            var collection = [];\n\n                            for (var index in this[property]) {\n\n                                if (this[property][index] instanceof Object) {\n\n                                    collection.push({\n                                        variable: this[property][index].variable,\n                                        condition: this[property][index].condition,\n                                        value: this[property][index].value\n                                    });\n                                }\n                            }\n\n                            result[property] = collection;\n                        } else {\n\n                            result[property] = this[property];\n                        }\n                    }\n                }\n\n                if (this.id === undefined) {\n\n                    promise = resource.post(containerId, result);\n                } else {\n\n                    promise = resource.put(this.id, result);\n                }\n\n                return promise;\n            }\n\n            /**\n             * @returns {deferred.promise|Boolean}\n             */\n\n        }, {\n            key: 'remove',\n            value: function remove() {\n\n                if (this.id === undefined) {\n\n                    return false;\n                }\n\n                return resource.delete(this.id);\n            }\n        }]);\n\n        return Trigger;\n    }();\n\n    return Trigger;\n};\n\nexports.default = triggerFactory;\n\n},{}],59:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * This program is free software: you can redistribute it and/or modify it under\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * the terms of the GNU Affero General Public License as published by the Free\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Software Foundation, either version 3 of the License, or (at your option) any\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * later version.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * This program is distrubuted in the hope that it will be useful,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * but WITHOUT ANY WARRANTY; without even the implied warranty of\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * GNU Affero General Public License for more details.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * You should have received a copy of the GNU Affero General Public License\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * along with this program. If not, see <http://www.gnu.org/licenses/>.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\n\nvar _Trigger = require('../entity/Trigger.js');\n\nvar _Trigger2 = _interopRequireDefault(_Trigger);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar transformResponse = function transformResponse(resp) {\n\n    var Trigger = (0, _Trigger2.default)(this);\n\n    var trigger = new Trigger();\n\n    if (resp !== undefined) {\n\n        trigger.id = resp.id;\n        trigger.name = resp.name;\n        trigger.type = resp.type;\n        trigger.conditions = resp.conditions;\n        trigger.tagsCount = resp.tags_count;\n        trigger.updatedAt = resp.updated_at;\n    }\n\n    return trigger;\n};\n\nvar appendTransform = function appendTransform(defaults, transform) {\n\n    // We can't guarantee that the default transformation is an array\n    defaults = angular.isArray(defaults) ? defaults : [defaults];\n\n    // Append the new transformation to the defaults\n    return defaults.concat(transform);\n};\n\n/**\n * @name TriggerResource\n */\n\nvar TriggerResource = function () {\n    /**\n     * @param {$q} $q\n     * @param {$http} $http\n     */\n\n    function TriggerResource($http, $q) {\n        _classCallCheck(this, TriggerResource);\n\n        this.http = $http;\n        this.q = $q;\n    }\n\n    /**\n     * @returns {Trigger}\n     */\n\n\n    _createClass(TriggerResource, [{\n        key: 'getEntityObject',\n        value: function getEntityObject() {\n\n            var Trigger = (0, _Trigger2.default)(this);\n\n            return new Trigger();\n        }\n\n        /**\n         * @description Send request to get specific entity\n         *\n         * @param {number} id\n         *\n         * @returns {deferred.promise}\n         */\n\n    }, {\n        key: 'get',\n        value: function get(id) {\n            var _this = this;\n\n            var deferred = this.q.defer();\n\n            this.http({\n                method: 'GET',\n                url: '/api/triggers/' + id,\n                transformResponse: appendTransform(this.http.defaults.transformResponse, function (resp, header, status) {\n\n                    if (status < 400) {\n\n                        return transformResponse.call(_this, resp.data);\n                    } else {\n\n                        return resp;\n                    }\n                })\n            }).success(function (resp) {\n\n                deferred.resolve(resp);\n            }).error(function (err) {\n\n                deferred.reject(err);\n            });\n\n            return deferred.promise;\n        }\n\n        /**\n         * @description Send request to get list of entity\n         *\n         * @param {number} containerId\n         * @param {Array} params\n         *\n         * @returns {deferred.promise}\n         */\n\n    }, {\n        key: 'query',\n        value: function query(containerId, params) {\n            var _this2 = this;\n\n            var deferred = this.q.defer();\n\n            this.http({\n                method: 'GET',\n                url: '/api/containers/' + containerId + '/triggers',\n                params: params,\n                transformResponse: appendTransform(this.http.defaults.transformResponse, function (resp) {\n\n                    for (var element in resp.data) {\n\n                        if (resp.data[element] instanceof Object) {\n\n                            resp.data[element] = transformResponse.call(_this2, resp.data[element]);\n                        }\n                    }\n\n                    return resp;\n                })\n            }).success(function (resp) {\n\n                deferred.resolve(resp);\n            }).error(function (err) {\n\n                deferred.reject(err);\n            });\n\n            return deferred.promise;\n        }\n\n        /**\n         * @description Send request to delete entity\n         *\n         * @param {number} id\n         *\n         * @returns {deferred.promise}\n         */\n\n    }, {\n        key: 'delete',\n        value: function _delete(id) {\n\n            var deferred = this.q.defer();\n\n            this.http({\n                method: 'DELETE',\n                url: '/api/triggers/' + id\n            }).success(function (data) {\n\n                deferred.resolve(data);\n            }).error(function (err) {\n\n                deferred.reject(err);\n            });\n\n            return deferred.promise;\n        }\n\n        /**\n         * @description Send request to create entity\n         *\n         * @param {number} containerId\n         * @param {object} entity\n         *\n         * @returns {deferred.promise}\n         */\n\n    }, {\n        key: 'post',\n        value: function post(containerId, entity) {\n            var _this3 = this;\n\n            var deferred = this.q.defer();\n\n            this.http({\n                method: 'POST',\n                url: '/api/containers/' + containerId + '/triggers',\n                data: entity,\n                transformResponse: appendTransform(this.http.defaults.transformResponse, function (resp, header, status) {\n\n                    if (status < 400) {\n\n                        return transformResponse.call(_this3, resp.data);\n                    } else {\n\n                        return resp;\n                    }\n                })\n            }).success(function (data) {\n\n                deferred.resolve(data);\n            }).error(function (err) {\n\n                deferred.reject(err);\n            });\n\n            return deferred.promise;\n        }\n\n        /**\n         * Send request to update entity\n         *\n         * @param {number} id\n         * @param {object} entity\n         *\n         * @returns {deferred.promise}\n         */\n\n    }, {\n        key: 'put',\n        value: function put(id, entity) {\n            var _this4 = this;\n\n            var deferred = this.q.defer();\n\n            this.http({\n                method: 'PUT',\n                url: '/api/triggers/' + id,\n                data: entity,\n                transformResponse: appendTransform(this.http.defaults.transformResponse, function (resp, header, status) {\n\n                    if (status < 400) {\n\n                        return transformResponse.call(_this4, resp.data);\n                    } else {\n\n                        return resp;\n                    }\n                })\n            }).success(function (resp) {\n\n                deferred.resolve(resp);\n            }).error(function (err) {\n\n                deferred.reject(err);\n            });\n\n            return deferred.promise;\n        }\n    }]);\n\n    return TriggerResource;\n}();\n\nexports.default = TriggerResource;\n\n},{\"../entity/Trigger.js\":58}],60:[function(require,module,exports){\n'use strict';\n\nvar _CreateController = require('./controllers/CreateController.js');\n\nvar _CreateController2 = _interopRequireDefault(_CreateController);\n\nvar _EditController = require('./controllers/EditController.js');\n\nvar _EditController2 = _interopRequireDefault(_EditController);\n\nvar _ManageController = require('./controllers/ManageController.js');\n\nvar _ManageController2 = _interopRequireDefault(_ManageController);\n\nvar _EditInsideTagController = require('./controllers/EditInsideTagController.js');\n\nvar _EditInsideTagController2 = _interopRequireDefault(_EditInsideTagController);\n\nvar _TriggerResource = require('./resource/TriggerResource.js');\n\nvar _TriggerResource2 = _interopRequireDefault(_TriggerResource);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar MODULE_NAME = 'clearcode.tm.trigger'; /**\n                                           * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n                                           *\n                                           * This program is free software: you can redistribute it and/or modify it under\n                                           * the terms of the GNU Affero General Public License as published by the Free\n                                           * Software Foundation, either version 3 of the License, or (at your option) any\n                                           * later version.\n                                           *\n                                           * This program is distrubuted in the hope that it will be useful,\n                                           * but WITHOUT ANY WARRANTY; without even the implied warranty of\n                                           * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n                                           * GNU Affero General Public License for more details.\n                                           *\n                                           * You should have received a copy of the GNU Affero General Public License\n                                           * along with this program. If not, see <http://www.gnu.org/licenses/>.\n                                           */\n\nvar CONDITION_MODULE_NAME = 'clearcode.tm.condition';\nvar MODULE_DIR = '/app/modules/trigger';\n\n_ManageController2.default.$inject = ['ngTableParams', '$stateParams', MODULE_NAME + '.triggerResource', 'clearcode.tm.alert.alert', 'clearcode.tm.tagContainer.paramConverter', 'clearcode.tm.tagContainer.currentContainer', 'clearcode.tm.pageInfo.pageInfo', '$scope', 'clearcode.tm.condition.condition', '$state', '$translate'];\n\n_CreateController2.default.$inject = ['$scope', MODULE_NAME + '.triggerResource', CONDITION_MODULE_NAME + '.conditionResource', '$stateParams', '$state', 'clearcode.tm.alert.alert', 'clearcode.tm.tagContainer.currentContainer', 'clearcode.tm.condition.condition', 'clearcode.tm.pageInfo.pageInfo', '$translate'];\n\n_EditController2.default.$inject = ['$scope', MODULE_NAME + '.triggerResource', CONDITION_MODULE_NAME + '.conditionResource', '$stateParams', '$state', 'clearcode.tm.alert.alert', 'clearcode.tm.tagContainer.currentContainer', 'clearcode.tm.condition.condition', 'clearcode.tm.pageInfo.pageInfo', '$translate'];\n\n_EditInsideTagController2.default.$inject = ['$scope', MODULE_NAME + '.triggerResource', CONDITION_MODULE_NAME + '.conditionResource', '$stateParams', 'clearcode.tm.alert.alert', 'clearcode.tm.tagContainer.currentContainer', 'clearcode.tm.condition.condition', 'clearcode.tm.pageInfo.pageInfo', '$translate'];\n\n_TriggerResource2.default.$inject = ['$http', '$q'];\n\nangular.module(MODULE_NAME, ['pascalprecht.translate', 'ui.router', 'ngTable', 'clearcode.tm.alert', 'clearcode.tm.pageInfo', 'clearcode.tm.tagContainer', 'clearcode.tm.condition']).config(['$stateProvider', function ($stateProvider) {\n\n    $stateProvider.state('triggers', {\n        url: '/containers/{containerId}/triggers',\n        controller: MODULE_NAME + '.ManageController as view',\n        templateUrl: MODULE_DIR + '/views/manage.html',\n        data: {\n            roles: ['ROLE_SUPER_ADMIN'],\n            hasContainerList: true\n        }\n    }).state('triggerCreate', {\n        url: '/containers/{containerId}/trigger-create',\n        controller: MODULE_NAME + '.CreateController as triggerForm',\n        templateUrl: MODULE_DIR + '/views/create.html',\n        data: {\n            roles: ['ROLE_SUPER_ADMIN'],\n            hasContainerList: true\n        }\n    }).state('triggerEdit', {\n        url: '/containers/{containerId}/trigger/edit/{triggerId}',\n        controller: MODULE_NAME + '.EditController as triggerForm',\n        templateUrl: MODULE_DIR + '/views/edit.html',\n        data: {\n            roles: ['ROLE_SUPER_ADMIN'],\n            hasContainerList: true\n        }\n    });\n}]).run(['clearcode.tm.alert.$alert', function ($alertProvider) {\n\n    $alertProvider.addMessagePattern('trigger.create', 'Trigger has been created successfully.');\n    $alertProvider.addMessagePattern('trigger.edit', 'Trigger has been updated successfully.');\n}]).controller(MODULE_NAME + '.CreateController', _CreateController2.default).controller(MODULE_NAME + '.EditController', _EditController2.default).controller(MODULE_NAME + '.ManageController', _ManageController2.default).controller(MODULE_NAME + '.EditInsideTagController', _EditInsideTagController2.default).service(MODULE_NAME + '.triggerResource', _TriggerResource2.default);\n\nmodule.exports = { MODULE_NAME: MODULE_NAME };\n\n},{\"./controllers/CreateController.js\":54,\"./controllers/EditController.js\":55,\"./controllers/EditInsideTagController.js\":56,\"./controllers/ManageController.js\":57,\"./resource/TriggerResource.js\":59}],61:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @type {UpdateResource}\n */\nvar updateResource = undefined;\n\n/**\n * @type {$window}\n */\nvar window = undefined;\n\n/**\n * @name update#VersionController\n */\n\nvar VersionController = function () {\n\n  /**\n   * @param {UpdateResource} $updateResource\n   * @param {$window} $window\n   * @param {Version} version\n   */\n\n  function VersionController($updateResource, $window, version) {\n    _classCallCheck(this, VersionController);\n\n    updateResource = $updateResource;\n    window = $window;\n    this.version = version;\n  }\n\n  _createClass(VersionController, [{\n    key: \"updateAvailable\",\n    value: function updateAvailable() {\n\n      return this.version.latest !== undefined && !this.version.isUpToDate();\n    }\n  }, {\n    key: \"startUpdate\",\n    value: function startUpdate() {\n\n      updateResource.setSession().then(function (resp) {\n\n        window.location.href = resp.url;\n      });\n    }\n  }]);\n\n  return VersionController;\n}();\n\nexports.default = VersionController;\n\n},{}],62:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @name SetVersionDirective\n */\n\nvar setVersionDirective = function setVersionDirective(version, updateResource) {\n\n    return {\n        restrict: 'A',\n        scope: {\n            stgVersion: '@'\n        },\n        link: function link(scope) {\n\n            version.current = scope.stgVersion;\n\n            if (version.latest === undefined) {\n\n                updateResource.getLatest(version.current).then(function (resp) {\n\n                    version.latest = resp.version;\n                });\n            }\n        }\n    };\n};\n\nexports.default = setVersionDirective;\n\n},{}],63:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @name UpdateResource\n */\n\nvar UpdateResource = function () {\n    /**\n     * @param {$q} $q\n     * @param {$http} $http\n     * @param {$location} $location\n     */\n\n    function UpdateResource($http, $q, $location) {\n        _classCallCheck(this, UpdateResource);\n\n        this.http = $http;\n        this.q = $q;\n        this.location = $location;\n    }\n\n    /**\n     * @description Send request to set session for current user\n     *\n     * @returns {deferred.promise}\n     */\n\n\n    _createClass(UpdateResource, [{\n        key: 'setSession',\n        value: function setSession() {\n\n            var deferred = this.q.defer();\n\n            this.http({\n                method: 'GET',\n                url: 'admin-tools/update'\n            }).success(function (resp) {\n\n                deferred.resolve(resp);\n            }).error(function (err) {\n\n                deferred.reject(err);\n            });\n\n            return deferred.promise;\n        }\n\n        /**\n         * @description Send request to get latest version of application\n         *\n         * @returns {deferred.promise}\n         */\n\n    }, {\n        key: 'getLatest',\n        value: function getLatest(version) {\n\n            var deferred = this.q.defer();\n            var domain = this.location.host();\n\n            this.http({\n                method: 'GET',\n                url: '//download.7tag.org/version.json',\n                params: {\n                    version: version,\n                    domain: domain\n                },\n                headers: {\n                    'Access-Control-Request-Headers': undefined\n                }\n            }).success(function (resp) {\n\n                deferred.resolve(resp);\n            }).error(function (err) {\n\n                deferred.reject(err);\n            });\n\n            return deferred.promise;\n        }\n    }]);\n\n    return UpdateResource;\n}();\n\nexports.default = UpdateResource;\n\n},{}],64:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @name update#Version\n */\n\nvar Version = function () {\n    function Version() {\n        _classCallCheck(this, Version);\n\n        this.current = undefined;\n        this.latest = undefined;\n    }\n\n    _createClass(Version, [{\n        key: \"isUpToDate\",\n        value: function isUpToDate() {\n\n            return this.current !== undefined && this.current === this.latest;\n        }\n    }]);\n\n    return Version;\n}();\n\nexports.default = Version;\n\n},{}],65:[function(require,module,exports){\n'use strict';\n\nvar _VersionController = require('./controllers/VersionController.js');\n\nvar _VersionController2 = _interopRequireDefault(_VersionController);\n\nvar _UpdateResource = require('./resources/UpdateResource.js');\n\nvar _UpdateResource2 = _interopRequireDefault(_UpdateResource);\n\nvar _Version = require('./services/Version.js');\n\nvar _Version2 = _interopRequireDefault(_Version);\n\nvar _setVersionDirective = require('./directives/setVersionDirective.js');\n\nvar _setVersionDirective2 = _interopRequireDefault(_setVersionDirective);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar MODULE_NAME = 'clearcode.tm.update';\n\n_VersionController2.default.$inject = [MODULE_NAME + '.updateResource', '$window', MODULE_NAME + '.version'];\n\n_UpdateResource2.default.$inject = ['$http', '$q', '$location'];\n\n_setVersionDirective2.default.$inject = [MODULE_NAME + '.version', 'clearcode.tm.update.updateResource'];\n\n_Version2.default.$inject = ['$rootScope'];\n\nangular.module(MODULE_NAME, []).controller(MODULE_NAME + '.VersionController', _VersionController2.default).service(MODULE_NAME + '.updateResource', _UpdateResource2.default).service(MODULE_NAME + '.version', _Version2.default).directive('stgSetVersion', _setVersionDirective2.default);\n\nmodule.exports = { MODULE_NAME: MODULE_NAME };\n\n},{\"./controllers/VersionController.js\":61,\"./directives/setVersionDirective.js\":62,\"./resources/UpdateResource.js\":63,\"./services/Version.js\":64}],66:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @name BaseController\n */\n\nvar BaseController = function () {\n\n    /**\n     * @param {UserResource} userResource\n     * @param {Alert} alert\n     * @param {PageInfo} PageInfo\n     * @param {$state} state\n     * @param {$translate} $translate\n     * @param {RefreshAlert} refreshAlert\n     */\n\n    function BaseController(userResource, alert, PageInfo, state, $translate, refreshAlert) {\n        _classCallCheck(this, BaseController);\n\n        /**\n         * @type {String}\n         */\n        var BREADCRUMB_SECTION = 'My account';\n\n        this.ACTIVATION_SET_PASSWORD = 'ACTIVATION_SET_PASSWORD';\n\n        this.ROLE_API = 'ROLE_API';\n        this.ROLE_USER = 'ROLE_USER';\n        this.ROLE_SUPER_ADMIN = 'ROLE_SUPER_ADMIN';\n        this.ROLE_CONTAINERS_CREATE = 'ROLE_CONTAINERS_CREATE';\n\n        this.alert = alert;\n        this.state = state;\n        this.userResource = userResource;\n\n        this.userPromise = undefined;\n\n        this.user = userResource.getEntity();\n\n        $translate([BREADCRUMB_SECTION]).then(function (translations) {\n\n            PageInfo.clear().add(translations[BREADCRUMB_SECTION]).broadcast();\n        });\n\n        refreshAlert.success('LANGUAGE_CHANGE_MESSAGE', 'user.change_language');\n    }\n\n    _createClass(BaseController, [{\n        key: 'displayRoleSectionForUser',\n        value: function displayRoleSectionForUser() {\n            return !this.state.includes('editProfile');\n        }\n    }, {\n        key: 'displayPasswordSection',\n        value: function displayPasswordSection() {\n            if (!this.activation) {\n                return false;\n            }\n\n            return this.activation === this.ACTIVATION_SET_PASSWORD;\n        }\n    }, {\n        key: 'setUser',\n        value: function setUser(id) {\n            var _this = this;\n\n            if (this.state.includes('editProfile')) {\n\n                this.userPromise = this.userResource.getMe();\n            } else {\n\n                this.role = undefined;\n                this.createContainerRole = undefined;\n                this.userPromise = this.userResource.get(id);\n            }\n\n            this.userPromise.then(function (resp) {\n\n                _this.user = resp;\n                _this.role = _this.getUserRole();\n\n                _this.createContainerRole = _this.user.roles.indexOf(_this.ROLE_CONTAINERS_CREATE) !== -1;\n            });\n        }\n    }, {\n        key: 'getUserRole',\n        value: function getUserRole() {\n            if (this.user.hasRole(this.ROLE_SUPER_ADMIN)) {\n                return this.ROLE_SUPER_ADMIN;\n            }\n\n            if (this.user.hasRole(this.ROLE_API)) {\n                return this.ROLE_API;\n            }\n\n            return this.ROLE_USER;\n        }\n    }, {\n        key: 'setRole',\n        value: function setRole(role) {\n\n            var roleIndex = this.user.roles.indexOf(role);\n\n            if (roleIndex !== -1) {\n\n                this.user.roles.splice(roleIndex, 1);\n                return false;\n            } else {\n\n                this.user.roles.push(role);\n                return true;\n            }\n        }\n    }, {\n        key: 'submitForm',\n        value: function submitForm(user) {\n            var _this2 = this;\n\n            if (this.state.includes('editProfile')) {\n\n                this.userPromise = user.saveMe();\n            } else {\n\n                user.roles = [this.role];\n\n                if (this.role === this.ROLE_USER && this.createContainerRole) {\n\n                    user.roles.push(this.ROLE_CONTAINERS_CREATE);\n                }\n\n                this.userPromise = user.save();\n            }\n\n            this.userPromise.then(function () {\n\n                _this2.alert.success('user.save');\n\n                if (!_this2.state.includes('editProfile')) {\n\n                    _this2.state.go('users');\n                }\n            }, function () {\n\n                _this2.alert.error('user.invalid');\n            });\n        }\n\n        /**\n         * Display error if form is invalid\n         */\n\n    }, {\n        key: 'displayInvalidFormMessage',\n        value: function displayInvalidFormMessage() {\n\n            this.alert.error('error.invalid');\n        }\n    }]);\n\n    return BaseController;\n}();\n\nexports.default = BaseController;\n\n},{}],67:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar BREADCRUMB_SECTION = 'My account';\n\nvar userResource = undefined;\nvar alert = undefined;\nvar state = undefined;\nvar scope = undefined;\nvar translate = undefined;\n\nvar ChangePasswordController = function () {\n    function ChangePasswordController($userResource, $alert, $state, PageInfo, $scope, $translate) {\n        _classCallCheck(this, ChangePasswordController);\n\n        userResource = $userResource;\n        alert = $alert;\n        state = $state;\n        scope = $scope;\n        translate = $translate;\n        this.validationForce = false;\n        this.changePasswordPromise = undefined;\n        this.translate = $translate;\n        this.currentPassword = '';\n        this.plainPassword = {\n            first: '',\n            second: ''\n        };\n\n        translate([BREADCRUMB_SECTION]).then(function (translations) {\n\n            PageInfo.clear().add(translations[BREADCRUMB_SECTION]).broadcast();\n        });\n    }\n\n    /**\n     * @param {String} currentPassword\n     * @param {Object} newPassword\n     */\n\n\n    _createClass(ChangePasswordController, [{\n        key: 'submitForm',\n        value: function submitForm(currentPassword, newPassword) {\n\n            var data = {\n                /* eslint-disable */\n                current_password: currentPassword,\n                /* eslint-enable */\n                'plainPassword': newPassword\n            };\n\n            this.changePasswordPromise = userResource.changePassword(data);\n\n            this.changePasswordPromise.then(function () {\n\n                alert.success('password.change');\n                state.go('container');\n            }, function () {\n\n                alert.error('error.invalid');\n            });\n        }\n\n        /**\n         * Display error if form is invalid\n         */\n\n    }, {\n        key: 'displayInvalidFormMessage',\n        value: function displayInvalidFormMessage(newPassword) {\n\n            this.validationForce = true;\n\n            if (newPassword.first !== newPassword.second) {\n\n                scope.changePasswordForm.first.$invalid = true;\n                scope.changePasswordForm.second.$invalid = true;\n\n                translate(['Passwords have to be identical']).then(function (translations) {\n\n                    scope.changePasswordForm.first.$error.first = [translations['Passwords have to be identical']];\n                });\n\n                scope.changePasswordForm.second.$error.second = [];\n\n                alert.error('error.invalid');\n            } else if (newPassword.first === undefined || newPassword.second === undefined) {\n\n                alert.error('password.both');\n            } else {\n\n                alert.error('error.invalid');\n            }\n        }\n    }]);\n\n    return ChangePasswordController;\n}();\n\nexports.default = ChangePasswordController;\n\n},{}],68:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _BaseController2 = require('./BaseController.js');\n\nvar _BaseController3 = _interopRequireDefault(_BaseController2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This program is free software: you can redistribute it and/or modify it under\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * the terms of the GNU Affero General Public License as published by the Free\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Software Foundation, either version 3 of the License, or (at your option) any\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * later version.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This program is distrubuted in the hope that it will be useful,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * but WITHOUT ANY WARRANTY; without even the implied warranty of\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * GNU Affero General Public License for more details.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * You should have received a copy of the GNU Affero General Public License\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * along with this program. If not, see <http://www.gnu.org/licenses/>.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n/**\n * @type {String}\n */\nvar BREADCRUMB_TEXT = 'Add a user';\n\n/**\n * @type {String}\n */\nvar BREADCRUMB_GLOBAL = 'Users';\n/**\n * @type {String}\n */\nvar ACTIVATION_EMAIL = 'ACTIVATION_EMAIL';\n\n/**\n * @type {String}\n */\nvar ACTIVATION_SET_PASSWORD = 'ACTIVATION_SET_PASSWORD';\n\n/**\n * @type {String}\n */\nvar ROLE_USER = 'ROLE_USER';\n\nvar scope = undefined;\nvar translate = undefined;\n\n/**\n * @name CreateController\n */\n\nvar CreateController = function (_BaseController) {\n    _inherits(CreateController, _BaseController);\n\n    /**\n     * @param {UserResource} userResource\n     * @param {Alert} alert\n     * @param {PageInfo} PageInfo\n     * @param {$state} state\n     * @param {$scope} $scope\n     * @param {$translate} $translate\n     * @param {RefreshAlert} RefreshAlert\n     */\n\n    function CreateController(userResource, alert, PageInfo, state, $scope, $translate, RefreshAlert) {\n        _classCallCheck(this, CreateController);\n\n        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(CreateController).call(this, userResource, alert, PageInfo, state, $translate, RefreshAlert));\n\n        scope = $scope;\n        translate = $translate;\n\n        _this.activation = ACTIVATION_EMAIL;\n        _this.role = ROLE_USER;\n\n        _this.password = {\n            first: '',\n            second: ''\n        };\n\n        translate([BREADCRUMB_TEXT, BREADCRUMB_GLOBAL]).then(function (translations) {\n\n            PageInfo.clear().add(translations[BREADCRUMB_GLOBAL], 'users').add(translations[BREADCRUMB_TEXT]).broadcast();\n        });\n\n        return _this;\n    }\n\n    /**\n     * Display error if form is invalid\n     */\n\n\n    _createClass(CreateController, [{\n        key: 'createUserFormValidation',\n        value: function createUserFormValidation() {\n\n            var isValid = false;\n\n            scope.createUserForm.first.$dirty = true;\n            scope.createUserForm.second.$dirty = true;\n\n            if (this.password.first !== this.password.second) {\n\n                scope.createUserForm.first.$invalid = true;\n                scope.createUserForm.second.$invalid = true;\n\n                translate(['Passwords have to be identical']).then(function (translations) {\n\n                    scope.createUserForm.first.$error.first = [translations['Passwords have to be identical']];\n                });\n\n                scope.createUserForm.second.$error.second = [];\n\n                isValid = false;\n            } else if (this.password.first.length < 8 || this.password.second.length < 8) {\n\n                scope.createUserForm.first.$invalid = true;\n                scope.createUserForm.second.$invalid = true;\n\n                translate(['Password needs to have minimum 8 characters']).then(function (translations) {\n\n                    scope.createUserForm.first.$error.first = [translations['Password needs to have minimum 8 characters']];\n                });\n\n                scope.createUserForm.second.$error.second = [];\n\n                isValid = false;\n            } else if (this.activation === ACTIVATION_SET_PASSWORD) {\n                isValid = true;\n            }\n\n            if (!scope.createUserForm.$valid) {\n                isValid = false;\n            }\n\n            if (scope.createUserForm.$valid && this.activation === ACTIVATION_EMAIL) {\n                isValid = true;\n            }\n\n            if (!isValid) {\n                this.alert.error('user.invalid');\n            }\n\n            return isValid;\n        }\n    }, {\n        key: 'submitForm',\n        value: function submitForm(user) {\n            var _this2 = this;\n\n            user.roles = [this.role];\n\n            if (this.role === this.ROLE_USER && this.createContainerRole) {\n\n                user.roles.push(this.ROLE_CONTAINERS_CREATE);\n            }\n\n            if (this.activation === ACTIVATION_SET_PASSWORD) {\n\n                user.plainPassword = this.password;\n            }\n\n            this.userPromise = user.save();\n\n            this.userPromise.then(function () {\n\n                _this2.alert.success('user.save');\n                _this2.state.go('users');\n            }, function () {\n\n                _this2.alert.error('user.invalid');\n            });\n        }\n    }]);\n\n    return CreateController;\n}(_BaseController3.default);\n\nexports.default = CreateController;\n\n},{\"./BaseController.js\":66}],69:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _BaseController2 = require('./BaseController.js');\n\nvar _BaseController3 = _interopRequireDefault(_BaseController2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This program is free software: you can redistribute it and/or modify it under\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * the terms of the GNU Affero General Public License as published by the Free\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Software Foundation, either version 3 of the License, or (at your option) any\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * later version.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This program is distrubuted in the hope that it will be useful,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * but WITHOUT ANY WARRANTY; without even the implied warranty of\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * GNU Affero General Public License for more details.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * You should have received a copy of the GNU Affero General Public License\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * along with this program. If not, see <http://www.gnu.org/licenses/>.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n/**\n * @type {String}\n */\nvar BREADCRUMB_TEXT = 'Edit user';\n\n/**\n * @type {String}\n */\nvar BREADCRUMB_GLOBAL = 'Users';\n\nvar scope = undefined;\nvar state = undefined;\nvar translate = undefined;\n\n/**\n * @name EditController\n */\n\nvar EditController = function (_BaseController) {\n    _inherits(EditController, _BaseController);\n\n    /**\n     * @param {UserResource} userResource\n     * @param {stateParams} stateParams\n     * @param {Alert} alert\n     * @param {PageInfo} PageInfo\n     * @param {$state} $state\n     * @param {$scope} $scope\n     * @param {$translate} $translate\n     * @param {refreshAlert} refreshAlert\n     * @param {security} security\n     */\n\n    function EditController(userResource, stateParams, alert, PageInfo, $state, $scope, $translate, refreshAlert, security) {\n        _classCallCheck(this, EditController);\n\n        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(EditController).call(this, userResource, alert, PageInfo, $state, $translate, refreshAlert));\n\n        scope = $scope;\n        state = $state;\n        translate = $translate;\n        _this.security = security;\n\n        if (state.includes('editProfile')) {\n\n            _this.setUser();\n        } else {\n\n            _this.activation = _this.ACTIVATION_SET_PASSWORD;\n\n            _this.password = {\n                first: '',\n                second: ''\n            };\n\n            _this.setUser(stateParams.userId);\n\n            translate([BREADCRUMB_TEXT, BREADCRUMB_GLOBAL]).then(function (translations) {\n\n                PageInfo.clear().add(translations[BREADCRUMB_GLOBAL], 'users').add(translations[BREADCRUMB_TEXT]).broadcast();\n            });\n        }\n\n        return _this;\n    }\n\n    /**\n     * Display error if form is invalid\n     */\n\n\n    _createClass(EditController, [{\n        key: 'editUserFormValidation',\n        value: function editUserFormValidation() {\n\n            scope.editUserForm.first.$dirty = true;\n            scope.editUserForm.second.$dirty = true;\n\n            if (this.password.first === '' && this.password.second === '') {\n\n                return true;\n            }\n\n            if (this.password.first !== this.password.second) {\n\n                scope.editUserForm.first.$invalid = true;\n                scope.editUserForm.second.$invalid = true;\n\n                translate(['Passwords have to be identical']).then(function (translations) {\n\n                    scope.editUserForm.first.$error.first = [translations['Passwords have to be identical']];\n                });\n\n                scope.editUserForm.second.$error.second = [];\n\n                return false;\n            } else if (this.password.first.length < 8 || this.password.second.length < 8) {\n\n                scope.editUserForm.first.$invalid = true;\n                scope.editUserForm.second.$invalid = true;\n\n                translate(['Password needs to have minimum 8 characters']).then(function (translations) {\n\n                    scope.editUserForm.first.$error.first = [translations['Password needs to have minimum 8 characters']];\n                });\n\n                scope.editUserForm.second.$error.second = [];\n\n                return false;\n            }\n\n            if (scope.editUserForm.$valid) {\n\n                return true;\n            } else {\n\n                return false;\n            }\n        }\n    }, {\n        key: 'submitForm',\n        value: function submitForm(user) {\n            var _this2 = this;\n\n            user.roles = [this.role];\n\n            if (this.role === this.ROLE_USER && this.createContainerRole) {\n\n                user.roles.push(this.ROLE_CONTAINERS_CREATE);\n            }\n\n            if (this.hasOwnProperty('password')) {\n\n                if (this.password.first !== '') {\n\n                    user.plainPassword = this.password;\n                }\n            }\n\n            if (state.includes('editProfile')) {\n\n                this.userPromise = user.saveMe();\n            } else {\n\n                this.userPromise = user.save();\n            }\n\n            this.userPromise.then(function () {\n                _this2.security.getUser(true);\n                _this2.alert.success('user.save');\n                _this2.state.go('container');\n            }, function () {\n\n                _this2.alert.error('user.invalid');\n            });\n        }\n    }]);\n\n    return EditController;\n}(_BaseController3.default);\n\nexports.default = EditController;\n\n},{\"./BaseController.js\":66}],70:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @type {Alert}\n */\nvar $alert;\n\n/**\n * @type {UserResource}\n */\nvar $userResource;\n\n/**\n * @type {String}\n */\nvar BREADCRUMB_TEXT = 'Users';\n\n/**\n * @name ManageController\n */\n\nvar ManageController = function () {\n\n    /**\n     * @param {ngTableParams} TableParams\n     * @param {UserResource} userResource\n     * @param {Alert} alert\n     * @param paramConverter\n     * @param currentContainer\n     * @param {PageInfo} PageInfo\n     * @param {$translate} $translate\n     */\n\n    function ManageController(TableParams, userResource, alert, paramConverter, currentContainer, PageInfo, $translate) {\n        _classCallCheck(this, ManageController);\n\n        this.translate = $translate;\n        $alert = alert;\n        $userResource = userResource;\n\n        currentContainer.disableDebugMode();\n\n        this.tableParams = new TableParams({\n            page: 1,\n            count: 10,\n            sorting: {\n                name: 'asc'\n            }\n        }, {\n            total: 0,\n            getData: function getData($defer, params) {\n\n                userResource.query(paramConverter.list(params.url())).then(function (resp) {\n\n                    params.total(resp.total);\n\n                    $defer.resolve(resp.data);\n                });\n            }\n        });\n\n        this.translate([BREADCRUMB_TEXT]).then(function (translations) {\n\n            PageInfo.clear().add(translations[BREADCRUMB_TEXT]).broadcast();\n        });\n    }\n\n    _createClass(ManageController, [{\n        key: 'removeUser',\n        value: function removeUser(user) {\n\n            var self = this;\n\n            user.remove().then(function () {\n\n                $alert.success('success.remove');\n\n                if (self.tableParams.data.length === 1) {\n\n                    self.tableParams.page(self.tableParams.page() - 1);\n                }\n\n                self.tableParams.reload();\n            }, function () {\n\n                $alert.error('error.remove');\n\n                self.tableParams.reload();\n            });\n        }\n    }, {\n        key: 'resetPassword',\n        value: function resetPassword(user) {\n            var _this = this;\n\n            var data = {\n                username: user.email\n            };\n\n            this.resetPromise = $userResource.resetPassword(data);\n\n            this.resetPromise.then(function () {\n\n                $alert.success('user.reset');\n                _this.tableParams.reload();\n            }, function () {});\n        }\n    }]);\n\n    return ManageController;\n}();\n\nexports.default = ManageController;\n\n},{}],71:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @type {Alert}\n */\nvar alert;\n\n/**\n * @type {string}\n */\nvar BREADCRUMB_SECTION = 'My account';\n\n/**\n * @type {Translation}\n */\nvar translation;\n\nvar OthersSettingsController = function () {\n    function OthersSettingsController($alert, $scope, $translate, $translation, $window, PageInfo) {\n        var _this = this;\n\n        _classCallCheck(this, OthersSettingsController);\n\n        alert = $alert;\n        this.scope = $scope;\n        translation = $translation;\n        this.validationForce = false;\n        this.translate = $translate;\n        this.window = $window;\n        this.languages = translation.getLanguages();\n\n        if (!this.languages.length) {\n\n            this.loadTranslationsPromise = translation.loadAvailableTranslations();\n\n            this.loadTranslationsPromise.then(function () {\n\n                _this.languages = translation.languages;\n            });\n        }\n\n        $translate([BREADCRUMB_SECTION]).then(function (translations) {\n\n            PageInfo.clear().add(translations[BREADCRUMB_SECTION]).broadcast();\n        });\n    }\n\n    /**\n     * @param {Object} user\n     */\n\n\n    _createClass(OthersSettingsController, [{\n        key: 'submitForm',\n        value: function submitForm(user) {\n            var _this2 = this;\n\n            var localStorageLang = this.window.localStorage['NG_TRANSLATE_LANG_KEY'];\n            var storedLanguage = localStorageLang ? localStorageLang : 'en';\n            this.othersSettingsPromise = user.saveOthersSettings();\n\n            this.othersSettingsPromise.then(function (User) {\n\n                _this2.translate.use(User.language).then(function () {\n\n                    if (User.language !== storedLanguage) {\n\n                        _this2.window.localStorage['LANGUAGE_CHANGE_MESSAGE'] = true;\n                        _this2.window.location.reload();\n                    } else {\n\n                        alert.success('user.save');\n                    }\n                });\n            }, function () {\n\n                alert.error('error.invalid');\n            });\n        }\n    }]);\n\n    return OthersSettingsController;\n}();\n\nexports.default = OthersSettingsController;\n\n},{}],72:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @type {UserResource}\n */\nvar userResource;\n\n/**\n * @type {AlertForm}\n */\nvar alertForm;\n\n/**\n * @type {String}\n */\nvar BREADCRUMB_TEXT = 'Forgot your password?';\n\n/**\n * @name security#ResetRequestController\n * @description Controller for sending request for new password\n */\n\nvar ResetRequestController = function () {\n\n    /**\n     * @param {UserResource} $userResource\n     * @param {AlertForm} $alertForm\n     * @param {Alert} $alert\n     * @param {PageInfo} PageInfo\n     * @param {$translate} $translate\n     */\n\n    function ResetRequestController($userResource, $alertForm, $alert, PageInfo, $translate) {\n        _classCallCheck(this, ResetRequestController);\n\n        this.email = '';\n        this.translate = $translate;\n        this.alert = $alert;\n        userResource = $userResource;\n\n        alertForm = $alertForm;\n        alertForm.getStorage().clean();\n\n        this.validationForce = false;\n\n        this.resetPromise = undefined;\n\n        this.success = false;\n\n        this.translate([BREADCRUMB_TEXT]).then(function (translations) {\n\n            PageInfo.clear().add(translations[BREADCRUMB_TEXT]).broadcast();\n        });\n    }\n\n    /**\n     *\n     * @param {String} email\n     */\n\n\n    _createClass(ResetRequestController, [{\n        key: 'submitForm',\n        value: function submitForm(email) {\n            var _this = this;\n\n            var data = {\n                username: email\n            };\n\n            this.resetPromise = userResource.resetPassword(data);\n\n            this.resetPromise.then(function () {\n\n                alertForm.getStorage().clean();\n                _this.success = true;\n\n                _this.translate(['The email with the activation link has been sent successfully.']).then(function (translations) {\n\n                    _this.formTitle = translations['The email with the activation link has been sent successfully.'];\n                });\n            }, function () {\n\n                alertForm.getStorage().clean();\n                alertForm.error('request.error');\n                _this.alert.error('error.invalid');\n            });\n        }\n\n        /**\n         * Display error if form is invalid\n         */\n\n    }, {\n        key: 'displayInvalidFormMessage',\n        value: function displayInvalidFormMessage() {\n\n            this.validationForce = true;\n            this.alert.error('error.invalid');\n            alertForm.getStorage().clean();\n            alertForm.error('invalid.email');\n        }\n    }]);\n\n    return ResetRequestController;\n}();\n\nexports.default = ResetRequestController;\n\n},{}],73:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @type {UserResource}\n */\nvar userResource;\n\n/**\n * @type {$state}\n */\nvar state;\n\n/**\n * @type {$stateParams}\n */\nvar stateParams;\n\n/**\n * @type {Alert}\n */\nvar alert;\n\n/**\n * @type {String}\n */\nvar BREADCRUMB_TEXT = 'Change your password';\n\n/**\n * @type {$scope}\n */\nvar scope;\n\n/**\n * @name security#ChangePasswordController\n * @description Controller for change password view\n */\n\nvar ChangePasswordController = function () {\n\n    /**\n     * @param {UserResource} $userResource\n     * @param {$state} $state\n     * @param {$stateParams} $stateParams\n     * @param {Alert} $alert\n     * @param {PageInfo} PageInfo\n     * @param {$scope} $scope\n     * @param {$translate} $translate\n     */\n\n    function ChangePasswordController($userResource, $state, $stateParams, $alert, PageInfo, $scope, $translate) {\n        _classCallCheck(this, ChangePasswordController);\n\n        this.new = {\n            first: undefined,\n            second: undefined\n        };\n\n        this.validationForce = false;\n        this.changePasswordPromise = undefined;\n        this.translate = $translate;\n\n        userResource = $userResource;\n        state = $state;\n        stateParams = $stateParams;\n        alert = $alert;\n        scope = $scope;\n\n        if (stateParams.token === '') {\n\n            state.go('signIn');\n            alert.error('changePassword.token');\n        }\n\n        this.translate([BREADCRUMB_TEXT]).then(function (translations) {\n\n            PageInfo.clear().add(translations[BREADCRUMB_TEXT]).broadcast();\n        });\n    }\n\n    /**\n     * @param {Object} newPassword\n     */\n\n\n    _createClass(ChangePasswordController, [{\n        key: 'submitForm',\n        value: function submitForm(newPassword) {\n\n            var password = {\n                'plainPassword': newPassword\n            };\n\n            this.changePasswordPromise = userResource.setPassword(password, stateParams.token);\n\n            this.changePasswordPromise.then(function () {\n\n                state.go('signIn');\n                alert.success('changePassword.success');\n            }, function () {\n\n                alert.error('changePassword.error');\n            });\n        }\n\n        /**\n         * Display error if form is invalid\n         * @param {Object} newPassword\n         */\n\n    }, {\n        key: 'displayInvalidFormMessage',\n        value: function displayInvalidFormMessage(newPassword) {\n\n            this.validationForce = true;\n\n            if (newPassword.first !== newPassword.second) {\n\n                scope.resetPasswordForm.first.$invalid = true;\n                scope.resetPasswordForm.second.$invalid = true;\n\n                this.translate(['Passwords have to be identical']).then(function (translations) {\n\n                    scope.resetPasswordForm.first.$error.first = [translations['Passwords have to be identical']];\n                });\n\n                scope.resetPasswordForm.second.$error.second = [];\n            } else if (newPassword.first === undefined || newPassword.second === undefined) {\n\n                alert.error('password.both');\n            }\n        }\n    }]);\n\n    return ChangePasswordController;\n}();\n\nexports.default = ChangePasswordController;\n\n},{}],74:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar userFactory = function userFactory(resource) {\n\n    /**\n     * @name User\n     * @description User entity\n     */\n\n    var User = function () {\n        function User() {\n            _classCallCheck(this, User);\n\n            /**\n             * @type {number}\n             */\n            this.id = undefined;\n\n            /**\n             * @type {string}\n             */\n            this.email = undefined;\n\n            /**\n             * @type {string}\n             */\n            this.firstName = undefined;\n\n            /**\n             * @type {string}\n             */\n            this.lastName = undefined;\n\n            /**\n             * @type {string}\n             */\n            this.displayName = undefined;\n\n            /**\n             * @type {Array}\n             */\n            this.roles = [];\n\n            /**\n             * @type {Boolean}\n             */\n            this.status = false;\n\n            /**\n             * @type {Date}\n             */\n            this.createdAt = undefined;\n\n            /**\n             * @type {string}\n             */\n            this.language = undefined;\n        }\n\n        /**\n         * @param role\n         * @returns {boolean}\n         */\n\n\n        _createClass(User, [{\n            key: 'hasRole',\n            value: function hasRole(role) {\n\n                return this.roles.indexOf(role) !== -1;\n            }\n\n            /**\n             * @returns {deferred.promise}\n             */\n\n        }, {\n            key: 'save',\n            value: function save() {\n\n                var result = {},\n                    promise;\n\n                var excludedProperty = ['id', 'displayName', 'status', 'createdAt', 'language'];\n\n                var excludedInEdit = ['email'];\n\n                for (var property in this) {\n\n                    if (!angular.isFunction(this[property]) && this.hasOwnProperty(property) && excludedProperty.indexOf(property) === -1) {\n\n                        if (this.id === undefined || excludedInEdit.indexOf(property) === -1) {\n\n                            result[property] = this[property];\n                        }\n                    }\n                }\n\n                if (this.id === undefined) {\n\n                    promise = resource.post(result);\n                } else {\n\n                    promise = resource.put(this.id, result);\n                }\n\n                return promise;\n            }\n\n            /**\n             * @returns {deferred.promise}\n             */\n\n        }, {\n            key: 'saveMe',\n            value: function saveMe() {\n\n                var result = {},\n                    promise;\n\n                var excludedProperty = ['id', 'displayName', 'roles', 'status', 'createdAt', 'email', 'language'];\n\n                for (var property in this) {\n\n                    if (!angular.isFunction(this[property]) && this.hasOwnProperty(property) && excludedProperty.indexOf(property) === -1) {\n\n                        result[property] = this[property];\n                    }\n                }\n\n                promise = resource.putMe(result);\n\n                return promise;\n            }\n\n            /**\n             * @returns {deferred.promise}\n             */\n\n        }, {\n            key: 'saveOthersSettings',\n            value: function saveOthersSettings() {\n\n                var result = {},\n                    promise;\n\n                var excludedProperty = ['id', 'displayName', 'roles', 'status', 'createdAt', 'email', 'firstName', 'lastName'];\n\n                for (var property in this) {\n\n                    if (!angular.isFunction(this[property]) && this.hasOwnProperty(property) && excludedProperty.indexOf(property) === -1) {\n\n                        result[property] = this[property];\n                    }\n                }\n\n                promise = resource.othersSettingsMe(result);\n\n                return promise;\n            }\n\n            /**\n             * @returns {deferred.promise|Boolean}\n             */\n\n        }, {\n            key: 'remove',\n            value: function remove() {\n\n                if (this.id === undefined) {\n\n                    return false;\n                }\n\n                return resource.delete(this.id);\n            }\n        }]);\n\n        return User;\n    }();\n\n    return User;\n};\n\nexports.default = userFactory;\n\n},{}],75:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * This program is free software: you can redistribute it and/or modify it under\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * the terms of the GNU Affero General Public License as published by the Free\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Software Foundation, either version 3 of the License, or (at your option) any\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * later version.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * This program is distrubuted in the hope that it will be useful,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * but WITHOUT ANY WARRANTY; without even the implied warranty of\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * GNU Affero General Public License for more details.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * You should have received a copy of the GNU Affero General Public License\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * along with this program. If not, see <http://www.gnu.org/licenses/>.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\n\nvar _User = require('../entities/User.js');\n\nvar _User2 = _interopRequireDefault(_User);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar CHANGE_PASSWORD_ROUTE = '/api/users/me/change-password';\nvar RESET_REQUEST_ROUTE = '/api/reset-password/request';\nvar RESET_PASSWORD_ROUTE = '/api/reset-password/token/';\nvar DEFAULT_LANGUAGE = 'en';\n\nvar transformResponse = function transformResponse(resp) {\n\n    var user = this.getEntity();\n\n    if (resp !== undefined) {\n\n        user.id = resp.id;\n        user.email = resp.email;\n        user.firstName = resp.first_name;\n        user.lastName = resp.last_name;\n        user.displayName = resp.display_name;\n        user.roles = resp.roles;\n        user.status = resp.status;\n        user.createdAt = resp.created_at;\n\n        if (resp.language === null) {\n\n            user.language = DEFAULT_LANGUAGE;\n        } else {\n\n            user.language = resp.language;\n        }\n    }\n\n    return user;\n};\n\nvar appendTransform = function appendTransform(defaults, transform) {\n\n    // We can't guarantee that the default transformation is an array\n    defaults = angular.isArray(defaults) ? defaults : [defaults];\n\n    // Append the new transformation to the defaults\n    return defaults.concat(transform);\n};\n\n/**\n * @name UserResource\n *\n * @author Arek Zajc <a.zajac@clearcode.cc>\n */\n\nvar UserResource = function () {\n    /**\n     * @param {$http} $http\n     * @param {$q} $q\n     */\n\n    function UserResource($http, $q) {\n        _classCallCheck(this, UserResource);\n\n        this.http = $http;\n        this.q = $q;\n    }\n\n    /**\n     * @returns {User}\n     */\n\n\n    _createClass(UserResource, [{\n        key: 'getEntity',\n        value: function getEntity() {\n\n            var User = (0, _User2.default)(this);\n\n            return new User();\n        }\n\n        /**\n         * @description Send request to get specific entity\n         *\n         * @param {number} id\n         * @returns {deferred.promise}\n         */\n\n    }, {\n        key: 'get',\n        value: function get(id) {\n            var _this = this;\n\n            var deferred = this.q.defer();\n\n            this.http({\n                method: 'GET',\n                url: '/api/users/' + id,\n                transformResponse: appendTransform(this.http.defaults.transformResponse, function (resp, header, status) {\n\n                    if (status < 400) {\n\n                        return transformResponse.call(_this, resp.data);\n                    } else {\n\n                        return resp;\n                    }\n                })\n            }).success(function (data) {\n\n                deferred.resolve(data);\n            }).error(function () {\n\n                deferred.reject();\n            });\n\n            return deferred.promise;\n        }\n\n        /**\n         * @description Send request to get specific entity\n         *\n         * @returns {deferred.promise}\n         */\n\n    }, {\n        key: 'getMe',\n        value: function getMe() {\n            var _this2 = this;\n\n            var deferred = this.q.defer();\n\n            this.http({\n                method: 'GET',\n                url: '/api/users/me',\n                transformResponse: appendTransform(this.http.defaults.transformResponse, function (resp, header, status) {\n\n                    if (status < 400) {\n\n                        return transformResponse.call(_this2, resp.data);\n                    } else {\n\n                        return resp;\n                    }\n                })\n            }).success(function (resp) {\n\n                deferred.resolve(resp);\n            }).error(function (err) {\n\n                deferred.reject(err);\n            });\n\n            return deferred.promise;\n        }\n\n        /**\n         * @description Send request to get list of entity\n         *\n         * @param {Object} params\n         *\n         * @returns {deferred.promise}\n         */\n\n    }, {\n        key: 'query',\n        value: function query(params) {\n            var _this3 = this;\n\n            var deferred = this.q.defer();\n\n            this.http({\n                method: 'GET',\n                url: '/api/users',\n                params: params,\n                transformResponse: appendTransform(this.http.defaults.transformResponse, function (resp) {\n\n                    if (status < 400) {\n\n                        for (var element in resp.data) {\n\n                            if (resp.data[element] instanceof Object) {\n\n                                resp.data[element] = transformResponse.call(_this3, resp.data[element]);\n                            }\n                        }\n                    }\n\n                    return resp;\n                })\n            }).success(function (data) {\n\n                deferred.resolve(data);\n            }).error(function (err) {\n\n                deferred.reject(err);\n            });\n\n            return deferred.promise;\n        }\n\n        /**\n         * @description Send request to delete entity\n         *\n         * @param {number} id\n         *\n         * @returns {deferred.promise}\n         */\n\n    }, {\n        key: 'delete',\n        value: function _delete(id) {\n\n            var deferred = this.q.defer();\n\n            this.http({\n                method: 'DELETE',\n                url: '/api/users/' + id\n            }).success(function (resp) {\n\n                deferred.resolve(resp);\n            }).error(function (err) {\n\n                deferred.reject(err);\n            });\n\n            return deferred.promise;\n        }\n\n        /**\n         * @description Send request to create entity\n         *\n         * @param {object} entity\n         */\n\n    }, {\n        key: 'post',\n        value: function post(entity) {\n            var _this4 = this;\n\n            var deferred = this.q.defer();\n\n            this.http({\n                method: 'POST',\n                url: '/api/users',\n                data: entity,\n                transformResponse: appendTransform(this.http.defaults.transformResponse, function (resp, header, status) {\n\n                    if (status < 400) {\n\n                        return transformResponse.call(_this4, resp.data);\n                    } else {\n\n                        return resp;\n                    }\n                })\n            }).success(function (resp) {\n\n                deferred.resolve(resp);\n            }).error(function (err) {\n\n                deferred.reject(err);\n            });\n\n            return deferred.promise;\n        }\n\n        /**\n         * Send request to update entity\n         *\n         * @param {number} id\n         * @param {object} entity\n         *\n         * @returns {deferred.promise}\n         */\n\n    }, {\n        key: 'put',\n        value: function put(id, entity) {\n            var _this5 = this;\n\n            var deferred = this.q.defer();\n\n            this.http({\n                method: 'PUT',\n                url: '/api/users/' + id,\n                data: entity,\n                transformResponse: appendTransform(this.http.defaults.transformResponse, function (resp, header, status) {\n\n                    if (status < 400) {\n\n                        return transformResponse.call(_this5, resp.data);\n                    } else {\n\n                        return resp;\n                    }\n                })\n            }).success(function (resp) {\n\n                deferred.resolve(resp);\n            }).error(function (err) {\n\n                deferred.reject(err);\n            });\n\n            return deferred.promise;\n        }\n\n        /**\n         * Send request to update entity\n         *\n         * @param {number} id\n         * @param {object} entity\n         *\n         * @returns {deferred.promise}\n         */\n\n    }, {\n        key: 'putMe',\n        value: function putMe(entity) {\n            var _this6 = this;\n\n            var deferred = this.q.defer();\n\n            this.http({\n                method: 'PUT',\n                url: '/api/users/me',\n                data: entity,\n                transformResponse: appendTransform(this.http.defaults.transformResponse, function (resp, header, status) {\n\n                    if (status < 400) {\n\n                        return transformResponse.call(_this6, resp.data);\n                    } else {\n\n                        return resp;\n                    }\n                })\n            }).success(function (resp) {\n\n                deferred.resolve(resp);\n            }).error(function (err) {\n\n                deferred.reject(err);\n            });\n\n            return deferred.promise;\n        }\n\n        /**\n         * Send request to update entity\n         *\n         * @param {number} id\n         * @param {object} entity\n         *\n         * @returns {deferred.promise}\n         */\n\n    }, {\n        key: 'othersSettingsMe',\n        value: function othersSettingsMe(entity) {\n            var _this7 = this;\n\n            var deferred = this.q.defer();\n\n            this.http({\n                method: 'PUT',\n                url: '/api/users/me/others-settings',\n                data: entity,\n                transformResponse: appendTransform(this.http.defaults.transformResponse, function (resp, header, status) {\n\n                    if (status < 400) {\n\n                        return transformResponse.call(_this7, resp.data);\n                    } else {\n\n                        return resp;\n                    }\n                })\n            }).success(function (resp) {\n\n                deferred.resolve(resp);\n            }).error(function (err) {\n\n                deferred.reject(err);\n            });\n\n            return deferred.promise;\n        }\n\n        /**\n         * @description Send request to change password\n         *\n         * @param {Object} data\n         * @returns {deferred.promise|*}\n         */\n\n    }, {\n        key: 'changePassword',\n        value: function changePassword(data) {\n\n            var deferred = this.q.defer();\n\n            this.http({\n                method: 'POST',\n                data: data,\n                url: CHANGE_PASSWORD_ROUTE\n            }).success(function (resp) {\n\n                deferred.resolve(resp);\n            }).error(function (err) {\n\n                deferred.reject(err);\n            });\n\n            return deferred.promise;\n        }\n\n        /**\n         * @description Send request to reset password\n         *\n         * @param {Object} data\n         * @returns {deferred.promise|*}\n         */\n\n    }, {\n        key: 'resetPassword',\n        value: function resetPassword(data) {\n\n            var deferred = this.q.defer();\n\n            this.http({\n                method: 'POST',\n                data: data,\n                url: RESET_REQUEST_ROUTE\n            }).success(function (resp) {\n\n                deferred.resolve(resp);\n            }).error(function (err) {\n\n                deferred.reject(err);\n            });\n\n            return deferred.promise;\n        }\n\n        /**\n         * @description Send request to confirm password with the new one\n         *\n         * @param {Object} data\n         * @param {String} token\n         * @returns {deferred.promise|*}\n         */\n\n    }, {\n        key: 'setPassword',\n        value: function setPassword(data, token) {\n\n            var deferred = this.q.defer();\n\n            this.http({\n                method: 'POST',\n                data: data,\n                url: RESET_PASSWORD_ROUTE + token\n            }).success(function (resp) {\n\n                deferred.resolve(resp);\n            }).error(function (err) {\n\n                deferred.reject(err);\n            });\n\n            return deferred.promise;\n        }\n    }]);\n\n    return UserResource;\n}();\n\nexports.default = UserResource;\n\n},{\"../entities/User.js\":74}],76:[function(require,module,exports){\n'use strict';\n\nvar _CreateController = require('./controllers/CreateController.js');\n\nvar _CreateController2 = _interopRequireDefault(_CreateController);\n\nvar _EditController = require('./controllers/EditController.js');\n\nvar _EditController2 = _interopRequireDefault(_EditController);\n\nvar _ManageController = require('./controllers/ManageController.js');\n\nvar _ManageController2 = _interopRequireDefault(_ManageController);\n\nvar _OthersSettingsController = require('./controllers/OthersSettingsController.js');\n\nvar _OthersSettingsController2 = _interopRequireDefault(_OthersSettingsController);\n\nvar _ChangePasswordController = require('./controllers/ChangePasswordController.js');\n\nvar _ChangePasswordController2 = _interopRequireDefault(_ChangePasswordController);\n\nvar _ResetRequestController = require('./controllers/ResetRequestController.js');\n\nvar _ResetRequestController2 = _interopRequireDefault(_ResetRequestController);\n\nvar _SetPasswordController = require('./controllers/SetPasswordController.js');\n\nvar _SetPasswordController2 = _interopRequireDefault(_SetPasswordController);\n\nvar _UserResource = require('./resources/UserResource.js');\n\nvar _UserResource2 = _interopRequireDefault(_UserResource);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar MODULE_NAME = 'clearcode.tm.user';\nvar MODULE_DIR = 'app/modules/user';\n\n_CreateController2.default.$inject = [MODULE_NAME + '.userResource', 'clearcode.tm.alert.alert', 'clearcode.tm.pageInfo.pageInfo', '$state', '$scope', '$translate', 'clearcode.tm.alert.refreshAlert'];\n\n_EditController2.default.$inject = [MODULE_NAME + '.userResource', '$stateParams', 'clearcode.tm.alert.alert', 'clearcode.tm.pageInfo.pageInfo', '$state', '$scope', '$translate', 'clearcode.tm.alert.refreshAlert', 'clearcode.tm.security.security'];\n\n_ManageController2.default.$inject = ['ngTableParams', MODULE_NAME + '.userResource', 'clearcode.tm.alert.alert', 'clearcode.tm.tagContainer.paramConverter', 'clearcode.tm.tagContainer.currentContainer', 'clearcode.tm.pageInfo.pageInfo', '$translate'];\n\n_ChangePasswordController2.default.$inject = ['clearcode.tm.user.userResource', 'clearcode.tm.alert.alert', '$state', 'clearcode.tm.pageInfo.pageInfo', '$scope', '$translate'];\n\n_OthersSettingsController2.default.$inject = ['clearcode.tm.alert.alert', '$scope', '$translate', 'clearcode.tm.translation.translation', '$window', 'clearcode.tm.pageInfo.pageInfo'];\n\n_ResetRequestController2.default.$inject = [MODULE_NAME + '.userResource', 'clearcode.tm.form.alertForm', 'clearcode.tm.alert.alert', 'clearcode.tm.pageInfo.pageInfo', '$translate'];\n\n_SetPasswordController2.default.$inject = [MODULE_NAME + '.userResource', '$state', '$stateParams', 'clearcode.tm.alert.alert', 'clearcode.tm.pageInfo.pageInfo', '$scope', '$translate'];\n\n_UserResource2.default.$inject = ['$http', '$q'];\n\nangular.module(MODULE_NAME, ['pascalprecht.translate', 'ui.router', 'ngTable', 'clearcode.tm.alert', 'clearcode.tm.pageInfo', 'clearcode.tm.form', 'clearcode.tm.tagContainer', 'clearcode.tm.security']).run(['clearcode.tm.alert.$alert', function ($alertProvider) {\n\n    $alertProvider.addMessagePattern('user.save', 'User account has been saved successfully.');\n\n    $alertProvider.addMessagePattern('user.change_language', 'The language has been changed');\n\n    $alertProvider.addMessagePattern('password.change', 'Your password has been changed successfully.');\n\n    $alertProvider.addMessagePattern('user.invalid', 'Sorry, something went wrong.');\n\n    $alertProvider.addMessagePattern('user.reset', 'Email with activation link has been sent.');\n\n    $alertProvider.addMessagePattern('user.others', 'Other settings has been saved successfully.');\n}]).config(['$stateProvider', function ($stateProvider) {\n\n    $stateProvider.state('users', {\n        url: '/users',\n        controller: MODULE_NAME + '.ManageController as view',\n        templateUrl: MODULE_DIR + '/views/manage.html',\n        data: {\n            roles: ['ROLE_SUPER_ADMIN'],\n            hasContainerList: false\n        }\n    }).state('userCreate', {\n        url: '/users-create',\n        controller: MODULE_NAME + '.CreateController as view',\n        templateUrl: MODULE_DIR + '/views/create.html',\n        data: {\n            roles: ['ROLE_SUPER_ADMIN'],\n            hasContainerList: false\n        }\n    }).state('userEdit', {\n        url: '/users-edit/{userId}',\n        controller: MODULE_NAME + '.EditController as view',\n        templateUrl: MODULE_DIR + '/views/edit.html',\n        data: {\n            roles: ['ROLE_SUPER_ADMIN'],\n            hasContainerList: false\n        }\n    }).state('editProfile', {\n        url: '/profile',\n        controller: MODULE_NAME + '.EditController as view',\n        controllerAs: 'view',\n        data: {\n            roles: ['ROLE_SUPER_ADMIN'],\n            secure: true\n        },\n        templateUrl: '/app/modules/user/views/profile.html'\n    }).state('resetPassword', {\n        url: '/reset-password',\n        controller: MODULE_NAME + '.ResetRequestController',\n        controllerAs: 'view',\n        data: {\n            roles: [],\n            secure: false\n        },\n        templateUrl: '/app/modules/user/views/resetPassword.html'\n    }).state('resetConfirm', {\n        url: '/reset-password/token/{token}',\n        controller: MODULE_NAME + '.SetPasswordController',\n        controllerAs: 'view',\n        data: {\n            roles: [],\n            secure: false\n        },\n        templateUrl: '/app/modules/user/views/setPassword.html'\n    });\n}]).controller(MODULE_NAME + '.CreateController', _CreateController2.default).controller(MODULE_NAME + '.EditController', _EditController2.default).controller(MODULE_NAME + '.ManageController', _ManageController2.default).controller(MODULE_NAME + '.OthersSettingsController', _OthersSettingsController2.default).controller(MODULE_NAME + '.ChangePasswordController', _ChangePasswordController2.default).controller(MODULE_NAME + '.ResetRequestController', _ResetRequestController2.default).controller(MODULE_NAME + '.SetPasswordController', _SetPasswordController2.default).service(MODULE_NAME + '.userResource', _UserResource2.default);\n\nmodule.exports = { MODULE_NAME: MODULE_NAME };\n\n},{\"./controllers/ChangePasswordController.js\":67,\"./controllers/CreateController.js\":68,\"./controllers/EditController.js\":69,\"./controllers/ManageController.js\":70,\"./controllers/OthersSettingsController.js\":71,\"./controllers/ResetRequestController.js\":72,\"./controllers/SetPasswordController.js\":73,\"./resources/UserResource.js\":75}],77:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @name BaseController\n */\n\nvar BaseController = function () {\n\n    /**\n     * @param {VariableResource} $variableResource\n     * @param {VariableTypeResource} $typeResource\n     * @param {PageInfo} PageInfo\n     * @param $scope\n     * @param {VariableFormProvider} $variableFormProvider\n     * @param {CurrentContainer} currentContainer\n     * @param {$stateParams} $stateParams\n     * @param {Alert} $alert\n     * @param {$state} $state\n     * @param {$translate} $translate\n     */\n\n    function BaseController($variableResource, $typeResource, $PageInfo, $scope, $variableFormProvider, currentContainer, $stateParams, $alert, $state, $translate, $condition) {\n        var _this = this;\n\n        _classCallCheck(this, BaseController);\n\n        this.variable = $variableResource.getEntityObject();\n\n        this.typeResource = $typeResource;\n\n        $scope.$on('pageInfo.reload', function (event, args) {\n\n            $translate([_this.getBreadcrumbText()]).then(function (translations) {\n\n                $PageInfo.clear().add(args.name, 'tags', {\n                    containerId: args.id\n                }).add(translations[_this.getBreadcrumbText()], 'variables', {\n                    containerId: args.id\n                }).broadcast();\n            });\n        });\n\n        this.variableFormProvider = $variableFormProvider;\n\n        this.currentContainer = currentContainer;\n        this.condition = $condition;\n        this.stateParams = $stateParams;\n        this.alert = $alert;\n        this.state = $state;\n        this.translate = $translate;\n\n        this.formTouched = false;\n    }\n\n    _createClass(BaseController, [{\n        key: 'getVariableTypes',\n        value: function getVariableTypes() {\n            var _this2 = this;\n\n            this.typesPromise = this.typeResource.query();\n\n            this.typesPromise.then(function (resp) {\n\n                _this2.types = resp.data;\n\n                if (_this2.variable.type && _this2.variable.type.id === undefined) {\n\n                    for (var i = 0; i < _this2.types.length; i++) {\n                        if (_this2.variable.type === _this2.types[i].id) {\n                            _this2.variable.type = _this2.types[i];\n                            _this2.formTouched = true;\n                            break;\n                        }\n                    }\n                }\n            });\n        }\n\n        /**\n         * @param {VariableType} type\n         */\n\n    }, {\n        key: 'setVariableType',\n        value: function setVariableType(type) {\n\n            this.variable.type = type;\n            this.variable.value = '';\n\n            this.formTouched = true;\n        }\n\n        /**\n         * @returns {String} url for active type\n         */\n\n    }, {\n        key: 'getConfigurationTemplate',\n        value: function getConfigurationTemplate() {\n\n            var typeId = this.variable.type.id !== undefined ? this.variable.type.id : this.variable.type;\n\n            return this.variableFormProvider.getType(typeId).templateUrl;\n        }\n\n        /**\n         * Handle form submit action\n         *\n         * @param {Variable} variable\n         */\n\n    }, {\n        key: 'submitForm',\n        value: function submitForm(variable) {\n            var _this3 = this;\n\n            this.variablePromise = variable.save(this.stateParams.containerId);\n\n            this.variablePromise.then(function () {\n\n                _this3.currentContainer.makeChanges();\n                _this3.condition.refresh();\n                _this3.alert.success(_this3.getAlertType());\n\n                _this3.state.go('variables', {\n                    containerId: _this3.stateParams.containerId\n                });\n            }, function () {\n\n                _this3.alert.error('error.invalid');\n            });\n        }\n\n        /**\n         * Display error if form is invalid\n         */\n\n    }, {\n        key: 'displayInvalidFormMessage',\n        value: function displayInvalidFormMessage() {\n\n            this.validateVariable = true;\n            this.alert.error('error.invalid');\n        }\n    }]);\n\n    return BaseController;\n}();\n\nexports.default = BaseController;\n\n},{}],78:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _BaseController2 = require('./BaseController.js');\n\nvar _BaseController3 = _interopRequireDefault(_BaseController2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This program is free software: you can redistribute it and/or modify it under\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * the terms of the GNU Affero General Public License as published by the Free\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Software Foundation, either version 3 of the License, or (at your option) any\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * later version.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This program is distrubuted in the hope that it will be useful,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * but WITHOUT ANY WARRANTY; without even the implied warranty of\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * GNU Affero General Public License for more details.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * You should have received a copy of the GNU Affero General Public License\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * along with this program. If not, see <http://www.gnu.org/licenses/>.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar BREADCRUMB_GLOBAL = 'Variables';\n\n/**\n * @name CreateController\n */\n\nvar CreateController = function (_BaseController) {\n    _inherits(CreateController, _BaseController);\n\n    /**\n     * @param {VariableResource} $variableResource\n     * @param {VariableTypeResource} $typeResource\n     * @param {PageInfo} $PageInfo\n     * @param $scope\n     * @param {VariableFormProvider} $variableFormProvider\n     * @param {CurrentContainer} currentContainer\n     * @param {$stateParams} $stateParams\n     * @param {Alert} $alert\n     * @param {$state} $state\n     * @param {$translate} $translate\n     * @param {$condition} $condition\n     */\n\n    function CreateController($variableResource, $typeResource, $PageInfo, $scope, $variableFormProvider, currentContainer, $stateParams, $alert, $state, $translate, $condition) {\n        _classCallCheck(this, CreateController);\n\n        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(CreateController).call(this, $variableResource, $typeResource, $PageInfo, $scope, $variableFormProvider, currentContainer, $stateParams, $alert, $state, $translate, $condition));\n\n        _this.variable = $variableResource.getEntityObject();\n\n        _this.getVariableTypes();\n\n        currentContainer.getContainer().then(function () {\n\n            if (!currentContainer.$container.hasPermission('edit')) {\n\n                $state.go('triggers', { containerId: $stateParams.containerId });\n            }\n\n            _this.translate([_this.getBreadcrumbText(), BREADCRUMB_GLOBAL]).then(function (translations) {\n\n                $PageInfo.clear().add(currentContainer.$container.name, 'tags', {\n                    containerId: currentContainer.$container.id\n                }).add(translations[BREADCRUMB_GLOBAL], 'variables', {\n                    containerId: currentContainer.$container.id\n                }).add(translations[_this.getBreadcrumbText()]).broadcast();\n            });\n        });\n\n        return _this;\n    }\n\n    /**\n     * Get breadcrumb text\n     *\n     */\n\n\n    _createClass(CreateController, [{\n        key: 'getBreadcrumbText',\n        value: function getBreadcrumbText() {\n\n            return 'Add a new variable';\n        }\n\n        /**\n         * Get alert type\n         *\n         */\n\n    }, {\n        key: 'getAlertType',\n        value: function getAlertType() {\n\n            return 'success.create';\n        }\n    }]);\n\n    return CreateController;\n}(_BaseController3.default);\n\nexports.default = CreateController;\n\n},{\"./BaseController.js\":77}],79:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _BaseController2 = require('./BaseController.js');\n\nvar _BaseController3 = _interopRequireDefault(_BaseController2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This program is free software: you can redistribute it and/or modify it under\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * the terms of the GNU Affero General Public License as published by the Free\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Software Foundation, either version 3 of the License, or (at your option) any\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * later version.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This program is distrubuted in the hope that it will be useful,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * but WITHOUT ANY WARRANTY; without even the implied warranty of\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * GNU Affero General Public License for more details.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * You should have received a copy of the GNU Affero General Public License\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * along with this program. If not, see <http://www.gnu.org/licenses/>.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar BREADCRUMB_GLOBAL = 'Variables';\n\n/**\n * @name EditController\n */\n\nvar EditController = function (_BaseController) {\n    _inherits(EditController, _BaseController);\n\n    /**\n     * @param {VariableResource} $variableResource\n     * @param {VariableTypeResource} $typeResource\n     * @param {PageInfo} PageInfo\n     * @param $scope\n     * @param {VariableFormProvider} $variableFormProvider\n     * @param {CurrentContainer} currentContainer\n     * @param {$stateParams} $stateParams\n     * @param {Alert} $alert\n     * @param {$state} $state\n     * @param {$translate} $translate\n     * @param {$condition} $condition\n     */\n\n    function EditController($variableResource, $typeResource, $PageInfo, $scope, $variableFormProvider, currentContainer, $stateParams, $alert, $state, $translate, $condition) {\n        _classCallCheck(this, EditController);\n\n        var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(EditController).call(this, $variableResource, $typeResource, $PageInfo, $scope, $variableFormProvider, currentContainer, $stateParams, $alert, $state, $translate, $condition));\n\n        _this.variablePromise = $variableResource.get($stateParams.variableId);\n\n        _this.variablePromise.then(function (resp) {\n            _this.variable = resp;\n\n            _this.getVariableTypes();\n        });\n\n        _this.currentContainer.getContainer().then(function () {\n\n            if (_this.currentContainer.$container.hasPermission('noaccess')) {\n\n                _this.state.go('container');\n            }\n\n            _this.translate([_this.getBreadcrumbText(), BREADCRUMB_GLOBAL]).then(function (translations) {\n\n                $PageInfo.clear().add(_this.currentContainer.$container.name, 'tags', {\n                    containerId: _this.currentContainer.$container.id\n                }).add(translations[BREADCRUMB_GLOBAL], 'variables', {\n                    containerId: _this.currentContainer.$container.id\n                }).add(translations[_this.getBreadcrumbText()]).broadcast();\n            });\n        });\n\n        _this.formTouched = true;\n        return _this;\n    }\n\n    /**\n     * Get breadcrumb text\n     *\n     */\n\n\n    _createClass(EditController, [{\n        key: 'getBreadcrumbText',\n        value: function getBreadcrumbText() {\n\n            return 'Configure variable';\n        }\n\n        /**\n         * Get alert type\n         *\n         */\n\n    }, {\n        key: 'getAlertType',\n        value: function getAlertType() {\n\n            return 'success.edit';\n        }\n    }]);\n\n    return EditController;\n}(_BaseController3.default);\n\nexports.default = EditController;\n\n},{\"./BaseController.js\":77}],80:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @type {Alert}\n */\nvar $alert;\n\n/**\n * @type {$stateParams}\n */\nvar stateParams;\n\n/**\n * @type {CurrentContainer}\n */\nvar currentContainer;\n\n/**\n * @type {$scope}\n */\nvar scope;\n\n/**\n * @type {String}\n */\nvar BREADCRUMB_TEXT = 'Variables';\n\n/**\n * @name ManageController\n */\n\nvar ManageController = function () {\n\n    /**\n     * @param {ngTableParams} TableParams\n     * @param {$stateParams} $stateParams\n     * @param {VariableResource} variableResource\n     * @param {Alert} alert\n     * @param {ParamConverter} paramConverter\n     * @param {CurrentContainer} CurrentContainer\n     * @param {PageInfo} PageInfo\n     * @param {$scope} $scope\n     * @param {$translate} $translate\n     */\n\n    function ManageController(TableParams, $stateParams, variableResource, alert, paramConverter, CurrentContainer, PageInfo, $scope, state, $translate) {\n        var _this = this;\n\n        _classCallCheck(this, ManageController);\n\n        $alert = alert;\n        stateParams = $stateParams;\n        currentContainer = CurrentContainer;\n        scope = $scope;\n\n        this.permissions = [];\n        this.containerId = stateParams.containerId;\n\n        currentContainer.getContainer().then(function (container) {\n\n            if (!currentContainer.$container.hasPermission('view')) {\n\n                state.go('container');\n            } else {\n\n                _this.permissions = currentContainer.$container.permissions;\n            }\n\n            $translate([BREADCRUMB_TEXT]).then(function (translations) {\n\n                PageInfo.clear().add(container.name, 'variable', {\n                    containerId: container.id\n                }).add(translations[BREADCRUMB_TEXT]).broadcast();\n            });\n        });\n\n        this.tableParams = new TableParams({\n            page: 1,\n            count: 10,\n            sorting: {\n                name: 'asc'\n            }\n        }, {\n            total: 0,\n            getData: function getData($defer, params) {\n\n                variableResource.query(stateParams.containerId, paramConverter.list(params.url())).then(function (resp) {\n\n                    params.total(resp.total);\n\n                    $defer.resolve(resp.data);\n                });\n            }\n        });\n\n        scope.$on('pageInfo.reload', function (event, args) {\n\n            $translate([BREADCRUMB_TEXT]).then(function (translations) {\n\n                PageInfo.clear().add(args.name, 'variables', {\n                    containerId: args.id\n                }).add(translations[BREADCRUMB_TEXT]).broadcast();\n            });\n        });\n    }\n\n    _createClass(ManageController, [{\n        key: 'removeVariable',\n        value: function removeVariable(variable) {\n            var _this2 = this;\n\n            variable.remove().then(function () {\n\n                $alert.success('success.remove');\n                currentContainer.makeChanges();\n\n                if (_this2.tableParams.data.length === 1 && _this2.tableParams.page() > 1) {\n\n                    _this2.tableParams.page(_this2.tableParams.page() - 1);\n                } else {\n\n                    _this2.tableParams.reload();\n                }\n            }, function () {\n\n                $alert.error('error.remove');\n\n                _this2.tableParams.reload();\n            });\n        }\n    }]);\n\n    return ManageController;\n}();\n\nexports.default = ManageController;\n\n},{}],81:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar variableSelector = undefined,\n    scope = undefined,\n    compile = undefined;\n\nvar SelectorController = function () {\n    function SelectorController($compile, $stateParams, $scope, $variableSelector, condition) {\n        var _this = this;\n\n        _classCallCheck(this, SelectorController);\n\n        compile = $compile;\n        scope = $scope;\n        variableSelector = $variableSelector;\n\n        condition.allVariables().then(function (resp) {\n            _this.variables = resp;\n        });\n    }\n\n    _createClass(SelectorController, [{\n        key: 'init',\n        value: function init($element, $ngModel) {\n            this.element = $element;\n            this.ngModel = $ngModel;\n\n            var listElement = compileListView();\n            this.ulElement = listElement.children();\n            createWrapper(this.element, listElement);\n        }\n    }, {\n        key: 'toggleVariablesList',\n        value: function toggleVariablesList(event) {\n            var elementValue = this.element.val().trim();\n\n            this.isVariablesListVisible() ? this.element.val(variableSelector.removeVariablePrompt(elementValue)) : this.element.val(variableSelector.addVariablePrompt(elementValue));\n\n            this.ulElement.toggleClass('show');\n            stopBubblingEvent(event);\n        }\n    }, {\n        key: 'addVariable',\n        value: function addVariable(variable) {\n            var elementValue = this.element.val().trim();\n            this.ulElement.removeClass('show');\n\n            this.ngModel.$setViewValue(variableSelector.selectVariable(elementValue, variable));\n            this.ngModel.$render();\n            this.element[0].focus();\n        }\n    }, {\n        key: 'closeVariablePrompt',\n        value: function closeVariablePrompt(event) {\n            var elementValue = this.element.val().trim();\n\n            if (!this.isVariablesListVisible()) {\n                return;\n            }\n\n            this.ulElement.removeClass('show');\n            this.element.val(variableSelector.removeVariablePrompt(elementValue));\n            stopBubblingEvent(event);\n        }\n    }, {\n        key: 'isVariablesListVisible',\n        value: function isVariablesListVisible() {\n            return this.ulElement.hasClass('show');\n        }\n    }]);\n\n    return SelectorController;\n}();\n\nfunction stopBubblingEvent(event) {\n    event.stopPropagation();\n    event.cancelBubble = true;\n}\n\nfunction compileListView() {\n    var listTemplate = angular.element(document.getElementById('variables-list.html')).html();\n\n    return compile(listTemplate)(scope);\n}\n\nfunction createWrapper(element, listElement) {\n    var btnElement = compile(variableSelector.getTemplate())(scope),\n        inputGroupWrapper = undefined;\n\n    element.wrap(variableSelector.getElementWrapper());\n\n    inputGroupWrapper = element.parent();\n    inputGroupWrapper.append(btnElement);\n    inputGroupWrapper.append(listElement);\n}\n\nexports.default = SelectorController;\n\n},{}],82:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar variableClickOutside = function variableClickOutside($document) {\n\n    return {\n        restrict: 'A',\n        require: 'variableSelector',\n        link: link\n    };\n\n    function link(scope, element, attrs, selectorCtrl) {\n        $document.on('click', documentOnClick);\n\n        scope.$on('$destroy', function () {\n            $document.off('click', documentOnClick);\n        });\n\n        function documentOnClick(event) {\n            var outside = !element[0].contains(event.target),\n                listVisible = selectorCtrl.isVariablesListVisible();\n\n            if (outside && listVisible) {\n                element.val(selectorCtrl.closeVariablePrompt(event));\n            }\n        }\n    }\n};\n\nexports.default = variableClickOutside;\n\n},{}],83:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _SelectorController = require('../controllers/SelectorController.js');\n\nvar _SelectorController2 = _interopRequireDefault(_SelectorController);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar variableSelectorDirective = function variableSelectorDirective() {\n\n    return {\n        restrict: 'A',\n        require: ['variableSelector', 'ngModel'],\n        scope: {},\n        link: link,\n        controller: _SelectorController2.default,\n        controllerAs: 'selectorCtrl',\n        bindToController: true\n    };\n\n    function link(scope, element, attrs, controllers) {\n        var selectorController = controllers[0];\n        var ngModel = controllers[1];\n\n        selectorController.init(element, ngModel);\n    }\n}; /**\n    * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n    *\n    * This program is free software: you can redistribute it and/or modify it under\n    * the terms of the GNU Affero General Public License as published by the Free\n    * Software Foundation, either version 3 of the License, or (at your option) any\n    * later version.\n    *\n    * This program is distrubuted in the hope that it will be useful,\n    * but WITHOUT ANY WARRANTY; without even the implied warranty of\n    * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n    * GNU Affero General Public License for more details.\n    *\n    * You should have received a copy of the GNU Affero General Public License\n    * along with this program. If not, see <http://www.gnu.org/licenses/>.\n    */\n\nexports.default = variableSelectorDirective;\n\n},{\"../controllers/SelectorController.js\":81}],84:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar variableFactory = function variableFactory(resource) {\n\n    /**\n     * @name Variable\n     * @description Variable entity\n     */\n\n    var Variable = function () {\n        function Variable() {\n            _classCallCheck(this, Variable);\n\n            /**\n             * @type {number}\n             */\n            this.id = undefined;\n\n            /**\n             * @type {string}\n             */\n            this.name = undefined;\n\n            /**\n             * @type {string}\n             */\n            this.description = undefined;\n\n            /**\n             * @type {string}\n             */\n            this.type = undefined;\n\n            /**\n             * @type {string}\n             */\n            this.value = undefined;\n\n            /**\n             * @type {Object}\n             */\n            this.options = [];\n\n            /**\n             * @type {string}\n             */\n            this.updatedAt = undefined;\n        }\n\n        /**\n         * @param {number} containerId\n         *\n         * @returns {deferred.promise}\n         */\n\n\n        _createClass(Variable, [{\n            key: 'save',\n            value: function save(containerId) {\n\n                var result = {},\n                    promise;\n\n                var excludedProperty = ['id', 'updatedAt'];\n\n                for (var property in this) {\n\n                    if (!angular.isFunction(this[property]) && this.hasOwnProperty(property) && excludedProperty.indexOf(property) === -1) {\n\n                        if (property === 'type') {\n\n                            result[property] = this[property].id;\n                        } else {\n\n                            result[property] = this[property];\n                        }\n                    }\n                }\n\n                if (this.id === undefined) {\n\n                    promise = resource.post(containerId, result);\n                } else {\n\n                    promise = resource.put(this.id, result);\n                }\n\n                return promise;\n            }\n\n            /**\n             * @returns {deferred.promise|Boolean}\n             */\n\n        }, {\n            key: 'remove',\n            value: function remove() {\n\n                if (this.id === undefined) {\n\n                    return false;\n                }\n\n                return resource.delete(this.id);\n            }\n        }]);\n\n        return Variable;\n    }();\n\n    return Variable;\n};\n\nexports.default = variableFactory;\n\n},{}],85:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar variableTypeFactory = function variableTypeFactory(resource) {\n\n  /**\n   * @name Variable\n   * @description Variable entity\n   */\n\n  var VariableType = function VariableType() {\n    _classCallCheck(this, VariableType);\n\n    /**\n     * @type {number}\n     */\n    this.id = undefined;\n\n    /**\n     * @type {string}\n     */\n    this.name = undefined;\n\n    /**\n     * @type {string}\n     */\n    this.helper = undefined;\n  };\n\n  return VariableType;\n};\n\nexports.default = variableTypeFactory;\n\n},{}],86:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @name variable#VariableFormProvider\n * @namespace clearcode.tm.variable\n */\n/* eslint-disable */\n\nvar VariableFormProvider = function () {\n    function VariableFormProvider() {\n        _classCallCheck(this, VariableFormProvider);\n\n        this.collection = {};\n    }\n\n    /**\n     * @description Add variable form template for specific type\n     *\n     * @param {String} name\n     * @param {Object} settings\n     * @returns {VariableFormProvider}\n     */\n\n\n    _createClass(VariableFormProvider, [{\n        key: 'addType',\n        value: function addType(name, settings) {\n\n            var self = this;\n\n            if (self.collection[name] !== undefined) {\n\n                throw new Error('Form type with provided name already exist');\n            }\n\n            self.collection[name] = settings;\n\n            return self;\n        }\n\n        /**\n         * @description Get specific form template by name of variable type\n         *\n         * @param {String} name\n         * @returns {String|Boolean}\n         */\n\n    }, {\n        key: 'getType',\n        value: function getType(name) {\n\n            var self = this;\n\n            if (self.collection[name] !== undefined) {\n\n                return self.collection[name];\n            }\n\n            return false;\n        }\n    }, {\n        key: '$get',\n        value: function $get() {\n\n            return this;\n        }\n    }]);\n\n    return VariableFormProvider;\n}();\n/* eslint-enable */\n\n\nexports.default = VariableFormProvider;\n\n},{}],87:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * This program is free software: you can redistribute it and/or modify it under\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * the terms of the GNU Affero General Public License as published by the Free\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Software Foundation, either version 3 of the License, or (at your option) any\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * later version.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * This program is distrubuted in the hope that it will be useful,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * but WITHOUT ANY WARRANTY; without even the implied warranty of\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * GNU Affero General Public License for more details.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * You should have received a copy of the GNU Affero General Public License\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * along with this program. If not, see <http://www.gnu.org/licenses/>.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\n\nvar _Variable = require('../entity/Variable.js');\n\nvar _Variable2 = _interopRequireDefault(_Variable);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar transformResponse = function transformResponse(resp) {\n\n    var Variable = (0, _Variable2.default)(this);\n\n    var variable = new Variable();\n\n    variable.id = resp.id;\n    variable.name = resp.name;\n    variable.description = resp.description;\n    variable.type = resp.type;\n    variable.value = resp.value;\n    variable.options = resp.options;\n    variable.updatedAt = resp.updated_at;\n\n    return variable;\n};\n\nvar appendTransform = function appendTransform(defaults, transform) {\n\n    // We can't guarantee that the default transformation is an array\n    defaults = angular.isArray(defaults) ? defaults : [defaults];\n\n    // Append the new transformation to the defaults\n    return defaults.concat(transform);\n};\n\n/**\n * @name VariableResource\n */\n\nvar VariableResource = function () {\n    /**\n     * @param {$http} $http\n     * @param {$q} $q\n     */\n\n    function VariableResource($http, $q) {\n        _classCallCheck(this, VariableResource);\n\n        this.http = $http;\n        this.q = $q;\n    }\n\n    /**\n     * @returns {Variable}\n     */\n\n\n    _createClass(VariableResource, [{\n        key: 'getEntityObject',\n        value: function getEntityObject() {\n\n            var Variable = (0, _Variable2.default)(this);\n\n            return new Variable();\n        }\n\n        /**\n         * @description Send request to get specific entity\n         *\n         * @param {number} id\n         *\n         * @returns {deferred.promise}\n         */\n\n    }, {\n        key: 'get',\n        value: function get(id) {\n            var _this = this;\n\n            var deferred = this.q.defer();\n\n            this.http({\n                method: 'GET',\n                url: '/api/variables/' + id,\n                transformResponse: appendTransform(this.http.defaults.transformResponse, function (resp, header, status) {\n\n                    if (status < 400) {\n\n                        return transformResponse.call(_this, resp.data);\n                    } else {\n\n                        return resp;\n                    }\n                })\n            }).success(function (resp) {\n\n                deferred.resolve(resp);\n            }).error(function (err) {\n\n                deferred.reject(err);\n            });\n\n            return deferred.promise;\n        }\n\n        /**\n         * @description Send request to get list of entity\n         *\n         * @param {number} containerId\n         * @param {Object} params\n         *\n         * @returns {deferred.promise}\n         */\n\n    }, {\n        key: 'query',\n        value: function query(containerId, params) {\n            var _this2 = this;\n\n            var deferred = this.q.defer();\n\n            this.http({\n                method: 'GET',\n                url: '/api/containers/' + containerId + '/variables',\n                params: params,\n                transformResponse: appendTransform(this.http.defaults.transformResponse, function (resp) {\n\n                    for (var element in resp.data) {\n\n                        if (resp.data[element] instanceof Object) {\n\n                            resp.data[element] = transformResponse.call(_this2, resp.data[element]);\n                        }\n                    }\n\n                    return resp;\n                })\n            }).success(function (resp) {\n\n                deferred.resolve(resp);\n            }).error(function (err) {\n\n                deferred.reject(err);\n            });\n\n            return deferred.promise;\n        }\n\n        /**\n         * @description Send request to get list of entity\n         *\n         * @param {number} containerId\n         * @param {Object} params\n         *\n         * @returns {deferred.promise}\n         */\n\n    }, {\n        key: 'queryAllAvailable',\n        value: function queryAllAvailable(containerId, params) {\n            var _this3 = this;\n\n            var deferred = this.q.defer();\n\n            this.http({\n                method: 'GET',\n                url: '/api/containers/' + containerId + '/available-variables',\n                params: params,\n                transformResponse: appendTransform(this.http.defaults.transformResponse, function (resp) {\n\n                    for (var element in resp.data) {\n\n                        if (resp.data[element] instanceof Object) {\n\n                            resp.data[element] = transformResponse.call(_this3, resp.data[element]);\n                        }\n                    }\n\n                    return resp;\n                })\n            }).success(function (resp) {\n\n                deferred.resolve(resp);\n            }).error(function (err) {\n\n                deferred.reject(err);\n            });\n\n            return deferred.promise;\n        }\n\n        /**\n         * @description Send request to delete entity\n         *\n         * @param {number} id\n         *\n         * @returns {deferred.promise}\n         */\n\n    }, {\n        key: 'delete',\n        value: function _delete(id) {\n\n            var deferred = this.q.defer();\n\n            this.http({\n                method: 'DELETE',\n                url: '/api/variables/' + id\n            }).success(function (data) {\n\n                deferred.resolve(data);\n            }).error(function (err) {\n\n                deferred.reject(err);\n            });\n\n            return deferred.promise;\n        }\n\n        /**\n         * @description Send request to create entity\n         *\n         * @param {number} containerId\n         * @param {object} entity\n         *\n         * @returns {deferred.promise}\n         */\n\n    }, {\n        key: 'post',\n        value: function post(containerId, entity) {\n            var _this4 = this;\n\n            var deferred = this.q.defer();\n\n            this.http({\n                method: 'POST',\n                url: '/api/containers/' + containerId + '/variables',\n                data: entity,\n                transformResponse: appendTransform(this.http.defaults.transformResponse, function (resp, header, status) {\n\n                    if (status < 400) {\n\n                        return transformResponse.call(_this4, resp.data);\n                    } else {\n\n                        return resp;\n                    }\n                })\n            }).success(function (resp) {\n\n                deferred.resolve(resp);\n            }).error(function (err) {\n\n                deferred.reject(err);\n            });\n\n            return deferred.promise;\n        }\n\n        /**\n         * Send request to update entity\n         *\n         * @param {number} id\n         * @param {object} entity\n         *\n         * @returns {deferred.promise}\n         */\n\n    }, {\n        key: 'put',\n        value: function put(id, entity) {\n            var _this5 = this;\n\n            var deferred = this.q.defer();\n\n            this.http({\n                method: 'PUT',\n                url: '/api/variables/' + id,\n                data: entity,\n                transformResponse: appendTransform(this.http.defaults.transformResponse, function (resp, header, status) {\n\n                    if (status < 400) {\n\n                        return transformResponse.call(_this5, resp.data);\n                    } else {\n\n                        return resp;\n                    }\n                })\n            }).success(function (resp) {\n\n                deferred.resolve(resp);\n            }).error(function (err) {\n\n                deferred.reject(err);\n            });\n\n            return deferred.promise;\n        }\n    }]);\n\n    return VariableResource;\n}();\n\nexports.default = VariableResource;\n\n},{\"../entity/Variable.js\":84}],88:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * This program is free software: you can redistribute it and/or modify it under\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * the terms of the GNU Affero General Public License as published by the Free\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Software Foundation, either version 3 of the License, or (at your option) any\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * later version.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * This program is distrubuted in the hope that it will be useful,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * but WITHOUT ANY WARRANTY; without even the implied warranty of\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * GNU Affero General Public License for more details.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * You should have received a copy of the GNU Affero General Public License\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * along with this program. If not, see <http://www.gnu.org/licenses/>.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\n\nvar _VariableType = require('../entity/VariableType.js');\n\nvar _VariableType2 = _interopRequireDefault(_VariableType);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar transformResponse = function transformResponse(resp) {\n\n    var VariableType = (0, _VariableType2.default)(this);\n\n    var type = new VariableType();\n\n    type.id = resp.id;\n    type.name = resp.name;\n    type.helper = resp.helper;\n\n    return type;\n};\n\nvar appendTransform = function appendTransform(defaults, transform) {\n\n    // We can't guarantee that the default transformation is an array\n    defaults = angular.isArray(defaults) ? defaults : [defaults];\n\n    // Append the new transformation to the defaults\n    return defaults.concat(transform);\n};\n\n/**\n * @name VariableResource\n */\n\nvar VariableTypeResource = function () {\n    /**\n     * @param {$http} $http\n     * @param {$q} $q\n     */\n\n    function VariableTypeResource($http, $q) {\n        _classCallCheck(this, VariableTypeResource);\n\n        this.http = $http;\n        this.q = $q;\n    }\n\n    /**\n     * @returns {Variable}\n     */\n\n\n    _createClass(VariableTypeResource, [{\n        key: 'getEntityObject',\n        value: function getEntityObject() {\n\n            var VariableType = (0, _VariableType2.default)(this);\n\n            return new VariableType();\n        }\n\n        /**\n         * @description Send request to get list of entity\n         *\n         * @param {Object} params\n         *\n         * @returns {deferred.promise}\n         */\n\n    }, {\n        key: 'query',\n        value: function query(params) {\n            var _this = this;\n\n            var deferred = this.q.defer();\n\n            this.http({\n                method: 'GET',\n                url: '/api/variable-types',\n                params: params,\n                transformResponse: appendTransform(this.http.defaults.transformResponse, function (resp) {\n\n                    for (var element in resp.data) {\n\n                        if (resp.data[element] instanceof Object) {\n\n                            resp.data[element] = transformResponse.call(_this, resp.data[element]);\n                        }\n                    }\n\n                    return resp;\n                })\n            }).success(function (resp) {\n\n                deferred.resolve(resp);\n            }).error(function (err) {\n\n                deferred.reject(err);\n            });\n\n            return deferred.promise;\n        }\n    }]);\n\n    return VariableTypeResource;\n}();\n\nexports.default = VariableTypeResource;\n\n},{\"../entity/VariableType.js\":85}],89:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar scope = undefined,\n    compile = undefined;\n\nvar template = '\\n    <span class=\"input-group-addon\" ng-click=\"selectorCtrl.toggleVariablesList($event)\" style=\"cursor: pointer;\">\\n        <i class=\"icon-variable-insert\"></i>\\n    </span>';\n\nvar elementWrapper = '<div class=\"input-group cc-select\"></div>';\n\n/**\n * @name VariableSelector\n */\n\nvar VariableSelector = function () {\n    function VariableSelector() {\n        _classCallCheck(this, VariableSelector);\n    }\n\n    _createClass(VariableSelector, [{\n        key: 'getTemplate',\n        value: function getTemplate() {\n            return template;\n        }\n    }, {\n        key: 'getElementWrapper',\n        value: function getElementWrapper() {\n            return elementWrapper;\n        }\n    }, {\n        key: 'addVariablePrompt',\n        value: function addVariablePrompt(elementValue) {\n            var text = !isVariablePromptOpen(elementValue) ? openVariablePrompt(elementValue) : elementValue;\n\n            return text;\n        }\n    }, {\n        key: 'selectVariable',\n        value: function selectVariable(elementValue, variable) {\n            return (elementValue + ' ' + variable.name + ' }}').trim();\n        }\n    }, {\n        key: 'removeVariablePrompt',\n        value: function removeVariablePrompt(elementValue) {\n            return isVariablePromptOpen(elementValue) ? _removeVariablePrompt(elementValue) : elementValue;\n        }\n    }], [{\n        key: 'selectorFactory',\n        value: function selectorFactory() {\n            return new VariableSelector();\n        }\n    }]);\n\n    return VariableSelector;\n}();\n\nfunction isVariablePromptOpen(elementValue) {\n    return elementValue.slice(-2) === '{{';\n}\n\nfunction openVariablePrompt(elementValue) {\n    return (elementValue + ' {{').trim();\n}\n\nfunction _removeVariablePrompt(elementValue) {\n    return elementValue.substring(0, elementValue.length - 2).trim();\n}\n\nexports.default = VariableSelector;\n\n},{}],90:[function(require,module,exports){\n'use strict';\n\nvar _ManageController = require('./controllers/ManageController.js');\n\nvar _ManageController2 = _interopRequireDefault(_ManageController);\n\nvar _CreateController = require('./controllers/CreateController.js');\n\nvar _CreateController2 = _interopRequireDefault(_CreateController);\n\nvar _EditController = require('./controllers/EditController.js');\n\nvar _EditController2 = _interopRequireDefault(_EditController);\n\nvar _SelectorController = require('./controllers/SelectorController');\n\nvar _SelectorController2 = _interopRequireDefault(_SelectorController);\n\nvar _VariableResource = require('./resource/VariableResource.js');\n\nvar _VariableResource2 = _interopRequireDefault(_VariableResource);\n\nvar _VariableTypeResource = require('./resource/VariableTypeResource.js');\n\nvar _VariableTypeResource2 = _interopRequireDefault(_VariableTypeResource);\n\nvar _VariableFormProvider = require('./providers/VariableFormProvider.js');\n\nvar _VariableFormProvider2 = _interopRequireDefault(_VariableFormProvider);\n\nvar _VariableSelector = require('./services/VariableSelector.js');\n\nvar _VariableSelector2 = _interopRequireDefault(_VariableSelector);\n\nvar _variableSelector = require('./directives/variableSelector.js');\n\nvar _variableSelector2 = _interopRequireDefault(_variableSelector);\n\nvar _variableClickOutside = require('./directives/variableClickOutside.js');\n\nvar _variableClickOutside2 = _interopRequireDefault(_variableClickOutside);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar MODULE_NAME = 'clearcode.tm.variable';\nvar MODULE_DIR = 'app/modules/variable';\n\nvar CONDITION_MODULE_NAME = 'clearcode.tm.condition';\n\n_ManageController2.default.$inject = ['ngTableParams', '$stateParams', MODULE_NAME + '.variableResource', 'clearcode.tm.alert.alert', 'clearcode.tm.tagContainer.paramConverter', 'clearcode.tm.tagContainer.currentContainer', 'clearcode.tm.pageInfo.pageInfo', '$scope', '$state', '$translate'];\n\n_SelectorController2.default.$inject = ['$compile', '$stateParams', '$scope', MODULE_NAME + '.variableSelector', CONDITION_MODULE_NAME + '.condition'];\n\n_CreateController2.default.$inject = [MODULE_NAME + '.variableResource', MODULE_NAME + '.variableTypeResource', 'clearcode.tm.pageInfo.pageInfo', '$scope', MODULE_NAME + '.$variableForm', 'clearcode.tm.tagContainer.currentContainer', '$stateParams', 'clearcode.tm.alert.alert', '$state', '$translate', 'clearcode.tm.condition.condition'];\n\n_EditController2.default.$inject = [MODULE_NAME + '.variableResource', MODULE_NAME + '.variableTypeResource', 'clearcode.tm.pageInfo.pageInfo', '$scope', MODULE_NAME + '.$variableForm', 'clearcode.tm.tagContainer.currentContainer', '$stateParams', 'clearcode.tm.alert.alert', '$state', '$translate', 'clearcode.tm.condition.condition'];\n\n_VariableResource2.default.$inject = ['$http', '$q'];\n\n_variableClickOutside2.default.$inject = ['$document'];\n\n_VariableTypeResource2.default.$inject = ['$http', '$q'];\n\nangular.module(MODULE_NAME, ['pascalprecht.translate', 'ui.router', 'ngTable', 'clearcode.tm.alert', 'clearcode.tm.pageInfo', 'clearcode.tm.tagContainer']).config(['$stateProvider', function ($stateProvider) {\n\n    $stateProvider.state('variables', {\n        url: '/containers/{containerId}/variables',\n        controller: MODULE_NAME + '.ManageController as view',\n        templateUrl: MODULE_DIR + '/views/manage.html',\n        data: {\n            roles: ['ROLE_SUPER_ADMIN'],\n            hasContainerList: true\n        }\n    }).state('variableCreate', {\n        url: '/containers/{containerId}/variable-create',\n        controller: MODULE_NAME + '.CreateController as view',\n        templateUrl: MODULE_DIR + '/views/create.html',\n        data: {\n            roles: ['ROLE_SUPER_ADMIN'],\n            hasContainerList: true\n        }\n    }).state('variableEdit', {\n        url: '/containers/{containerId}/variable-edit/{variableId}',\n        controller: MODULE_NAME + '.EditController as view',\n        templateUrl: MODULE_DIR + '/views/edit.html',\n        data: {\n            roles: ['ROLE_SUPER_ADMIN'],\n            hasContainerList: true\n        }\n    });\n}]).run(['clearcode.tm.alert.$alert', function ($alertProvider) {\n\n    $alertProvider.addMessagePattern('variables.close', 'You are trying to close unsaved variable.');\n}]).controller(MODULE_NAME + '.ManageController', _ManageController2.default).controller(MODULE_NAME + '.CreateController', _CreateController2.default).controller(MODULE_NAME + '.EditController', _EditController2.default).controller(MODULE_NAME + '.SelectorController', _SelectorController2.default).service(MODULE_NAME + '.variableResource', _VariableResource2.default).service(MODULE_NAME + '.variableTypeResource', _VariableTypeResource2.default).provider(MODULE_NAME + '.$variableForm', _VariableFormProvider2.default).service(MODULE_NAME + '.variableSelector', _VariableSelector2.default).directive('variableSelector', _variableSelector2.default).directive('variableClickOutside', _variableClickOutside2.default);\n\nmodule.exports = { MODULE_NAME: MODULE_NAME };\n\n},{\"./controllers/CreateController.js\":78,\"./controllers/EditController.js\":79,\"./controllers/ManageController.js\":80,\"./controllers/SelectorController\":81,\"./directives/variableClickOutside.js\":82,\"./directives/variableSelector.js\":83,\"./providers/VariableFormProvider.js\":86,\"./resource/VariableResource.js\":87,\"./resource/VariableTypeResource.js\":88,\"./services/VariableSelector.js\":89}],91:[function(require,module,exports){\n'use strict';\n\nvar _AlertProvider = require('./providers/AlertProvider.js');\n\nvar _AlertProvider2 = _interopRequireDefault(_AlertProvider);\n\nvar _AlertController = require('./controllers/AlertController.js');\n\nvar _AlertController2 = _interopRequireDefault(_AlertController);\n\nvar _AlertDirective = require('./directives/AlertDirective.js');\n\nvar _AlertDirective2 = _interopRequireDefault(_AlertDirective);\n\nvar _Alert = require('./services/Alert.js');\n\nvar _Alert2 = _interopRequireDefault(_Alert);\n\nvar _RefreshAlert = require('./services/RefreshAlert.js');\n\nvar _RefreshAlert2 = _interopRequireDefault(_RefreshAlert);\n\nvar _AlertStorage = require('./services/AlertStorage.js');\n\nvar _AlertStorage2 = _interopRequireDefault(_AlertStorage);\n\nvar _UniqueStorage = require('./services/UniqueStorage.js');\n\nvar _UniqueStorage2 = _interopRequireDefault(_UniqueStorage);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar MODULE_NAME = 'clearcode.tm.alert'; /**\n                                         * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n                                         *\n                                         * This program is free software: you can redistribute it and/or modify it under\n                                         * the terms of the GNU Affero General Public License as published by the Free\n                                         * Software Foundation, either version 3 of the License, or (at your option) any\n                                         * later version.\n                                         *\n                                         * This program is distrubuted in the hope that it will be useful,\n                                         * but WITHOUT ANY WARRANTY; without even the implied warranty of\n                                         * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n                                         * GNU Affero General Public License for more details.\n                                         *\n                                         * You should have received a copy of the GNU Affero General Public License\n                                         * along with this program. If not, see <http://www.gnu.org/licenses/>.\n                                         */\n\n_Alert2.default.$inject = ['$timeout', MODULE_NAME + '.alertStorage', MODULE_NAME + '.$alert', '$translate'];\n\n_RefreshAlert2.default.$inject = ['$timeout', MODULE_NAME + '.alertStorage', MODULE_NAME + '.$alert', '$translate', '$window'];\n\n_AlertDirective2.default.$inject = [MODULE_NAME + '.alert', MODULE_NAME + '.$alert', '$window'];\n\n_AlertController2.default.$inject = [MODULE_NAME + '.alertStorage'];\n\nangular.module(MODULE_NAME, ['pascalprecht.translate', 'ngSanitize', 'ngAnimate']).provider(MODULE_NAME + '.$alert', _AlertProvider2.default).factory(MODULE_NAME + '.alertStorage', function () {\n\n    return new _AlertStorage2.default();\n}).factory(MODULE_NAME + '.alertUniqueStorage', function () {\n\n    return new _UniqueStorage2.default();\n}).service(MODULE_NAME + '.alert', _Alert2.default).service(MODULE_NAME + '.refreshAlert', _RefreshAlert2.default).directive('ccNotification', _AlertDirective2.default).controller(MODULE_NAME + '.AlertController', _AlertController2.default);\n\nmodule.exports = { MODULE_NAME: MODULE_NAME };\n\n},{\"./controllers/AlertController.js\":92,\"./directives/AlertDirective.js\":93,\"./providers/AlertProvider.js\":94,\"./services/Alert.js\":95,\"./services/AlertStorage.js\":96,\"./services/RefreshAlert.js\":97,\"./services/UniqueStorage.js\":98}],92:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @name alert#AlertController\n * @namespace clearcode.tm.form\n */\n\nvar AlertController = function () {\n\n  /**\n   * @param {AlertStorage} storage\n   */\n\n  function AlertController(AlertStorage) {\n    _classCallCheck(this, AlertController);\n\n    this.storage = AlertStorage;\n  }\n\n  /**\n   * @description Get all alerts\n   * @returns {Object}\n   */\n\n\n  _createClass(AlertController, [{\n    key: \"getAll\",\n    value: function getAll() {\n\n      return this.storage.getAlerts();\n    }\n\n    /**\n     * @description Delete alert\n     * @param id\n     */\n\n  }, {\n    key: \"remove\",\n    value: function remove(id) {\n\n      this.storage.remove(id);\n    }\n\n    /**\n     * @description Clear alert\n     * @param id\n     */\n\n  }, {\n    key: \"clear\",\n    value: function clear() {\n\n      this.storage.clean();\n    }\n  }]);\n\n  return AlertController;\n}();\n\nexports.default = AlertController;\n\n},{}],93:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @name alert#AlertDirective\n * @namespace clearcode.tm.alert\n */\n\nvar alertDirective = function alertDirective(Alert, alertProvider) {\n\n    return {\n        restrict: 'E',\n        templateUrl: 'modules/alert/views/alert.html',\n        scope: {\n            interval: '='\n        },\n        controller: 'clearcode.tm.alert.AlertController',\n        controllerAs: 'alertCtrl',\n        link: function link(scope) {\n\n            Alert.settings.interval = angular.isDefined(scope.interval) ? scope.interval : alertProvider.interval;\n        }\n    };\n};\n\nexports.default = alertDirective;\n\n},{}],94:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @name alert#AlertProvider\n * @namespace clearcode.tm.alert\n */\n/* eslint-disable */\n\nvar AlertProvider = function () {\n    function AlertProvider() {\n        _classCallCheck(this, AlertProvider);\n\n        this.interval = 6000;\n        this.messagePatterns = {};\n    }\n\n    /**\n     * @description Add message pattern\n     *\n     * @param {String} id\n     * @param {String} pattern\n     * @returns {AlertProvider}\n     */\n\n\n    _createClass(AlertProvider, [{\n        key: 'addMessagePattern',\n        value: function addMessagePattern(id, pattern) {\n\n            var self = this;\n\n            if (self.messagePatterns[id] !== undefined) {\n\n                throw new Error('Pattern with provided id already exist');\n            }\n\n            self.messagePatterns[id] = pattern;\n\n            return self;\n        }\n\n        /**\n         * @description Add message patterns from array of objects\n         *\n         * @param {Array} patterns\n         * @returns {AlertProvider}\n         */\n\n    }, {\n        key: 'addMessagesPattern',\n        value: function addMessagesPattern(patterns) {\n\n            var self = this;\n\n            if (!angular.isArray(patterns)) {\n\n                throw new Error('AlertProvider.addMessagesPattern expects\\n                 first argument to be Array but received ' + (typeof patterns === 'undefined' ? 'undefined' : _typeof(patterns)));\n            }\n\n            angular.forEach(patterns, function (obj) {\n\n                if (angular.isObject(obj)) {\n\n                    angular.forEach(obj, function (elem, key) {\n\n                        self.addMessagePattern(key, elem);\n                    });\n                }\n            });\n\n            return self;\n        }\n\n        /**\n         * @description Get specific message pattern by id\n         *\n         * @param {String} id\n         * @returns {String|Boolean}\n         */\n\n    }, {\n        key: 'getMessagePattern',\n        value: function getMessagePattern(id) {\n\n            var self = this;\n\n            if (self.messagePatterns[id] !== undefined) {\n\n                return self.messagePatterns[id];\n            }\n\n            return false;\n        }\n    }, {\n        key: '$get',\n        value: function $get() {\n\n            return this;\n        }\n    }]);\n\n    return AlertProvider;\n}();\n/* eslint-enable */\n\n\nexports.default = AlertProvider;\n\n},{}],95:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @name alert#Alert\n * @namespace clearcode.tm.alert\n */\n\n/**\n* @description Remove Alert after Timeout\n*\n* @param {Integer} id from storage\n*/\nvar removeAfterTimeout = function removeAfterTimeout(id) {\n\n  var self = this;\n\n  if (self.settings.interval > 0) {\n\n    return self.$timeout(function () {\n\n      self.storage.remove(id);\n    }, self.settings.interval);\n  }\n};\n\n/**\n* @description Add alert to storage\n*\n* @param {String} type\n* @param {String} pattern\n* @param {Array} params\n* @returns {Number}\n*/\nvar addAlert = function addAlert(type, pattern, params) {\n\n  var message,\n      id,\n      self = this;\n  message = self.convertToMessage(pattern, params);\n\n  self.translate([message]).then(function (translations) {\n\n    id = self.storage.add(type, translations[message]);\n    removeAfterTimeout.call(self, id);\n\n    return id;\n  });\n};\n\nvar Alert = function () {\n  function Alert($timeout, storage, provider, $translate) {\n    _classCallCheck(this, Alert);\n\n    /**\n     * @type {AlertStorage}\n     */\n    this.storage = storage;\n    /**\n     * @type {Object}\n     */\n    this.$timeout = $timeout;\n    /**\n     * @type {TranslationProvider}\n     */\n    this.settings = this.settings === undefined ? provider : angular.extend(this.settings, provider);\n\n    /**\n     * @readonly\n     * @type {string}\n     */\n    this.INFO_TYPE = 'info';\n\n    /**\n     * @readonly\n     * @type {string}\n     */\n    this.ERROR_TYPE = 'danger';\n\n    /**\n     * @readonly\n     * @type {string}\n     */\n    this.SUCCESS_TYPE = 'success';\n\n    /**\n     * @readonly\n     * @type {$translate}\n     */\n    this.translate = $translate;\n  }\n\n  /**\n   * @description Add success type alert\n   *\n   * @param {String} id\n   * @param {Array} params\n   */\n\n\n  _createClass(Alert, [{\n    key: 'success',\n    value: function success(id) {\n      var params = arguments.length <= 1 || arguments[1] === undefined ? [] : arguments[1];\n\n\n      addAlert.call(this, this.SUCCESS_TYPE, id, params);\n    }\n\n    /**\n     * @description Add error type alert\n     *\n     * @param {String} id\n     * @param {Array} params\n     */\n\n  }, {\n    key: 'error',\n    value: function error(id) {\n      var params = arguments.length <= 1 || arguments[1] === undefined ? [] : arguments[1];\n\n\n      addAlert.call(this, this.ERROR_TYPE, id, params);\n    }\n\n    /**\n     * @description Add info type alert\n     *\n     * @param {String} id\n     * @param {Array} params\n     */\n\n  }, {\n    key: 'info',\n    value: function info(id) {\n      var params = arguments.length <= 1 || arguments[1] === undefined ? [] : arguments[1];\n\n\n      addAlert.call(this, this.INFO_TYPE, id, params);\n    }\n\n    /**\n     * @returns {AlertStorage}\n     */\n\n  }, {\n    key: 'getStorage',\n    value: function getStorage() {\n\n      return this.storage;\n    }\n\n    /**\n     * @description Convert message if is a pattern\n     *\n     * @param {Object|String} pattern\n     * @param {Array} params\n     * @returns {String}\n     */\n\n  }, {\n    key: 'convertToMessage',\n    value: function convertToMessage(pattern, params) {\n\n      var self, message;\n\n      self = this;\n\n      if (angular.isDefined(pattern)) {\n\n        pattern = self.settings.getMessagePattern(pattern);\n      }\n\n      message = vsprintf(pattern, params);\n\n      return message;\n    }\n  }]);\n\n  return Alert;\n}();\n\nexports.default = Alert;\n\n},{}],96:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @name alert#AlertStorage\n * @namespace clearcode.tm.alert\n */\n\nvar indicator;\n\nvar AlertStorage = function () {\n    function AlertStorage() {\n        _classCallCheck(this, AlertStorage);\n\n        indicator = 0;\n        this.collection = {};\n    }\n\n    /**\n     * @description Returns all alerts objects\n     *\n     * @returns {Object}\n     */\n\n\n    _createClass(AlertStorage, [{\n        key: \"getAlerts\",\n        value: function getAlerts() {\n\n            return this.collection;\n        }\n\n        /**\n         * @description Returns specific alert object\n         *\n         * @param {String} id\n         * @returns {Object}\n         */\n\n    }, {\n        key: \"getAlert\",\n        value: function getAlert(id) {\n\n            return this.collection[id];\n        }\n\n        /**\n         * @description Add alert to collection\n         *\n         * @param {String} type\n         * @param {String} message\n         * @returns {Number}\n         */\n\n    }, {\n        key: \"add\",\n        value: function add(type, message) {\n\n            this.collection[indicator] = {\n                type: type,\n                message: message\n            };\n\n            return indicator++;\n        }\n\n        /**\n         * @description Check whether collection contains alert\n         *\n         * @param {String} type\n         * @param {String} message\n         * @returns {Boolean}\n         */\n\n    }, {\n        key: \"has\",\n        value: function has(type, message) {\n\n            for (var alert in this.collection) {\n\n                if (type === this.collection[alert].type && message === this.collection[alert].message) {\n\n                    return true;\n                }\n            }\n\n            return false;\n        }\n\n        /**\n         * @description Remove alert from collection\n         *\n         * @param {Number} id\n         * @returns {Boolean}\n         */\n\n    }, {\n        key: \"remove\",\n        value: function remove(id) {\n\n            var self = this;\n\n            if (self.collection[id] !== undefined) {\n\n                delete self.collection[id];\n\n                return true;\n            }\n\n            return false;\n        }\n\n        /**\n         * @description Remove all alerts from collection\n         */\n\n    }, {\n        key: \"clean\",\n        value: function clean() {\n\n            this.collection = {};\n        }\n    }]);\n\n    return AlertStorage;\n}();\n\nexports.default = AlertStorage;\n\n},{}],97:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _Alert2 = require('./Alert.js');\n\nvar _Alert3 = _interopRequireDefault(_Alert2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This program is free software: you can redistribute it and/or modify it under\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * the terms of the GNU Affero General Public License as published by the Free\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Software Foundation, either version 3 of the License, or (at your option) any\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * later version.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This program is distrubuted in the hope that it will be useful,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * but WITHOUT ANY WARRANTY; without even the implied warranty of\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * GNU Affero General Public License for more details.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * You should have received a copy of the GNU Affero General Public License\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * along with this program. If not, see <http://www.gnu.org/licenses/>.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n/**\n * @name alert#RefreshAlert\n * @namespace clearcode.tm.alert\n */\n\nvar RefreshAlert = function (_Alert) {\n  _inherits(RefreshAlert, _Alert);\n\n  /**\n   * @param {$timeout} $timeout\n   * @param {storage} storage\n   * @param {provider} provider\n   * @param {$translate} $translate\n   * @param {$window} $window\n   */\n\n  function RefreshAlert($timeout, storage, provider, $translate, $window) {\n    _classCallCheck(this, RefreshAlert);\n\n    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(RefreshAlert).call(this, $timeout, storage, provider, $translate));\n\n    _this.window = $window;\n\n    return _this;\n  }\n\n  /**\n   * Add success message after refresh page\n   *\n   * @param localStorageKey\n   * @param message\n   */\n\n\n  _createClass(RefreshAlert, [{\n    key: 'success',\n    value: function success(localStorageKey, message) {\n\n      if (this.window.localStorage[localStorageKey]) {\n\n        _get(Object.getPrototypeOf(RefreshAlert.prototype), 'success', this).call(this, message);\n\n        this.window.localStorage.removeItem(localStorageKey);\n      }\n    }\n  }]);\n\n  return RefreshAlert;\n}(_Alert3.default);\n\nexports.default = RefreshAlert;\n\n},{\"./Alert.js\":95}],98:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _AlertStorage2 = require('./AlertStorage.js');\n\nvar _AlertStorage3 = _interopRequireDefault(_AlertStorage2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This program is free software: you can redistribute it and/or modify it under\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * the terms of the GNU Affero General Public License as published by the Free\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Software Foundation, either version 3 of the License, or (at your option) any\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * later version.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This program is distrubuted in the hope that it will be useful,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * but WITHOUT ANY WARRANTY; without even the implied warranty of\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * GNU Affero General Public License for more details.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * You should have received a copy of the GNU Affero General Public License\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * along with this program. If not, see <http://www.gnu.org/licenses/>.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n/**\n * @name alert#UniqueStorage\n * @namespace clearcode.tm.alert\n */\n\nvar UniqueStorage = function (_AlertStorage) {\n  _inherits(UniqueStorage, _AlertStorage);\n\n  function UniqueStorage() {\n    _classCallCheck(this, UniqueStorage);\n\n    return _possibleConstructorReturn(this, Object.getPrototypeOf(UniqueStorage).apply(this, arguments));\n  }\n\n  _createClass(UniqueStorage, [{\n    key: 'add',\n\n\n    /**\n     * @description Add alert to collection\n     *\n     * @param {String} type\n     * @param {String} message\n     * @returns {Number}\n     */\n    value: function add(type, message) {\n\n      if (this.has(type, message)) {\n\n        return -1;\n      }\n\n      return _get(Object.getPrototypeOf(UniqueStorage.prototype), 'add', this).call(this, type, message);\n    }\n  }]);\n\n  return UniqueStorage;\n}(_AlertStorage3.default);\n\nexports.default = UniqueStorage;\n\n},{\"./AlertStorage.js\":96}],99:[function(require,module,exports){\n'use strict';\n\nvar _clipboardDirective = require('./directives/clipboardDirective.js');\n\nvar _clipboardDirective2 = _interopRequireDefault(_clipboardDirective);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar MODULE_NAME = 'clearcode.tm.clipboard'; /**\n                                             * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n                                             *\n                                             * This program is free software: you can redistribute it and/or modify it under\n                                             * the terms of the GNU Affero General Public License as published by the Free\n                                             * Software Foundation, either version 3 of the License, or (at your option) any\n                                             * later version.\n                                             *\n                                             * This program is distrubuted in the hope that it will be useful,\n                                             * but WITHOUT ANY WARRANTY; without even the implied warranty of\n                                             * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n                                             * GNU Affero General Public License for more details.\n                                             *\n                                             * You should have received a copy of the GNU Affero General Public License\n                                             * along with this program. If not, see <http://www.gnu.org/licenses/>.\n                                             */\n\n_clipboardDirective2.default.$inject = ['$compile'];\n\nangular.module(MODULE_NAME, ['ngClipboard']).directive('ccClipboard', _clipboardDirective2.default);\n\nmodule.exports = { MODULE_NAME: MODULE_NAME };\n\n},{\"./directives/clipboardDirective.js\":100}],100:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar clipboardDirective = function clipboardDirective($compile) {\n\n    return {\n        restrict: 'A',\n        scope: {\n            ngModel: '='\n        },\n        link: function link(scope, element) {\n\n            element.wrap('<div class=\"cc-clipboard\"></div>');\n\n            var template = angular.element(document.getElementById('clipboard.html')).html();\n            var tplElement = $compile(template)(scope);\n            var clipboard = element.parent();\n\n            clipboard.append(tplElement);\n\n            var button = clipboard.find('button');\n\n            button.addClass('hidden');\n\n            clipboard.on('mouseenter', function () {\n\n                button.removeClass('hidden');\n            }).on('mouseleave', function () {\n\n                button.addClass('hidden');\n            });\n\n            scope.copyToClipboard = function () {\n\n                return scope.ngModel;\n            };\n        }\n    };\n};\n\nexports.default = clipboardDirective;\n\n},{}],101:[function(require,module,exports){\n'use strict';\n\nvar _ConfirmDirective = require('./directives/ConfirmDirective.js');\n\nvar _ConfirmDirective2 = _interopRequireDefault(_ConfirmDirective);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar MODULE_NAME = 'clearcode.tm.confirm'; /**\n                                           * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n                                           *\n                                           * This program is free software: you can redistribute it and/or modify it under\n                                           * the terms of the GNU Affero General Public License as published by the Free\n                                           * Software Foundation, either version 3 of the License, or (at your option) any\n                                           * later version.\n                                           *\n                                           * This program is distrubuted in the hope that it will be useful,\n                                           * but WITHOUT ANY WARRANTY; without even the implied warranty of\n                                           * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n                                           * GNU Affero General Public License for more details.\n                                           *\n                                           * You should have received a copy of the GNU Affero General Public License\n                                           * along with this program. If not, see <http://www.gnu.org/licenses/>.\n                                           */\n\nangular.module(MODULE_NAME, []).directive('ccConfirm', _ConfirmDirective2.default);\n\nmodule.exports = { MODULE_NAME: MODULE_NAME };\n\n},{\"./directives/ConfirmDirective.js\":102}],102:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar confirmDirective = function confirmDirective() {\n\n    return {\n        restrict: 'A',\n        templateUrl: 'modules/confirm/views/confirm.html',\n        transclude: true,\n        replace: true,\n        scope: {\n            ccConfirm: '&'\n        },\n        link: function link(scope) {\n\n            scope.turnOn = false;\n\n            scope.approve = function () {\n\n                scope.ccConfirm();\n            };\n\n            scope.cancel = function () {\n\n                scope.turnOn = false;\n            };\n\n            scope.confirm = function () {\n\n                scope.turnOn = true;\n            };\n        }\n    };\n};\n\nexports.default = confirmDirective;\n\n},{}],103:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _AlertController2 = require('../../alert/controllers/AlertController.js');\n\nvar _AlertController3 = _interopRequireDefault(_AlertController2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This program is free software: you can redistribute it and/or modify it under\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * the terms of the GNU Affero General Public License as published by the Free\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Software Foundation, either version 3 of the License, or (at your option) any\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * later version.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This program is distrubuted in the hope that it will be useful,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * but WITHOUT ANY WARRANTY; without even the implied warranty of\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * GNU Affero General Public License for more details.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * You should have received a copy of the GNU Affero General Public License\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * along with this program. If not, see <http://www.gnu.org/licenses/>.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n/**\n * @name alert#AlertFormController\n * @namespace clearcode.tm.alert\n */\n\nvar AlertFormController = function (_AlertController) {\n  _inherits(AlertFormController, _AlertController);\n\n  function AlertFormController() {\n    _classCallCheck(this, AlertFormController);\n\n    return _possibleConstructorReturn(this, Object.getPrototypeOf(AlertFormController).apply(this, arguments));\n  }\n\n  return AlertFormController;\n}(_AlertController3.default);\n\nexports.default = AlertFormController;\n\n},{\"../../alert/controllers/AlertController.js\":92}],104:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @name form#AlertFormDirective\n * @namespace clearcode.tm.form\n */\n\nvar alertFormDirective = function alertFormDirective(Alert, alertProvider) {\n\n    return {\n        restrict: 'E',\n        templateUrl: 'modules/form/views/alertForm.html',\n        scope: {\n            interval: '='\n        },\n        controller: 'clearcode.tm.form.AlertFormController',\n        controllerAs: 'alertFormCtrl',\n        link: function link(scope) {\n\n            Alert.settings.interval = angular.isDefined(scope.interval) ? scope.interval : alertProvider.interval;\n        }\n    };\n};\n\nexports.default = alertFormDirective;\n\n},{}],105:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @name form#CheckboxDirective\n * @namespace clearcode.tm.form\n */\n/* eslint-disable */\nvar CheckboxDirective = function CheckboxDirective() {\n\n  return {\n    restrict: 'A',\n    require: '?ngModel',\n    scope: {\n      ngModel: '='\n    },\n    link: function link(scope, element, attrs) {\n\n      var checkedClass = 'cc-checkbox-checked';\n\n      element.wrap('<div class=\"cc-checkbox\"></div>');\n\n      if (scope.ngModel !== undefined) {\n\n        if (scope.ngModel || attrs.ngTrueValue !== undefined && scope.ngModel === attrs.ngTrueValue) {\n\n          element.parent().addClass(checkedClass);\n        } else {\n\n          element.parent().removeClass(checkedClass);\n        }\n      }\n\n      scope.$watch('ngModel', function (value) {\n\n        if (value === true || attrs.ngTrueValue !== undefined && value === attrs.ngTrueValue) {\n\n          element.parent().addClass(checkedClass);\n        } else {\n\n          element.parent().removeClass(checkedClass);\n        }\n      });\n    }\n  };\n};\n/* eslint-enable */\n\nexports.default = CheckboxDirective;\n\n},{}],106:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @name form#CheckboxDirective\n * @namespace clearcode.tm.form\n */\n/* eslint-disable */\nvar RadioButtonDirective = function RadioButtonDirective() {\n\n    return {\n        restrict: 'A',\n        require: '?ccRadioModel',\n        scope: {\n            ccRadioModel: '=',\n            ccDisabled: '='\n        },\n        link: function link(scope, element, attrs) {\n\n            element.wrap('<div class=\"cc-radio\"></div>');\n\n            if (scope.ccRadioModel !== undefined) {\n\n                if (scope.ccDisabled) {\n\n                    element.parent().addClass('radioDisabled');\n                }\n\n                if (scope.ccRadioModel === element[0].defaultValue) {\n\n                    element.parent().addClass('radioSelected');\n                } else {\n\n                    element.parent().removeClass('radioSelected');\n                }\n            }\n\n            scope.$watch('ccRadioModel', function (value) {\n\n                if (value === element[0].defaultValue) {\n\n                    element.parent().addClass('radioSelected');\n                } else {\n\n                    element.parent().removeClass('radioSelected');\n                }\n            });\n        }\n    };\n};\n/* eslint-enable */\n\nexports.default = RadioButtonDirective;\n\n},{}],107:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @name form#SelectDirective\n * @namespace clearcode.tm.form\n */\n\nvar SelectDirective = function SelectDirective($compile) {\n\n\t/* eslint-disable */\n\treturn {\n\t\trestrict: 'A',\n\t\tpriority: 1,\n\t\tscope: {\n\t\t\tngModel: '=',\n\t\t\tccSelectOptions: '=',\n\t\t\tccSelectValue: '@',\n\t\t\tccSelectLabel: '@'\n\t\t},\n\t\tlink: function link(scope, element, attrs) {\n\n\t\t\telement.wrap('<div class=\"cc-select\"></div>');\n\t\t\telement.addClass('ng-hide');\n\n\t\t\tvar template = angular.element(document.getElementById('select-template.html')).html();\n\t\t\tvar tmpElement = $compile(template)(scope);\n\n\t\t\telement.parent().append(tmpElement);\n\n\t\t\tscope.id = attrs.id;\n\n\t\t\tvar searchByValue = function searchByValue(value) {\n\n\t\t\t\tfor (var index in scope.ccSelectOptions) {\n\n\t\t\t\t\tif (scope.ccSelectOptions[index][scope.ccSelectValue] === value) {\n\n\t\t\t\t\t\treturn index;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t};\n\n\t\t\tscope.getActiveOptionLabel = function () {\n\n\t\t\t\tvar index = searchByValue(scope.ngModel);\n\n\t\t\t\tif (index !== false) {\n\n\t\t\t\t\treturn scope.ccSelectOptions[index][scope.ccSelectLabel];\n\t\t\t\t} else {\n\n\t\t\t\t\treturn '';\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tscope.changeSelection = function (element) {\n\n\t\t\t\tscope.ngModel = element[scope.ccSelectValue];\n\t\t\t};\n\t\t}\n\t};\n\t/* eslint-enable */\n};\n\nexports.default = SelectDirective;\n\n},{}],108:[function(require,module,exports){\n'use strict';\n\nvar _CheckboxDirective = require('./directives/CheckboxDirective.js');\n\nvar _CheckboxDirective2 = _interopRequireDefault(_CheckboxDirective);\n\nvar _RadioButtonDirective = require('./directives/RadioButtonDirective.js');\n\nvar _RadioButtonDirective2 = _interopRequireDefault(_RadioButtonDirective);\n\nvar _SelectDirective = require('./directives/SelectDirective.js');\n\nvar _SelectDirective2 = _interopRequireDefault(_SelectDirective);\n\nvar _AlertForm = require('./services/AlertForm.js');\n\nvar _AlertForm2 = _interopRequireDefault(_AlertForm);\n\nvar _AlertFormDirective = require('./directives/AlertFormDirective.js');\n\nvar _AlertFormDirective2 = _interopRequireDefault(_AlertFormDirective);\n\nvar _AlertFormController = require('./controller/AlertFormController.js');\n\nvar _AlertFormController2 = _interopRequireDefault(_AlertFormController);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar MODULE_NAME = 'clearcode.tm.form';\n\n_AlertForm2.default.$inject = ['$timeout', 'clearcode.tm.alert.alertUniqueStorage', 'clearcode.tm.alert.$alert', '$translate'];\n\n_AlertFormDirective2.default.$inject = [MODULE_NAME + '.alertForm', 'clearcode.tm.alert.$alert'];\n\n_AlertFormController2.default.$inject = ['clearcode.tm.alert.alertUniqueStorage'];\n\n_SelectDirective2.default.$inject = ['$compile'];\n\nangular.module(MODULE_NAME, ['pascalprecht.translate', 'clearcode.tm.alert']).service(MODULE_NAME + '.alertForm', _AlertForm2.default).directive('ccSelect', _SelectDirective2.default).directive('ccCheckbox', _CheckboxDirective2.default).directive('ccRadio', _RadioButtonDirective2.default).directive('ccNotificationForm', _AlertFormDirective2.default).controller(MODULE_NAME + '.AlertFormController', _AlertFormController2.default);\n\nmodule.exports = { MODULE_NAME: MODULE_NAME };\n\n},{\"./controller/AlertFormController.js\":103,\"./directives/AlertFormDirective.js\":104,\"./directives/CheckboxDirective.js\":105,\"./directives/RadioButtonDirective.js\":106,\"./directives/SelectDirective.js\":107,\"./services/AlertForm.js\":109}],109:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _Alert2 = require('../../alert/services/Alert.js');\n\nvar _Alert3 = _interopRequireDefault(_Alert2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This program is free software: you can redistribute it and/or modify it under\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * the terms of the GNU Affero General Public License as published by the Free\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Software Foundation, either version 3 of the License, or (at your option) any\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * later version.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This program is distrubuted in the hope that it will be useful,\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * but WITHOUT ANY WARRANTY; without even the implied warranty of\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * GNU Affero General Public License for more details.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * You should have received a copy of the GNU Affero General Public License\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * along with this program. If not, see <http://www.gnu.org/licenses/>.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n/**\n * @name alert#AlertForm\n * @namespace clearcode.tm.form\n */\n\nvar AlertForm = function (_Alert) {\n  _inherits(AlertForm, _Alert);\n\n  function AlertForm() {\n    _classCallCheck(this, AlertForm);\n\n    return _possibleConstructorReturn(this, Object.getPrototypeOf(AlertForm).apply(this, arguments));\n  }\n\n  return AlertForm;\n}(_Alert3.default);\n\nexports.default = AlertForm;\n\n},{\"../../alert/services/Alert.js\":95}],110:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @name helpSystem#HelpSystemDirective\n * @namespace clearcode.tm.helpSystem\n */\n\nvar helpSystemDirective = function helpSystemDirective() {\n\n  return {\n    restrict: 'EA',\n    replace: true,\n    scope: { content: '@', placement: '@' },\n    templateUrl: 'modules/helpSystem/views/helpSystem.html'\n  };\n};\n\nexports.default = helpSystemDirective;\n\n},{}],111:[function(require,module,exports){\n'use strict';\n\nvar _HelpSystemDirective = require('./directives/HelpSystemDirective.js');\n\nvar _HelpSystemDirective2 = _interopRequireDefault(_HelpSystemDirective);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar MODULE_NAME = 'clearcode.tm.helpSystem'; /**\n                                              * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n                                              *\n                                              * This program is free software: you can redistribute it and/or modify it under\n                                              * the terms of the GNU Affero General Public License as published by the Free\n                                              * Software Foundation, either version 3 of the License, or (at your option) any\n                                              * later version.\n                                              *\n                                              * This program is distrubuted in the hope that it will be useful,\n                                              * but WITHOUT ANY WARRANTY; without even the implied warranty of\n                                              * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n                                              * GNU Affero General Public License for more details.\n                                              *\n                                              * You should have received a copy of the GNU Affero General Public License\n                                              * along with this program. If not, see <http://www.gnu.org/licenses/>.\n                                              */\n\nangular.module(MODULE_NAME, []).directive('ccHelp', _HelpSystemDirective2.default);\n\nmodule.exports = { MODULE_NAME: MODULE_NAME };\n\n},{\"./directives/HelpSystemDirective.js\":110}],112:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @type {$state}\n */\nvar state;\n\nvar BreadcrumbController = function () {\n\n  /**\n   * @param PageInfo\n   */\n\n  function BreadcrumbController(scope, $state, PageInfo) {\n    var _this = this;\n\n    _classCallCheck(this, BreadcrumbController);\n\n    this.breadcrumb = PageInfo.get();\n    state = $state;\n\n    scope.$on('page.info', function () {\n\n      _this.breadcrumb = PageInfo.get();\n    });\n  }\n\n  /**\n   * @param breadcrumb\n   */\n\n\n  _createClass(BreadcrumbController, [{\n    key: 'stateGo',\n    value: function stateGo(breadcrumb) {\n\n      state.go(breadcrumb.state, breadcrumb.params);\n    }\n  }]);\n\n  return BreadcrumbController;\n}();\n\nexports.default = BreadcrumbController;\n\n},{}],113:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @type {String}\n */\nvar DEFAULT_TITLE = '7tag Welcome';\n\nvar TitleController = function () {\n\n    /**\n     * @param {Object} scope\n     * @param PageInfo\n     */\n\n    function TitleController(scope, PageInfo) {\n        var _this = this;\n\n        _classCallCheck(this, TitleController);\n\n        this.title = DEFAULT_TITLE;\n        this.default = DEFAULT_TITLE;\n\n        scope.$on('page.info', function () {\n\n            _this.info = PageInfo.get();\n            _this.setTitle();\n        });\n    }\n\n    _createClass(TitleController, [{\n        key: 'setTitle',\n        value: function setTitle() {\n\n            this.title = this.info.map(function (element) {\n                return element.name;\n            }).reduce(function (previous, current) {\n                return previous += ' - ' + current;\n            });\n        }\n    }]);\n\n    return TitleController;\n}();\n\nexports.default = TitleController;\n\n},{}],114:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @name pageInfo#BreadcrumbDirective\n * @namespace clearcode.tm.pageInfo\n */\n\nvar breadcrumbDirective = function breadcrumbDirective() {\n\n  return {\n    restrict: 'E',\n    templateUrl: 'modules/pageInfo/views/breadcrumb.html',\n    controller: 'clearcode.tm.pageInfo.BreadcrumbController',\n    controllerAs: 'breadcrumbCtrl'\n  };\n};\n\nexports.default = breadcrumbDirective;\n\n},{}],115:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @name pageInfo#TitleDirective\n * @namespace clearcode.tm.pageInfo\n */\nvar titleDirective = function titleDirective() {\n\n  return {\n    restrict: 'A',\n    controller: 'clearcode.tm.pageInfo.TitleController',\n    controllerAs: 'titleCtrl'\n  };\n};\n\nexports.default = titleDirective;\n\n},{}],116:[function(require,module,exports){\n'use strict';\n\nvar _BreadcrumbController = require('./controllers/BreadcrumbController.js');\n\nvar _BreadcrumbController2 = _interopRequireDefault(_BreadcrumbController);\n\nvar _TitleController = require('./controllers/TitleController.js');\n\nvar _TitleController2 = _interopRequireDefault(_TitleController);\n\nvar _BreadcrumbDirective = require('./directives/BreadcrumbDirective.js');\n\nvar _BreadcrumbDirective2 = _interopRequireDefault(_BreadcrumbDirective);\n\nvar _PageInfo = require('./services/PageInfo.js');\n\nvar _PageInfo2 = _interopRequireDefault(_PageInfo);\n\nvar _TitleDirective = require('./directives/TitleDirective.js');\n\nvar _TitleDirective2 = _interopRequireDefault(_TitleDirective);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar MODULE_NAME = 'clearcode.tm.pageInfo'; /**\n                                            * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n                                            *\n                                            * This program is free software: you can redistribute it and/or modify it under\n                                            * the terms of the GNU Affero General Public License as published by the Free\n                                            * Software Foundation, either version 3 of the License, or (at your option) any\n                                            * later version.\n                                            *\n                                            * This program is distrubuted in the hope that it will be useful,\n                                            * but WITHOUT ANY WARRANTY; without even the implied warranty of\n                                            * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n                                            * GNU Affero General Public License for more details.\n                                            *\n                                            * You should have received a copy of the GNU Affero General Public License\n                                            * along with this program. If not, see <http://www.gnu.org/licenses/>.\n                                            */\n\n_BreadcrumbController2.default.$inject = ['$scope', '$state', MODULE_NAME + '.pageInfo'];\n\n_TitleController2.default.$inject = ['$scope', MODULE_NAME + '.pageInfo'];\n\n_PageInfo2.default.$inject = ['$rootScope'];\n\nangular.module(MODULE_NAME, []).controller(MODULE_NAME + '.BreadcrumbController', _BreadcrumbController2.default).controller(MODULE_NAME + '.TitleController', _TitleController2.default).directive('ccBreadcrumb', _BreadcrumbDirective2.default).directive('ccTitle', _TitleDirective2.default).service(MODULE_NAME + '.pageInfo', _PageInfo2.default);\n\nmodule.exports = { MODULE_NAME: MODULE_NAME };\n\n},{\"./controllers/BreadcrumbController.js\":112,\"./controllers/TitleController.js\":113,\"./directives/BreadcrumbDirective.js\":114,\"./directives/TitleDirective.js\":115,\"./services/PageInfo.js\":117}],117:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @type {rootScope}\n */\nvar rootScope;\n\nvar PageInfo = function () {\n\n  /**\n   * @param $rootScope\n   */\n\n  function PageInfo($rootScope) {\n    _classCallCheck(this, PageInfo);\n\n    this.navigation = [];\n\n    rootScope = $rootScope;\n  }\n\n  /**\n   * @param name\n   * @param state\n   * @param params\n   *\n   * @return {PageInfo}\n   */\n\n\n  _createClass(PageInfo, [{\n    key: 'add',\n    value: function add(name, state, params) {\n\n      this.navigation.push({\n        name: name,\n        state: state,\n        params: params\n      });\n\n      return this;\n    }\n\n    /**\n     * @return {PageInfo}\n     */\n\n  }, {\n    key: 'clear',\n    value: function clear() {\n\n      this.navigation = [];\n\n      return this;\n    }\n\n    /**\n     * Gives signal into breadcrumb and title\n     */\n\n  }, {\n    key: 'broadcast',\n    value: function broadcast() {\n\n      rootScope.$broadcast('page.info');\n    }\n\n    /**\n     * @return {Array}\n     */\n\n  }, {\n    key: 'get',\n    value: function get() {\n\n      return this.navigation;\n    }\n  }]);\n\n  return PageInfo;\n}();\n\nexports.default = PageInfo;\n\n},{}],118:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * Math.ceil in angular filter\n *\n * @returns {Function}\n *\n * @author Arek Zajc <a.zajac@clearcode.cc>\n */\nvar tmCeilFilter = function tmCeilFilter() {\n\n  return function (number) {\n\n    return Math.ceil(number);\n  };\n};\n\nexports.default = tmCeilFilter;\n\n},{}],119:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar tmDateFilter = function tmDateFilter($filter, defaultDateFormat) {\n\n    var angularDateFilter = $filter('date');\n\n    return function (theDate) {\n        var format = arguments.length <= 1 || arguments[1] === undefined ? null : arguments[1];\n\n\n        if (format === null) {\n\n            format = defaultDateFormat;\n        }\n\n        return angularDateFilter(theDate, format);\n    };\n};\n\nexports.default = tmDateFilter;\n\n},{}],120:[function(require,module,exports){\n'use strict';\n\nvar _tmDateFilter = require('./filters/tmDateFilter.js');\n\nvar _tmDateFilter2 = _interopRequireDefault(_tmDateFilter);\n\nvar _tmCeilFilter = require('./filters/tmCeilFilter.js');\n\nvar _tmCeilFilter2 = _interopRequireDefault(_tmCeilFilter);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar MODULE_NAME = 'clearcode.tm.sanitize';\n\n_tmDateFilter2.default.$inject = ['$filter', 'defaultDateFormat'];\n\nangular.module(MODULE_NAME, []).filter('tmDate', _tmDateFilter2.default).filter('tmCeil', _tmCeilFilter2.default);\n\nmodule.exports = { MODULE_NAME: MODULE_NAME };\n\n},{\"./filters/tmCeilFilter.js\":118,\"./filters/tmDateFilter.js\":119}],121:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @name HTMLLinter\n */\n\nvar HTMLLinter = function () {\n    function HTMLLinter($window) {\n        _classCallCheck(this, HTMLLinter);\n\n        this.$window = $window;\n    }\n\n    _createClass(HTMLLinter, [{\n        key: \"lint\",\n        value: function lint(text, lintRules) {\n\n            return this.$window.HTMLHint ? this.$window.HTMLHint.verify(text, lintRules) : [];\n        }\n    }]);\n\n    return HTMLLinter;\n}();\n\nexports.default = HTMLLinter;\n\n},{}],122:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar HTML_LINT_RULES = {\n    'tagname-lowercase': false,\n    'attr-lowercase': false,\n    'attr-value-double-quotes': false,\n    'attr-value-not-empty': false,\n    'attr-no-duplication': false,\n    'doctype-first': false,\n    'tag-pair': false,\n    'tag-self-close': false,\n    'spec-char-escape': false,\n    'id-unique': false,\n    'src-not-empty': false,\n    'title-require': false,\n    'head-script-disabled': false,\n    'doctype-html5': false,\n    'id-class-value': false,\n    'style-disabled': false,\n    'inline-style-disabled': false,\n    'inline-script-disabled': false,\n    'space-tab-mixed-disabled': false,\n    'id-class-ad-disabled': false,\n    'href-abs-or-rel': false,\n    'attr-unsafe-chars': false\n};\n\nvar JS_LINT_RULES = {\n    'browser': true,\n    'devel': true,\n    'dojo': true,\n    'jquery': true,\n    'mootools': true,\n    'nonstandard': true,\n    'prototypejs': true,\n    'yui': true,\n    'bitwise': false,\n    'camelcase': false,\n    'curly': true,\n    'enforceall': false,\n    'eqeqeq': true,\n    'es3': false,\n    'es5': false,\n    'forin': false,\n    'freeze': false,\n    'funcscope': true,\n    'futurehostile': true,\n    'immed': false,\n    'latedef': false,\n    'nocomma': true,\n    'nonew': true,\n    'notypeof': true,\n    'shadow': 'inner',\n    'strict': false,\n    'sub': false,\n    'undef': true,\n    'unused': true,\n    'asi': true\n};\n\n/**\n * @name LintingRules\n */\n\nvar LintingRules = function () {\n    function LintingRules() {\n        _classCallCheck(this, LintingRules);\n    }\n\n    _createClass(LintingRules, [{\n        key: 'getLintingRules',\n        value: function getLintingRules() {\n            var jsHintRules = angular.copy(JS_LINT_RULES),\n                htmlHintRules = angular.copy(HTML_LINT_RULES);\n\n            htmlHintRules.jshint = jsHintRules;\n\n            return htmlHintRules;\n        }\n    }]);\n\n    return LintingRules;\n}();\n\nexports.default = LintingRules;\n\n},{}],123:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar HTML_HEAD_WRAP_START = '<!DOCTYPE HTML><html><head>';\nvar HTML_HEAD_WRAP_END = '</head><body></body></html>';\n\n/**\n * @name TagTemplateLinter\n */\n\nvar TagTemplateLinter = function () {\n\n    /**\n     * @param  TagTemplateToJsConverter tagTemplateToJsConverter\n     * @param  LintingRules lintingRules\n     * @param  HtmlLinter htmlLinter\n     */\n\n    function TagTemplateLinter(tagTemplateToJsConverter, lintingRules, htmlLinter) {\n        _classCallCheck(this, TagTemplateLinter);\n\n        this.tagTemplateToJsConverter = tagTemplateToJsConverter;\n        this.lintingRules = lintingRules;\n        this.htmlLinter = htmlLinter;\n    }\n\n    /**\n     * @param  {string} text\n     * @param  {object} options\n     * @param  {object} cm\n     * @return {[object]}\n     */\n\n\n    _createClass(TagTemplateLinter, [{\n        key: 'validate',\n        value: function validate(text, options, cm) {\n\n            if (options.deactivate) {\n                return [];\n            }\n\n            var htmlWrappedText = this.wrapInHtmlTag(text),\n                lines = htmlWrappedText.split('\\n');\n\n            this.tagTemplateToJsConverter.convert(lines, cm.options);\n\n            var tagTemplateWithFixedJsText = lines.join('\\n'),\n                allErrors = this.lint(tagTemplateWithFixedJsText, options),\n                jsErrors = this.filterOutHtmlErrors(allErrors, lines.length),\n                errors = [];\n\n            for (var i = 0; i < jsErrors.length; i++) {\n                errors.push(this.mapToLintRepresentation(jsErrors[i]));\n            }\n\n            return errors;\n        }\n\n        /**\n         * @param  {string} text\n         * @return {string}\n         */\n\n    }, {\n        key: 'wrapInHtmlTag',\n        value: function wrapInHtmlTag(text) {\n\n            return HTML_HEAD_WRAP_START + '\\n                ' + text + '\\n                ' + HTML_HEAD_WRAP_END;\n        }\n\n        /**\n         * @param  {[object]} errors\n         * @param  {number} lineCount\n         * @return {[object]}\n         */\n\n    }, {\n        key: 'filterOutHtmlErrors',\n        value: function filterOutHtmlErrors(errors, lineCount) {\n\n            var jsErrors = [];\n\n            for (var i = 0; i < errors.length; i++) {\n                var error = errors[i];\n\n                if (!this.isHtmlError(error, lineCount)) {\n\n                    error.line -= 1;\n                    jsErrors.push(error);\n                }\n            }\n\n            return jsErrors;\n        }\n\n        /**\n         * @param  {object}  error\n         * @param  {number}  lastLine\n         * @return {Boolean}\n         */\n\n    }, {\n        key: 'isHtmlError',\n        value: function isHtmlError(error, lastLineIdx) {\n\n            return error.line === 0 || error.line === lastLineIdx;\n        }\n\n        /**\n         * @param  {string} text\n         * @param  {object} options\n         * @return {[object]}\n         */\n\n    }, {\n        key: 'lint',\n        value: function lint(text, options) {\n\n            options = options || {};\n\n            var lintRules = angular.extend({}, this.lintingRules.getLintingRules(), options);\n\n            return this.htmlLinter.lint(text, lintRules);\n        }\n\n        /**\n         * @param  {object} message\n         * @return {object}\n         */\n\n    }, {\n        key: 'mapToLintRepresentation',\n        value: function mapToLintRepresentation(message) {\n\n            return {\n                from: CodeMirror.Pos(message.line - 1, 0),\n                to: CodeMirror.Pos(message.line - 1, 0),\n                message: message.message,\n                severity: message.type\n            };\n        }\n    }]);\n\n    return TagTemplateLinter;\n}();\n\nexports.default = TagTemplateLinter;\n\n},{}],124:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar TAG_TEMPLATE_VARIABLE_START = '{{';\nvar TAG_TEMPLATE_VARIABLE_END = '}}';\n\nvar TagTemplateToJsConverter = function () {\n    function TagTemplateToJsConverter() {\n        _classCallCheck(this, TagTemplateToJsConverter);\n    }\n\n    _createClass(TagTemplateToJsConverter, [{\n        key: 'convert',\n\n\n        /**\n         * @param  {[string]} textLines\n         * @param  {object} options\n         * @return {[string]}\n         */\n        value: function convert(textLines, options) {\n\n            if (!options || !options.variables) {\n                return textLines;\n            }\n\n            var variables = this.getVariables(options),\n                lineIdx = 0;\n\n            while (!this.isCursorAfterTheEndOfText(textLines.length, lineIdx)) {\n                var line = textLines[lineIdx],\n                    lineContainsVariable = line.indexOf(TAG_TEMPLATE_VARIABLE_START) !== -1;\n\n                if (lineContainsVariable) {\n                    textLines[lineIdx] = this.replaceVariablesExpressions(variables, line);\n                }\n\n                ++lineIdx;\n            }\n\n            return textLines;\n        }\n\n        /**\n         * @param  {number}  totalLines\n         * @param  {number}  line\n         * @return {Boolean}\n         */\n\n    }, {\n        key: 'isCursorAfterTheEndOfText',\n        value: function isCursorAfterTheEndOfText(totalLines, line) {\n\n            return line >= totalLines;\n        }\n\n        /**\n         * @param  {object} options\n         * @return {[object]}\n         */\n\n    }, {\n        key: 'getVariables',\n        value: function getVariables(options) {\n\n            var variables = [];\n\n            for (var i = 0; i < options.variables.length; i++) {\n\n                var variable = options.variables[i],\n                    words = variable.name.trim().split(/\\s+/),\n                    variableObj = {\n                    name: variable.name,\n                    pattern: this.createVariableSearchPattern(variable.name),\n                    replacement: '\\'' + words.join('_') + '\\''\n                };\n\n                variables.push(variableObj);\n            }\n\n            return variables;\n        }\n\n        /**\n         * @param  {string} variableName\n         * @return {RegExp}\n         */\n\n    }, {\n        key: 'createVariableSearchPattern',\n        value: function createVariableSearchPattern(variableName) {\n\n            var whitespace = '[\\\\s]',\n                words = variableName.split(/[\\s]+/),\n                regexStr = words.join(whitespace + '+');\n\n            regexStr = '' + TAG_TEMPLATE_VARIABLE_START + whitespace + '*' + regexStr + whitespace + '*' + TAG_TEMPLATE_VARIABLE_END;\n\n            return new RegExp(regexStr, \"g\");\n        }\n\n        /**\n         * @param  {[object]} variables\n         * @param  {[string]} line\n         * @return {string}\n         */\n\n    }, {\n        key: 'replaceVariablesExpressions',\n        value: function replaceVariablesExpressions(variables, line) {\n\n            for (var i = 0; i < variables.length; i++) {\n                var variable = variables[i];\n                line = line.replace(variable.pattern, variable.replacement);\n            }\n\n            return line;\n        }\n    }]);\n\n    return TagTemplateToJsConverter;\n}();\n\nexports.default = TagTemplateToJsConverter;\n\n},{}],125:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar DEFAULT_CONFIG = {\n    mode: {\n        name: \"htmlmixed\"\n    },\n    lineNumbers: true,\n    styleActiveLine: true,\n    matchBrackets: true,\n    theme: 'stg',\n    gutters: [\"CodeMirror-lint-markers\"],\n    lint: {}\n};\n\n/**\n * @name TextEditorConfig\n */\n\nvar TextEditorConfig = function () {\n\n    /**\n     * @param {TagTemplateLinter} tagTemplateLinter\n     */\n\n    function TextEditorConfig(tagTemplateLinter) {\n        _classCallCheck(this, TextEditorConfig);\n\n        this.tagTemplateLinter = tagTemplateLinter;\n    }\n\n    /**\n     * @param {Object} configOverrides\n     *\n     * @return {Object}\n     */\n\n\n    _createClass(TextEditorConfig, [{\n        key: \"getConfig\",\n        value: function getConfig(configOverrides) {\n            var _this = this;\n\n            var overrides = angular.isObject(configOverrides) ? configOverrides : {},\n                cfg = angular.extend({}, DEFAULT_CONFIG, overrides);\n\n            cfg.lint.getAnnotations = function (value, opt, cm) {\n                return _this.tagTemplateLinter.validate(value, opt, cm);\n            };\n\n            return cfg;\n        }\n    }]);\n\n    return TextEditorConfig;\n}();\n\nexports.default = TextEditorConfig;\n\n},{}],126:[function(require,module,exports){\n'use strict';\n\nvar _TextEditorConfig = require('./service/TextEditorConfig.js');\n\nvar _TextEditorConfig2 = _interopRequireDefault(_TextEditorConfig);\n\nvar _TagTemplateLinter = require('./service/TagTemplateLinter.js');\n\nvar _TagTemplateLinter2 = _interopRequireDefault(_TagTemplateLinter);\n\nvar _TagTemplateToJsConverter = require('./service/TagTemplateToJsConverter.js');\n\nvar _TagTemplateToJsConverter2 = _interopRequireDefault(_TagTemplateToJsConverter);\n\nvar _LintingRules = require('./service/LintingRules.js');\n\nvar _LintingRules2 = _interopRequireDefault(_LintingRules);\n\nvar _HTMLLinter = require('./service/HTMLLinter.js');\n\nvar _HTMLLinter2 = _interopRequireDefault(_HTMLLinter);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar MODULE_NAME = 'clearcode.tm.textEditor'; /**\n                                              * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n                                              *\n                                              * This program is free software: you can redistribute it and/or modify it under\n                                              * the terms of the GNU Affero General Public License as published by the Free\n                                              * Software Foundation, either version 3 of the License, or (at your option) any\n                                              * later version.\n                                              *\n                                              * This program is distrubuted in the hope that it will be useful,\n                                              * but WITHOUT ANY WARRANTY; without even the implied warranty of\n                                              * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n                                              * GNU Affero General Public License for more details.\n                                              *\n                                              * You should have received a copy of the GNU Affero General Public License\n                                              * along with this program. If not, see <http://www.gnu.org/licenses/>.\n                                              */\n\n_TextEditorConfig2.default.$inject = [MODULE_NAME + '.TagTemplateLinter'];\n\n_TagTemplateLinter2.default.$inject = [MODULE_NAME + '.TagTemplateToJsConverter', MODULE_NAME + '.LintingRules', MODULE_NAME + '.HTMLLinter'];\n\n_HTMLLinter2.default.$inject = ['$window'];\n\nangular.module(MODULE_NAME, []).service(MODULE_NAME + '.LintingRules', _LintingRules2.default).service(MODULE_NAME + '.HTMLLinter', _HTMLLinter2.default).service(MODULE_NAME + '.TagTemplateToJsConverter', _TagTemplateToJsConverter2.default).service(MODULE_NAME + '.TagTemplateLinter', _TagTemplateLinter2.default).service(MODULE_NAME + '.TextEditorConfig', _TextEditorConfig2.default).run(['$rootScope', MODULE_NAME + '.TextEditorConfig', function ($rootScope, TextEditorConfig) {\n\n    $rootScope.TextEditorConfig = TextEditorConfig;\n}]);\n\nmodule.exports = { MODULE_NAME: MODULE_NAME };\n\n},{\"./service/HTMLLinter.js\":121,\"./service/LintingRules.js\":122,\"./service/TagTemplateLinter.js\":123,\"./service/TagTemplateToJsConverter.js\":124,\"./service/TextEditorConfig.js\":125}],127:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar translationFactory = function translationFactory($http, $q) {\n\n    return function (options) {\n\n        var deferred = $q.defer();\n\n        $http({\n            method: 'GET',\n            url: options.url,\n            cache: options.cache\n        }).success(function (data) {\n\n            deferred.resolve(data);\n        }).error(function () {\n\n            deferred.reject();\n        });\n\n        return deferred.promise;\n    };\n};\n\nexports.default = translationFactory;\n\n},{}],128:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar Translation = function () {\n    function Translation(translationFactory) {\n        _classCallCheck(this, Translation);\n\n        this.languages = [];\n        this.translationFactory = translationFactory;\n    }\n\n    /**\n     * @returns {*}\n     */\n\n\n    _createClass(Translation, [{\n        key: 'getLanguages',\n        value: function getLanguages() {\n\n            return this.languages;\n        }\n\n        /**\n         * @param language\n         * @returns {boolean}\n         */\n\n    }, {\n        key: 'hasLanguage',\n        value: function hasLanguage(language) {\n\n            return this.languages.hasOwnProperty(language);\n        }\n    }, {\n        key: 'loadAvailableTranslations',\n        value: function loadAvailableTranslations() {\n            var _this = this;\n\n            return this.translationFactory({\n                'url': '/api/translations',\n                'cache': false\n            }).then(function (data) {\n\n                for (var key in data) {\n\n                    _this.languages.push({\n                        id: key,\n                        name: data[key]\n                    });\n                }\n            });\n        }\n    }]);\n\n    return Translation;\n}();\n\nexports.default = Translation;\n\n},{}],129:[function(require,module,exports){\n'use strict';\n\nvar _TranslationFactory = require('./factory/TranslationFactory.js');\n\nvar _TranslationFactory2 = _interopRequireDefault(_TranslationFactory);\n\nvar _Translation = require('./services/Translation.js');\n\nvar _Translation2 = _interopRequireDefault(_Translation);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar MODULE_NAME = 'clearcode.tm.translation';\n\n_TranslationFactory2.default.$inject = ['$http', '$q'];\n\n_Translation2.default.$inject = [MODULE_NAME + '.translationFactory'];\n\nangular.module(MODULE_NAME, []).factory(MODULE_NAME + '.translationFactory', _TranslationFactory2.default).service(MODULE_NAME + '.translation', _Translation2.default);\n\nmodule.exports = { MODULE_NAME: MODULE_NAME };\n\n},{\"./factory/TranslationFactory.js\":127,\"./services/Translation.js\":128}],130:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\n/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @name validator#stgFormDirective\n * @namespace clearcode.tm.validator\n */\n\nvar isPromise = function isPromise(promise) {\n\n    if ((typeof promise === 'undefined' ? 'undefined' : _typeof(promise)) === 'object' && typeof promise.then === 'function') {\n\n        return true;\n    }\n\n    return false;\n};\n\nvar stgFormDirective = function stgFormDirective($alertProvider, $alertForm) {\n\n    return {\n\n        restrict: 'A',\n        scope: {\n            formResource: '='\n        },\n        link: function link(scope, element) {\n\n            scope.$watch('formResource', function (formPromise) {\n\n                if (formPromise && isPromise(formPromise)) {\n\n                    formPromise.then(function () {}, function (resp) {\n\n                        if (resp.errors.hasOwnProperty('form')) {\n\n                            if (!$alertProvider.getMessagePattern('login.server')) {\n\n                                $alertProvider.addMessagePattern('login.server', resp.errors.form[0]);\n                            }\n\n                            $alertForm.getStorage().clean();\n                            $alertForm.error('login.server');\n                        }\n\n                        for (var field in resp.errors.fields) {\n\n                            if (resp.errors.fields.hasOwnProperty(field)) {\n\n                                var form = scope.$parent[element[0].attributes.name.value];\n\n                                if (resp.errors.fields[field] instanceof Array && resp.errors.fields[field].length !== 0) {\n\n                                    form[field].$invalid = true;\n                                    form[field].$setDirty();\n                                    form[field].$error[field] = resp.errors.fields[field];\n                                } else {\n\n                                    for (var nested in resp.errors.fields[field].fields) {\n\n                                        if (resp.errors.fields[field].fields.hasOwnProperty(nested) && resp.errors.fields[field].fields[nested].length !== 0) {\n\n                                            form[nested].$invalid = true;\n                                            form[nested].$error[nested] = resp.errors.fields[field].fields[nested];\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    });\n                }\n            }, false);\n        }\n\n    };\n};\n\nexports.default = stgFormDirective;\n\n},{}],131:[function(require,module,exports){\n'use strict';\n\nvar _stgFormDirective = require('./directives/stgFormDirective.js');\n\nvar _stgFormDirective2 = _interopRequireDefault(_stgFormDirective);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar MODULE_NAME = 'clearcode.tm.validator'; /**\n                                             * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n                                             *\n                                             * This program is free software: you can redistribute it and/or modify it under\n                                             * the terms of the GNU Affero General Public License as published by the Free\n                                             * Software Foundation, either version 3 of the License, or (at your option) any\n                                             * later version.\n                                             *\n                                             * This program is distrubuted in the hope that it will be useful,\n                                             * but WITHOUT ANY WARRANTY; without even the implied warranty of\n                                             * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n                                             * GNU Affero General Public License for more details.\n                                             *\n                                             * You should have received a copy of the GNU Affero General Public License\n                                             * along with this program. If not, see <http://www.gnu.org/licenses/>.\n                                             */\n\n_stgFormDirective2.default.$inject = ['clearcode.tm.alert.$alert', 'clearcode.tm.form.alertForm'];\n\nangular.module(MODULE_NAME, ['clearcode.tm.alert', 'clearcode.tm.form']).directive('stgForm', _stgFormDirective2.default);\n\nmodule.exports = { MODULE_NAME: MODULE_NAME };\n\n},{\"./directives/stgFormDirective.js\":130}]},{},[1])\n\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport {MODULE_NAME as APPLICATION_MODULE_NAME} from './app.js';\n\nconst MODULE_NAME = 'admin.application.prod';\n\nangular.module(MODULE_NAME, [\n    APPLICATION_MODULE_NAME\n]);\n\nangular.element(document).ready( () => {\n\n    angular.bootstrap(document, [MODULE_NAME]);\n\n});\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport {MODULE_NAME as SECURITY_MODULE_NAME} from './modules/security/security.js';\nimport {MODULE_NAME as UPDATE_MODULE_NAME} from './modules/update/update.js';\nimport {MODULE_NAME as USER_MODULE_NAME} from './modules/user/user.js';\nimport {MODULE_NAME as CONTAINER_MODULE_NAME} from './modules/tagContainer/tagContainer.js';\nimport {MODULE_NAME as TAG_MODULE_NAME} from './modules/tag/tag.js';\nimport {MODULE_NAME as TRIGGER_MODULE_NAME} from './modules/trigger/trigger.js';\nimport {MODULE_NAME as VARIABLE_MODULE_NAME} from './modules/variable/variable.js';\nimport {MODULE_NAME as INTEGRATION_MODULE_NAME} from './modules/integration/integration.js';\nimport {MODULE_NAME as CONDITION_MODULE_NAME} from './modules/condition/condition.js';\nimport {MODULE_NAME as DEBUG_MODULE_NAME} from './modules/debug/debug.js';\nimport {MODULE_NAME as ALERT_MODULE_NAME} from './../modules/alert/alert.js';\nimport {MODULE_NAME as TRANSLATION_MODULE_NAME} from './../modules/translation/translation.js';\nimport {MODULE_NAME as FORM_MODULE_NAME} from './../modules/form/form.js';\nimport {MODULE_NAME as CONFIRM_MODULE_NAME} from './../modules/confirm/confirm.js';\nimport {MODULE_NAME as SANITIZE_MODULE_NAME} from './../modules/sanitize/sanitize.js';\nimport {MODULE_NAME as CLIPBOARD_MODULE_NAME} from './../modules/clipboard/clipboard.js';\nimport {MODULE_NAME as PAGEINFO_MODULE_NAME} from './../modules/pageInfo/pageInfo.js';\nimport {MODULE_NAME as HELPSYSTEM_MODULE_NAME} from './../modules/helpSystem/helpSystem.js';\nimport {MODULE_NAME as VALIDATOR_MODULE_NAME} from './../modules/validator/validator.js';\nimport {MODULE_NAME as TEXT_EDITOR_MODULE_NAME} from './../modules/textEditor/textEditor.js';\n\n\nconst MODULE_NAME = 'admin.application';\n\nangular.module('admin.application.plugins', [\n    TAG_MODULE_NAME\n]);\n\nangular.module(MODULE_NAME, [\n    'pascalprecht.translate',\n    'cgBusy',\n    'ui.router',\n    'ui.bootstrap',\n    'checklist-model',\n    'http-auth-interceptor',\n    SECURITY_MODULE_NAME,\n    UPDATE_MODULE_NAME,\n    USER_MODULE_NAME,\n    CONDITION_MODULE_NAME,\n    TRIGGER_MODULE_NAME,\n    VARIABLE_MODULE_NAME,\n    INTEGRATION_MODULE_NAME,\n    TAG_MODULE_NAME,\n    CONTAINER_MODULE_NAME,\n    ALERT_MODULE_NAME,\n    TRANSLATION_MODULE_NAME,\n    FORM_MODULE_NAME,\n    CONFIRM_MODULE_NAME,\n    SANITIZE_MODULE_NAME,\n    CLIPBOARD_MODULE_NAME,\n    PAGEINFO_MODULE_NAME,\n    HELPSYSTEM_MODULE_NAME,\n    VALIDATOR_MODULE_NAME,\n    DEBUG_MODULE_NAME,\n    TEXT_EDITOR_MODULE_NAME,\n    'ngClipboard',\n    'admin.application.plugins'\n])\n    .run([\n\n        '$rootScope',\n        '$state',\n        'clearcode.tm.alert.$alert',\n        'clearcode.tm.security.security',\n        'clearcode.tm.security.oauthResource',\n        'clearcode.tm.security.tokenStorage',\n        'authService',\n        'clearcode.tm.variable.$variableForm',\n\n        ($rootScope, $state, $alertProvider, security, OAuthResource, tokenStorage, authService, $variableFormProvider) => {\n\n            $variableFormProvider\n                .addType('dataLayer', {\n                    templateUrl: 'app/modules/variable/views/types/dataLayer.html'\n                })\n                .addType('cookie', {\n                    templateUrl: 'app/modules/variable/views/types/cookie.html'\n                })\n                .addType('constant', {\n                    templateUrl: 'app/modules/variable/views/types/constant.html'\n                })\n                .addType('document', {\n                    templateUrl: 'app/modules/variable/views/types/document.html'\n                })\n                .addType('random', {\n                    templateUrl: 'app/modules/variable/views/types/random.html'\n                })\n                .addType('url', {\n                    templateUrl: 'app/modules/variable/views/types/url.html'\n                });\n\n            $alertProvider.addMessagePattern(\n                'error.invalid',\n                'Form is invalid. Please correct selected fields'\n            );\n\n            $alertProvider.addMessagePattern(\n                'success.create',\n                'Settings saved successfully'\n            );\n\n            $alertProvider.addMessagePattern(\n                'success.edit',\n                'Settings saved successfully'\n            );\n\n            $alertProvider.addMessagePattern(\n                'success.remove',\n                'Deleted successfully'\n            );\n\n            $rootScope.$state = $state;\n            $rootScope.animateSidebarReady = false;\n\n            $rootScope.isContainerView = () => false;\n\n            $rootScope.$on('$stateChangeStart', (event, toState, toStateParams) => {\n\n                $rootScope.isContainerView = () => {\n\n                    var hasContainerList = toState.data.hasContainerList !== undefined ?\n                                           toState.data.hasContainerList : false,\n                        isAuthenticated = security.isAuthenticated();\n\n                    if ($rootScope.animateSidebarReady === false && hasContainerList && isAuthenticated) {\n\n                        $rootScope.animateSidebarReady = true;\n\n                    }\n\n                    return hasContainerList && isAuthenticated;\n\n                };\n\n                $rootScope.activeContainerId = toStateParams.containerId;\n\n            });\n\n            $rootScope.$on('event:auth-loginRequired', () => {\n\n                var authToken = tokenStorage.getItem();\n\n                if (undefined !== authToken) {\n\n                    OAuthResource.refreshToken(authToken.refreshToken).then((data) => {\n\n                        tokenStorage.addItem(data);\n\n                        authService.loginConfirmed('success', (config) => {\n\n                            config.headers.Authorization = tokenStorage.getToken();\n\n                            return config;\n\n                        });\n\n                    }, () => {\n\n                        authService.loginCancelled('invalid');\n\n                    });\n\n                }\n\n            });\n\n        }\n    ])\n    .config([\n\n        '$urlRouterProvider',\n        'ngClipProvider',\n        '$translateProvider',\n\n        ($urlRouterProvider, ngClipProvider, $translateProvider) => {\n\n            $urlRouterProvider.otherwise('/containers');\n            ngClipProvider.setPath('ZeroClipboard.swf');\n\n            $translateProvider.useSanitizeValueStrategy('escape');\n\n            $translateProvider\n                .useStaticFilesLoader({\n                    prefix: '/api/translations/',\n                    suffix: '.json'\n                });\n\n            $translateProvider.preferredLanguage('en');\n            $translateProvider.useLocalStorage();\n        }\n\n    ])\n    .value('cgBusyDefaults', {\n        wrapperClass: 'loading'\n    })\n    .value('longDataFormat', 'dd MMMM yyyy')\n    .value('defaultDateFormat', 'yyyy-MM-dd HH:mm')\n    .filter('reverse', () => {\n\n        return (items) => {\n\n            return items.slice().reverse();\n\n        };\n\n    });\n\nmodule.exports = {MODULE_NAME};\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport ConditionResource from './resource/ConditionResource.js';\nimport Condition from './services/Condition.js';\n\nconst MODULE_NAME = 'clearcode.tm.condition';\n\nCondition.$inject = [\n    `${MODULE_NAME}.conditionResource`,\n    'clearcode.tm.tagContainer.currentContainer'\n];\n\nConditionResource.$inject = [\n\t'$http',\n\t'$q'\n];\n\nangular\n    .module(MODULE_NAME, [\n        'clearcode.tm.tagContainer'\n    ])\n    .service(`${MODULE_NAME}.conditionResource`, ConditionResource)\n    .service(`${MODULE_NAME}.condition`, Condition);\n\n\nmodule.exports = {MODULE_NAME};\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar conditionFactory = () => {\n\n    /**\n     * @name Condition\n     * @description Condition entity\n     */\n    class Condition {\n\n        constructor () {\n\n            /**\n             * @type {number}\n             */\n            this.id = undefined;\n\n            /**\n             * @type {string}\n             */\n            this.variable = undefined;\n\n            /**\n             * @type {string}\n             */\n            this.condition = undefined;\n\n            /**\n             * @type {string}\n             */\n            this.value = undefined;\n\n        }\n\n    }\n\n    return Condition;\n\n};\n\n\nexport default conditionFactory;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport conditionFactory from '../entity/Condition.js';\n\n/**\n * @name ConditionResource\n */\nclass ConditionResource {\n\n    /**\n     * @param  {$http} $http\n     * @param  {$q} $q\n     */\n    constructor ($http, $q) {\n\n        this.http = $http;\n        this.q = $q;\n\n    }\n\n    /**\n     * @returns {Condition}\n     */\n    getEntityObject () {\n\n        var Condition = conditionFactory();\n\n        return new Condition();\n\n    }\n\n    /**\n     * @description Send request to get conditions with their specific variables\n     *\n     * @param {number} id\n     *\n     * @returns {deferred.promise}\n     */\n    query (id) {\n\n        var deferred = this.q.defer();\n\n        this.http({\n            method: 'GET',\n            url: `/api/containers/${id}/conditions`\n        })\n            .success((resp) => {\n\n                deferred.resolve(resp);\n\n            })\n            .error((err) => {\n\n                deferred.reject(err);\n\n            });\n\n        return deferred.promise;\n\n    }\n\n}\n\nexport default ConditionResource;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * Finding type by type id\n * @param  {Array} array\n * @param  {Number} type\n * @return {Object}\n */\nvar findTypeByType = (array, type) => {\n\n    let tempType = type;\n\n    return array.filter(element => element.type === tempType);\n\n};\n\nlet currentContainer;\nlet conditionResource;\n\nclass Condition {\n\n    /**\n     * @param  {ConditionResource} $conditionResource\n     * @param {CurrentContainer} $currentContainer\n     */\n    constructor ($conditionResource, $currentContainer) {\n\n        currentContainer = $currentContainer;\n        conditionResource = $conditionResource;\n\n        if (currentContainer.getId() !== undefined) {\n            this.conditionResourcePromise = conditionResource.query(currentContainer.getId());\n        }\n\n    }\n\n    /**\n     * Return array of all types indexed by their type\n     * @return {Array}\n     */\n    getArrayOfTypes () {\n\n        return this.conditionResourcePromise.then(\n            resp => {\n\n                let typesTemp = [],\n                    typesIndex = resp.length;\n\n                while (typesIndex--) {\n\n                    typesTemp[resp[typesIndex].type] = resp[typesIndex].name;\n\n                }\n\n                return typesTemp;\n\n            }\n        );\n\n    }\n\n    /**\n     * All variables from specific condition\n     * @return {Array}\n     */\n    allVariables () {\n\n        return this.conditionResourcePromise.then(\n            resp => {\n                let variables = [];\n                for (let index = 0; index < resp.length; index++) {\n                    variables = variables.length \n                        ? mergeVariables(variables, resp[index].variables)\n                        : resp[index].variables;\n                }\n                \n                return variables;\n            }\n        );\n    }\n\n    /**\n     * Get variables from specific condition\n     * @param  {Number} type\n     * @return {Array}\n     */\n    getVariables (type) {\n\n        var self = this;\n\n        this.type = type;\n\n        return this.conditionResourcePromise.then(\n            resp => {\n\n                let responsedTypes = findTypeByType(resp, self.type);\n\n                if (responsedTypes.length === 1) {\n\n                    return responsedTypes[0].variables;\n\n                } else {\n\n                    return false;\n\n                }\n\n            }\n        );\n\n    }\n\n    /**\n     * Get required variables from specific condition\n     * @param  {Number} type\n     * @return {Array}\n     */\n    getRequired (type) {\n\n        var self = this;\n\n        this.type = type;\n\n        return this.conditionResourcePromise.then(\n            resp => {\n\n                let responsedTypes = findTypeByType(resp, self.type);\n\n                if (responsedTypes.length === 1) {\n\n                    return responsedTypes[0].variables.filter(variable => {\n\n                        return variable.name === 'Event' && responsedTypes[0].name === 'Event'\n\n                    });\n\n                } else {\n\n                    return false;\n\n                }\n\n            }\n        );\n\n    }\n\n    /**\n     * Get actions from specific condition\n     * @param  {Number} type\n     * @return {Array}\n     */\n    getActions (type) {\n\n        var self = this;\n\n        this.type = type;\n\n        return this.conditionResourcePromise.then(\n            resp => {\n\n                let responsedTypes = findTypeByType(resp, self.type);\n\n                if (responsedTypes.length === 1) {\n\n                    return responsedTypes[0].actions;\n\n                } else {\n\n                    return false;\n\n                }\n\n            }\n\n        );\n\n    }\n\n    refresh () {\n\n        this.conditionResourcePromise = conditionResource.query(currentContainer.getId());\n\n    }\n}\n\nfunction mergeVariables (arrayFirst, arraySecond) {\n    let final = [];\n    for(let indexFirst in arrayFirst){\n        let shared = false;\n        for (let indexSecond in arraySecond) {\n            if (isVariablesNameEqual(arraySecond[indexSecond], arrayFirst[indexFirst])) {\n                shared = true;\n                break;\n            }\n        }\n        if (!shared) {\n            final.push(arrayFirst[indexFirst])\n        }\n    }\n\n    return final.concat(arraySecond);\n}\n\nfunction isVariablesNameEqual (variableFirst, variableSecond) {\n    return variableFirst.name === variableSecond.name;\n}\n\nexport default Condition;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @type {$state}\n */\nvar state;\n\n/**\n * @type {$stateParams}\n */\nvar stateParams;\n\n/**\n * @type {Alert}\n */\nvar alert;\n\n/**\n * @type {CurrentContainer}\n */\nvar currentContainer;\n\n/**\n * @type {$scope}\n */\nvar scope;\n\n/**\n * @type {String}\n */\nconst BREADCRUMB_TEXT = 'Debug';\n\n/**\n * @name DebugOptionsController\n */\nclass DebugOptionsController {\n\n    /**\n     * @param {ContainerResource} containerResource\n     * @param {$state} $state\n     * @param {$stateParams} $stateParams\n     * @param {currentContainer} CurrentContainer\n     * @param {PageInfo} PageInfo\n     * @param {$scope} $scope\n     * @param {$translate} $translate\n     */\n    constructor (\n        containerResource,\n        $state,\n        $stateParams,\n        CurrentContainer,\n        PageInfo,\n        $scope,\n        $translate\n    ) {\n\n        var self = this;\n\n        state = $state;\n        stateParams = $stateParams;\n        currentContainer = CurrentContainer;\n        scope = $scope;\n\n        this.container = containerResource.getEntityObject();\n\n        this.containerPromise = containerResource.get(stateParams.containerId);\n\n        this.containerPromise.then((resp) => {\n\n            self.container = resp;\n\n        });\n\n        this.translate = $translate;\n\n        currentContainer.getContainer().then(() => {\n\n            if (currentContainer.$container.hasPermission('noaccess')) {\n\n                state.go('container');\n\n            }\n\n            this\n                .translate([BREADCRUMB_TEXT])\n                .then((translations) => {\n\n                    PageInfo.clear()\n                        .add(currentContainer.$container.name, 'tags', {\n                            containerId: currentContainer.$container.id\n                        })\n                        .add(translations[BREADCRUMB_TEXT])\n                        .broadcast();\n\n                });\n\n        });\n\n        scope.$on('pageInfo.reload', (event, args) => {\n\n            this\n                .translate([BREADCRUMB_TEXT])\n                .then((translations) => {\n\n                    PageInfo.clear()\n                        .add(args.name, 'tags', {\n                            containerId: args.id\n                        })\n                        .add(translations[BREADCRUMB_TEXT])\n                        .broadcast();\n\n                });\n\n        });\n\n    }\n\n}\n\nexport default DebugOptionsController;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n /**\n  * @type {$state}\n  */\n var state;\n\n /**\n  * @type {$stateParams}\n  */\n var stateParams;\n\n /**\n  * @type {Alert}\n  */\n var alert;\n\n /**\n  * @type {CurrentContainer}\n  */\n var currentContainer;\n\n /**\n  * @type {WebsiteResource}\n  */\n var websitesResource;\n\n/**\n * @name WebsitesController\n */\nclass WebsitesController {\n\n    /**\n     * @param {WebsiteResource} $websitesResource\n     * @param {$state} $state\n     * @param {$stateParams} $stateParams\n     * @param {Alert} $alert\n     * @param {CurrentContainer} $currentContainer\n     * @param $translate\n     * @param $scope\n     */\n    constructor (\n        $websitesResource,\n        $state,\n        $stateParams,\n        $alert,\n        $currentContainer,\n        $translate,\n        $scope\n    ) {\n\n      state = $state;\n      stateParams = $stateParams;\n      alert = $alert;\n      currentContainer = $currentContainer;\n      websitesResource = $websitesResource;\n\n      this.websites = [];\n      this.websitesPromise = websitesResource.query(stateParams.containerId); \n      \n      this.websitesPromise.then((resp) => {\n\n         this.websites = resp.data;\n\n      });\n\n      $translate(['by hash', 'by query'])\n          .then((translations) => {\n\n              this.parameterTypes = [{\n                    value: 0,\n                    name: translations['by query']\n                  }, {\n                    value: 1,\n                    name: translations['by hash']\n                  }];\n\n          });\n\n      $scope.getWebsiteUrlWithParameter = (website) => {\n\n          return website.getUrlWithParameter();\n\n      }\n\n    }\n\n    /**\n     * Method to create new container website\n     */\n    addContainerWebsite () {\n\n        if(!currentContainer.$container.hasPermission('edit')){\n            return;\n        }\n\n        if(!this.websites){\n\n            this.websites = [];\n\n        }\n\n        this.websites.push(websitesResource.getEntityObject());\n\n    }\n\n    /**\n     * Method to remove container websites\n     *\n     * @param {Number} index\n     */\n    removeContainerWebsite (index) {\n\n        this.websites.splice(index, 1);\n\n    }\n\n    /**\n     * Handle form submit action\n     */\n    submitForm () {\n\n        var websites = [];\n\n        for(var i = 0; this.websites && i < this.websites.length; i++) {\n\n            var website = websitesResource.getEntityObject();\n\n            website.url = this.websites[i].url;\n            website.parameterType = this.websites[i].parameterType;\n\n            websites.push(website);\n\n        }\n\n        this.websitePromise = websitesResource.put(stateParams.containerId, websites);\n\n        this.websitePromise.then(\n            () => {\n\n                currentContainer.get(stateParams.containerId); // triggers refresh of data in f.e. 'Preview and debug'\n                alert.success('success.edit');\n\n                state.go('debug', {containerId: stateParams.containerId});\n\n            },\n            () => {\n\n                alert.error('error.invalid');\n\n                this.validateContainer = true;\n\n            }\n        );\n    }\n\n}\n\nexport default WebsitesController;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport DebugOptionsController from './controllers/DebugOptionsController.js';\nimport WebsitesController from './controllers/WebsitesController.js';\nimport WebsiteResource from './resource/WebsiteResource.js';\n\nconst MODULE_NAME = 'clearcode.tm.debug';\nconst MODULE_CONTAINER = 'clearcode.tm.tagContainer';\nconst MODULE_DIR = 'app/modules/debug';\n\nWebsiteResource.$inject = [\n    '$http',\n    '$q'\n];\n\nWebsitesController.$inject = [\n    `${MODULE_NAME}.websiteResource`,\n    '$state',\n    '$stateParams',\n    'clearcode.tm.alert.alert',\n    `${MODULE_CONTAINER}.currentContainer`,\n    '$translate',\n    '$scope'\n];\n\nDebugOptionsController.$inject = [\n  `${MODULE_CONTAINER}.containerResource`,\n  '$state',\n  '$stateParams',\n  `${MODULE_CONTAINER}.currentContainer`,\n  'clearcode.tm.pageInfo.pageInfo',\n  '$scope',\n  '$translate'\n];\n\nangular\n    .module(MODULE_NAME, [\n        'pascalprecht.translate',\n        'ui.router',\n        'ngTable',\n        'ngCookies',\n        'clearcode.tm.condition',\n        'clearcode.tm.alert',\n        'clearcode.tm.pageInfo',\n        'clearcode.tm.user'\n    ])\n    .run([\n\n        '$rootScope',\n        `${MODULE_CONTAINER}.currentContainer`,\n        '$stateParams',\n        'clearcode.tm.alert.$alert',\n\n        ($rootScope, currentContainer, $stateParams, $alertProvider) => {\n\n            $rootScope.currentContainerLoading = true;\n            $rootScope.currentContainer = currentContainer;\n\n            var loadContainer = (containerId) => {\n\n                if (containerId !== $stateParams.containerId) {\n\n                    let currentContainerPromise = currentContainer.get(containerId);\n\n                    currentContainerPromise.then((container) => {\n\n                        $rootScope.$broadcast('pageInfo.reload', container);\n\n                    });\n\n                }\n\n            };\n\n            $rootScope.$on('$stateChangeStart', (event, toState, toParams) => {\n\n                loadContainer(toParams.containerId);\n\n            });\n        }\n    ])\n    .config([\n\n        '$stateProvider',\n\n        ($stateProvider) => {\n\n            $stateProvider\n                .state('debug', {\n                    url: '/containers/{containerId}/debug',\n                    controller: `${MODULE_NAME}.DebugOptionsController as view`,\n                    templateUrl: `${MODULE_DIR}/views/options.html`,\n                    data: {\n                        roles: [\n                            'ROLE_SUPER_ADMIN'\n                        ],\n                        hasContainerList: true,\n                        permission: [\n                            'view'\n                        ]\n                    }\n                });\n\n        }\n    ])\n    .controller(`${MODULE_NAME}.DebugOptionsController`, DebugOptionsController)\n    .controller(`${MODULE_NAME}.WebsitesController`, WebsitesController)\n    .service(`${MODULE_NAME}.websiteResource`, WebsiteResource);\n\nmodule.exports = {MODULE_NAME};\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar websiteFactory = (resource) => {\n\n    const DEBUG_PARAM_NAME = '_stg_debug';\n    const URL_MIN_LENGTH = 10;\n\n    /**\n     * @name Website\n     * @description Website entity\n     */\n    class Website {\n\n        constructor () {\n\n            /**\n             * @type {string}\n             */\n            this.url = '';\n\n            /**\n             * @type {Integer}\n             */\n            this.parameterType = 0;\n\n        }\n\n        /**\n         * @returns {string}\n         */\n        getUrlWithParameter () {\n\n            if (this.hasUrl() === false) {\n\n                return '';\n\n            }\n\n            return this.url + this.getSeparator() + DEBUG_PARAM_NAME;\n\n        }\n\n        /**\n         * @returns {string}\n         */\n        getSeparator () {\n\n            var separator = this.parameterType === 1 ? '#' : '?';\n\n            if (this.hasUrl() === false) {\n\n                return separator;\n\n            }\n\n            return (this.url.indexOf(separator) === -1) ? separator : '&';\n\n        }\n\n        hasUrl () {\n\n            return this.url !== undefined && this.url.length > URL_MIN_LENGTH;\n\n        }\n    }\n\n    return Website;\n\n};\n\nexport default websiteFactory;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport websiteFactory from '../entity/Website.js';\n\nvar transformResponse = function (resp) {\n    if (angular.isArray(resp)) {\n        return resp.map((websiteData) => {\n            return transformResponse.call(this, websiteData);\n        });\n    }\n\n    var website = this.getEntityObject();\n\n    if (resp !== undefined) {\n\n        website.url = resp.url;\n        website.parameterType = resp.parameter_type;\n\n    }\n\n    return website;\n\n};\n\n\nvar appendTransform = function (defaults, transform) {\n\n    // We can't guarantee that the default transformation is an array\n    defaults = angular.isArray(defaults) ? defaults : [defaults];\n\n    // Append the new transformation to the defaults\n    return defaults.concat(transform);\n\n};\n\n/**\n * @name WebsiteResource\n *\n */\nclass WebsiteResource {\n    /**\n     * @param {$http} $http\n     * @param {$q} $q\n     */\n    constructor ($http, $q) {\n\n        this.http = $http;\n        this.q = $q;\n\n    }\n\n    /**\n     * @returns {Website}\n     */\n    getEntityObject () {\n\n        var Website = websiteFactory(this);\n\n        return new Website();\n\n    }\n\n    /**\n     * @description Send request to get list of entity\n     *\n     * @param {number} containerId\n     * @param {Object} params\n     *\n     * @returns {deferred.promise}\n     */\n    query (containerId, params) {\n\n        var deferred = this.q.defer();\n\n        this.http({\n            method: 'GET',\n            url: `/api/containers/${containerId}/websites`,\n            params: params,\n            transformResponse: appendTransform(this.http.defaults.transformResponse, (resp, header, status) => {\n\n                if (isResponseSuccess(resp, status)) {\n                    for (var i = 0; i < resp.data.length; i++) {\n                        if (resp.data[i] instanceof Object) {\n                            resp.data[i] = transformResponse.call(this, resp.data[i]);\n                        }\n                    }\n                }\n\n                return resp;\n\n            })\n        })\n            .success((resp) => {\n                deferred.resolve(resp);\n            })\n            .error((err) => {\n                deferred.reject(err);\n            });\n\n        return deferred.promise;\n    }\n\n    put (containerId, websites) {\n\n        var deferred = this.q.defer();\n\n        this.http({\n            method: 'PUT',\n            data: {\n                websites: websites\n            },\n            url: `api/containers/${containerId}/websites`,\n            transformResponse: appendTransform(this.http.defaults.transformResponse, (resp, header, status) => {\n\n                if (isResponseSuccess(resp, status)) {\n                    return transformResponse.call(this, resp.data);\n                }\n\n                return resp;\n\n            })\n        })\n            .success((resp) => {\n                deferred.resolve(resp);\n            })\n            .error((err) => {\n                deferred.reject(err);\n            });\n\n        return deferred.promise;\n    }\n\n}\n\nfunction isResponseSuccess (resp, status) {\n    return status < 400 && resp.data !== undefined;\n}\n\nexport default WebsiteResource;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @name BaseController\n */\nclass BaseController {\n\n    /**\n     * @param {IntegrationResource} $Integration\n     * @param {PageInfo} $PageInfo\n     * @param {$stateParams} $stateParams\n     * @param {Alert} $alert\n     * @param {$state} $state\n     * @param {$translate} $translate\n     */\n    constructor (\n        $Integration,\n        $PageInfo,\n        $stateParams,\n        $alert,\n        $state,\n        $translate\n        ) {\n\n        this.integration = $Integration.getEntityObject();\n\n        const BREADCRUMB_TEXT = 'Integrations';\n\n        $translate([BREADCRUMB_TEXT, this.getBreadcrumbText()])\n            .then((translations) => {\n\n                $PageInfo.clear()\n                    .add(translations[BREADCRUMB_TEXT], 'integration')\n                    .add(translations[this.getBreadcrumbText()])\n                    .broadcast();\n\n            });\n\n        this.stateParams = $stateParams;\n        this.alert = $alert;\n        this.state = $state;\n\n        this.formTouched = false;\n\n    }\n\n    /**\n     * Handle form submit action\n     *\n     * @param {Integration} Integration\n     */\n    submitForm (Integration) {\n\n        this.integrationPromise = Integration.save(this.stateParams.id);\n\n        this.integrationPromise.then(\n            (resp) => {\n\n                this.alert.success(this.getAlertType());\n\n                if (this.state.includes('integrationCreate')) {\n\n                    this.state.go('integrationEdit', {\n                        'integrationId': resp.id\n                    });\n\n                } else {\n                    this.state.go('integration');\n                }\n\n            },\n            () => {\n\n                this.alert.error('error.invalid');\n\n            }\n        );\n\n    }\n\n    /**\n     * Display error if form is invalid\n     */\n    displayInvalidFormMessage () {\n        this.validateIntegration = true;\n        this.alert.error('error.invalid');\n    }\n\n}\n\nexport default BaseController;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport BaseController from './BaseController.js';\n\n/**\n * @name CreateController\n */\nclass CreateController extends BaseController {\n\n    /**\n     * @param {IntegrationResource} $IntegrationResource\n     * @param {PageInfo} $PageInfo\n     * @param {$stateParams} $stateParams\n     * @param {Alert} $alert\n     * @param {$state} $state\n     * @param {$translate} $translate\n     */\n    constructor (\n            $IntegrationResource,\n            $PageInfo,\n            $stateParams,\n            $alert,\n            $state,\n            $translate\n        ) {\n\n        super(\n            $IntegrationResource,\n            $PageInfo,\n            $stateParams,\n            $alert,\n            $state,\n            $translate\n        );\n\n        this.integration = $IntegrationResource.getEntityObject();\n    }\n\n    /**\n     * Get breadcrumb text\n     */\n    getBreadcrumbText () {\n\n        return 'Add a new integration';\n\n    }\n\n    /**\n     * Get alert type\n     */\n    getAlertType () {\n\n        return 'success.create';\n\n    }\n\n}\n\nexport default CreateController;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport BaseController from './BaseController.js';\n\n/**\n * @name EditController\n */\nclass EditController extends BaseController {\n\n    /**\n     * @param {IntegrationResource} $IntegrationResource\n     * @param {PageInfo} $PageInfo\n     * @param {$stateParams} $stateParams\n     * @param {Alert} $alert\n     * @param {$state} $state\n     * @param {$translate} $translate\n     */\n    constructor (\n        $IntegrationResource,\n        $PageInfo,\n        $stateParams,\n        $alert,\n        $state,\n        $translate\n        ) {\n\n        super(\n            $IntegrationResource,\n            $PageInfo,\n            $stateParams,\n            $alert,\n            $state,\n            $translate\n        );\n\n        this.integrationPromise = $IntegrationResource.get($stateParams.integrationId);\n\n        this.integrationPromise.then(\n            resp => {\n                this.integration = resp;\n            }\n        );\n\n        this.formTouched = true;\n    }\n\n    /**\n     * Get breadcrumb text\n     *\n     */\n    getBreadcrumbText () {\n\n        return 'Edit integration';\n\n    }\n\n    /**\n     * Get alert type\n     *\n     */\n    getAlertType () {\n\n        return 'success.edit';\n\n    }\n\n}\n\nexport default EditController;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @type {Alert}\n */\nvar $alert;\n\n/**\n * @type {$stateParams}\n */\nvar stateParams;\n\n/**\n * @name ManageController\n */\nclass ManageController {\n\n    /**\n     * @param {ngTableParams} TableParams\n     * @param {$stateParams} $stateParams\n     * @param {IntegrationResource} Integration\n     * @param {Alert} alert\n     * @param {ParamConverter} paramConverter\n     * @param {PageInfo} PageInfo\n     * @param {$translate} $translate\n     */\n        constructor (\n            TableParams,\n            $stateParams,\n            Integration,\n            alert,\n            paramConverter,\n            PageInfo,\n            $translate\n        ) {\n\n        $alert = alert;\n        stateParams = $stateParams;\n\n        this.permissions = [];\n\n        this.tableParams = new TableParams({\n            page: 1,\n            count: 10,\n            sorting: {\n                name: 'asc'\n            }\n        }, {\n            total: 0,\n            getData: ($defer, params) => {\n\n                Integration.query(paramConverter.list(params.url())).then((resp) => {\n\n                    params.total(resp.total);\n\n                    $defer.resolve(resp.data);\n\n                });\n\n            }\n        });\n\n        const BREADCRUMB_TEXT = 'Integrations';\n\n        $translate([BREADCRUMB_TEXT])\n            .then((translations) => {\n\n                PageInfo.clear()\n                    .add(translations[BREADCRUMB_TEXT])\n                    .broadcast();\n\n            });\n\n    }\n\n    removeIntegration (Integration) {\n\n        Integration.remove().then(\n            () => {\n\n                $alert.success('success.remove');\n\n                if (this.tableParams.data.length === 1 && this.tableParams.page() > 1) {\n\n                    this.tableParams.page(this.tableParams.page() - 1);\n\n                } else {\n\n                    this.tableParams.reload();\n\n                }\n\n            },\n            () => {\n\n                $alert.error('error.remove');\n\n                this.tableParams.reload();\n\n            }\n        );\n\n    }\n\n}\n\nexport default ManageController;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar integrationFactory = (resource) => {\n\n    /**\n     * @name Integration\n     * @description Integration entity\n     */\n    class Integration {\n\n        constructor () {\n\n            /**\n             * @type {number}\n             */\n            this.id = undefined;\n\n            /**\n             * @type {string}\n             */\n            this.name = undefined;\n\n            /**\n             * @type {string}\n             */\n            this.clientId = undefined;\n\n            /**\n             * @type {string}\n             */\n            this.clientSecret = undefined;\n\n            /**\n             * @type {string}\n             */\n            this.createdAt = undefined;\n            /**\n             * @type {string}\n             */\n            this.updatedAt = undefined;\n            /**\n             * @type {Object}\n             */\n            this.user = undefined;\n        }\n\n        /**\n         * @returns {deferred.promise}\n         */\n        save () {\n\n            var result = {}, promise;\n\n            var excludedProperty = ['id', 'updatedAt', 'createdAt', 'clientId', 'clientSecret', 'user'];\n\n            for (var property in this) {\n\n                if (\n                    !angular.isFunction(this[property]) &&\n                    this.hasOwnProperty(property) &&\n                    excludedProperty.indexOf(property) === -1\n                ) {\n\n                    if (property === 'type') {\n\n                        result[property] = this[property].id;\n\n                    } else {\n\n                        result[property] = this[property];\n\n                    }\n\n                }\n\n            }\n\n            if (this.id === undefined) {\n\n                if (this.user.email) {\n                    result.user = {};\n                    result.user.email = this.user.email;\n                }\n\n                promise = resource.post(result);\n\n            } else {\n\n                promise = resource.put(this.id, result);\n\n            }\n\n            return promise;\n\n        }\n\n        /**\n         * @returns {deferred.promise|Boolean}\n         */\n        remove () {\n\n            if (this.id === undefined) {\n\n                return false;\n\n            }\n\n            return resource.delete(this.id);\n\n        }\n\n    }\n\n    return Integration;\n\n};\n\nexport default integrationFactory;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport ManageController from './controllers/ManageController.js';\nimport CreateController from './controllers/CreateController.js';\nimport EditController from './controllers/EditController.js';\n\nimport IntegrationResource from './resource/IntegrationResource.js';\n\nconst MODULE_NAME = 'clearcode.tm.integration';\nconst MODULE_DIR = 'app/modules/integration';\n\nManageController.$inject = [\n    'ngTableParams',\n    '$stateParams',\n    `${MODULE_NAME}.IntegrationResource`,\n    'clearcode.tm.alert.alert',\n    'clearcode.tm.tagContainer.paramConverter',\n    'clearcode.tm.pageInfo.pageInfo',\n    '$translate'\n];\n\nCreateController.$inject = [\n    `${MODULE_NAME}.IntegrationResource`,\n    'clearcode.tm.pageInfo.pageInfo',\n    '$stateParams',\n    'clearcode.tm.alert.alert',\n    '$state',\n    '$translate'\n];\n\nEditController.$inject = [\n    `${MODULE_NAME}.IntegrationResource`,\n    'clearcode.tm.pageInfo.pageInfo',\n    '$stateParams',\n    'clearcode.tm.alert.alert',\n    '$state',\n    '$translate'\n];\n\nIntegrationResource.$inject = [\n    '$http',\n    '$q'\n];\n\nangular\n    .module(MODULE_NAME, [\n        'pascalprecht.translate',\n        'ui.router',\n        'ngTable',\n        'clearcode.tm.alert',\n        'clearcode.tm.pageInfo',\n        'clearcode.tm.tagContainer'\n    ])\n    .config([\n\n        '$stateProvider',\n\n        ($stateProvider) => {\n\n            $stateProvider\n                .state('integration', {\n                    url: '/integration',\n                    controller: `${MODULE_NAME}.ManageController as view`,\n                    templateUrl: `${MODULE_DIR}/views/manage.html`,\n                    data: {\n                        roles: [\n                            'ROLE_SUPER_ADMIN'\n                        ],\n                        hasContainerList: false\n                    }\n                })\n                .state('integrationCreate', {\n                    url: '/integration/create',\n                    controller: `${MODULE_NAME}.CreateController as view`,\n                    templateUrl: `${MODULE_DIR}/views/create.html`,\n                    data: {\n                        roles: [\n                            'ROLE_SUPER_ADMIN'\n                        ],\n                        hasContainerList: false\n                    }\n                })\n                .state('integrationEdit', {\n                    url: '/integration/{integrationId}/edit',\n                    controller: `${MODULE_NAME}.EditController as view`,\n                    templateUrl: `${MODULE_DIR}/views/edit.html`,\n                    data: {\n                        roles: [\n                            'ROLE_SUPER_ADMIN'\n                        ],\n                        hasContainerList: false\n                    }\n                });\n\n        }\n    ])\n    .run([\n        'clearcode.tm.alert.$alert',\n        ($alertProvider) => {\n\n            $alertProvider.addMessagePattern(\n                'integration.close',\n                'You are trying to close unsaved OAuth client.'\n            );\n\n        }\n    ])\n    .controller(`${MODULE_NAME}.ManageController`, ManageController)\n    .controller(`${MODULE_NAME}.CreateController`, CreateController)\n    .controller(`${MODULE_NAME}.EditController`, EditController)\n    .service(`${MODULE_NAME}.IntegrationResource`, IntegrationResource);\n\nmodule.exports = {MODULE_NAME};\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport integrationFactory from '../entity/Integration.js';\n\nvar transformResponse = function (resp) {\n\n    var Integration = integrationFactory(this);\n    var integration = new Integration();\n\n    integration.id = resp.id;\n    integration.name = resp.name;\n    integration.clientId = resp.client_id;\n    integration.clientSecret = resp.client_secret;\n    integration.createdAt = resp.created_at;\n    integration.updatedAt = resp.updated_at;\n\n    integration.user = {\n        id: undefined,\n        status: undefined,\n        roles: [],\n        email: undefined\n    };\n\n    if (resp.user) {\n        integration.user.id = resp.user.id;\n        integration.user.status = resp.user.status;\n        integration.user.roles = resp.user.roles;\n\n        if (resp.user.email) {\n            integration.user.email = resp.user.email;\n        }\n    }\n\n    return integration;\n\n};\n\n\nvar appendTransform = function (defaults, transform) {\n\n    // We can't guarantee that the default transformation is an array\n    defaults = angular.isArray(defaults) ? defaults : [defaults];\n\n    // Append the new transformation to the defaults\n    return defaults.concat(transform);\n\n};\n\n/**\n * @name IntegrationResource\n */\nclass IntegrationResource {\n    /**\n     * @param {$http} $http\n     * @param {$q} $q\n     */\n    constructor ($http, $q) {\n\n        this.http = $http;\n        this.q = $q;\n\n    }\n\n    /**\n     * @returns {Integration}\n     */\n    getEntityObject () {\n\n        var Integration = integrationFactory(this);\n\n        return new Integration();\n\n    }\n\n    /**\n     * @description Send request to get specific entity\n     *\n     * @param {number} id\n     *\n     * @returns {deferred.promise}\n     */\n    get (id) {\n\n        var deferred = this.q.defer();\n\n        this.http({\n            method: 'GET',\n            url: `/api/integration/${id}`,\n            transformResponse: appendTransform(this.http.defaults.transformResponse, (resp, header, status) => {\n\n                if (status < 400) {\n\n                    return transformResponse.call(this, resp.data);\n\n                } else {\n\n                    return resp;\n\n                }\n\n            })\n        })\n            .success((resp) => {\n\n                deferred.resolve(resp);\n\n            })\n            .error((err) => {\n\n                deferred.reject(err);\n\n            });\n\n        return deferred.promise;\n\n    }\n\n    /**\n     * @description Send request to get list of entity\n     *\n     * @param {Object} params\n     *\n     * @returns {deferred.promise}\n     */\n    query (params) {\n\n        var deferred = this.q.defer();\n\n        this.http({\n            method: 'GET',\n            url: `/api/integration`,\n            params: params,\n            transformResponse: appendTransform(this.http.defaults.transformResponse, (resp) => {\n\n                for (var element in resp.data) {\n\n                    if (resp.data[element] instanceof Object) {\n\n                        resp.data[element] = transformResponse.call(this, resp.data[element]);\n\n                    }\n\n                }\n\n                return resp;\n\n            })\n        })\n            .success((resp) => {\n\n                deferred.resolve(resp);\n\n            })\n            .error((err) => {\n\n                deferred.reject(err);\n\n            });\n\n        return deferred.promise;\n\n    }\n\n    /**\n     * @description Send request to delete entity\n     *\n     * @param {number} id\n     *\n     * @returns {deferred.promise}\n     */\n    delete (id) {\n\n        var deferred = this.q.defer();\n\n        this.http({\n            method: 'DELETE',\n            url: `/api/integration/${id}`\n        })\n            .success((data) => {\n\n                deferred.resolve(data);\n\n            })\n            .error((err) => {\n\n                deferred.reject(err);\n\n            });\n\n        return deferred.promise;\n\n    }\n\n    /**\n     * @description Send request to create entity\n     *\n     * @param {object} entity\n     *\n     * @returns {deferred.promise}\n     */\n    post (entity) {\n\n        var deferred = this.q.defer();\n\n        this.http({\n            method: 'POST',\n            url: `/api/integration`,\n            data: entity,\n            transformResponse: appendTransform(this.http.defaults.transformResponse, (resp, header, status) => {\n\n                if (status < 400) {\n\n                    return transformResponse.call(this, resp.data);\n\n                } else {\n\n                    return resp;\n\n                }\n\n            })\n        })\n            .success((resp) => {\n\n                deferred.resolve(resp);\n\n            })\n            .error((err) => {\n\n                deferred.reject(err);\n\n            });\n\n        return deferred.promise;\n\n    }\n\n    /**\n     * Send request to update entity\n     *\n     * @param {number} id\n     * @param {object} entity\n     *\n     * @returns {deferred.promise}\n     */\n    put (id, entity) {\n\n        var deferred = this.q.defer();\n\n        this.http({\n            method: 'PUT',\n            url: `/api/integration/${id}`,\n            data: entity,\n            transformResponse: appendTransform(this.http.defaults.transformResponse, (resp, header, status) => {\n\n                if (status < 400) {\n\n                    return transformResponse.call(this, resp.data);\n\n                } else {\n\n                    return resp;\n\n                }\n\n            })\n        })\n            .success((resp) => {\n\n                deferred.resolve(resp);\n\n            })\n            .error((err) => {\n\n                deferred.reject(err);\n\n            });\n\n        return deferred.promise;\n\n    }\n}\n\nexport default IntegrationResource;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @type {OAuthResource}\n */\nvar $oauthResource;\n\n/**\n * @type {TokenStorage}\n */\nvar $tokenStorage;\n\n/**\n * @type {$state}\n */\nvar state;\n\n/**\n * @type {AlertForm}\n */\nvar $alertForm;\n\n/**\n * @type {String}\n */\nconst BREADCRUMB_TEXT = '7tag Welcome';\n\n/**\n * @name security#LoginController\n * @description Controller for login view\n *\n * @author Arek Zajc <a.zajac@clearcode.cc>\n */\nclass LoginController {\n\n    /**\n     * @param {OAuthResource} oauthResource\n     * @param {TokenStorage} tokenStorage\n     * @param {$state} $state\n     * @param {AlertForm} alertForm\n     * @param {PageInfo} PageInfo\n     *\n     */\n    constructor (oauthResource, tokenStorage, $state, alertForm, PageInfo) {\n\n        this.auth = {\n            identity: '',\n            password: ''\n        };\n\n        this.loginPromise = undefined;\n\n        $oauthResource = oauthResource;\n        $tokenStorage = tokenStorage;\n        state = $state;\n        $alertForm = alertForm;\n\n        $alertForm.getStorage().clean();\n\n        PageInfo.clear()\n            .add(BREADCRUMB_TEXT)\n            .broadcast();\n\n    }\n\n    /**\n     * @description Submit action for login form\n     *\n     * @param {LoginController.auth} auth\n     */\n    submitForm (auth) {\n\n        this.loading = true;\n\n        this.loginPromise = $oauthResource.post(auth.identity, auth.password);\n\n        this.loginPromise.then(\n            (resp) => {\n\n                $alertForm.getStorage().clean();\n                $tokenStorage.addItem(resp);\n                state.go('container');\n\n            },\n            () => {\n\n                this.loading = false;\n\n            }\n        );\n\n    }\n\n    displayInvalidLoginMessage () {\n\n        $alertForm.error('login.invalid');\n\n    }\n\n}\n\nexport default LoginController;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar deleteRequestInterceptor = ($q, $rootScope, $injector) => {\n\n    var METHOD_DELETE = 'DELETE';\n    var POST_DELETE_URL_SUFIX = '/remove';\n\n    return {\n        request: (config) => {\n\n            if (config.method.toUpperCase() === METHOD_DELETE && $rootScope.deleteHeaderNotSupported === true) {\n                config.method = 'POST';\n                config.url = config.url + POST_DELETE_URL_SUFIX;\n            }\n\n            return config;\n\n        },\n\n        responseError: (rejection) => {\n\n            var $http = $injector.get('$http');\n\n            if (rejection.config.method.toUpperCase() === METHOD_DELETE) {\n\n                if (rejection.status === 405) {\n\n                    $rootScope.deleteHeaderNotSupported = true;\n\n                    return $http.post(rejection.config.url + POST_DELETE_URL_SUFIX);\n                }\n            }\n\n            return $q.reject(rejection);\n\n        }\n    };\n\n};\n\nexport default deleteRequestInterceptor;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nconst DEFAULT_LANGUAGE = 'en';\n\nvar localeInterceptor = ($window) => {\n\n    return {\n        request: (config) => {\n\n            var localStorageLang = $window.localStorage['NG_TRANSLATE_LANG_KEY'];\n\n            if (!(/^https?:\\/\\//i.test(config.url))) {\n                config.headers.Locale = localStorageLang ? localStorageLang : DEFAULT_LANGUAGE;\n            }\n\n            return config;\n\n        }\n    };\n\n};\n\nexport default localeInterceptor;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar securityInterceptor = ($q, tokenStorage, $injector) => {\n\n    return {\n        request: (config) => {\n\n            if (undefined !== tokenStorage.getItem() && /(.js|.html|.css|version.json)$/.test(config.url) === false) {\n\n                if (tokenStorage.getItem() !== undefined) {\n\n                    config.headers.Authorization = tokenStorage.getToken();\n\n                }\n\n            }\n\n            return config;\n\n        },\n\n        responseError: (rejection) => {\n\n            // TODO: change this to state ( problem with dependency injection )\n            var $state = $injector.get('$state');\n\n            if (rejection.status === 400) {\n\n                if (\n                    rejection.data &&\n                    (rejection.data.error === 'invalid_request' || rejection.data.error === 'invalid_grant')\n                ) {\n\n                    tokenStorage.removeItem();\n                    $state.go('signIn');\n\n                }\n\n            }\n\n            if (rejection.status === 403) {\n\n                $state.go('accessDenied');\n\n            }\n\n            return $q.reject(rejection);\n\n        }\n    };\n\n};\n\nexport default securityInterceptor;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport AuthToken from '../token/AuthToken.js';\n\nconst RESOURCE_ROUTE = '/api/oauth/v2/token';\nconst LOGOUT_ROUTE = '/api/users/me/logout';\nconst GRANT_TYPE = 'password';\n\nvar transformResponse = function (resp, header, status) {\n\n    if (status < 400) {\n\n        var authToken = this.getEntity();\n\n        authToken.accessToken = resp.access_token;\n        authToken.expiresIn = resp.expires_in;\n        authToken.tokenType = resp.token_type;\n        authToken.scope = resp.scope;\n        authToken.refreshToken = resp.refresh_token;\n\n        return authToken;\n\n    } else {\n\n        return resp;\n\n    }\n\n};\n\nvar appendTransform = (defaults, transform) => {\n\n    // We can't guarantee that the default transformation is an array\n    defaults = angular.isArray(defaults) ? defaults : [defaults];\n\n    // Append the new transformation to the defaults\n    return defaults.concat(transform);\n\n};\n\n/**\n * @name OAuthResource\n *\n * @author Arek Zajc <a.zajac@clearcode.cc>\n */\nclass OAuthResource {\n\n    /**\n     * @param {$http} $http\n     * @param {$q} $q\n     * @param {TokenStorage} tokenStorage\n     * @param OAuthClientSettings\n     */\n    constructor ($http, $q, tokenStorage, OAuthClientSettings) {\n\n        this.http = $http;\n        this.q = $q;\n        this.tokenStorage = tokenStorage;\n        this.OAuthClientSettings = OAuthClientSettings;\n\n    }\n\n    /**\n     * @returns {AuthToken}\n     */\n    getEntity () {\n\n        AuthToken.prototype.save = () => {\n\n            var deferred = this.q.defer();\n\n            this.tokenStorage.add(this);\n            deferred.resolve(this);\n\n            return deferred.promise;\n\n        };\n\n        AuthToken.prototype.remove = () => {\n\n            var deferred = this.q.defer();\n\n            this.tokenStorage.remove();\n            deferred.resolve(this);\n\n            return deferred.promise;\n\n        };\n\n        return new AuthToken();\n\n    }\n\n    /**\n     * @description Send request to get oauth\n     *\n     * @param {string} identity of user ( email or username )\n     * @param {string} password\n     *\n     * @returns {deferred.promise}\n     */\n    post (identity, password) {\n\n        var deferred = this.q.defer();\n\n        this.http({\n            method: 'POST',\n            url: RESOURCE_ROUTE,\n            data: {\n                /* eslint-disable */\n                client_id: this.OAuthClientSettings.clientId,\n                client_secret: this.OAuthClientSettings.clientSecret,\n                grant_type: GRANT_TYPE,\n                username: identity,\n                password: password\n                /* eslint-enable */\n            },\n            ignoreAuthModule: true,\n            transformResponse: appendTransform(this.http.defaults.transformResponse, (resp, header, status) => {\n\n                return transformResponse.call(this, resp, header, status);\n\n            })\n        })\n            .success((resp) => {\n\n                deferred.resolve(resp);\n\n            })\n            .error((err) => {\n\n                deferred.reject(err);\n\n            });\n\n        return deferred.promise;\n\n    }\n\n    /**\n     * @description Send request to get new tokens\n     *\n     * @param {string} token\n     *\n     * @returns {deferred.promise}\n     */\n    refreshToken (token) {\n\n        var deferred = this.q.defer();\n\n        this.http({\n            method: 'POST',\n            url: RESOURCE_ROUTE,\n            data: {\n                /* eslint-disable */\n                client_id: this.OAuthClientSettings.clientId,\n                client_secret: this.OAuthClientSettings.clientSecret,\n                grant_type: 'refresh_token',\n                refresh_token: token\n                /* eslint-enable */\n            },\n            ignoreAuthModule: true,\n            transformResponse: appendTransform(this.http.defaults.transformResponse, (resp, header, status) => {\n\n                if (resp.error !== undefined) {\n\n                    return resp;\n\n                }\n\n                return transformResponse.call(this, resp, header, status);\n\n            })\n        })\n            .success((resp) => {\n\n                deferred.resolve(resp);\n\n            })\n            .error((err) => {\n\n                deferred.reject(err);\n\n            });\n\n        return deferred.promise;\n\n    }\n\n    /**\n     * @description Send request to logout\n     *\n     * @returns {Promise}\n     */\n    logout () {\n\n        var deferred = this.q.defer();\n\n        this.http({\n            method: 'GET',\n            url: LOGOUT_ROUTE\n        })\n            .success((resp) => {\n\n                deferred.resolve(resp);\n\n            })\n            .error((err) => {\n\n                deferred.reject(err);\n\n            });\n\n        return deferred.promise;\n\n    }\n\n}\n\nexport default OAuthResource;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport LoginController from './controller/LoginController.js';\n\nimport Authorization from './service/Authorization.js';\nimport Security from './service/Security.js';\nimport OAuthResource from './resource/OAuthResource.js';\nimport TokenStorage from './service/TokenStorage.js';\nimport securityInterceptor from './interceptor/SecurityInterceptor.js';\nimport localeInterceptor from './interceptor/LocaleInterceptor.js';\nimport deleteRequestInterceptor from './interceptor/DeleteRequestInterceptor.js';\n\nconst MODULE_NAME = 'clearcode.tm.security';\n\nAuthorization.$inject = [\n    `${MODULE_NAME}.security`,\n    '$state'\n];\n\nSecurity.$inject = [\n    '$q',\n    '$timeout',\n    `${MODULE_NAME}.tokenStorage`,\n    'clearcode.tm.user.userResource',\n    `${MODULE_NAME}.oauthResource`,\n    '$translate'\n];\n\nOAuthResource.$inject = [\n    '$http',\n    '$q',\n    `${MODULE_NAME}.tokenStorage`,\n    'OAuthClientSettings'\n];\n\nLoginController.$inject = [\n    `${MODULE_NAME}.oauthResource`,\n    `${MODULE_NAME}.tokenStorage`,\n    '$state',\n    'clearcode.tm.form.alertForm',\n    'clearcode.tm.pageInfo.pageInfo'\n];\n\nsecurityInterceptor.$inject = [\n    '$q',\n    `${MODULE_NAME}.tokenStorage`,\n    '$injector'\n];\n\nTokenStorage.$inject = [\n    '$localStorage'\n];\n\nlocaleInterceptor.$inject = [\n    '$window'\n];\n\ndeleteRequestInterceptor.$inject = [\n    '$q',\n    '$rootScope',\n    '$injector'\n];\n\nangular\n    .module(MODULE_NAME, [\n        'pascalprecht.translate',\n        'ui.router',\n        'clearcode.tm.alert',\n        'clearcode.tm.tagContainer',\n        'clearcode.tm.user',\n        'clearcode.tm.pageInfo',\n        'clearcode.tm.form',\n        'clearcode.tm.update'\n    ])\n    .config([\n\n        '$stateProvider',\n        '$httpProvider',\n\n        ($stateProvider, $httpProvider) => {\n\n            $httpProvider.interceptors.push(`${MODULE_NAME}.securityInterceptor`);\n            $httpProvider.interceptors.push(`${MODULE_NAME}.deleteRequestInterceptor`);\n            $httpProvider.interceptors.push(`${MODULE_NAME}.localeInterceptor`);\n\n            $stateProvider\n                .state('signIn', {\n                    url: '/sign-in',\n                    controller: `${MODULE_NAME}.LoginController`,\n                    controllerAs: 'view',\n                    data: {\n                        roles: [],\n                        secure: false\n                    },\n                    templateUrl: '/app/modules/security/views/signIn.html'\n                })\n                .state('accessDenied', {\n                    url: '/access-denied',\n                    data: {\n                        roles: []\n                    },\n                    templateUrl: '/app/modules/security/views/accessDenied.html'\n                });\n\n        }\n\n    ])\n    .run([\n        '$rootScope',\n        `${MODULE_NAME}.authorization`,\n        '$state',\n        `${MODULE_NAME}.security`,\n        'clearcode.tm.alert.$alert',\n        'clearcode.tm.tagContainer.currentContainer',\n\n        ($rootScope, authorization, $state, security, $alertProvider, currentContainer) => {\n\n            $alertProvider.addMessagePattern(\n                'login.invalid',\n                'Login or password is incorrect. Please try again.'\n            );\n\n            $alertProvider.addMessagePattern(\n                'request.error',\n                'User with passed email address does not exist.'\n            );\n\n            $alertProvider.addMessagePattern(\n                'request.success',\n                'The email with the activation link has been sent successfully.'\n            );\n\n            $alertProvider.addMessagePattern(\n                'changePassword.success',\n                'Password has been changed successfully.'\n            );\n\n            $alertProvider.addMessagePattern(\n                'changePassword.error',\n                'Sorry, something went wrong. Try to reset your password one more time.'\n            );\n\n            $alertProvider.addMessagePattern(\n                'changePassword.token',\n                'Reset password token is required.'\n            );\n\n            $alertProvider.addMessagePattern(\n                'changePassword.notCurrentPassword',\n                'This value should be the users current password.'\n            );\n\n            $alertProvider.addMessagePattern(\n                'invalid.email',\n                'Your email address is invalid.'\n            );\n\n            $alertProvider.addMessagePattern(\n                'password.different',\n                'Repeat password does not match.'\n            );\n\n            $alertProvider.addMessagePattern(\n                'password.both',\n                'Both password fields requires at least 8 characters.'\n            );\n\n            $alertProvider.addMessagePattern(\n                'password.first',\n                'First password field requires at least 8 characters.'\n            );\n\n            $alertProvider.addMessagePattern(\n                'password.second',\n                'Second password field requires at least 8 characters.'\n            );\n\n            $rootScope.logout = () => {\n\n                security.logout().then(() => {\n\n                    currentContainer.disableDebugMode();\n                    $state.go('signIn');\n\n                });\n\n            };\n\n            $rootScope.deleteHeaderNotSupported = false;\n\n            $rootScope.security = security;\n\n            $rootScope.$on('$stateChangeStart', (event, toState) => {\n\n                var isDataDefined = toState.data !== undefined, isSecure, roles;\n\n                if (isDataDefined) {\n\n                    isSecure = toState.data.secure !== undefined ? toState.data.secure : true;\n                    roles = toState.data.roles !== undefined ? toState.data.roles : [];\n\n                }\n\n                authorization.authorize(roles).then(\n                    () => {},\n                    () => {\n\n                        if (isSecure) {\n\n                            $state.go('signIn');\n\n                        }\n\n                    }\n                );\n\n            });\n\n        }\n    ])\n    .value('$localStorage', localStorage)\n    .controller(`${MODULE_NAME}.LoginController`, LoginController)\n    .service(`${MODULE_NAME}.authorization`, Authorization)\n    .service(`${MODULE_NAME}.security`, Security)\n    .service(`${MODULE_NAME}.oauthResource`, OAuthResource)\n    .service(`${MODULE_NAME}.tokenStorage`, TokenStorage)\n    .value('OAuthClientSettings', {\n        \"clientId\": typeof OAUTH_CLIENT_ID === \"undefined\" ? '1_1234567890' : OAUTH_CLIENT_ID,\n        \"clientSecret\": typeof OAUTH_CLIENT_SECRET === \"undefined\" ? 'sec1234567890' : OAUTH_CLIENT_SECRET\n    })\n    .factory(`${MODULE_NAME}.securityInterceptor`, securityInterceptor)\n    .factory(`${MODULE_NAME}.localeInterceptor`, localeInterceptor)\n    .factory(`${MODULE_NAME}.deleteRequestInterceptor`, deleteRequestInterceptor);\n\nmodule.exports = {MODULE_NAME};\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @name security#Authorization\n * @description\n * Service for authorization\n *\n * @author Arek Zajc <a.zajac@clearcode.cc>\n */\nclass Authorization {\n\n    /**\n     * @param {Security} security\n     */\n    constructor (security, $state) {\n\n        this.security = security;\n        this.state = $state;\n\n    }\n\n    /**\n     * @description Check if user have permission\n     *\n     * @param {Array} roles\n     * @returns {User}\n     */\n    authorize (roles) {\n\n        var self = this;\n\n        return this.security.getUser()\n            .then(() => {\n\n                var isAuthenticated = self.security.isAuthenticated();\n\n                if (roles && roles.length > 0 && !self.security.hasAnyRole(roles)) {\n\n                    if (!isAuthenticated) {\n\n                        self.state.go('signIn');\n\n                    }\n\n                }\n\n            });\n\n    }\n\n}\n\nexport default Authorization;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @name Security\n * @description\n * Store information about current user access token\n *\n * @author Arek Zajc <a.zajac@clearcode.cc>\n */\nclass Security {\n\n    /**\n     * @param {$q} $q\n     * @param {$timeout} $timeout\n     * @param {TokenStorage} tokenStorage\n     * @param {UserResource} userResource\n     * @param {OAuthResource} oauthResource\n     * @param {translate} $translate\n     */\n    constructor ($q, $timeout, tokenStorage, userResource, oauthResource, $translate) {\n\n        this.q = $q;\n        this.timeout = $timeout;\n        this.user = undefined;\n        this.authenticated = false;\n        this.tokenStorage = tokenStorage;\n        this.userResource = userResource;\n        this.oauthResource = oauthResource;\n        this.translate = $translate;\n        this.checked = false;\n\n    }\n\n    /**\n     * @returns {boolean}\n     */\n    hasUser () {\n\n        return this.user !== undefined;\n\n    }\n\n    /**\n     * @description Determines if user is logged in\n     *\n     * @return {boolean}\n     */\n    isAuthenticated () {\n\n        return this.authenticated;\n\n    }\n\n    /**\n     * Returns true when security is checked\n     *\n     * @returns {Boolean}\n     */\n    isChecked () {\n\n        return this.checked;\n\n    }\n\n    /**\n     * @description Determines if user has provided role\n     *\n     * @param {string} roleString\n     * @returns {boolean}\n     */\n    hasRole (roleString) {\n\n        if (!this.authenticated || roleString === undefined) {\n\n            return false;\n\n        }\n\n        return this.user.roles.indexOf(roleString) !== -1 || this.isSuperAdmin();\n\n\n    }\n\n    isSuperAdmin () {\n\n        return this.user.roles.indexOf('ROLE_SUPER_ADMIN') !== -1;\n\n    }\n\n    /**\n     * @description Determines if user has at least one of provide roles\n     *\n     * @param {array} roles\n     */\n    hasAnyRole (roles) {\n\n        if (!this.authenticated || roles === undefined) {\n\n            return false;\n\n        }\n\n        for (var i = 0; i < roles.length; i++) {\n\n            if (this.hasRole(roles[i])) {\n\n                return true;\n\n            }\n\n        }\n\n        return false;\n\n    }\n\n    /**\n     * @description Authenticate user\n     *\n     * @param {User} user\n     */\n    authenticate (user) {\n\n        this.user = user;\n        this.authenticated = true;\n\n        this.translate.use(user.language);\n\n    }\n\n    /**\n     * Send request to logout from oauth\n     * and remove access token\n     *\n     * @returns {Promise}\n     */\n    logout () {\n\n        var deferred = this.q.defer();\n\n        var self = this;\n\n        this.oauthResource.logout().then(\n            () => {\n\n                self.user = undefined;\n                self.authenticated = false;\n                self.tokenStorage.removeItem();\n\n                deferred.resolve();\n\n            },\n            (err) => {\n\n                deferred.reject(err);\n\n            }\n        );\n\n        return deferred.promise;\n\n    }\n\n    /**\n     * @description Get current user\n     *\n     * @param {boolean} force\n     * @returns {deferred.promise}\n     */\n    getUser (force) {\n\n        var self = this;\n\n        var deferred = this.q.defer();\n\n        // Force reload identity from server if necessary\n        if (force === true) {\n\n            this.reloadUser();\n\n        }\n\n        // Check if we retrieved the user identity from server. If we have return immediately\n        if (this.user !== undefined) {\n\n            deferred.resolve(this.user);\n            self.authenticate(this.user);\n\n            return deferred.promise;\n\n        }\n\n        if (undefined !== self.tokenStorage.getItem()) {\n\n            if (!this.isAuthenticated()) {\n\n                this.reloadUser();\n\n            }\n\n        } else {\n\n            self.checked = true;\n\n            deferred.reject();\n\n        }\n\n        return deferred.promise;\n\n    }\n\n    reloadUser () {\n\n        var self = this;\n        var deferred = this.q.defer();\n\n        this.userResource.getMe().then(\n            (resp) => {\n\n                self.checked = true;\n\n                self.authenticate(resp);\n                deferred.resolve(self.user);\n\n            },\n            () => {\n\n                self.checked = true;\n\n            }\n        );\n    }\n}\n\nexport default Security;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nlet localStorage;\n\n/**\n * @name TokenStorage\n *\n * @author Arek Zajc <a.zajac@clearcode.cc>\n */\nclass TokenStorage {\n\n    constructor ($localStorage) {\n        localStorage = $localStorage;\n    }\n\n    /**\n     * @description get token from localStorage\n     *\n     * @returns {AuthToken|boolean}\n     */\n    getItem () {\n\n        let accessToken = localStorage.accessToken;\n\n        if (undefined !== accessToken) {\n\n            accessToken = JSON.parse(accessToken);\n\n        }\n\n        return accessToken;\n\n    }\n\n    getToken () {\n\n        let authToken = this.getItem();\n\n        return TokenStorage.capitalizeFirstLetter(authToken.tokenType) + ' ' + authToken.accessToken;\n\n    }\n\n    static capitalizeFirstLetter (string) {\n\n        return string.charAt(0).toUpperCase() + string.slice(1);\n\n    }\n\n    /**\n     * @description save token in localStorage\n     *\n     * @param {AuthToken} authToken\n     *\n     * @returns {AuthToken}\n     */\n    addItem (authToken) {\n\n        localStorage.accessToken = JSON.stringify(authToken);\n\n        return authToken;\n\n    }\n\n    /**\n     * @description remove token from localStorage\n     */\n    removeItem () {\n\n        localStorage.removeItem('accessToken');\n\n    }\n\n}\n\nexport default TokenStorage;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @name AuthToken\n *\n * @author Arek Zajc <a.zajac@clearcode.cc>\n */\nclass AuthToken {\n\n    constructor () {\n\n        /**\n         * @type {string}\n         */\n        this.accessToken = undefined;\n\n        /**\n         * @type {number}\n         */\n        this.expiresIn = undefined;\n\n        /**\n         * @type {string}\n         */\n        this.tokenType = undefined;\n\n        /**\n         * @type {string}\n         */\n        this.scope = undefined;\n\n        /**\n         * @type {string}\n         */\n        this.refreshToken = undefined;\n\n    }\n\n}\n\nexport default AuthToken;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @name BaseController\n */\nclass BaseController {\n\n    /**\n     * @param {TagResource} $tagResource\n     * @param {TriggerResource} $triggerResource\n     * @param {VariableResource} $variableResource\n     * @param {$state} $state\n     * @param {$stateParams} $stateParams\n     * @param {Alert} $alert\n     * @param {$scope} $scope\n     * @param {ngTableParams} $TableParams\n     * @param {paramConverter} $paramConverter\n     * @param {currentContainer} CurrentContainer\n     * @param {PageInfo} PageInfo\n     * @param {Templates} templatesStorage\n     * @param {$translate} $translate\n     */\n    constructor (\n        $tagResource,\n        $triggerResource,\n        $variableResource,\n        $state,\n        $stateParams,\n        $alert,\n        $scope,\n        $TableParams,\n        $paramConverter,\n        CurrentContainer,\n        PageInfo,\n        templatesStorage,\n        $translate\n    ) {\n        const BREADCRUMB_GLOBAL = 'Tags';\n\n        this.alert = $alert;\n        this.state = $state;\n        this.stateParams = $stateParams;\n        this.triggerResource = $triggerResource;\n        this.TableParams = $TableParams;\n        this.paramConverter = $paramConverter;\n        this.currentContainer = CurrentContainer;\n\n        this.tag = $tagResource.getEntityObject();\n\n        this.tagPromise = undefined;\n\n        this.triggers = [];\n        this.chosenTriggers = [];\n        this.triggerPromise = undefined;\n        this.formTouched = false;\n        this.templatesStorage = templatesStorage;\n        this.templates = templatesStorage.getAll();\n        this.template = undefined;\n        this.translate = $translate;\n        this.variables = [];\n\n        this.textEditorConfig = {};\n        this.isCodeEditorFocused = false;\n\n        $variableResource.queryAllAvailable(this.stateParams.containerId).then( resp => {\n\n            this.variables = resp.data;\n\n        });\n\n        this.textEditorConfig.onLoad = cm => {\n\n            cm.options.variables = this.variables;\n\n            $scope.insertVariableIntoCode = variable => {\n\n                cm.doc.replaceSelection(`{{ ${variable.name} }}`);\n\n                cm.focus();\n\n            };\n\n            cm.on('focus', () => {\n\n                this.isCodeEditorFocused = true;\n\n            });\n\n            cm.on('blur', () => {\n\n                this.isCodeEditorFocused = false;\n\n            });\n\n        };\n\n        $scope.$on('trigger.add', (event, resp) => {\n\n            this.tag.addTrigger(resp);\n            this.showTriggerForm = false;\n            this.validateTriggers = false;\n\n        });\n\n        $scope.$on('trigger.edit', (event, resp) => {\n\n            this.tag.editTrigger(resp);\n            this.editTriggerForm = false;\n            this.validateTriggers = false;\n\n        });\n\n        this.translate(['Place the code']).then((translations) => {\n\n            this.textEditorConfig.placeholder = translations['Place the code'];\n\n        });\n\n        this.currentContainer.getContainer().then(() => {\n\n            if (this.currentContainer.$container.hasPermission('noaccess')) {\n\n                $state.go('container');\n\n            }\n\n            this\n                .translate([this.getBreadcrumbText(), BREADCRUMB_GLOBAL])\n                .then((translations) => {\n\n                    PageInfo.clear()\n                        .add(this.currentContainer.$container.name, 'tags', {\n                            containerId: this.currentContainer.$container.id\n                        })\n                        .add(translations[BREADCRUMB_GLOBAL], 'tags', {\n                            containerId: this.currentContainer.$container.id\n                        })\n                        .add(translations[this.getBreadcrumbText()])\n                        .broadcast();\n\n                });\n\n        });\n\n        $scope.$on('pageInfo.reload', (event, args) => {\n\n            this\n                .translate([this.getBreadcrumbText(), BREADCRUMB_GLOBAL])\n                .then((translations) => {\n\n                    PageInfo.clear()\n                        .add(args.name, 'tags', {\n                            containerId: args.id\n                        })\n                        .add(translations[BREADCRUMB_GLOBAL], 'tags', {\n                            containerId: args.id\n                        })\n                        .add(translations[this.getBreadcrumbText()])\n                        .broadcast();\n\n                });\n\n        });\n\n    }\n\n    hasVariables () {\n\n        return angular.isArray(this.variables) && this.variables.length > 0;\n\n    }\n\n    /**\n     *\n     * @param {string} id\n     */\n    setTagTemplate (id) {\n\n        if (this.tag.template === id) {\n\n            this.template = undefined;\n            this.tag.template = null;\n            this.formTouched = false;\n\n            return false;\n\n        }\n\n        this.tag.template = id;\n\n        if (this.tag.template) {\n\n            this.template = this.templatesStorage.get(id);\n            this.tag.code = undefined;\n\n            if (this.template.types.length === 0) {\n\n                this.setTemplateType(id);\n\n\n            } else {\n\n                this.formTouched = false;\n\n            }\n\n        } else {\n\n            this.formTouched = true;\n\n        }\n\n    }\n\n    /**\n     * @param {string} id\n     * @param {object} options\n     */\n    initTagTemplate (id, options) {\n\n        this.tag.template = id;\n\n        if (this.tag.template) {\n\n            this.template = this.templatesStorage.get(id);\n            this.tag.code = undefined;\n\n            if (this.template.types.length === 0) {\n\n                this.templateFields = this.templatesStorage.getOptions(id);\n                this.template.templateUrl = this.templatesStorage.getTemplateUrl(id);\n                this.tag.templateOptions = options;\n\n            } else {\n\n                this.templateFields = this.templatesStorage.getOptions(id, options.type);\n                this.tag.templateOptions.type = options.type;\n                this.template.templateUrl = this.templatesStorage.getTemplateUrl(id, options.type);\n\n            }\n\n        }\n\n        this.formTouched = true;\n\n    }\n\n    setTemplateType (id, type) {\n\n        if (this.tag.templateOptions.type !== undefined && this.tag.templateOptions.type === type) {\n\n            return false;\n\n        }\n\n        this.templateFields = this.templatesStorage.getOptions(id, type);\n\n        this.setOptions();\n        this.tag.templateOptions.type = type;\n        this.template.templateUrl = this.templatesStorage.getTemplateUrl(id, type);\n\n        this.formTouched = true;\n\n    }\n\n    setOptions () {\n\n        let fieldsLength = this.templateFields.length;\n\n        this.tag.templateOptions = {};\n\n        while (fieldsLength--) {\n\n            this.tag.templateOptions[this.templateFields[fieldsLength].name] = this.templateFields[fieldsLength].hasOwnProperty('value') ?\n                this.templateFields[fieldsLength].value : undefined;\n\n        }\n\n    }\n\n    /**\n     * @desc Show existing triggers\n     */\n    showExistingTriggers () {\n\n        this.chosenTriggers = [];\n        this.prepareExistingTriggersList();\n        this.showListTriggersForm = true;\n\n    }\n\n    /**\n     * @desc Prepare existing triggers list\n     */\n    prepareExistingTriggersList () {\n\n        this.triggers = [];\n\n        this.types = [\n            'Page View',\n            'Click',\n            'Event',\n            'Form submission'\n        ];\n\n        this.existingTable = new this.TableParams({\n            page: 1,\n            count: 10,\n            sorting: {\n                name: 'asc'\n            }\n        }, {\n            total: 0,\n            getData: ($defer, params) => {\n\n                var parameters = this.paramConverter.list(params.url());\n\n                parameters['exclude[]'] = this.tag.triggers.map(trigger => trigger.id);\n\n                this.triggerResource.query(this.currentContainer.$container.id, parameters).then(\n                    (resp) => {\n\n                        params.total(resp.total);\n                        $defer.resolve(resp.data);\n\n                    }\n                );\n\n            }\n        });\n\n    }\n\n    /**\n     * @desc Function provides adding existing triggers\n     */\n    addExistingTriggers () {\n\n        var chosenLength = this.chosenTriggers.length;\n\n        while (chosenLength--) {\n\n            this.tag.triggers.push(this.chosenTriggers[chosenLength]);\n\n        }\n\n    }\n\n    submitForm (tag) {\n\n        this.tagPromise = tag.save(this.stateParams.containerId);\n\n        this.tagPromise.then(\n            () => {\n\n                this.alert.success(this.getAlertType(this.stateParams.tagId));\n\n                this.currentContainer.makeChanges();\n\n                this.state.go('tags', {containerId: this.stateParams.containerId});\n\n            },\n            () => {\n\n                this.alert.error('error.invalid');\n\n            }\n        );\n\n    }\n\n    /**\n     * Display error if form is invalid\n     */\n    displayInvalidFormMessage () {\n\n        this.validateTag = true;\n        this.alert.error('error.invalid');\n\n    }\n\n}\n\nexport default BaseController;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport BaseController from './BaseController.js';\n\n/**\n * @name CreateController\n */\nclass CreateController extends BaseController {\n\n    /**\n     * @param {TagResource} $tagResource\n     * @param {TriggerResource} $triggerResource\n     * @param {VariableResource} $variableResource\n     * @param {$state} $state\n     * @param {$stateParams} $stateParams\n     * @param {Alert} $alert\n     * @param {$scope} $scope\n     * @param {ngTableParams} $TableParams\n     * @param {paramConverter} $paramConverter\n     * @param {currentContainer} CurrentContainer\n     * @param {PageInfo} PageInfo\n     * @param {Templates} TemplatesStorage\n     * @param {$translate} $translate\n     */\n    constructor (\n        $tagResource,\n        $triggerResource,\n        $variableResource,\n        $state,\n        $stateParams,\n        $alert,\n        $scope,\n        $TableParams,\n        $paramConverter,\n        CurrentContainer,\n        PageInfo,\n        TemplatesStorage,\n        $translate\n    ) {\n\n        super($tagResource, $triggerResource, $variableResource, $state, $stateParams, $alert, $scope, $TableParams, $paramConverter, CurrentContainer, PageInfo, TemplatesStorage, $translate);\n\n    }\n\n    /**\n     * Get breadcrumb text\n     *\n     */\n    getBreadcrumbText () {\n\n        return 'Add a new tag';\n\n    }\n\n    /**\n     * Get alert type\n     *\n     */\n    getAlertType () {\n\n        return 'success.create';\n\n    }\n}\n\nexport default CreateController;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport BaseController from './BaseController.js';\n\n/**\n * @name EditController\n */\nclass EditController extends BaseController {\n\n    /**\n     * @param {TagResource} $tagResource\n     * @param {TriggerResource} $triggerResource\n     * @param {VariableResource} $variableResource\n     * @param {$state} $state\n     * @param {$stateParams} $stateParams\n     * @param {Alert} $alert\n     * @param {$scope} $scope\n     * @param {ngTableParams} $TableParams\n     * @param {paramConverter} $paramConverter\n     * @param {currentContainer} CurrentContainer\n     * @param {PageInfo} PageInfo\n     * @param {Templates} templatesStorage\n     * @param {$translate} $translate\n     */\n    constructor (\n        $tagResource,\n        $triggerResource,\n        $variableResource,\n        $state,\n        $stateParams,\n        $alert,\n        $scope,\n        $TableParams,\n        $paramConverter,\n        CurrentContainer,\n        PageInfo,\n        templatesStorage,\n        $translate\n    ) {\n\n        super($tagResource, $triggerResource, $variableResource, $state, $stateParams, $alert, $scope, $TableParams, $paramConverter, CurrentContainer, PageInfo, templatesStorage, $translate);\n\n        this.tagPromise = $tagResource.get($stateParams.tagId);\n\n        this.tagPromise.then(\n            (resp) => {\n\n                this.tag = resp;\n\n                this.initTagTemplate(this.tag.template, this.tag.templateOptions);\n\n            }\n        );\n\n    }\n\n    /**\n     * Get breadcrumb text\n     *\n     */\n    getBreadcrumbText () {\n\n        return 'Configure tag';\n\n    }\n\n    /**\n     * Get alert type\n     *\n     */\n    getAlertType () {\n\n        return 'success.edit';\n\n    }\n\n}\n\nexport default EditController;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @type {Alert}\n */\nvar $alert;\n\n/**\n * @type {$stateParams}\n */\nvar stateParams;\n\n/**\n * @type {$scope}\n */\nvar scope;\n\n/**\n * @type {String}\n */\nconst BREADCRUMB_TEXT = 'Tags';\n\n/**\n * @name ManageController\n */\nclass ManageController {\n\n    /**\n     * @param {ngTableParams} TableParams\n     * @param {$stateParams} $stateParams\n     * @param {TagResource} tagResource\n     * @param {Alert} alert\n     * @param {ParamConverter} paramConverter\n     * @param {CurrentContainer} CurrentContainer\n     * @param {PageInfo} PageInfo\n     * @param {$scope} $scope\n     * @param {$state} state\n     * @param {$translate} $translate\n     */\n    constructor (\n        TableParams,\n        $stateParams,\n        tagResource,\n        alert,\n        paramConverter,\n        CurrentContainer,\n        PageInfo,\n        $scope,\n        state,\n        $translate\n    ) {\n\n        $alert = alert;\n        stateParams = $stateParams;\n        scope = $scope;\n        this.permissions = [];\n\n        this.containerId = stateParams.containerId;\n        this.translate = $translate;\n        this.currentContainer = CurrentContainer;\n\n        this.currentContainer.getContainer().then((container) => {\n\n            if (!this.currentContainer.$container.hasPermission('view')) {\n\n                state.go('container');\n\n            } else {\n\n                this.permissions = this.currentContainer.$container.permissions;\n\n            }\n\n            this\n                .translate([BREADCRUMB_TEXT])\n                .then((translations) => {\n\n                    PageInfo.clear()\n                        .add(container.name, 'tags', {\n                            containerId: container.id\n                        })\n                        .add(translations[BREADCRUMB_TEXT])\n                        .broadcast();\n\n                });\n\n        });\n\n        this.tableParams = new TableParams({\n                page: 1,\n                count: 10,\n                sorting: {\n                    name: 'asc'\n                }\n            }, {\n            total: 0,\n            $scope: $scope, // important\n            getData: ($defer, params) => {\n\n                tagResource.query(stateParams.containerId, paramConverter.list(params.url())).then((resp) => {\n\n                    params.total(resp.total);\n\n                    $defer.resolve(resp.data);\n\n                });\n\n            }\n        });\n\n        this.tableParams.reload();\n\n        scope.params = this.tableParams;\n\n        // behaviour after page change\n        $scope.$on('ngTableAfterReloadData', () => {\n\n            this.showTriggers = -1;\n            this.showMenu = -1;\n\n        }, true);\n\n        $scope.$watch('params.$params', (newParams, oldParams) => {\n\n            if (newParams === oldParams) {\n                return;\n            }\n\n            $scope.params.settings().$scope = $scope;\n\n            $scope.params.reload();\n\n        }, true);\n\n\n        scope.$on('pageInfo.reload', (event, args) => {\n\n            this\n                .translate([BREADCRUMB_TEXT])\n                .then((translations) => {\n\n                    PageInfo.clear()\n                        .add(args.name, 'tags', {\n                            containerId: args.id\n                        })\n                        .add(translations[BREADCRUMB_TEXT])\n                        .broadcast();\n\n                });\n\n        });\n\n    }\n\n    removeTag (tag) {\n\n        tag.remove().then(\n            () => {\n\n                $alert.success('success.remove');\n                this.currentContainer.makeChanges();\n\n                if (this.tableParams.data.length === 1 && this.tableParams.page() > 1) {\n\n                    this.tableParams.page(this.tableParams.page() - 1);\n\n                } else {\n\n                    this.tableParams.reload();\n\n                }\n\n            },\n            () => {\n\n                $alert.error('error.remove');\n\n                this.tableParams.reload();\n\n            }\n        );\n\n    }\n\n    changeStatus (tag) {\n        tag.changeStatus(this.containerId).then(\n            () => {\n                this.currentContainer.makeChanges();\n                $alert.success('status.change');\n            },\n            () => {\n                $alert.error('status.failed');\n            }\n        );\n    }\n\n    toggleActionMenu ($index) {\n\n        if(this.permissions.indexOf('edit') !== -1 ){\n\n            this.showMenu = (this.showMenu === $index) ? -1 : $index;\n            this.showTriggers = -1;\n\n        }\n\n    }\n\n    toggleTriggerList ($index) {\n\n        this.showMenu = -1;\n        this.showTriggers = this.isRowExpanded($index) ? -1 : $index;\n\n    }\n\n    isRowExpanded ($index) {\n\n        return this.showTriggers === $index;\n\n    }\n\n}\n\nexport default ManageController;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar tagFactory = (resource) => {\n\n    /**\n     * @name Variable\n     * @description Variable entity\n     */\n    class Tag {\n\n        constructor () {\n\n            /**\n             * @type {number}\n             */\n            this.id = undefined;\n\n            /**\n             * @type {string}\n             */\n            this.name = undefined;\n\n            /**\n             * @type {string}\n             */\n            this.code = undefined;\n\n            /**\n             * @type {string}\n             */\n            this.noScriptUri = undefined;\n\n            /**\n             * @type {Array}\n             */\n            this.triggers = [];\n\n            /**\n             * @type {string}\n             */\n            this.updatedAt = undefined;\n\n            /**\n             * @type {number}\n             */\n            this.priority = 0;\n\n            /**\n             * @type {boolean}\n             */\n            this.documentWrite = false;\n\n            /**\n             * @type {boolean}\n             */\n            this.disableInDebugMode = false;\n\n            /**\n             * @type {boolean}\n             */\n            this.respectVisitorsPrivacy = false;\n\n            /**\n             * @type {boolean}\n             */\n            this.isActive = true;\n\n            /**\n             * @type {string}\n             */\n            this.template = null;\n\n            /**\n             * @type {Object}\n             */\n            this.templateOptions = {};\n\n            /**\n             * @type {boolean}\n             */\n            this.statusChangePending = false;\n\n        }\n\n        /**\n         * @param {Trigger} trigger\n         */\n        addTrigger (trigger) {\n\n            this.triggers.push(trigger);\n\n        }\n\n        /**\n         * @param {Trigger} trigger\n         */\n        editTrigger (trigger) {\n\n            var index = this.triggers.length;\n\n            while (index--) {\n\n                if (this.triggers[index].id === trigger.id) {\n\n                    this.triggers[index] = trigger;\n                    return true;\n\n                }\n\n            }\n\n            return false;\n\n        }\n\n        /**\n         * @param {Trigger} trigger\n         */\n        removeTrigger (trigger) {\n\n            var index = this.triggers.indexOf(trigger);\n\n            if (index > -1) {\n\n                this.triggers.splice(index, 1);\n\n                return true;\n\n            }\n\n            return false;\n\n        }\n\n        /**\n         * @param {Number} id\n         */\n        removeTriggerById (id) {\n\n            var index = this.triggers.length;\n\n            while (index--) {\n\n                if (this.triggers[index].id === id) {\n\n                    this.triggers.splice(index, 1);\n                    return true;\n\n                }\n\n            }\n\n            return false;\n\n        }\n\n        /**\n         * @param {number} containerId\n         *\n         * @returns {deferred.promise}\n         */\n        save (containerId) {\n\n            var result = {}, promise;\n\n            var excludedProperty = ['id', 'updatedAt', 'statusChangePending'];\n\n            if (this.template === undefined) {\n\n                excludedProperty.push('templateOptions');\n\n            } else {\n\n                excludedProperty.push('code');\n                excludedProperty.push('noScriptUri');\n                excludedProperty.push('documentWrite');\n\n            }\n\n            for (var property in this) {\n\n                if (\n                    !angular.isFunction(this[property]) &&\n                    this.hasOwnProperty(property) &&\n                    excludedProperty.indexOf(property) === -1\n                ) {\n\n                    if (property === 'triggers') {\n\n                        var collection = [];\n\n                        for (var index in this[property]) {\n\n                            if (this[property][index] instanceof Object) {\n\n                                collection.push(this[property][index].id);\n\n                            }\n\n                        }\n\n                        result[property] = collection;\n\n                    } else {\n\n                        result[property] = this[property];\n\n                    }\n\n                }\n\n            }\n\n            if (this.id === undefined) {\n\n                promise = resource.post(containerId, result);\n\n            } else {\n\n                promise = resource.put(this.id, result);\n\n            }\n\n            return promise;\n\n        }\n\n        /**\n         * @returns {deferred.promise|Boolean}\n         */\n        remove () {\n\n            if (this.id === undefined) {\n\n                return false;\n\n            }\n\n            return resource.delete(this.id);\n\n        }\n\n        /**\n         * @param containerId\n         * @returns {deferred.promise}\n         */\n        changeStatus (containerId) {\n            let tag = angular.copy(this);\n\n            tag.isActive = !tag.isActive;\n\n            this.statusChangePending = true;\n\n            let promise = tag.save(containerId).then(\n\n                () => {\n\n                    this.isActive = !this.isActive;\n\n                }\n\n            ).finally(\n\n                () => {\n\n                    this.statusChangePending = false;\n\n                }\n\n            );\n\n            return promise;\n\n        }\n\n    }\n\n    return Tag;\n\n};\n\n\nexport default tagFactory;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport templateTypeFactory from '../entity/TemplateType.js';\n\nvar templateFactory = () => {\n\n    let TemplateType = templateTypeFactory();\n\n    class Template {\n\n        /**\n         * @constructor\n         * @param {string} id\n         * @param {string} name\n         */\n        constructor (id, name) {\n\n            /**\n             * @type {string}\n             */\n            this.id = id;\n\n            /**\n             * @type {string}\n             */\n            this.name = name;\n\n            /**\n             * @type {string}\n             */\n            this.brandUrl = undefined;\n\n            /**\n             * @type {string}\n             */\n            this.templateUrl = undefined;\n\n            /**\n             * @type {string}\n             */\n            this.type = undefined;\n\n            /**\n             * @type {Array}\n             */\n            this.types = [];\n\n            /**\n             * @type {object}\n             */\n            this.fields = [];\n\n        }\n\n        /**\n         * @param {object} params\n         * @returns {Template}\n         */\n        addTextField (params) {\n\n            let field = params ? params : {};\n\n            field.type = 'text';\n\n            this.fields.push(field);\n\n            return this;\n\n        }\n\n        /**\n         * @param {object} params\n         * @returns {Template}\n         */\n        addHiddenField (name, value) {\n\n            let field = {};\n\n            field.name = name;\n            field.value = value;\n            field.type = 'hidden';\n\n            this.fields.push(field);\n\n            return this;\n\n        }\n\n        /**\n         * @param {object} params\n         * @returns {Template}\n         */\n        addSelectField (params) {\n\n            let field = params ? params : {};\n\n            field.type = 'select';\n\n            this.fields.push(field);\n\n            return this;\n\n        }\n\n        /**\n         * @param {string} id\n         * @param {string} name\n         * @returns {Template}\n         */\n        addType (id, name) {\n\n            let type = new TemplateType(id, name);\n\n            this.types.push(type);\n\n            return type;\n\n        }\n\n        /**\n         * @param {string} url\n         * @returns {Template}\n         */\n        addBrand (url) {\n\n            this.brandUrl = url;\n\n            return this;\n\n        }\n\n        /**\n         * @param {string} url\n         * @returns {Template}\n         */\n        addTemplateUrl (url) {\n\n            this.templateUrl = url;\n\n            return this;\n\n        }\n\n    }\n\n    return Template;\n\n};\n\n\nexport default templateFactory;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\nvar templateTypeFactory = () => {\n\n    class TemplateType {\n\n        /**\n         * @constructor\n         * @param {string} id\n         * @param {string} name\n         */\n        constructor (id, name) {\n\n            /**\n             * @type {string}\n             */\n            this.id = id;\n\n            /**\n             * @type {string}\n             */\n            this.name = name;\n\n            /**\n             * @type {string}\n             */\n            this.templateUrl = undefined;\n\n            /**\n             * @type {object}\n             */\n            this.fields = [];\n\n        }\n\n        /**\n         * @param {object} params\n         * @returns {TemplateType}\n         */\n        addTextField (params) {\n\n            let field = params ? params : {};\n\n            field.type = 'text';\n\n            this.fields.push(field);\n\n            return this;\n\n        }\n\n        /**\n         * @param {string} name\n         * @param {string} value\n         * @returns {TemplateType}\n         */\n        addHiddenField (name, value) {\n\n            let field = {};\n\n            field.name = name;\n            field.value = value;\n            field.type = 'hidden';\n\n            this.fields.push(field);\n\n            return this;\n\n        }\n\n        /**\n         * @param {string} url\n         * @returns {TemplateType}\n         */\n        addTemplateUrl (url) {\n\n            this.templateUrl = url;\n\n            return this;\n\n        }\n\n    }\n\n    return TemplateType;\n\n};\n\n\nexport default templateTypeFactory;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport templateFactory from '../entity/Template.js';\n\nlet Template = templateFactory();\n\n/**\n * @name TemplatesProvider\n */\nclass TemplatesProvider {\n\n    constructor () {\n\n\n        /**\n         * @type {Array} collection\n         */\n        this.collection = [];\n\n    }\n\n    /**\n     * @param {string} id\n     * @param {string} name\n     * @returns {Template}\n     */\n    add (id, name) {\n\n        let template = new Template(id, name);\n\n        this.collection.push(template);\n\n        return template;\n\n    }\n\n    /**\n     * @param {string} id\n     * @returns {Template|boolean}\n     */\n    get (id) {\n\n        let templateLength = this.collection.length;\n\n        while (templateLength--) {\n\n            if (this.collection[templateLength].id === id) {\n\n                return this.collection[templateLength];\n\n            }\n\n        }\n\n        return false;\n\n    }\n\n    /**\n     * @returns {array}\n     */\n    getAll () {\n\n        return this.collection;\n\n    }\n\n    $get () {\n\n        return this;\n\n    };\n\n}\n\nexport default TemplatesProvider;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport tagFactory from '../entity/Tag.js';\n\nvar transformResponse = function (resp) {\n\n    var Tag = tagFactory(this);\n\n    var tag = new Tag();\n\n    tag.id = resp.id;\n    tag.name = resp.name;\n    tag.code = resp.code;\n    tag.noScriptUri = resp.no_script_uri;\n    tag.priority = resp.priority;\n    tag.updatedAt = resp.updated_at;\n    tag.documentWrite = resp.document_write;\n    tag.disableInDebugMode = resp.disable_in_debug_mode;\n    tag.isActive = resp.is_active;\n    tag.respectVisitorsPrivacy = resp.respect_visitors_privacy;\n\n    if (resp.template !== null) {\n\n        tag.template = resp.template;\n        tag.templateOptions = resp.template_options;\n\n    } else {\n\n        tag.template = undefined;\n\n    }\n\n    for (var key in resp.triggers) {\n\n        if (resp.triggers[key] instanceof Object) {\n\n            tag.addTrigger(resp.triggers[key]);\n\n        }\n\n    }\n\n    return tag;\n\n};\n\n\nvar appendTransform = function (defaults, transform) {\n\n    // We can't guarantee that the default transformation is an array\n    defaults = angular.isArray(defaults) ? defaults : [defaults];\n\n    // Append the new transformation to the defaults\n    return defaults.concat(transform);\n\n};\n\n/**\n * @name TagResource\n */\nclass TagResource {\n    /**\n     * @param {$http} $http\n     * @param {$q} $q\n     */\n    constructor ($http, $q) {\n\n        this.http = $http;\n        this.q = $q;\n\n    }\n\n    /**\n     * @returns {Tag}\n     */\n    getEntityObject () {\n\n        var Tag = tagFactory(this);\n\n        return new Tag();\n\n    }\n\n    /**\n     * @description Send request to get specific entity\n     *\n     * @param {number} id\n     *\n     * @returns {deferred.promise}\n     */\n    get (id) {\n\n        var deferred = this.q.defer();\n\n        this.http({\n            method: 'GET',\n            url: `/api/tags/${id}`,\n            transformResponse: appendTransform(this.http.defaults.transformResponse, (resp, header, status) => {\n\n                if (status < 400) {\n\n                    return transformResponse.call(this, resp.data);\n\n                } else {\n\n                    return resp;\n\n                }\n\n            })\n        })\n            .success((resp) => {\n\n                deferred.resolve(resp);\n\n            })\n            .error((err) => {\n\n                deferred.reject(err);\n\n            });\n\n        return deferred.promise;\n\n    }\n\n    /**\n     * @description Send request to get list of entities\n     *\n     * @param {number} containerId\n     * @param {Object} params\n     *\n     * @returns {deferred.promise}\n     */\n    query (containerId, params) {\n\n        var deferred = this.q.defer();\n\n        this.http({\n            method: 'GET',\n            url: `/api/containers/${containerId}/tags`,\n            params: params,\n            transformResponse: appendTransform(this.http.defaults.transformResponse, (resp) => {\n\n                for (var element in resp.data) {\n\n                    if (resp.data[element] instanceof Object) {\n\n                        resp.data[element] = transformResponse.call(this, resp.data[element]);\n\n                    }\n\n                }\n\n                return resp;\n\n            })\n        })\n            .success((resp) => {\n\n                deferred.resolve(resp);\n\n            })\n            .error((err) => {\n\n                deferred.reject(err);\n\n            });\n\n        return deferred.promise;\n\n    }\n\n    /**\n     * @description Send request to delete entity\n     *\n     * @param {number} id\n     *\n     * @returns {deferred.promise}\n     */\n    delete (id) {\n\n        var deferred = this.q.defer();\n\n        this.http({\n            method: 'DELETE',\n            url: `/api/tags/${id}`\n        })\n            .success((data) => {\n\n                deferred.resolve(data);\n\n            })\n            .error((err) => {\n\n                deferred.reject(err);\n\n            });\n\n        return deferred.promise;\n\n    }\n\n    /**\n     * @description Send request to create entity\n     *\n     * @param {number} containerId\n     * @param {object} entity\n     *\n     * @returns {deferred.promise}\n     */\n    post (containerId, entity) {\n\n        var deferred = this.q.defer();\n\n        this.http({\n            method: 'POST',\n            url: `/api/containers/${containerId}/tags`,\n            data: entity,\n            transformResponse: appendTransform(this.http.defaults.transformResponse, (resp, header, status) => {\n\n                if (status < 400) {\n\n                    return transformResponse.call(this, resp.data);\n\n                } else {\n\n                    return resp;\n\n                }\n\n            })\n        })\n            .success((resp) => {\n\n                deferred.resolve(resp);\n\n            })\n            .error((err) => {\n\n                deferred.reject(err);\n\n            });\n\n        return deferred.promise;\n\n    }\n\n    /**\n     * Send request to update entity\n     *\n     * @param {number} id\n     * @param {object} entity\n     *\n     * @returns {deferred.promise}\n     */\n    put (id, entity) {\n\n        var deferred = this.q.defer();\n\n        this.http({\n            method: 'PUT',\n            url: `/api/tags/${id}`,\n            data: entity,\n            transformResponse: appendTransform(this.http.defaults.transformResponse, (resp, header, status) => {\n\n                if (status < 400) {\n\n                    return transformResponse.call(this, resp.data);\n\n                } else {\n\n                    return resp;\n\n                }\n\n            })\n        })\n            .success((resp) => {\n\n                deferred.resolve(resp);\n\n            })\n            .error((err) => {\n\n                deferred.reject(err);\n\n            });\n\n        return deferred.promise;\n\n    }\n}\n\nexport default TagResource;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nlet findByKey = function (collection, key, value) {\n\n    let collectionLength = collection.length;\n\n    while (collectionLength--) {\n\n        if (collection[collectionLength][key] === value) {\n\n            return collection[collectionLength];\n\n        }\n\n    }\n\n    return false;\n\n};\n\n/**\n * @name Templates\n */\nclass Templates {\n\n    /**\n     * @constructor\n     * @param {TemplateProvider} $templates\n     */\n    constructor ($templates) {\n\n        this.collection = $templates.getAll();\n\n    }\n\n    getAll () {\n\n        return this.collection;\n\n    }\n\n    get (id) {\n\n        let collectionLength = this.collection.length;\n\n        while (collectionLength--) {\n\n            if (this.collection[collectionLength].id === id) {\n\n                return this.collection[collectionLength];\n\n            }\n\n        }\n\n        return false;\n\n    }\n\n    getOptions (id, typeId) {\n\n        let template = findByKey(this.collection, 'id', id);\n\n        if (template) {\n\n            if (typeId) {\n\n                let type = findByKey(template.types, 'id', typeId);\n\n                return type && type.hasOwnProperty('fields') ? type.fields : false;\n\n            }\n\n            return template.hasOwnProperty('fields') ? template.fields : false;\n\n        }\n\n        return false;\n\n    }\n\n    getTemplateUrl (id, typeId) {\n\n        let template = findByKey(this.collection, 'id', id);\n\n        if (typeId) {\n\n            let type = findByKey(template.types, 'id', typeId);\n\n            return type ? type.templateUrl : false;\n\n        }\n\n        return template.templateUrl;\n\n    }\n\n}\n\nexport default Templates;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport CreateController from './controllers/CreateController.js';\nimport EditController from './controllers/EditController.js';\nimport ManageController from './controllers/ManageController.js';\n\nimport TagResource from './resource/TagResource.js';\nimport Templates from './services/Templates.js';\nimport TemplatesProvider from './providers/TemplatesProvider.js';\n\nconst MODULE_NAME = 'clearcode.tm.tag';\nconst MODULE_TRIGGER = 'clearcode.tm.trigger';\nconst MODULE_VARIABLE = 'clearcode.tm.variable';\nconst MODULE_DIR = 'app/modules/tag';\n\nTemplates.$inject = [\n    `${MODULE_NAME}.$template`\n];\n\nTagResource.$inject = [\n    '$http',\n    '$q'\n];\n\nManageController.$inject = [\n    'ngTableParams',\n    '$stateParams',\n    `${MODULE_NAME}.tagResource`,\n    'clearcode.tm.alert.alert',\n    'clearcode.tm.tagContainer.paramConverter',\n    'clearcode.tm.tagContainer.currentContainer',\n    'clearcode.tm.pageInfo.pageInfo',\n    '$scope',\n    '$state',\n    '$translate'\n];\n\nCreateController.$inject = [\n    `${MODULE_NAME}.tagResource`,\n    `${MODULE_TRIGGER}.triggerResource`,\n    `${MODULE_VARIABLE}.variableResource`,\n    '$state',\n    '$stateParams',\n    'clearcode.tm.alert.alert',\n    '$scope',\n    'ngTableParams',\n    'clearcode.tm.tagContainer.paramConverter',\n    'clearcode.tm.tagContainer.currentContainer',\n    'clearcode.tm.pageInfo.pageInfo',\n    `${MODULE_NAME}.templatesStorage`,\n    '$translate'\n];\n\nEditController.$inject = [\n    `${MODULE_NAME}.tagResource`,\n    `${MODULE_TRIGGER}.triggerResource`,\n    `${MODULE_VARIABLE}.variableResource`,\n    '$state',\n    '$stateParams',\n    'clearcode.tm.alert.alert',\n    '$scope',\n    'ngTableParams',\n    'clearcode.tm.tagContainer.paramConverter',\n    'clearcode.tm.tagContainer.currentContainer',\n    'clearcode.tm.pageInfo.pageInfo',\n    `${MODULE_NAME}.templatesStorage`,\n    '$translate'\n];\n\nmodule.exports = {MODULE_NAME};\nangular\n    .module(MODULE_NAME, [\n        'pascalprecht.translate',\n        'ui.router',\n        'ngTable',\n        'clearcode.tm.alert',\n        'clearcode.tm.pageInfo',\n        'clearcode.tm.tagContainer',\n        'clearcode.tm.trigger',\n        'ui.codemirror'\n    ])\n    .config([\n\n        '$stateProvider',\n\n        ($stateProvider) => {\n\n            $stateProvider\n                .state('tags', {\n                    url: '/containers/{containerId}/tags',\n                    controller: `${MODULE_NAME}.ManageController as view`,\n                    templateUrl: `${MODULE_DIR}/views/manage.html`,\n                    data: {\n                        roles: [\n                            'ROLE_SUPER_ADMIN'\n                        ],\n                        hasContainerList: true\n                    }\n                })\n                .state('tagCreate', {\n                    url: '/containers/{containerId}/tag-create',\n                    controller: `${MODULE_NAME}.CreateController as view`,\n                    templateUrl: `${MODULE_DIR}/views/create.html`,\n                    data: {\n                        roles: [\n                            'ROLE_SUPER_ADMIN'\n                        ],\n                        hasContainerList: true\n                    }\n                })\n                .state('tagEdit', {\n                    url: '/containers/{containerId}/tag/edit/{tagId}',\n                    controller: `${MODULE_NAME}.EditController as view`,\n                    templateUrl: `${MODULE_DIR}/views/edit.html`,\n                    data: {\n                        roles: [\n                            'ROLE_SUPER_ADMIN'\n                        ],\n                        hasContainerList: true\n                    }\n                });\n\n        }\n    ])\n    .run([\n\n        'clearcode.tm.alert.$alert',\n\n        ($alertProvider) => {\n\n            $alertProvider.addMessagePattern(\n                'trigger.close',\n                'You are trying to close unsaved trigger.'\n            );\n\n            $alertProvider.addMessagePattern(\n                'status.change',\n                'Tag status was changed successfully'\n            );\n\n            $alertProvider.addMessagePattern(\n                'status.failed',\n                'Sorry, something went wrong.'\n            );\n\n        }\n    ])\n    .provider(`${MODULE_NAME}.$template`, TemplatesProvider)\n    .controller(`${MODULE_NAME}.ManageController`, ManageController)\n    .controller(`${MODULE_NAME}.CreateController`, CreateController)\n    .controller(`${MODULE_NAME}.EditController`, EditController)\n    .service(`${MODULE_NAME}.tagResource`, TagResource)\n    .service(`${MODULE_NAME}.templatesStorage`, Templates);\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @type {$state}\n */\nvar state;\n\n/**\n * @type {Alert}\n */\nvar $alert;\n\n/**\n * @type {String}\n */\nconst BREADCRUMB_TEXT = 'Add a container';\n\n/**\n * @name CreateController\n */\nclass CreateController {\n\n    /**\n     * @param {ContainerResource} containerResource\n     * @param {$state} $state\n     * @param {Alert} alert\n     * @param {PageInfo} PageInfo\n     * @param {$translate} $translate\n     */\n    constructor (containerResource, $state, alert, PageInfo, $translate) {\n\n        this.container = containerResource.getEntityObject();\n\n        state = $state;\n\n        $alert = alert;\n\n        this.translate = $translate;\n\n        this\n            .translate([BREADCRUMB_TEXT])\n            .then((translations) => {\n\n                PageInfo.clear()\n                    .add(translations[BREADCRUMB_TEXT])\n                    .broadcast();\n\n            });\n\n    }\n\n    submitForm (container) {\n\n        this.containerPromise = container.save();\n\n        this.containerPromise.then(\n            (resp) => {\n\n                $alert.success('container.create');\n\n                state.go('containerExplanation', {containerId: resp.id});\n\n            },\n            () => {\n\n                $alert.error('error.invalid');\n\n            }\n        );\n\n    }\n\n    /**\n     * Display error if form is invalid\n     */\n    displayInvalidFormMessage () {\n\n        this.validateContainer = true;\n        $alert.error('error.invalid');\n\n    }\n\n}\n\nexport default CreateController;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @type {$state}\n */\nvar state;\n\n/**\n * @type {$stateParams}\n */\nvar stateParams;\n\n/**\n * @type {Alert}\n */\nvar alert;\n\n/**\n * @type {CurrentContainer}\n */\nvar currentContainer;\n\n/**\n * @type {$scope}\n */\nvar scope;\n\n/**\n * @type {String}\n */\nconst BREADCRUMB_TEXT = 'Options';\n\n/**\n * @name EditController\n */\nclass EditController {\n\n    /**\n     * @param {ContainerResource} containerResource\n     * @param {$state} $state\n     * @param {$stateParams} $stateParams\n     * @param {Alert} $alert\n     * @param {currentContainer} CurrentContainer\n     * @param {PageInfo} PageInfo\n     * @param {$scope} $scope\n     * @param {$translate} $translate\n     */\n    constructor (\n        containerResource,\n        $state,\n        $stateParams,\n        $alert,\n        CurrentContainer,\n        PageInfo,\n        $scope,\n        $translate\n    ) {\n\n        var self = this;\n\n        state = $state;\n        stateParams = $stateParams;\n        alert = $alert;\n        currentContainer = CurrentContainer;\n        scope = $scope;\n\n        this.pageInfo = PageInfo;\n\n        this.container = containerResource.getEntityObject();\n\n        this.containerPromise = containerResource.get(stateParams.containerId);\n\n        this.containerPromise.then((resp) => {\n\n            self.container = resp;\n\n        });\n\n        this.translate = $translate;\n\n        currentContainer.getContainer().then(() => {\n\n            if (currentContainer.$container.hasPermission('noaccess')) {\n\n                state.go('container');\n\n            }\n\n            this.refreshBreadcrumb(BREADCRUMB_TEXT, currentContainer.$container);\n\n        });\n\n        scope.$on('pageInfo.reload', (event, container) => {\n\n            this.refreshBreadcrumb(BREADCRUMB_TEXT, container);\n\n        });\n\n    }\n\n    removeContainer () {\n\n        this.container.remove().then(\n            () => {\n\n                alert.success('success.remove');\n\n                state.go('container');\n\n            },\n            () => {\n\n                alert.error('error.remove');\n\n            }\n        );\n\n    }\n\n    submitForm (container) {\n\n        this.containerPromise = container.save();\n\n        this.containerPromise.then(\n            (container) => {\n\n                this.refreshBreadcrumb(BREADCRUMB_TEXT, container);\n\n                currentContainer.get(stateParams.containerId);\n                alert.success('success.edit');\n\n                state.go('containerEdit', {containerId: stateParams.containerId});\n\n            },\n            () => {\n\n                alert.error('error.invalid');\n\n            }\n        );\n\n    }\n\n    /**\n     * Display error if form is invalid\n     */\n    displayInvalidFormMessage () {\n\n        this.validateContainer = true;\n        alert.error('error.invalid');\n\n    }\n\n    refreshBreadcrumb (breadcrumbText, container) {\n\n        var pageInfo = this.pageInfo;\n\n        this.translate([breadcrumbText])\n            .then((translations) => {\n\n                pageInfo\n                    .clear()\n                    .add(container.name, 'tags', {\n                        containerId: container.id\n                    })\n                    .add(translations[breadcrumbText])\n                    .broadcast();\n\n            });\n\n    }\n\n}\n\nexport default EditController;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @type {$stateParams}\n */\nvar stateParams;\n\n/**\n * @type {String}\n * @readOnly\n */\nvar PAGE_TITLE = 'Container created successfully';\n\n/**\n * @name ExplanationController\n */\nclass ExplanationController {\n\n    /**\n     * @param {ContainerResource} containerResource\n     * @param {$stateParams} $stateParams\n     * @param {PageInfo} PageInfo\n     * @param {CurrentContainer} CurrentContainer\n     * @param {$translate} $translate\n     */\n    constructor (\n        containerResource,\n        $stateParams,\n        PageInfo,\n        CurrentContainer,\n        $translate\n    ) {\n\n        CurrentContainer.makeChanges();\n\n        this.translate = $translate;\n\n        this\n            .translate([PAGE_TITLE])\n            .then((translations) => {\n\n                PageInfo.clear()\n                    .add(translations[PAGE_TITLE])\n                    .broadcast();\n\n            });\n\n        stateParams = $stateParams;\n        this.container = containerResource.getEntityObject();\n\n        this.containerPromise = containerResource.get(stateParams.containerId);\n\n        this.containerPromise.then((resp) => {\n\n            this.container = resp;\n\n        });\n\n    }\n\n}\n\nexport default ExplanationController;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @type {Alert}\n */\nvar $alert;\n\n/**\n * @name ManageController\n */\nclass ManageController {\n\n    /**\n     * @param {ngTableParams} TableParams\n     * @param {ContainerResource} containerResource\n     * @param {Alert} alert\n     * @param paramConverter\n     * @param currentContainer\n     */\n    constructor (TableParams, containerResource, alert, paramConverter, currentContainer) {\n\n        $alert = alert;\n\n        currentContainer.disableDebugMode();\n\n        this.tableParams = new TableParams({\n            page: 1,\n            count: 10,\n            sorting: {\n                name: 'asc'\n            }\n        }, {\n            total: 0,\n            getData: ($defer, params) => {\n\n                containerResource.query(paramConverter.list(params.url())).then((resp) => {\n\n                    params.total(resp.total);\n\n                    $defer.resolve(resp.data);\n\n                });\n\n            }\n        });\n\n    }\n\n    removeContainer (container) {\n\n        var self = this;\n\n        container.remove().then(\n            () => {\n\n                $alert.success('success.remove');\n\n                if (self.tableParams.data.length === 1) {\n\n                    self.tableParams.page(self.tableParams.page() - 1);\n\n                }\n\n                self.tableParams.reload();\n\n            },\n            () => {\n\n                $alert.error('error.remove');\n\n                self.tableParams.reload();\n\n            }\n        );\n\n    }\n\n}\n\nexport default ManageController;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar permissionsResource;\n\nvar currentContainer;\n\nvar alert;\n\n/**\n * @name PermissionsController\n */\nclass PermissionsController {\n\n    /**\n     * @param TableParams\n     * @param paramConverter\n     * @param $currentContainer\n     * @param $alert\n     * @param $permissionsResource\n     */\n    constructor (TableParams, paramConverter, $currentContainer, $alert, $permissionsResource) {\n\n        this.permissionsPromise = undefined;\n        permissionsResource = $permissionsResource;\n        currentContainer = $currentContainer;\n        alert = $alert;\n\n        this.usersTable = new TableParams({\n            page: 1,\n            count: 10,\n            sorting: {\n                name: 'asc'\n            }\n        }, {\n            total: 0,\n            getData: ($defer, params) => {\n\n                permissionsResource.query(currentContainer.$container.id, paramConverter.list(params.url())).then(\n                    (resp) => {\n\n                        params.total(resp.total);\n                        $defer.resolve(resp.data);\n\n                    }\n                );\n\n            }\n        });\n\n    }\n\n    setPermission (permission, value) {\n\n        var tempRequest = angular.copy(permission);\n\n        tempRequest.permissions = value;\n\n        this.permissionsPromise = tempRequest.save(currentContainer.$container.id);\n\n        this.permissionsPromise.then(\n            (resp) => {\n\n                permission.permissions = resp.permissions;\n\n            },\n            () => {\n\n                alert.error('permissions.error');\n\n            }\n        );\n\n    }\n\n    isValid (permission, value) {\n\n        if (permission.permissions === value || permission.user.roles.indexOf('ROLE_SUPER_ADMIN') !== -1) {\n\n            return false;\n\n        }\n\n        return true;\n\n    }\n\n}\n\nexport default PermissionsController;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @name PrivacyController\n */\nexport default class PrivacyController {\n\n    constructor (stateParams, containerResource) {\n\n        this.privacyPromise = containerResource.getPrivacyOptOut(stateParams.containerId)\n            .then((resp) => {\n                this.code = resp.code;\n            });\n\n    }\n\n}\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar containerFactory = (resource) => {\n\n    /**\n     * @name Container\n     * @description Container entity\n     */\n    class Container {\n\n        constructor () {\n\n            /**\n             * @type {number}\n             */\n            this.id = undefined;\n\n            /**\n             * @type {string}\n             */\n            this.name = undefined;\n\n            /**\n             * @type {string}\n             */\n            this.code = undefined;\n\n            /**\n             * @type {Object}\n             */\n            this.version = undefined;\n\n            /**\n             * @type {boolean}\n             */\n            this.hasUnpublishedChanges = undefined;\n\n            /**\n             * @type {string}\n             */\n            this.publishedAt = undefined;\n\n            /**\n             * @type {Array}\n             */\n            this.permissions = undefined;\n\n            /**\n             * @type {number}\n             */\n            this.delay = undefined;\n\n            /**\n             * @type {Array}\n             */\n            this.websites = undefined;\n        }\n\n        /**\n         * @returns {deferred.promise}\n         */\n        save () {\n\n            var result = {}, promise;\n\n            var excludedProperty = ['id', 'code', 'version', 'hasUnpublishedChanges', 'publishedAt', 'permissions', 'websites'];\n\n            for (var property in this) {\n\n                if (\n                    !angular.isFunction(this[property]) &&\n                    this.hasOwnProperty(property) &&\n                    excludedProperty.indexOf(property) === -1\n                ) {\n\n                    result[property] = this[property];\n\n                }\n\n            }\n\n            if (this.id === undefined) {\n\n                delete result.delay;\n                promise = resource.post(result);\n\n            } else {\n\n                promise = resource.put(this.id, result);\n\n            }\n\n            return promise;\n\n        }\n\n        /**\n         * @returns {deferred.promise|Boolean}\n         */\n        remove () {\n\n            if (this.id === undefined) {\n\n                return false;\n\n            }\n\n            return resource.delete(this.id);\n\n        }\n\n        /**\n         * @param {string}\n         * @returns {Boolean}\n         */\n        hasPermission (permission) {\n\n            return this.permissions.indexOf(permission) !== -1;\n\n        }\n\n        /**\n         * Get permission\n         */\n        getPermission () {\n\n            let permissionsPrioritiedArray = [{\n              value: 'operator',\n              text: 'Owner'\n            }, {\n              value: 'publish',\n              text: 'Publish'\n            }, {\n              value: 'edit',\n              text: 'Edit'\n            }, {\n              value: 'view',\n              text: 'View'\n            }];\n\n            for (let permissionIndex in permissionsPrioritiedArray) {\n\n                if (this.permissions.indexOf(permissionsPrioritiedArray[permissionIndex].value) !== -1) {\n\n                    return permissionsPrioritiedArray[permissionIndex].text;\n\n                }\n\n            }\n\n        }\n    }\n\n    return Container;\n\n};\n\n\nexport default containerFactory;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar permissionFactory = (resource) => {\n\n    /**\n     * @name Permission\n     * @description Permission entity\n     */\n    class Permission {\n\n        constructor () {\n\n            /**\n             * @type {Object}\n             */\n            this.user = undefined;\n\n            /**\n             * @type {Array}\n             */\n            this.permissions = undefined;\n\n        }\n\n        /**\n         * @returns {deferred.promise}\n         */\n        save (containerId) {\n\n            var result = {}, promise;\n\n            result = angular.copy(this);\n\n            result.user = result.user.id;\n\n            promise = resource.put(containerId, result);\n\n            return promise;\n\n        }\n    }\n\n    return Permission;\n\n};\n\n\nexport default permissionFactory;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport containerFactory from '../entity/Container.js';\n\nlet transformResponse = function (resp) {\n\n    let Container = containerFactory(this);\n\n    let container = new Container();\n\n    if (resp !== undefined) {\n\n        container.id = resp.id;\n        container.name = resp.name;\n        container.description = resp.description;\n        container.code = resp.code;\n        container.version = resp.version;\n        container.hasUnpublishedChanges = resp.has_unpublished_changes;\n        container.publishedAt = resp.published_at;\n        container.permissions = resp.permissions;\n        container.delay = resp.delay;\n        container.websites = [];\n\n        for (let i = 0; i < resp.websites.length; i++) {\n\n            let website = this.WebsiteResource.getEntityObject();\n\n            website.url = resp.websites[i].url;\n            website.parameterType = resp.websites[i].parameter_type;\n\n            container.websites.push(website);\n\n        }\n\n    }\n\n    return container;\n\n};\n\nlet appendTransform = function (defaults, transform) {\n\n    // We can't guarantee that the default transformation is an array\n    defaults = angular.isArray(defaults) ? defaults : [defaults];\n\n    // Append the new transformation to the defaults\n    return defaults.concat(transform);\n\n};\n\n/**\n * @name ContainerResource\n *\n * @author Arek Zajc <a.zajac@clearcode.cc>\n */\nclass ContainerResource {\n    /**\n     * @param {$http} $http\n     * @param {$q} $q\n     */\n    constructor ($http, $q, WebsiteResource) {\n\n        this.http = $http;\n        this.q = $q;\n        this.WebsiteResource = WebsiteResource;\n\n    }\n\n    /**\n     * @returns {Container}\n     */\n    getEntityObject () {\n\n        let Container = containerFactory(this);\n\n        return new Container();\n\n    }\n\n    /**\n     * @description Send request to get specific entity\n     *\n     * @param {number} id\n     * @returns {deferred.promise}\n     */\n    get (id) {\n\n        let deferred = this.q.defer();\n\n        this.http({\n            method: 'GET',\n            url: `/api/containers/${id}`,\n            transformResponse: appendTransform(this.http.defaults.transformResponse, (resp) => {\n\n                return transformResponse.call(this, resp.data);\n\n            })\n        })\n            .success((data) => {\n\n                deferred.resolve(data);\n\n            })\n            .error(() => {\n\n                deferred.reject();\n\n            });\n\n        return deferred.promise;\n\n    }\n\n    /**\n     * @description Send request to get list of entity\n     *\n     * @param {Object} params\n     *\n     * @returns {deferred.promise}\n     */\n    query (params) {\n\n        let deferred = this.q.defer();\n\n        this.http({\n            method: 'GET',\n            url: `/api/containers`,\n            params: params,\n            transformResponse: appendTransform(this.http.defaults.transformResponse, (resp) => {\n\n                for (let element in resp.data) {\n\n                    if (resp.data[element] instanceof Object) {\n\n                        resp.data[element] = transformResponse.call(this, resp.data[element]);\n\n                    }\n\n                }\n\n                return resp;\n\n            })\n        })\n            .success((data) => {\n\n                deferred.resolve(data);\n\n            })\n            .error((err) => {\n\n                deferred.reject(err);\n\n            });\n\n        return deferred.promise;\n\n    }\n\n    /**\n     * @description Send request to delete entity\n     *\n     * @param {number} id\n     *\n     * @returns {deferred.promise}\n     */\n    delete (id) {\n\n        let deferred = this.q.defer();\n\n        this.http({\n            method: 'DELETE',\n            url: `/api/containers/${id}`\n        })\n            .success((resp) => {\n\n                deferred.resolve(resp);\n\n            })\n            .error((err) => {\n\n                deferred.reject(err);\n\n            });\n\n        return deferred.promise;\n\n    }\n\n    /**\n     * @description Send request to create entity\n     *\n     * @param {object} entity\n     */\n    post (entity) {\n\n        let deferred = this.q.defer();\n\n        this.http({\n            method: 'POST',\n            url: `/api/containers`,\n            data: entity,\n            transformResponse: appendTransform(this.http.defaults.transformResponse, (resp) => {\n\n                return transformResponse.call(this, resp.data);\n\n            })\n        })\n            .success((resp) => {\n\n                deferred.resolve(resp);\n\n            })\n            .error((err) => {\n\n                deferred.reject(err);\n\n            });\n\n        return deferred.promise;\n\n    }\n\n    /**\n     * Send request to update entity\n     *\n     * @param {number} id\n     * @param {object} entity\n     *\n     * @returns {deferred.promise}\n     */\n    put (id, entity) {\n\n        let deferred = this.q.defer();\n\n        this.http({\n            method: 'PUT',\n            url: `/api/containers/${id}`,\n            data: entity,\n            transformResponse: appendTransform(this.http.defaults.transformResponse, (resp) => {\n\n                return transformResponse.call(this, resp.data);\n\n            })\n        })\n            .success((resp) => {\n\n                deferred.resolve(resp);\n\n            })\n            .error((err) => {\n\n                deferred.reject(err);\n\n            });\n\n        return deferred.promise;\n\n    }\n\n    publishVersion (id) {\n\n        let deferred = this.q.defer();\n\n        this.http({\n            method: 'POST',\n            url: `/api/containers/${id}/version-publish`\n        })\n            .success((resp) => {\n\n                deferred.resolve(resp);\n\n            })\n            .error((err) => {\n\n                deferred.reject(err);\n\n            });\n\n        return deferred.promise;\n\n    }\n\n    restoreVersion (id) {\n\n        let deferred = this.q.defer();\n\n        this.http({\n            method: 'POST',\n            url: `/api/containers/${id}/version-restore`\n        })\n            .success((resp) => {\n\n                deferred.resolve(resp);\n\n            })\n            .error((err) => {\n\n                deferred.reject(err);\n\n            });\n\n        return deferred.promise;\n\n    }\n\n    getPrivacyOptOut (id) {\n\n        let deferred = this.q.defer();\n\n        this.http({\n            method: 'GET',\n            url: `containers/${id}/privacy`\n        })\n            .success((resp) => {\n\n                deferred.resolve(resp);\n\n            })\n            .error((err) => {\n\n                deferred.reject(err);\n\n            });\n\n        return deferred.promise;\n\n    }\n\n}\n\nexport default ContainerResource;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport permissionFactory from '../entity/Permission.js';\n\nvar transformResponse = function (resp) {\n\n    var permissionList = ['operator', 'publish', 'edit', 'view', 'noaccess'];\n\n    var Permission = permissionFactory(this);\n\n    var permission = new Permission();\n\n    permission.user = resp.user;\n\n    if (resp.permissions instanceof Object) {\n\n        for (var permissionIndex in permissionList) {\n\n            if (resp.permissions.indexOf(permissionList[permissionIndex]) !== -1) {\n\n                permission.permissions = permissionList[permissionIndex];\n                break;\n\n            }\n\n        }\n\n    } else {\n\n        permission.permissions = resp.permissions;\n\n    }\n\n    return permission;\n\n};\n\nvar appendTransform = function (defaults, transform) {\n\n    // We can't guarantee that the default transformation is an array\n    defaults = angular.isArray(defaults) ? defaults : [defaults];\n\n    // Append the new transformation to the defaults\n    return defaults.concat(transform);\n\n};\n\n/**\n * @name PermissionResource\n *\n */\nclass PermissionResource {\n    /**\n     * @param {$http} $http\n     * @param {$q} $q\n     */\n    constructor ($http, $q) {\n\n        this.http = $http;\n        this.q = $q;\n\n    }\n\n    /**\n     * @returns {Permission}\n     */\n    getEntityObject () {\n\n        var Permission = permissionFactory(this);\n\n        return new Permission();\n\n    }\n\n    query (id, params) {\n\n        var deferred = this.q.defer();\n\n        this.http({\n            method: 'GET',\n            url: `/api/containers/${id}/permissions`,\n            params: params,\n            transformResponse: appendTransform(this.http.defaults.transformResponse, (resp) => {\n\n                for (var element in resp.data) {\n\n                    if (resp.data[element] instanceof Object) {\n\n                        resp.data[element] = transformResponse.call(this, resp.data[element]);\n\n                    }\n\n                }\n\n                return resp;\n\n            })\n        })\n            .success((resp) => {\n\n                deferred.resolve(resp);\n\n            })\n            .error((err) => {\n\n                deferred.reject(err);\n\n            });\n\n        return deferred.promise;\n\n    }\n\n    put (id, entity) {\n\n        var deferred = this.q.defer();\n\n        this.http({\n            method: 'PUT',\n            data: entity,\n            url: `api/containers/${id}/permissions`,\n            transformResponse: appendTransform(this.http.defaults.transformResponse, (resp, header, status) => {\n\n                if (status < 400) {\n\n                    return transformResponse.call(this, resp.data);\n\n                }\n\n                return resp;\n\n            })\n        })\n            .success((resp) => {\n\n                deferred.resolve(resp);\n\n            })\n            .error((err) => {\n\n                deferred.reject(err);\n\n            });\n\n        return deferred.promise;\n\n    }\n\n}\n\nexport default PermissionResource;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @type {$stateParams}\n */\nvar stateParams;\n\n/**\n * @type {ContainerResource}\n */\nvar $containerResource;\n\n/**\n * @type {Alert}\n */\nvar alert;\n\n/**\n * @type {$state}\n */\nvar state;\n\n/**\n * @type {$rootScope}\n */\nvar rootScope;\n\n/**\n * @type {$cookiesProvider}\n */\nvar cookies;\n\n/**\n * @readonly\n * @type {String}\n */\nvar PREVIEW_KEY = 'preview';\n\n/**\n * @readonly\n * @type {String}\n */\nvar DEBUG_KEY = 'debug';\n\n/**\n * @type {ConditionResource}\n */\nvar conditionResource;\n\n\n/**\n * Convert params for request\n *\n * @name CurrentContainer\n */\nclass CurrentContainer {\n    /**\n     * @param {$stateParams} $stateParams\n     * @param {ContainerResource} containerResource\n     * @param {Alert} $alert\n     * @param {$state} $state\n     * @param {$rootScope} $rootScope\n     * @param {$cookiesProvider} $cookies\n     * @param {ConditionResource} $conditionResource\n     * @param {$translate} $translate\n     */\n    constructor (\n        $stateParams,\n        containerResource,\n        $alert,\n        $state,\n        $rootScope,\n        $cookies,\n        $conditionResource,\n        $translate\n    ) {\n\n        stateParams = $stateParams;\n        $containerResource = containerResource;\n        alert = $alert;\n        state = $state;\n        rootScope = $rootScope;\n        this.$container = undefined;\n        cookies = $cookies;\n\n        this.types = undefined;\n        this.debugMode = false;\n        this.previewedContainer = undefined;\n        this.translate = $translate;\n        conditionResource = $conditionResource;\n\n    }\n\n    /**\n     * @param {number} containerId\n     *\n     * @returns {deferred.promise} promise of get current container\n     */\n    get (containerId) {\n\n        containerId = this.getId(containerId);\n        rootScope.currentContainerLoading = true;\n\n        this.containerPromise = $containerResource.get(containerId).then(\n            (resp) => {\n\n                this.$container = resp;\n                rootScope.currentContainerLoading = false;\n\n                this.verifyDebugMode();\n\n                if (this.types === undefined) {\n\n                    this.types = this.setTypes();\n\n                }\n\n                return this.$container;\n\n            }\n        );\n\n        return this.containerPromise;\n\n    }\n\n    /**\n     * Get id of current container\n     *\n     * @param {number} containerId\n     * @returns {number}\n     */\n    getId (containerId) {\n\n        return containerId !== undefined ? containerId : stateParams.containerId;\n\n    }\n\n\n    /**\n     * Get container inside promise\n     */\n    getContainer () {\n\n        if (this.containerPromise === undefined) {\n\n            return this.get();\n\n        } else {\n\n            return this.containerPromise;\n\n        }\n\n    }\n\n    /**\n     * Publish current container\n     */\n    publish () {\n\n        var self = this,\n            publishPromise = $containerResource.publishVersion(this.getId());\n\n        rootScope.currentContainerLoading = true;\n\n        return publishPromise.then(\n            () => {\n\n                alert.success('success.publish');\n                self.get();\n                rootScope.currentContainerLoading = false;\n\n            },\n            () => {\n\n                alert.error('container.error');\n                rootScope.currentContainerLoading = false;\n\n            }\n        );\n\n    }\n\n    /**\n     * Check restore ability\n     *\n     * @returns {boolean}\n     */\n    canRestore () {\n\n        var container = this.$container;\n\n        if (container) {\n\n            return container.publishedAt && container.hasUnpublishedChanges === true;\n\n        }\n\n        return false;\n\n    }\n    \n    /**\n     * Check if the container has unpublished changes\n     *\n     * @returns {boolean}\n     */\n    isDirty () {\n\n        var container = this.$container;\n\n        return container && container.hasUnpublishedChanges;\n\n    }\n\n    /**\n     * Check publish status\n     *\n     * @returns {boolean}\n     */\n    isPublished () {\n\n        var container = this.$container;\n\n        if (container) {\n\n            return container.publishedAt && container.hasUnpublishedChanges === false;\n\n        }\n\n        return false;\n\n    }\n\n    /**\n     * Set Container unpublished changes to true\n     *\n     * @returns {boolean}\n     */\n    makeChanges () {\n\n        var container = this.$container;\n\n        if (container) {\n\n            container.hasUnpublishedChanges = true;\n            return true;\n\n        }\n\n    }\n\n    /**\n     * Dischard draft changes to latest published version\n     */\n    restore () {\n\n        var self = this;\n\n        var restorePromise = $containerResource.restoreVersion(this.getId());\n\n        rootScope.currentContainerLoading = true;\n\n        restorePromise.then(\n            function () {\n\n                alert.success('success.restore');\n\n                self.get();\n\n                if (state.includes('tags') || state.includes('tagEdit') || state.includes('tagCreate')) {\n\n                    state.go('tags', {containerId: self.getId()}, {reload: true});\n\n                } else if (\n                    state.includes('triggers') ||\n                    state.includes('triggerCreate') ||\n                    state.includes('triggerEdit')\n                ) {\n\n                    state.go('triggers', {containerId: self.getId()}, {reload: true});\n\n                } else {\n\n                    state.go('containerEdit', {containerId: self.getId()}, {reload: true});\n\n                }\n\n                rootScope.currentContainerLoading = false;\n\n            },\n            function () {\n\n                alert.error('container.error');\n\n            }\n        );\n\n    }\n\n    verifyDebugMode () {\n\n        if (this.isDebugModeEnabled()) {\n\n            let cookiesDebug = cookies.get(DEBUG_KEY);\n\n            if (cookiesDebug === this.$container.id) {\n\n                this.debugMode = true;\n                this.previewedContainer = this.$container;\n                var self = this;\n\n                this\n                    .translate(['Now Previewing'])\n                    .then((translations) => {\n\n                        self.previewedContainerText = translations['Now Previewing'];\n\n                    });\n\n            } else {\n\n                this.disableDebugMode();\n\n            }\n\n        }\n\n    }\n\n    isDebugModeEnabled () {\n\n        let cookiesDebug = cookies.get(DEBUG_KEY);\n        let cookiesPreview = cookies.get(PREVIEW_KEY);\n\n        return cookiesDebug !== undefined && cookiesPreview !== undefined && cookiesDebug === cookiesPreview;\n\n    }\n\n    /**\n     * Set debug mode\n     */\n    enableDebugMode () {\n\n        this.debugMode = true;\n        this.previewedContainer = this.$container;\n        var self = this;\n\n        this\n            .translate(['Now Previewing'])\n            .then((translations) => {\n\n                self.previewedContainerText = translations['Now Previewing'];\n\n            });\n\n        cookies.put(PREVIEW_KEY, this.$container.id);\n        cookies.put(DEBUG_KEY, this.$container.id);\n\n    }\n\n    /**\n     * Leave debug mode\n     */\n    disableDebugMode () {\n\n        this.debugMode = false;\n        this.previewedContainer = undefined;\n\n        cookies.remove(PREVIEW_KEY);\n        cookies.remove(DEBUG_KEY);\n\n    }\n\n    setTypes () {\n\n        return conditionResource.query(this.getId()).then(\n            (resp) => {\n\n                let respIndex = resp.length,\n                    mapped = [];\n\n                while (respIndex--) {\n\n                    mapped[respIndex] = {\n                        name: resp[respIndex].name,\n                        type: resp[respIndex].type\n                    };\n\n                }\n\n                return mapped;\n\n            }\n        );\n\n    }\n\n    hasPermission (permission) {\n\n        return this.getContainer().then((container) => {\n\n            return container.hasPermission(permission);\n\n        });\n\n    }\n}\n\nexport default CurrentContainer;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * Convert params for request\n *\n * @name ParamConverter\n */\nclass ParamConverter {\n    /**\n     * Convert list resource parameters\n     *\n     * @param {Object} params\n     * @returns {{limit: (number), offset: number}}\n     */\n    list (params) {\n\n        return {\n            limit: params.count,\n            offset: (params.page - 1) * params.count\n        };\n\n    }\n\n}\n\nexport default ParamConverter;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport ManageController from './controllers/ManageController.js';\nimport CreateController from './controllers/CreateController.js';\nimport EditController from './controllers/EditController.js';\nimport ExplanationController from './controllers/ExplanationController.js';\nimport PermissionsController from './controllers/PermissionsController.js';\nimport PrivacyController from './controllers/PrivacyController.js';\n\nimport ContainerResource from './resource/ContainerResource.js';\nimport PermissionResource from './resource/PermissionResource.js';\nimport ParamConverter from './service/ParamConverter.js';\nimport CurrentContainer from './service/CurrentContainer.js';\n\nconst MODULE_NAME = 'clearcode.tm.tagContainer';\nconst DEBUG_MODULE_NAME = 'clearcode.tm.debug';\nconst MODULE_DIR = 'app/modules/tagContainer';\n\nContainerResource.$inject = [\n    '$http',\n    '$q',\n    `${DEBUG_MODULE_NAME}.websiteResource`\n];\n\nPermissionResource.$inject = [\n    '$http',\n    '$q'\n];\n\nCurrentContainer.$inject = [\n    '$stateParams',\n    `${MODULE_NAME}.containerResource`,\n    'clearcode.tm.alert.alert',\n    '$state',\n    '$rootScope',\n    '$cookieStore',\n    'clearcode.tm.condition.conditionResource',\n    '$translate'\n];\n\nManageController.$inject = [\n    'ngTableParams',\n    `${MODULE_NAME}.containerResource`,\n    'clearcode.tm.alert.alert',\n    `${MODULE_NAME}.paramConverter`,\n    'clearcode.tm.tagContainer.currentContainer'\n];\n\nCreateController.$inject = [\n    `${MODULE_NAME}.containerResource`,\n    '$state',\n    'clearcode.tm.alert.alert',\n    'clearcode.tm.pageInfo.pageInfo',\n    '$translate'\n];\n\nEditController.$inject = [\n    `${MODULE_NAME}.containerResource`,\n    '$state',\n    '$stateParams',\n    'clearcode.tm.alert.alert',\n    'clearcode.tm.tagContainer.currentContainer',\n    'clearcode.tm.pageInfo.pageInfo',\n    '$scope',\n    '$translate'\n];\n\nExplanationController.$inject = [\n    `${MODULE_NAME}.containerResource`,\n    '$stateParams',\n    'clearcode.tm.pageInfo.pageInfo',\n    'clearcode.tm.tagContainer.currentContainer',\n    '$translate'\n];\n\nPermissionsController.$inject = [\n    'ngTableParams',\n    `${MODULE_NAME}.paramConverter`,\n    `${MODULE_NAME}.currentContainer`,\n    'clearcode.tm.alert.alert',\n    `${MODULE_NAME}.permissionResource`\n];\n\nPrivacyController.$inject = [\n    '$stateParams',\n    `${MODULE_NAME}.containerResource`\n];\n\nangular\n    .module(MODULE_NAME, [\n        'pascalprecht.translate',\n        'ui.router',\n        'ngTable',\n        'ngCookies',\n        'clearcode.tm.condition',\n        'clearcode.tm.alert',\n        'clearcode.tm.pageInfo',\n        'clearcode.tm.user',\n        DEBUG_MODULE_NAME\n    ])\n    .run([\n\n        '$rootScope',\n        `${MODULE_NAME}.currentContainer`,\n        '$stateParams',\n        'clearcode.tm.alert.$alert',\n\n        ($rootScope, currentContainer, $stateParams, $alertProvider) => {\n\n            $rootScope.currentContainerLoading = true;\n            $rootScope.currentContainer = currentContainer;\n\n            var loadContainer = (containerId) => {\n\n                if (containerId !== $stateParams.containerId) {\n\n                    let currentContainerPromise = currentContainer.get(containerId);\n\n                    currentContainerPromise.then((container) => {\n\n                        $rootScope.$broadcast('pageInfo.reload', container);\n\n                    });\n\n                }\n\n            };\n\n            $rootScope.$on('$stateChangeStart', (event, toState, toParams) => {\n\n                loadContainer(toParams.containerId);\n\n            });\n\n            $alertProvider.addMessagePattern(\n                'success.restore',\n                'Well done! Action completed successfully.'\n            );\n\n            $alertProvider.addMessagePattern(\n                'container.create',\n                'Container has been created successfully.'\n            );\n\n            $alertProvider.addMessagePattern(\n                'container.error',\n                'Sorry, something went wrong.'\n            );\n\n            $alertProvider.addMessagePattern(\n                'success.publish',\n                'Container has been published! Changes are now live!'\n            );\n\n            $alertProvider.addMessagePattern(\n                'permissions.error',\n                'Permissions can not be changed.'\n            );\n\n        }\n    ])\n    .config([\n\n        '$stateProvider',\n\n        ($stateProvider) => {\n\n            $stateProvider\n                .state('container', {\n                    url: '/containers',\n                    controller: `${MODULE_NAME}.ManageController as view`,\n                    templateUrl: `${MODULE_DIR}/views/manage.html`,\n                    data: {\n                        roles: [\n                            'ROLE_SUPER_ADMIN'\n                        ],\n                        hasContainerList: false,\n                        permission: [\n                            'view'\n                        ]\n                    }\n                })\n                .state('containerCreate', {\n                    url: '/containers-create',\n                    controller: `${MODULE_NAME}.CreateController as view`,\n                    templateUrl: `${MODULE_DIR}/views/create.html`,\n                    data: {\n                        roles: [\n                            'ROLE_SUPER_ADMIN'\n                        ],\n                        hasContainerList: false,\n                        permission: [\n                            'edit'\n                        ]\n                    }\n                })\n                .state('containerExplanation', {\n                    url: '/containers-explanation/{containerId}',\n                    controller: `${MODULE_NAME}.ExplanationController as view`,\n                    templateUrl: `${MODULE_DIR}/views/explanation.html`,\n                    data: {\n                        roles: [\n                            'ROLE_SUPER_ADMIN'\n                        ],\n                        hasContainerList: true,\n                        permission: [\n                            'owner'\n                        ]\n                    }\n                })\n                .state('containerEdit', {\n                    url: '/containers-edit/{containerId}',\n                    controller: `${MODULE_NAME}.EditController as view`,\n                    templateUrl: `${MODULE_DIR}/views/options.html`,\n                    data: {\n                        roles: [\n                            'ROLE_SUPER_ADMIN'\n                        ],\n                        hasContainerList: true,\n                        permission: [\n                            'edit'\n                        ]\n                    }\n                });\n\n        }\n    ])\n    .controller(`${MODULE_NAME}.ManageController`, ManageController)\n    .controller(`${MODULE_NAME}.CreateController`, CreateController)\n    .controller(`${MODULE_NAME}.EditController`, EditController)\n    .controller(`${MODULE_NAME}.ExplanationController`, ExplanationController)\n    .controller(`${MODULE_NAME}.PermissionsController`, PermissionsController)\n    .controller(`${MODULE_NAME}.PrivacyController`, PrivacyController)\n    .service(`${MODULE_NAME}.containerResource`, ContainerResource)\n    .service(`${MODULE_NAME}.permissionResource`, PermissionResource)\n    .service(`${MODULE_NAME}.paramConverter`, ParamConverter)\n    .service(`${MODULE_NAME}.currentContainer`, CurrentContainer);\n\nmodule.exports = {MODULE_NAME};\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @name BaseController\n */\nclass BaseController {\n    /**\n     * @param {$scope} $scope\n     * @param $triggerResource\n     * @param $conditionResource\n     * @param {$stateParams} $stateParams\n     * @param {$state} $state\n     * @param {Alert} $alert\n     * @param {CurrentContainer} CurrentContainer\n     * @param {Condition} $condition\n     * @param {PageInfo} $PageInfo\n     * @param {$translate} $translate\n     */\n    constructor (\n        $scope,\n        $triggerResource,\n        $conditionResource,\n        $stateParams,\n        $state,\n        $alert,\n        CurrentContainer,\n        $condition,\n        $PageInfo,\n        $translate\n    ) {\n        const BREADCRUMB_GLOBAL = 'Triggers';\n\n        this.required = undefined;\n        this.variables = undefined;\n        this.actions = undefined;\n\n        this.triggerPromise = undefined;\n\n        this.triggerResource = $triggerResource;\n        this.conditionResource = $conditionResource;\n\n        this.scope = $scope;\n        this.stateParams = $stateParams;\n        this.state = $state;\n        this.alert = $alert;\n        this.currentContainer = CurrentContainer;\n        this.Condition = $condition;\n        this.PageInfo = $PageInfo;\n\n        this.typesArrayPromise = $condition.getArrayOfTypes();\n\n        this.trigger = $triggerResource.getEntityObject();\n        this.condition = $conditionResource.getEntityObject();\n        this.translate = $translate;\n\n        $scope.$on('pageInfo.reload', (event, args) => {\n\n            this\n                .translate([this.getBreadcrumbText(), BREADCRUMB_GLOBAL])\n                .then((translations) => {\n\n                    $PageInfo.clear()\n                        .add(args.name, 'tags', {\n                            containerId: args.id\n                        })\n                        .add(translations[BREADCRUMB_GLOBAL], 'triggers', {\n                            containerId: args.id\n                        })\n                        .add(translations[this.getBreadcrumbText()])\n                        .broadcast();\n\n                });\n\n        });\n\n    }\n\n    /**\n     * Set type of trigger\n     *\n     * @param {Number} type\n     */\n    setType (type) {\n\n        if (this.typesArray[type] !== undefined) {\n\n            this.trigger.type = type;\n            this.trigger.conditions = [];\n\n            this.Condition.getVariables(type).then(resp => {\n\n                this.variables = resp;\n\n            });\n            this.Condition.getActions(type).then(resp => {\n\n                this.actions = resp;\n\n            });\n            this.Condition.getRequired(type).then(\n                resp => {\n\n                    this.required = resp;\n                    let requiredIndex = this.required.length;\n\n                    while (requiredIndex--) {\n\n                        this.trigger.conditions.push({\n                            variable: this.required[requiredIndex].name,\n                            condition: this.actions[0].type,\n                            value: ''\n                        });\n\n                    }\n\n                }\n            );\n\n        } else {\n\n            throw new Error('Invalid type');\n\n        }\n\n    }\n\n    /**\n     * Method to create new trigger condition\n     */\n    addCondition () {\n\n        this.condition = this.conditionResource.getEntityObject();\n\n        this.condition.variable = this.variables[0].name;\n        this.condition.condition = this.actions[0].type;\n\n        this.trigger.addCondition(this.condition);\n\n    }\n\n    /**\n     * Method to validate trigger\n     *\n     * @param {Object} form\n     * @returns {Boolean}\n     */\n    validateTrigger (form) {\n\n        this.scope[form.$name].$setPristine();\n\n        let conditionLength = this.trigger.conditions.length;\n\n        if (this.scope[form.$name].name.$valid) {\n\n            if (conditionLength !== 0) {\n\n                while (conditionLength--) {\n\n                    if (this.scope[form.$name]['conditionValue[' + conditionLength + ']'].$invalid) {\n\n                        return false;\n\n                    }\n\n                }\n\n            }\n\n            return true;\n\n        } else {\n\n            return false;\n\n        }\n\n    }\n\n    /**\n     * Check if variable is required\n     * @param {Object} variable\n     */\n    isTypeRequired (variable) {\n\n        return this.required !== undefined && this.required.map(element => element.name).indexOf(variable) !== -1;\n\n    }\n\n    /**\n     * @param  {object} variable\n     * @return {string}\n     */\n    getVariableName (variable) {\n\n        var variablesIndex = this.variables.map(element => element.name).indexOf(variable);\n\n        if (variablesIndex === -1) {\n\n            variablesIndex = this.required.map(element => element.name).indexOf(variable);\n\n            return variablesIndex !== -1 ? this.required[variablesIndex].name : false;\n\n        } else {\n\n            return this.variables[variablesIndex].name;\n\n        }\n\n    }\n\n    /**\n     * @param  {string} conditionName\n     * @return {string}\n     */\n    getConditionName (conditionName) {\n\n        var conditionsIndex = this.actions.map(element => element.name).indexOf(conditionName);\n\n        return conditionsIndex !== -1 ? this.actions[conditionsIndex].name : false;\n\n    }\n\n    /**\n     * Function for refreshing breadcrumb and closing add trigger panel\n     * @return {Boolean}\n     */\n    leaveFormInsideTag () {\n\n        this\n            .translate([this.getBreadcrumbText()])\n            .then((translations) => {\n\n                this.PageInfo.clear()\n                    .add(this.currentContainer.$container.name, 'tags', {\n                        containerId: this.currentContainer.$container.id\n                    })\n                    .add(translations[this.getBreadcrumbText()])\n                    .broadcast();\n\n            });\n\n        return false;\n\n    }\n\n    /**\n     * Handle form submit action\n     *\n     * @param {Trigger} trigger\n     */\n    submitForm (trigger) {\n\n        this.triggerPromise = trigger.save(this.stateParams.containerId);\n\n        this.triggerPromise.then(\n            () => {\n\n                this.currentContainer.makeChanges();\n                this.alert.success(this.getAlertType());\n\n                this.state.go('triggers', {\n                    containerId: this.stateParams.containerId\n                });\n\n            },\n            () => {\n\n                this.alert.error('error.invalid');\n\n            }\n        );\n\n    }\n\n    /**\n     * Display error if form is invalid\n     */\n    displayInvalidFormMessage (view) {\n\n        view.validateTriggers = true;\n        this.alert.error('error.invalid');\n\n    }\n\n}\n\nexport default BaseController;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport BaseController from './BaseController.js';\n\nconst BREADCRUMB_GLOBAL = 'Triggers';\n\n/**\n * @name CreateController\n */\nclass CreateController extends BaseController {\n    /**\n     * @param {$scope} $scope\n     * @param $triggerResource\n     * @param $conditionResource\n     * @param {$stateParams} $stateParams\n     * @param {$state} $state\n     * @param {Alert} $alert\n     * @param {CurrentContainer} CurrentContainer\n     * @param {Condition} $condition\n     * @param {PageInfo} PageInfo\n     * @param {$translate} $translate\n     */\n    constructor (\n        $scope,\n        $triggerResource,\n        $conditionResource,\n        $stateParams,\n        $state,\n        $alert,\n        CurrentContainer,\n        $condition,\n        PageInfo,\n        $translate\n    ) {\n\n        super(\n            $scope,\n            $triggerResource,\n            $conditionResource,\n            $stateParams,\n            $state,\n            $alert,\n            CurrentContainer,\n            $condition,\n            PageInfo,\n            $translate\n        );\n\n        this.typesArrayPromise.then(resp => {\n\n            this.typesArray = resp;\n            this.setType(0);\n\n        });\n\n        CurrentContainer.getContainer().then( () => {\n\n            if (!CurrentContainer.$container.hasPermission('edit')) {\n\n                $state.go('triggers', {containerId: $stateParams.containerId});\n\n            }\n\n            this\n                .translate([this.getBreadcrumbText(), BREADCRUMB_GLOBAL])\n                .then((translations) => {\n\n                    PageInfo.clear()\n                        .add(CurrentContainer.$container.name, 'tags', {\n                            containerId: CurrentContainer.$container.id\n                        })\n                        .add(translations[BREADCRUMB_GLOBAL], 'triggers', {\n                            containerId: CurrentContainer.$container.id\n                        })\n                        .add(translations[this.getBreadcrumbText()])\n                        .broadcast();\n\n                });\n\n        });\n\n    }\n\n    /**\n     * Get breadcrumb text\n     *\n     */\n    getBreadcrumbText () {\n\n        return 'Add a new trigger';\n\n    }\n\n    /**\n     * Get alert type\n     *\n     */\n    getAlertType () {\n\n        return 'success.create';\n\n    }\n\n    /**\n     * Add trigger into specific tag\n     *\n     * @param {Object} form\n     * @param {Trigger} trigger\n     */\n    addTrigger (form, trigger) {\n\n        this.triggerPromise = trigger.save(this.stateParams.containerId);\n\n        this.triggerPromise.then(\n\n            resp => {\n\n                this.scope[form.$name].$setPristine();\n                this.trigger = this.triggerResource.getEntityObject();\n                this.scope.$emit('trigger.add', resp);\n\n            },\n            () => {\n                // TODO: handle wrong response\n            }\n        );\n\n    }\n\n}\n\nexport default CreateController;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport BaseController from './BaseController.js';\n\nconst BREADCRUMB_GLOBAL = 'Triggers';\n\n/**\n * @name EditController\n */\nclass EditController extends BaseController {\n    /**\n     * @param {$scope} $scope\n     * @param $triggerResource\n     * @param $conditionResource\n     * @param {$stateParams} $stateParams\n     * @param {$state} $state\n     * @param $alert\n     * @param {CurrentContainer} CurrentContainer\n     * @param {$condition} $condition\n     * @param {PageInfo} PageInfo\n     * @param {$translate} $translate\n     */\n    constructor (\n        $scope,\n        $triggerResource,\n        $conditionResource,\n        $stateParams,\n        $state,\n        $alert,\n        CurrentContainer,\n        $condition,\n        PageInfo,\n        $translate\n    ) {\n\n        super(\n            $scope,\n            $triggerResource,\n            $conditionResource,\n            $stateParams,\n            $state,\n            $alert,\n            CurrentContainer,\n            $condition,\n            PageInfo,\n            $translate\n        );\n\n        this.triggerPromise = $triggerResource.get($stateParams.triggerId);\n\n        this.triggerPromise.then(\n            (triggerResp) => {\n\n                this.trigger = triggerResp;\n\n                this.typesArrayPromise.then(typesResp => {\n\n                    this.typesArray = typesResp;\n\n                    this.Condition.getVariables(this.trigger.type).then(resp => {\n\n                        this.variables = resp;\n\n                    });\n                    this.Condition.getActions(this.trigger.type).then(resp => {\n\n                        this.actions = resp;\n\n                    });\n                    this.Condition.getRequired(this.trigger.type).then(resp => {\n\n                        this.required = resp;\n\n                    });\n\n                });\n\n            }\n        );\n\n        this.currentContainer.getContainer().then(() => {\n\n            if (this.currentContainer.$container.hasPermission('noaccess')) {\n\n                this.state.go('container');\n\n            }\n\n            this\n                .translate([this.getBreadcrumbText(), BREADCRUMB_GLOBAL])\n                .then((translations) => {\n\n                    PageInfo.clear()\n                        .add(this.currentContainer.$container.name, 'tags', {\n                            containerId: this.currentContainer.$container.id\n                        })\n                        .add(translations[BREADCRUMB_GLOBAL], 'triggers', {\n                            containerId: this.currentContainer.$container.id\n                        })\n                        .add(translations[this.getBreadcrumbText()])\n                        .broadcast();\n\n                });\n\n        });\n\n    }\n\n    /**\n     * Get breadcrumb text\n     *\n     */\n    getBreadcrumbText () {\n\n        return 'Configure trigger';\n\n    }\n\n    /**\n     * Get alert type\n     *\n     */\n    getAlertType () {\n\n        return 'success.edit';\n\n    }\n\n}\n\nexport default EditController;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport BaseController from './BaseController.js';\n\n/**\n * @name EditController\n */\nclass EditController extends BaseController {\n    /**\n     * @param {$scope} $scope\n     * @param {TriggerResource} $triggerResource\n     * @param {ConditionResource} $conditionResource\n     * @param {$stateParams} $stateParams\n     * @param {}$alert} Alert\n     * @param {CurrentContainer} CurrentContainer\n     * @param {$condition} $condition\n     * @param {PageInfo} PageInfo\n     * @param {$translate} $translate\n     */\n    constructor (\n        $scope,\n        $triggerResource,\n        $conditionResource,\n        $stateParams,\n        $alert,\n        CurrentContainer,\n        $condition,\n        PageInfo,\n        $translate\n    ) {\n\n        super(\n            $scope,\n            $triggerResource,\n            $conditionResource,\n            $stateParams,\n            null,\n            $alert,\n            CurrentContainer,\n            $condition,\n            PageInfo,\n            $translate\n        );\n\n    }\n\n    /**\n     * @desc Init trigger\n     * @param {number} triggerId\n     */\n    initTrigger (triggerId) {\n\n        this.triggerPromise = this.triggerResource.get(triggerId);\n\n        this.triggerPromise.then(triggerResp => {\n\n            this.trigger = triggerResp;\n\n            this.typesArrayPromise.then(typesResp => {\n\n                this.typesArray = typesResp;\n\n                this.Condition.getVariables(this.trigger.type).then(resp => {\n\n                    this.variables = resp;\n\n                });\n\n                this.Condition.getActions(this.trigger.type).then(resp => {\n\n                    this.actions = resp;\n\n                });\n\n                this.Condition.getRequired(this.trigger.type).then(resp => {\n\n                    this.required = resp;\n\n                });\n\n            });\n\n        });\n\n    }\n\n    /**\n     * Get breadcrumb text\n     *\n     */\n    getBreadcrumbText () {\n\n        return 'Configure trigger';\n\n    }\n\n    /**\n     * Get alert type\n     *\n     */\n    getAlertType () {\n\n        return 'success.edit';\n\n    }\n\n    /**\n     * Handle form submit action\n     * @param {Trigger} trigger\n     */\n    submitForm (trigger) {\n\n        this.triggerPromise = trigger.save(this.stateParams.containerId);\n\n        this.triggerPromise.then(\n            resp => {\n\n                this.currentContainer.makeChanges();\n                this.alert.success('trigger.edit');\n                this.scope.$emit('trigger.edit', resp);\n\n            },\n            () => {\n\n                this.alert.error('error.invalid');\n\n            }\n        );\n\n    }\n}\n\nexport default EditController;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @type {Alert}\n */\nvar alert;\n\n/**\n * @type {TriggerResource}\n */\nvar triggerResource;\n\n/**\n * @type {$stateParams}\n */\nvar stateParams;\n\n/**\n * @type {CurrentContainer}\n */\nvar currentContainer;\n\n/**\n * @type {$scope}\n */\nvar scope;\n\n/**\n * @type {Condition}\n */\nvar condition;\n\n/**\n * @type {String}\n */\nconst BREADCRUMB_TEXT = 'Triggers';\n\n/**\n * @name ManageController\n */\nclass ManageController {\n    /**\n     * @param {ngTableParams} TableParams\n     * @param {$stateParams} $stateParams\n     * @param {TriggerResource} $triggerResource\n     * @param {Alert} $alert\n     * @param {ParamConverter} $paramConverter\n     * @param {CurrentContainer} CurrentContainer\n     * @param {PageInfo} PageInfo\n     * @param {$scope} $scope\n     * @param {$condition} $condition\n     * @param {state} state\n     * @param {$translate} $translate\n     */\n    constructor (\n        TableParams,\n        $stateParams,\n        $triggerResource,\n        $alert,\n        $paramConverter,\n        CurrentContainer,\n        PageInfo,\n        $scope,\n        $condition,\n        state,\n        $translate\n    ) {\n\n        alert = $alert;\n        stateParams = $stateParams;\n        triggerResource = $triggerResource;\n        currentContainer = CurrentContainer;\n        scope = $scope;\n        condition = $condition;\n\n        this.typesArrayPromise = condition.getArrayOfTypes();\n\n        this.typesArrayPromise.then(resp => {\n\n            this.typesArray = resp;\n\n        });\n\n        this.translate = $translate;\n\n        this.containerId = stateParams.containerId;\n        this.tableParams = new TableParams({\n                page: 1,\n                count: 10,\n                sorting: {\n                    name: 'asc'\n                }\n            }, {\n            total: 0,\n            getData: ($defer, params) => {\n\n                triggerResource.query(stateParams.containerId, $paramConverter.list(params.url())).then(function (resp) {\n\n                    params.total(resp.total);\n\n                    $defer.resolve(resp.data);\n\n                });\n\n            }\n        });\n\n        currentContainer.getContainer().then(() => {\n\n            if (!currentContainer.$container.hasPermission('view')) {\n\n                state.go('container');\n\n            }\n\n            this\n                .translate([BREADCRUMB_TEXT])\n                .then((translations) => {\n\n                    PageInfo.clear()\n                        .add(currentContainer.$container.name, 'tags', {\n                            containerId: currentContainer.$container.id\n                        })\n                        .add(translations[BREADCRUMB_TEXT])\n                        .broadcast();\n\n                });\n\n        });\n\n        scope.$on('pageInfo.reload', (event, args) => {\n\n            this\n                .translate([BREADCRUMB_TEXT])\n                .then((translations) => {\n\n                    PageInfo.clear()\n                        .add(args.name, 'tags', {\n                            containerId: args.id\n                        })\n                        .add(translations[BREADCRUMB_TEXT])\n                        .broadcast();\n\n                });\n\n        });\n\n    }\n\n    removeTrigger (trigger) {\n\n        var self = this;\n\n        trigger.remove().then(\n            () => {\n\n                alert.success('success.remove');\n                currentContainer.makeChanges();\n\n                if (self.tableParams.data.length === 1 && self.tableParams.page() > 1) {\n\n                    self.tableParams.page(self.tableParams.page() - 1);\n\n                } else {\n\n                    self.tableParams.reload();\n\n                }\n\n            },\n            () => {\n\n                alert.error('error.remove');\n\n                self.tableParams.reload();\n\n            }\n        );\n\n    }\n\n}\n\nexport default ManageController;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar triggerFactory = function (resource) {\n\n    /**\n     * @name Trigger\n     * @description Trigger entity\n     */\n    class Trigger {\n\n        constructor () {\n\n            /**\n             * @type {number}\n             */\n            this.id = undefined;\n\n            /**\n             * @type {string}\n             */\n            this.name = undefined;\n\n            /**\n             * @type {Number}\n             */\n            this.type = 0;\n\n            /**\n            * @type {Array}\n            */\n            this.conditions = [];\n\n            /**\n             * @type {number}\n             */\n            this.tagsCount = undefined;\n\n            /**\n             * @type {string}\n             */\n            this.updatedAt = undefined;\n\n        }\n\n        /**\n         * @param {Condition} condition\n         */\n        addCondition (condition) {\n\n            this.conditions.push(condition);\n\n        }\n\n        /**\n         * @param {number} index\n         */\n        removeCondition (index) {\n\n            this.conditions.splice(index, 1);\n\n        }\n\n        /**\n         * @param {number} containerId\n         *\n         * @returns {deferred.promise}\n         */\n        save (containerId) {\n            var result = {}, promise;\n\n            var excludedProperty = ['id', 'updatedAt', 'createdAt', 'tagsCount'];\n\n            for (var property in this) {\n\n                if (\n                    !angular.isFunction(this[property]) &&\n                    this.hasOwnProperty(property) &&\n                    excludedProperty.indexOf(property) === -1\n                ) {\n\n                    if (property === 'conditions') {\n\n                        var collection = [];\n\n                        for (var index in this[property]) {\n\n                            if (this[property][index] instanceof Object) {\n\n                                collection.push(\n                                    {\n                                        variable: this[property][index].variable,\n                                        condition: this[property][index].condition,\n                                        value: this[property][index].value\n                                    }\n                                );\n\n                            }\n\n                        }\n\n                        result[property] = collection;\n\n                    } else {\n\n                        result[property] = this[property];\n\n                    }\n\n                }\n\n            }\n\n            if (this.id === undefined) {\n\n                promise = resource.post(containerId, result);\n\n            } else {\n                \n                promise = resource.put(this.id, result);\n\n            }\n\n            return promise;\n\n        }\n\n        /**\n         * @returns {deferred.promise|Boolean}\n         */\n        remove () {\n\n            if (this.id === undefined) {\n\n                return false;\n\n            }\n\n            return resource.delete(this.id);\n\n        }\n\n    }\n\n    return Trigger;\n\n};\n\n\nexport default triggerFactory;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport triggerFactory from '../entity/Trigger.js';\n\nvar transformResponse = function (resp) {\n\n    var Trigger = triggerFactory(this);\n\n    var trigger = new Trigger();\n\n    if (resp !== undefined) {\n\n        trigger.id = resp.id;\n        trigger.name = resp.name;\n        trigger.type = resp.type;\n        trigger.conditions = resp.conditions;\n        trigger.tagsCount = resp.tags_count;\n        trigger.updatedAt = resp.updated_at;\n\n    }\n\n    return trigger;\n\n};\n\n\nvar appendTransform = function (defaults, transform) {\n\n    // We can't guarantee that the default transformation is an array\n    defaults = angular.isArray(defaults) ? defaults : [defaults];\n\n    // Append the new transformation to the defaults\n    return defaults.concat(transform);\n\n};\n\n/**\n * @name TriggerResource\n */\nclass TriggerResource {\n    /**\n     * @param {$q} $q\n     * @param {$http} $http\n     */\n    constructor ($http, $q) {\n\n        this.http = $http;\n        this.q = $q;\n\n    }\n\n    /**\n     * @returns {Trigger}\n     */\n    getEntityObject () {\n\n        var Trigger = triggerFactory(this);\n\n        return new Trigger();\n\n    }\n\n    /**\n     * @description Send request to get specific entity\n     *\n     * @param {number} id\n     *\n     * @returns {deferred.promise}\n     */\n    get (id) {\n\n        var deferred = this.q.defer();\n\n        this.http({\n            method: 'GET',\n            url: `/api/triggers/${id}`,\n            transformResponse: appendTransform(this.http.defaults.transformResponse, (resp, header, status) => {\n\n                if (status < 400) {\n\n                    return transformResponse.call(this, resp.data);\n\n                } else {\n\n                    return resp;\n\n                }\n\n            })\n        })\n        .success((resp) => {\n\n            deferred.resolve(resp);\n\n        })\n        .error((err) => {\n\n            deferred.reject(err);\n\n        });\n\n        return deferred.promise;\n\n    }\n\n    /**\n     * @description Send request to get list of entity\n     *\n     * @param {number} containerId\n     * @param {Array} params\n     *\n     * @returns {deferred.promise}\n     */\n    query (containerId, params) {\n\n        var deferred = this.q.defer();\n\n        this.http({\n            method: 'GET',\n            url: `/api/containers/${containerId}/triggers`,\n            params: params,\n            transformResponse: appendTransform(this.http.defaults.transformResponse, (resp) => {\n\n\n                for (var element in resp.data) {\n\n                    if (resp.data[element] instanceof Object) {\n\n                        resp.data[element] = transformResponse.call(this, resp.data[element]);\n\n                    }\n\n                }\n\n                return resp;\n\n            })\n        })\n            .success((resp) => {\n\n                deferred.resolve(resp);\n\n            })\n            .error((err) => {\n\n                deferred.reject(err);\n\n            });\n\n        return deferred.promise;\n\n    }\n\n    /**\n     * @description Send request to delete entity\n     *\n     * @param {number} id\n     *\n     * @returns {deferred.promise}\n     */\n    delete (id) {\n\n        var deferred = this.q.defer();\n\n        this.http({\n            method: 'DELETE',\n            url: `/api/triggers/${id}`\n        })\n            .success((data) => {\n\n                deferred.resolve(data);\n\n            })\n            .error((err) => {\n\n                deferred.reject(err);\n\n            });\n\n        return deferred.promise;\n\n    }\n\n    /**\n     * @description Send request to create entity\n     *\n     * @param {number} containerId\n     * @param {object} entity\n     *\n     * @returns {deferred.promise}\n     */\n    post (containerId, entity) {\n\n        var deferred = this.q.defer();\n\n        this.http({\n            method: 'POST',\n            url: `/api/containers/${containerId}/triggers`,\n            data: entity,\n            transformResponse: appendTransform(this.http.defaults.transformResponse, (resp, header, status) => {\n\n                if (status < 400) {\n\n                    return transformResponse.call(this, resp.data);\n\n                } else {\n\n                    return resp;\n\n                }\n\n            })\n        })\n            .success((data) => {\n\n                deferred.resolve(data);\n\n            })\n            .error((err) => {\n\n                deferred.reject(err);\n\n            });\n\n        return deferred.promise;\n\n    }\n\n    /**\n     * Send request to update entity\n     *\n     * @param {number} id\n     * @param {object} entity\n     *\n     * @returns {deferred.promise}\n     */\n    put (id, entity) {\n\n        var deferred = this.q.defer();\n\n        this.http({\n            method: 'PUT',\n            url: `/api/triggers/${id}`,\n            data: entity,\n            transformResponse: appendTransform(this.http.defaults.transformResponse, (resp, header, status) => {\n\n                if (status < 400) {\n\n                    return transformResponse.call(this, resp.data);\n\n                } else {\n\n                    return resp;\n\n                }\n\n            })\n        })\n            .success((resp) => {\n\n                deferred.resolve(resp);\n\n            })\n            .error((err) => {\n\n                deferred.reject(err);\n\n            });\n\n        return deferred.promise;\n\n    }\n}\n\nexport default TriggerResource;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport CreateController from './controllers/CreateController.js';\nimport EditController from './controllers/EditController.js';\nimport ManageController from './controllers/ManageController.js';\nimport EditInsideTagController from './controllers/EditInsideTagController.js';\n\nimport TriggerResource from './resource/TriggerResource.js';\n\nconst MODULE_NAME = 'clearcode.tm.trigger';\nconst CONDITION_MODULE_NAME = 'clearcode.tm.condition';\nconst MODULE_DIR = '/app/modules/trigger';\n\nManageController.$inject = [\n    'ngTableParams',\n    '$stateParams',\n    `${MODULE_NAME}.triggerResource`,\n    'clearcode.tm.alert.alert',\n    'clearcode.tm.tagContainer.paramConverter',\n    'clearcode.tm.tagContainer.currentContainer',\n    'clearcode.tm.pageInfo.pageInfo',\n    '$scope',\n    'clearcode.tm.condition.condition',\n    '$state',\n    '$translate'\n];\n\nCreateController.$inject = [\n    '$scope',\n    `${MODULE_NAME}.triggerResource`,\n    `${CONDITION_MODULE_NAME}.conditionResource`,\n    '$stateParams',\n    '$state',\n    'clearcode.tm.alert.alert',\n    'clearcode.tm.tagContainer.currentContainer',\n    'clearcode.tm.condition.condition',\n    'clearcode.tm.pageInfo.pageInfo',\n    '$translate'\n];\n\nEditController.$inject = [\n    '$scope',\n    `${MODULE_NAME}.triggerResource`,\n    `${CONDITION_MODULE_NAME}.conditionResource`,\n    '$stateParams',\n    '$state',\n    'clearcode.tm.alert.alert',\n    'clearcode.tm.tagContainer.currentContainer',\n    'clearcode.tm.condition.condition',\n    'clearcode.tm.pageInfo.pageInfo',\n    '$translate'\n];\n\nEditInsideTagController.$inject = [\n    '$scope',\n    `${MODULE_NAME}.triggerResource`,\n    `${CONDITION_MODULE_NAME}.conditionResource`,\n    '$stateParams',\n    'clearcode.tm.alert.alert',\n    'clearcode.tm.tagContainer.currentContainer',\n    'clearcode.tm.condition.condition',\n    'clearcode.tm.pageInfo.pageInfo',\n    '$translate'\n];\n\nTriggerResource.$inject = [\n    '$http',\n    '$q'\n];\n\nangular\n    .module(MODULE_NAME, [\n        'pascalprecht.translate',\n        'ui.router',\n        'ngTable',\n        'clearcode.tm.alert',\n        'clearcode.tm.pageInfo',\n        'clearcode.tm.tagContainer',\n        'clearcode.tm.condition'\n    ])\n    .config([\n\n        '$stateProvider',\n\n        ($stateProvider) => {\n\n            $stateProvider\n                .state('triggers', {\n                    url: '/containers/{containerId}/triggers',\n                    controller: `${MODULE_NAME}.ManageController as view`,\n                    templateUrl: `${MODULE_DIR}/views/manage.html`,\n                    data: {\n                        roles: [\n                            'ROLE_SUPER_ADMIN'\n                        ],\n                        hasContainerList: true\n                    }\n                })\n                .state('triggerCreate', {\n                    url: '/containers/{containerId}/trigger-create',\n                    controller: `${MODULE_NAME}.CreateController as triggerForm`,\n                    templateUrl: `${MODULE_DIR}/views/create.html`,\n                    data: {\n                        roles: [\n                            'ROLE_SUPER_ADMIN'\n                        ],\n                        hasContainerList: true\n                    }\n                })\n                .state('triggerEdit', {\n                    url: '/containers/{containerId}/trigger/edit/{triggerId}',\n                    controller: `${MODULE_NAME}.EditController as triggerForm`,\n                    templateUrl: `${MODULE_DIR}/views/edit.html`,\n                    data: {\n                        roles: [\n                            'ROLE_SUPER_ADMIN'\n                        ],\n                        hasContainerList: true\n                    }\n                });\n\n        }\n    ])\n    .run([\n\n        'clearcode.tm.alert.$alert',\n\n        ($alertProvider) => {\n\n            $alertProvider.addMessagePattern(\n                'trigger.create',\n                'Trigger has been created successfully.'\n            );\n            $alertProvider.addMessagePattern(\n                'trigger.edit',\n                'Trigger has been updated successfully.'\n            );\n\n        }\n\n    ])\n    .controller(`${MODULE_NAME}.CreateController`, CreateController)\n    .controller(`${MODULE_NAME}.EditController`, EditController)\n    .controller(`${MODULE_NAME}.ManageController`, ManageController)\n    .controller(`${MODULE_NAME}.EditInsideTagController`, EditInsideTagController)\n    .service(`${MODULE_NAME}.triggerResource`, TriggerResource);\n\n\nmodule.exports = {MODULE_NAME};\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @type {UpdateResource}\n */\nlet updateResource;\n\n/**\n * @type {$window}\n */\nlet window;\n\n/**\n * @name update#VersionController\n */\nclass VersionController {\n\n    /**\n     * @param {UpdateResource} $updateResource\n     * @param {$window} $window\n     * @param {Version} version\n     */\n    constructor ($updateResource, $window, version) {\n\n        updateResource = $updateResource;\n        window = $window;\n        this.version = version;\n\n    }\n\n    updateAvailable () {\n\n        return this.version.latest !== undefined && !this.version.isUpToDate();\n\n    }\n\n    startUpdate () {\n\n        updateResource.setSession().then((resp) => {\n\n            window.location.href = resp.url;\n\n        });\n\n    }\n\n}\n\nexport default VersionController;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @name SetVersionDirective\n */\n\nvar setVersionDirective = (version, updateResource) => {\n\n    return {\n        restrict: 'A',\n        scope: {\n            stgVersion: '@'\n        },\n        link: (scope) => {\n\n            version.current = scope.stgVersion;\n\n            if (version.latest === undefined) {\n\n                updateResource.getLatest(version.current).then((resp) => {\n\n                    version.latest = resp.version;\n\n                });\n\n            }\n\n        }\n    };\n\n};\n\nexport default setVersionDirective;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @name UpdateResource\n */\nclass UpdateResource {\n    /**\n     * @param {$q} $q\n     * @param {$http} $http\n     * @param {$location} $location\n     */\n    constructor ($http, $q, $location) {\n\n        this.http = $http;\n        this.q = $q;\n        this.location = $location;\n\n    }\n\n    /**\n     * @description Send request to set session for current user\n     *\n     * @returns {deferred.promise}\n     */\n    setSession () {\n\n        var deferred = this.q.defer();\n\n        this.http({\n            method: 'GET',\n            url: 'admin-tools/update'\n        })\n            .success(function (resp) {\n\n                deferred.resolve(resp);\n\n            })\n            .error(function (err) {\n\n                deferred.reject(err);\n\n            });\n\n        return deferred.promise;\n\n    }\n\n    /**\n     * @description Send request to get latest version of application\n     *\n     * @returns {deferred.promise}\n     */\n    getLatest (version) {\n\n        var deferred = this.q.defer();\n        let domain = this.location.host();\n\n        this.http({\n            method: 'GET',\n            url: '//download.7tag.org/version.json',\n            params: {\n                version: version,\n                domain: domain\n            },\n            headers: {\n                'Access-Control-Request-Headers': undefined\n            }\n        })\n            .success(function (resp) {\n\n                deferred.resolve(resp);\n\n            })\n            .error(function (err) {\n\n                deferred.reject(err);\n\n            });\n\n        return deferred.promise;\n\n    }\n\n}\n\nexport default UpdateResource;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @name update#Version\n */\n\nclass Version {\n\n    constructor () {\n\n        this.current = undefined;\n        this.latest = undefined;\n\n    }\n\n    isUpToDate () {\n\n        return this.current !== undefined && this.current === this.latest;\n\n    }\n}\n\nexport default Version;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport VersionController from './controllers/VersionController.js';\nimport UpdateResource from './resources/UpdateResource.js';\nimport version from './services/Version.js';\nimport setVersionDirective from './directives/setVersionDirective.js';\n\nconst MODULE_NAME = 'clearcode.tm.update';\n\nVersionController.$inject = [\n    `${MODULE_NAME}.updateResource`,\n    '$window',\n    `${MODULE_NAME}.version`\n];\n\nUpdateResource.$inject = [\n    '$http',\n    '$q',\n    '$location'\n];\n\nsetVersionDirective.$inject = [\n    `${MODULE_NAME}.version`,\n    'clearcode.tm.update.updateResource'\n];\n\nversion.$inject = [\n    '$rootScope'\n];\n\nangular\n    .module(MODULE_NAME, [])\n    .controller(`${MODULE_NAME}.VersionController`, VersionController)\n    .service(`${MODULE_NAME}.updateResource`, UpdateResource)\n    .service(`${MODULE_NAME}.version`, version)\n    .directive('stgSetVersion', setVersionDirective);\n\nmodule.exports = {MODULE_NAME};\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @name BaseController\n */\nclass BaseController {\n\n    /**\n     * @param {UserResource} userResource\n     * @param {Alert} alert\n     * @param {PageInfo} PageInfo\n     * @param {$state} state\n     * @param {$translate} $translate\n     * @param {RefreshAlert} refreshAlert\n     */\n    constructor (userResource, alert, PageInfo, state, $translate, refreshAlert) {\n\n        /**\n         * @type {String}\n         */\n        const BREADCRUMB_SECTION = 'My account';\n\n        this.ACTIVATION_SET_PASSWORD = 'ACTIVATION_SET_PASSWORD';\n\n        this.ROLE_API = 'ROLE_API';\n        this.ROLE_USER = 'ROLE_USER';\n        this.ROLE_SUPER_ADMIN = 'ROLE_SUPER_ADMIN';\n        this.ROLE_CONTAINERS_CREATE = 'ROLE_CONTAINERS_CREATE';\n\n        this.alert = alert;\n        this.state = state;\n        this.userResource = userResource;\n\n        this.userPromise = undefined;\n\n        this.user = userResource.getEntity();\n\n        $translate([BREADCRUMB_SECTION])\n            .then((translations) => {\n\n                PageInfo.clear()\n                    .add(translations[BREADCRUMB_SECTION])\n                    .broadcast();\n\n            });\n\n        refreshAlert.success('LANGUAGE_CHANGE_MESSAGE', 'user.change_language');\n\n    }\n\n    displayRoleSectionForUser () {\n        return !this.state.includes('editProfile');\n    }\n\n    displayPasswordSection () {\n        if (!this.activation) {\n            return false;\n        }\n\n        return this.activation === this.ACTIVATION_SET_PASSWORD;\n    }\n\n    setUser (id) {\n\n        if (this.state.includes('editProfile')) {\n\n            this.userPromise = this.userResource.getMe();\n\n        } else {\n\n            this.role = undefined;\n            this.createContainerRole = undefined;\n            this.userPromise = this.userResource.get(id);\n\n        }\n\n        this.userPromise.then((resp) => {\n\n            this.user = resp;\n            this.role = this.getUserRole();\n\n            this.createContainerRole = this.user.roles.indexOf(this.ROLE_CONTAINERS_CREATE) !== -1;\n\n        });\n\n    }\n\n    getUserRole () {\n        if (this.user.hasRole(this.ROLE_SUPER_ADMIN)) {\n            return this.ROLE_SUPER_ADMIN;\n        }\n\n        if (this.user.hasRole(this.ROLE_API)) {\n            return this.ROLE_API;\n        }\n\n        return this.ROLE_USER;\n    }\n\n    setRole (role) {\n\n        let roleIndex = this.user.roles.indexOf(role);\n\n        if (roleIndex !== -1) {\n\n            this.user.roles.splice(roleIndex, 1);\n            return false;\n\n        } else {\n\n            this.user.roles.push(role);\n            return true;\n\n        }\n\n    }\n\n    submitForm (user) {\n\n        if (this.state.includes('editProfile')) {\n\n            this.userPromise = user.saveMe();\n\n        } else {\n\n            user.roles = [this.role];\n\n            if (this.role === this.ROLE_USER && this.createContainerRole) {\n\n                user.roles.push(this.ROLE_CONTAINERS_CREATE);\n\n            }\n\n            this.userPromise = user.save();\n\n        }\n\n        this.userPromise.then(\n            () => {\n\n                this.alert.success('user.save');\n\n                if (!this.state.includes('editProfile')) {\n\n                    this.state.go('users');\n\n                }\n\n            },\n            () => {\n\n                this.alert.error('user.invalid');\n\n            }\n        );\n\n    }\n\n    /**\n     * Display error if form is invalid\n     */\n    displayInvalidFormMessage () {\n\n        this.alert.error('error.invalid');\n\n    }\n\n}\n\nexport default BaseController;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nconst BREADCRUMB_SECTION = 'My account';\n\nlet userResource;\nlet alert;\nlet state;\nlet scope;\nlet translate;\n\nclass ChangePasswordController {\n\n    constructor ($userResource, $alert, $state, PageInfo, $scope, $translate) {\n\n        userResource = $userResource;\n        alert = $alert;\n        state = $state;\n        scope = $scope;\n        translate = $translate;\n        this.validationForce = false;\n        this.changePasswordPromise = undefined;\n        this.translate = $translate;\n        this.currentPassword = '';\n        this.plainPassword = {\n            first: '',\n            second: ''\n        };\n\n        translate([BREADCRUMB_SECTION])\n            .then((translations) => {\n\n                PageInfo.clear()\n                    .add(translations[BREADCRUMB_SECTION])\n                    .broadcast();\n\n            });\n\n    }\n\n    /**\n     * @param {String} currentPassword\n     * @param {Object} newPassword\n     */\n    submitForm (currentPassword, newPassword) {\n\n        let data = {\n            /* eslint-disable */\n            current_password: currentPassword,\n            /* eslint-enable */\n            'plainPassword': newPassword\n        };\n\n        this.changePasswordPromise = userResource.changePassword(data);\n\n        this.changePasswordPromise.then(\n            () => {\n\n                alert.success('password.change');\n                state.go('container');\n\n            },\n            () => {\n\n                alert.error('error.invalid');\n\n            }\n        );\n\n    }\n\n    /**\n     * Display error if form is invalid\n     */\n    displayInvalidFormMessage (newPassword) {\n\n        this.validationForce = true;\n\n        if (newPassword.first !== newPassword.second) {\n\n            scope.changePasswordForm.first.$invalid = true;\n            scope.changePasswordForm.second.$invalid = true;\n\n            translate(['Passwords have to be identical'])\n                .then((translations) => {\n\n                    scope.changePasswordForm.first.$error.first = [translations['Passwords have to be identical']];\n\n                });\n\n            scope.changePasswordForm.second.$error.second = [];\n\n            alert.error('error.invalid');\n\n        } else if (newPassword.first === undefined || newPassword.second === undefined) {\n\n            alert.error('password.both');\n\n        } else {\n\n            alert.error('error.invalid');\n\n        }\n\n    }\n\n}\n\nexport default ChangePasswordController;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport BaseController from './BaseController.js';\n\n/**\n * @type {String}\n */\nconst BREADCRUMB_TEXT = 'Add a user';\n\n/**\n * @type {String}\n */\nconst BREADCRUMB_GLOBAL = 'Users';\n/**\n * @type {String}\n */\nconst ACTIVATION_EMAIL = 'ACTIVATION_EMAIL';\n\n/**\n * @type {String}\n */\nconst ACTIVATION_SET_PASSWORD = 'ACTIVATION_SET_PASSWORD';\n\n/**\n * @type {String}\n */\nconst ROLE_USER = 'ROLE_USER';\n\nlet scope;\nlet translate;\n\n/**\n * @name CreateController\n */\nclass CreateController extends BaseController {\n\n    /**\n     * @param {UserResource} userResource\n     * @param {Alert} alert\n     * @param {PageInfo} PageInfo\n     * @param {$state} state\n     * @param {$scope} $scope\n     * @param {$translate} $translate\n     * @param {RefreshAlert} RefreshAlert\n     */\n    constructor (userResource, alert, PageInfo, state, $scope, $translate, RefreshAlert) {\n\n        super(userResource, alert, PageInfo, state, $translate, RefreshAlert);\n\n        scope = $scope;\n        translate = $translate;\n\n        this.activation = ACTIVATION_EMAIL;\n        this.role = ROLE_USER;\n\n        this.password = {\n            first: '',\n            second: ''\n        };\n\n        translate([BREADCRUMB_TEXT, BREADCRUMB_GLOBAL])\n            .then((translations) => {\n\n                PageInfo.clear()\n                    .add(translations[BREADCRUMB_GLOBAL], 'users')\n                    .add(translations[BREADCRUMB_TEXT])\n                    .broadcast();\n\n            });\n\n    }\n\n    /**\n     * Display error if form is invalid\n     */\n    createUserFormValidation () {\n\n        var isValid = false;\n\n        scope.createUserForm.first.$dirty = true;\n        scope.createUserForm.second.$dirty = true;\n\n        if (this.password.first !== this.password.second) {\n\n            scope.createUserForm.first.$invalid = true;\n            scope.createUserForm.second.$invalid = true;\n\n            translate(['Passwords have to be identical'])\n                .then((translations) => {\n\n                    scope.createUserForm.first.$error.first = [translations['Passwords have to be identical']];\n\n                });\n\n            scope.createUserForm.second.$error.second = [];\n\n            isValid = false;\n\n        } else if (this.password.first.length < 8 || this.password.second.length < 8) {\n\n            scope.createUserForm.first.$invalid = true;\n            scope.createUserForm.second.$invalid = true;\n\n            translate(['Password needs to have minimum 8 characters'])\n                .then((translations) => {\n\n                    scope.createUserForm.first.$error.first = [translations['Password needs to have minimum 8 characters']];\n\n                });\n\n            scope.createUserForm.second.$error.second = [];\n\n            isValid = false;\n\n        } else if (this.activation === ACTIVATION_SET_PASSWORD) {\n            isValid = true;\n        }\n\n        if (!scope.createUserForm.$valid) {\n            isValid = false\n        }\n\n        if (scope.createUserForm.$valid && this.activation === ACTIVATION_EMAIL) {\n            isValid = true;\n        }\n\n        if(!isValid) {\n            this.alert.error('user.invalid');\n        }\n\n        return isValid;\n    }\n\n    submitForm (user) {\n\n        user.roles = [this.role];\n\n        if (this.role === this.ROLE_USER && this.createContainerRole) {\n\n            user.roles.push(this.ROLE_CONTAINERS_CREATE);\n\n        }\n\n        if (this.activation === ACTIVATION_SET_PASSWORD) {\n\n            user.plainPassword = this.password;\n\n        }\n\n        this.userPromise = user.save();\n\n        this.userPromise.then(\n            () => {\n\n                this.alert.success('user.save');\n                this.state.go('users');\n\n            },\n            () => {\n\n                this.alert.error('user.invalid');\n\n            }\n        );\n\n    }\n\n}\n\nexport default CreateController;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport BaseController from './BaseController.js';\n\n/**\n * @type {String}\n */\nconst BREADCRUMB_TEXT = 'Edit user';\n\n/**\n * @type {String}\n */\nconst BREADCRUMB_GLOBAL = 'Users';\n\nlet scope;\nlet state;\nlet translate;\n\n/**\n * @name EditController\n */\nclass EditController extends BaseController {\n\n    /**\n     * @param {UserResource} userResource\n     * @param {stateParams} stateParams\n     * @param {Alert} alert\n     * @param {PageInfo} PageInfo\n     * @param {$state} $state\n     * @param {$scope} $scope\n     * @param {$translate} $translate\n     * @param {refreshAlert} refreshAlert\n     * @param {security} security\n     */\n    constructor (userResource, stateParams, alert, PageInfo, $state, $scope, $translate, refreshAlert, security) {\n\n        super(userResource, alert, PageInfo, $state, $translate, refreshAlert);\n\n        scope = $scope;\n        state = $state;\n        translate = $translate;\n        this.security = security;\n\n        if (state.includes('editProfile')) {\n\n            this.setUser();\n\n        } else {\n\n            this.activation = this.ACTIVATION_SET_PASSWORD;\n\n            this.password = {\n                first: '',\n                second: ''\n            };\n\n            this.setUser(stateParams.userId);\n\n\n            translate([BREADCRUMB_TEXT, BREADCRUMB_GLOBAL])\n                .then((translations) => {\n\n                    PageInfo.clear()\n                        .add(translations[BREADCRUMB_GLOBAL], 'users')\n                        .add(translations[BREADCRUMB_TEXT])\n                        .broadcast();\n\n                });\n        }\n\n    }\n\n    /**\n     * Display error if form is invalid\n     */\n    editUserFormValidation () {\n\n        scope.editUserForm.first.$dirty = true;\n        scope.editUserForm.second.$dirty = true;\n\n        if (this.password.first === '' && this.password.second === '') {\n\n            return true;\n\n        }\n\n        if (this.password.first !== this.password.second) {\n\n            scope.editUserForm.first.$invalid = true;\n            scope.editUserForm.second.$invalid = true;\n\n            translate(['Passwords have to be identical'])\n                .then((translations) => {\n\n                    scope.editUserForm.first.$error.first = [translations['Passwords have to be identical']];\n\n                });\n\n            scope.editUserForm.second.$error.second = [];\n\n            return false;\n\n        } else if (this.password.first.length < 8 || this.password.second.length < 8) {\n\n            scope.editUserForm.first.$invalid = true;\n            scope.editUserForm.second.$invalid = true;\n\n            translate(['Password needs to have minimum 8 characters'])\n                .then((translations) => {\n\n                    scope.editUserForm.first.$error.first = [translations['Password needs to have minimum 8 characters']];\n\n                });\n\n            scope.editUserForm.second.$error.second = [];\n\n            return false;\n\n        }\n\n        if (scope.editUserForm.$valid) {\n\n            return true;\n\n        } else {\n\n            return false;\n\n        }\n\n    }\n\n    submitForm (user) {\n\n        user.roles = [this.role];\n\n        if (this.role === this.ROLE_USER && this.createContainerRole) {\n\n            user.roles.push(this.ROLE_CONTAINERS_CREATE);\n\n        }\n\n        if (this.hasOwnProperty('password')) {\n\n            if (this.password.first !== '') {\n\n                user.plainPassword = this.password;\n\n            }\n\n        }\n\n\n        if (state.includes('editProfile')) {\n\n            this.userPromise = user.saveMe();\n\n        } else {\n         \n            this.userPromise = user.save();\n\n        }\n\n        this.userPromise.then(\n            () => {\n                this.security.getUser(true);\n                this.alert.success('user.save');\n                this.state.go('container');\n\n            },\n            () => {\n\n                this.alert.error('user.invalid');\n\n            }\n        );\n\n    }\n\n}\n\nexport default EditController;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @type {Alert}\n */\nvar $alert;\n\n/**\n * @type {UserResource}\n */\nvar $userResource;\n\n/**\n * @type {String}\n */\nconst BREADCRUMB_TEXT = 'Users';\n\n/**\n * @name ManageController\n */\nclass ManageController {\n\n    /**\n     * @param {ngTableParams} TableParams\n     * @param {UserResource} userResource\n     * @param {Alert} alert\n     * @param paramConverter\n     * @param currentContainer\n     * @param {PageInfo} PageInfo\n     * @param {$translate} $translate\n     */\n    constructor (TableParams, userResource, alert, paramConverter, currentContainer, PageInfo, $translate) {\n\n        this.translate = $translate;\n        $alert = alert;\n        $userResource = userResource;\n\n        currentContainer.disableDebugMode();\n\n        this.tableParams = new TableParams({\n            page: 1,\n            count: 10,\n            sorting: {\n                name: 'asc'\n            }\n        }, {\n            total: 0,\n            getData: ($defer, params) => {\n\n                userResource.query(paramConverter.list(params.url())).then((resp) => {\n\n                    params.total(resp.total);\n\n                    $defer.resolve(resp.data);\n\n                });\n\n            }\n        });\n\n        this\n            .translate([BREADCRUMB_TEXT])\n            .then((translations) => {\n\n                PageInfo.clear()\n                    .add(translations[BREADCRUMB_TEXT])\n                    .broadcast();\n\n            });\n\n    }\n\n    removeUser (user) {\n\n        var self = this;\n\n        user.remove().then(\n            () => {\n\n                $alert.success('success.remove');\n\n                if (self.tableParams.data.length === 1) {\n\n                    self.tableParams.page(self.tableParams.page() - 1);\n\n                }\n\n                self.tableParams.reload();\n\n            },\n            () => {\n\n                $alert.error('error.remove');\n\n                self.tableParams.reload();\n\n            }\n        );\n\n    }\n\n    resetPassword (user) {\n\n        var data = {\n            username: user.email\n        };\n\n        this.resetPromise = $userResource.resetPassword(data);\n\n        this.resetPromise.then(\n            () => {\n\n                $alert.success('user.reset');\n                this.tableParams.reload();\n\n            },\n            () => {\n\n            }\n        );\n\n    }\n\n}\n\nexport default ManageController;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @type {Alert}\n */\nvar alert;\n\n/**\n * @type {string}\n */\nconst BREADCRUMB_SECTION = 'My account';\n\n/**\n * @type {Translation}\n */\nvar translation;\n\nclass OthersSettingsController {\n\n    constructor ($alert, $scope, $translate, $translation, $window, PageInfo) {\n\n        alert = $alert;\n        this.scope = $scope;\n        translation = $translation;\n        this.validationForce = false;\n        this.translate = $translate;\n        this.window = $window;\n        this.languages = translation.getLanguages();\n\n        if (!this.languages.length) {\n\n            this.loadTranslationsPromise = translation.loadAvailableTranslations();\n\n            this.loadTranslationsPromise.then(() => {\n\n                this.languages = translation.languages;\n\n            });\n\n        }\n\n        $translate([BREADCRUMB_SECTION])\n            .then((translations) => {\n\n                PageInfo.clear()\n                    .add(translations[BREADCRUMB_SECTION])\n                    .broadcast();\n\n            });\n\n    }\n\n    /**\n     * @param {Object} user\n     */\n    submitForm (user) {\n\n        var localStorageLang = this.window.localStorage['NG_TRANSLATE_LANG_KEY'];\n        var storedLanguage = localStorageLang ? localStorageLang : 'en';\n        this.othersSettingsPromise = user.saveOthersSettings();\n\n        this.othersSettingsPromise.then(\n            (User) => {\n\n                this.translate.use(User.language).then(() => {\n\n                    if (User.language !== storedLanguage) {\n\n                        this.window.localStorage['LANGUAGE_CHANGE_MESSAGE'] = true;\n                        this.window.location.reload();\n\n                    } else {\n\n                        alert.success('user.save');\n\n                    }\n\n                });\n\n            },\n            () => {\n\n                alert.error('error.invalid');\n\n            }\n        );\n\n    }\n\n}\n\nexport default OthersSettingsController;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @type {UserResource}\n */\nvar userResource;\n\n/**\n * @type {AlertForm}\n */\nvar alertForm;\n\n/**\n * @type {String}\n */\nconst BREADCRUMB_TEXT = 'Forgot your password?';\n\n/**\n * @name security#ResetRequestController\n * @description Controller for sending request for new password\n */\nclass ResetRequestController {\n\n    /**\n     * @param {UserResource} $userResource\n     * @param {AlertForm} $alertForm\n     * @param {Alert} $alert\n     * @param {PageInfo} PageInfo\n     * @param {$translate} $translate\n     */\n    constructor ($userResource, $alertForm, $alert, PageInfo, $translate) {\n\n        this.email = '';\n        this.translate = $translate;\n        this.alert = $alert;\n        userResource = $userResource;\n\n        alertForm = $alertForm;\n        alertForm.getStorage().clean();\n\n        this.validationForce = false;\n\n        this.resetPromise = undefined;\n\n        this.success = false;\n\n        this\n            .translate([BREADCRUMB_TEXT])\n            .then((translations) => {\n\n                PageInfo.clear()\n                    .add(translations[BREADCRUMB_TEXT])\n                    .broadcast();\n\n            });\n\n    }\n\n    /**\n     *\n     * @param {String} email\n     */\n    submitForm (email) {\n\n        var data = {\n            username: email\n        };\n\n        this.resetPromise = userResource.resetPassword(data);\n\n        this.resetPromise.then(\n            () => {\n\n                alertForm.getStorage().clean();\n                this.success = true;\n\n                this\n                    .translate(['The email with the activation link has been sent successfully.'])\n                    .then((translations) => {\n\n                        this.formTitle = translations['The email with the activation link has been sent successfully.'];\n\n                    });\n\n            },\n            () => {\n\n                alertForm.getStorage().clean();\n                alertForm.error('request.error');\n                this.alert.error('error.invalid');\n\n            }\n        );\n\n    }\n\n    /**\n     * Display error if form is invalid\n     */\n    displayInvalidFormMessage () {\n\n        this.validationForce = true;\n        this.alert.error('error.invalid');\n        alertForm.getStorage().clean();\n        alertForm.error('invalid.email');\n\n    }\n\n}\n\nexport default ResetRequestController;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @type {UserResource}\n */\nvar userResource;\n\n/**\n * @type {$state}\n */\nvar state;\n\n/**\n * @type {$stateParams}\n */\nvar stateParams;\n\n/**\n * @type {Alert}\n */\nvar alert;\n\n/**\n * @type {String}\n */\nconst BREADCRUMB_TEXT = 'Change your password';\n\n/**\n * @type {$scope}\n */\nvar scope;\n\n/**\n * @name security#ChangePasswordController\n * @description Controller for change password view\n */\nclass ChangePasswordController {\n\n    /**\n     * @param {UserResource} $userResource\n     * @param {$state} $state\n     * @param {$stateParams} $stateParams\n     * @param {Alert} $alert\n     * @param {PageInfo} PageInfo\n     * @param {$scope} $scope\n     * @param {$translate} $translate\n     */\n    constructor ($userResource, $state, $stateParams, $alert, PageInfo, $scope, $translate) {\n\n        this.new = {\n            first: undefined,\n            second: undefined\n        };\n\n        this.validationForce = false;\n        this.changePasswordPromise = undefined;\n        this.translate = $translate;\n\n        userResource = $userResource;\n        state = $state;\n        stateParams = $stateParams;\n        alert = $alert;\n        scope = $scope;\n\n        if (stateParams.token === '') {\n\n            state.go('signIn');\n            alert.error('changePassword.token');\n\n        }\n\n        this\n            .translate([BREADCRUMB_TEXT])\n            .then((translations) => {\n\n                PageInfo.clear()\n                    .add(translations[BREADCRUMB_TEXT])\n                    .broadcast();\n\n            });\n\n    }\n\n    /**\n     * @param {Object} newPassword\n     */\n    submitForm (newPassword) {\n\n        var password = {\n            'plainPassword': newPassword\n        };\n\n        this.changePasswordPromise = userResource.setPassword(password, stateParams.token);\n\n        this.changePasswordPromise.then(\n            () => {\n\n                state.go('signIn');\n                alert.success('changePassword.success');\n\n            },\n            () => {\n\n                alert.error('changePassword.error');\n\n            }\n        );\n\n    }\n\n    /**\n     * Display error if form is invalid\n     * @param {Object} newPassword\n     */\n    displayInvalidFormMessage (newPassword) {\n\n        this.validationForce = true;\n\n        if (newPassword.first !== newPassword.second) {\n\n            scope.resetPasswordForm.first.$invalid = true;\n            scope.resetPasswordForm.second.$invalid = true;\n\n            this\n                .translate(['Passwords have to be identical'])\n                .then((translations) => {\n\n                    scope.resetPasswordForm.first.$error.first = [translations['Passwords have to be identical']];\n\n                });\n\n            scope.resetPasswordForm.second.$error.second = [];\n\n        } else if (newPassword.first === undefined || newPassword.second === undefined) {\n\n            alert.error('password.both');\n\n        }\n\n    }\n\n}\n\nexport default ChangePasswordController;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\nvar userFactory = (resource) => {\n\n    /**\n     * @name User\n     * @description User entity\n     */\n    class User {\n\n        constructor () {\n\n            /**\n             * @type {number}\n             */\n            this.id = undefined;\n\n            /**\n             * @type {string}\n             */\n            this.email = undefined;\n\n            /**\n             * @type {string}\n             */\n            this.firstName = undefined;\n\n            /**\n             * @type {string}\n             */\n            this.lastName = undefined;\n\n            /**\n             * @type {string}\n             */\n            this.displayName = undefined;\n\n            /**\n             * @type {Array}\n             */\n            this.roles = [];\n\n            /**\n             * @type {Boolean}\n             */\n            this.status = false;\n\n            /**\n             * @type {Date}\n             */\n            this.createdAt = undefined;\n\n            /**\n             * @type {string}\n             */\n            this.language = undefined;\n\n        }\n\n        /**\n         * @param role\n         * @returns {boolean}\n         */\n        hasRole (role) {\n\n            return this.roles.indexOf(role) !== -1;\n\n        }\n\n        /**\n         * @returns {deferred.promise}\n         */\n        save () {\n\n            var result = {}, promise;\n\n            var excludedProperty = ['id', 'displayName', 'status', 'createdAt', 'language'];\n\n            var excludedInEdit = ['email'];\n\n            for (var property in this) {\n\n                if (\n                    !angular.isFunction(this[property]) &&\n                    this.hasOwnProperty(property) &&\n                    excludedProperty.indexOf(property) === -1\n                ) {\n\n                    if (this.id === undefined || excludedInEdit.indexOf(property) === -1) {\n\n                        result[property] = this[property];\n\n                    }\n\n                }\n\n            }\n\n            if (this.id === undefined) {\n\n                promise = resource.post(result);\n\n            } else {\n\n                promise = resource.put(this.id, result);\n\n            }\n\n            return promise;\n\n        }\n\n        /**\n         * @returns {deferred.promise}\n         */\n        saveMe () {\n\n            var result = {}, promise;\n\n            var excludedProperty = ['id', 'displayName', 'roles', 'status', 'createdAt', 'email', 'language'];\n\n\n            for (var property in this) {\n\n                if (\n                    !angular.isFunction(this[property]) &&\n                    this.hasOwnProperty(property) &&\n                    excludedProperty.indexOf(property) === -1\n                ) {\n\n                    result[property] = this[property];\n\n                }\n\n            }\n\n            promise = resource.putMe(result);\n\n            return promise;\n\n        }\n\n        /**\n         * @returns {deferred.promise}\n         */\n        saveOthersSettings () {\n\n            var result = {}, promise;\n\n            var excludedProperty = ['id', 'displayName', 'roles', 'status', 'createdAt', 'email', 'firstName', 'lastName'];\n\n            for (var property in this) {\n\n                if (\n                    !angular.isFunction(this[property]) &&\n                    this.hasOwnProperty(property) &&\n                    excludedProperty.indexOf(property) === -1\n                ) {\n\n                    result[property] = this[property];\n\n                }\n\n            }\n\n            promise = resource.othersSettingsMe(result);\n\n            return promise;\n\n        }\n\n        /**\n         * @returns {deferred.promise|Boolean}\n         */\n        remove () {\n\n            if (this.id === undefined) {\n\n                return false;\n\n            }\n\n            return resource.delete(this.id);\n\n        }\n\n    }\n\n    return User;\n\n};\n\nexport default userFactory;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport userFactory from '../entities/User.js';\n\nconst CHANGE_PASSWORD_ROUTE = '/api/users/me/change-password';\nconst RESET_REQUEST_ROUTE = '/api/reset-password/request';\nconst RESET_PASSWORD_ROUTE = '/api/reset-password/token/';\nconst DEFAULT_LANGUAGE = 'en';\n\nvar transformResponse = function (resp) {\n\n    var user = this.getEntity();\n\n    if (resp !== undefined) {\n\n        user.id = resp.id;\n        user.email = resp.email;\n        user.firstName = resp.first_name;\n        user.lastName = resp.last_name;\n        user.displayName = resp.display_name;\n        user.roles = resp.roles;\n        user.status = resp.status;\n        user.createdAt = resp.created_at;\n\n        if (resp.language === null) {\n\n            user.language = DEFAULT_LANGUAGE;\n\n        } else {\n\n            user.language = resp.language;\n\n        }\n\n    }\n\n    return user;\n\n};\n\nvar appendTransform = function (defaults, transform) {\n\n    // We can't guarantee that the default transformation is an array\n    defaults = angular.isArray(defaults) ? defaults : [defaults];\n\n    // Append the new transformation to the defaults\n    return defaults.concat(transform);\n\n};\n\n/**\n * @name UserResource\n *\n * @author Arek Zajc <a.zajac@clearcode.cc>\n */\nclass UserResource {\n    /**\n     * @param {$http} $http\n     * @param {$q} $q\n     */\n    constructor ($http, $q) {\n\n        this.http = $http;\n        this.q = $q;\n\n    }\n\n    /**\n     * @returns {User}\n     */\n    getEntity () {\n\n        var User = userFactory(this);\n\n        return new User();\n\n    }\n\n    /**\n     * @description Send request to get specific entity\n     *\n     * @param {number} id\n     * @returns {deferred.promise}\n     */\n    get (id) {\n\n        var deferred = this.q.defer();\n\n        this.http({\n            method: 'GET',\n            url: `/api/users/${id}`,\n            transformResponse: appendTransform(this.http.defaults.transformResponse, (resp, header, status) => {\n\n                if (status < 400) {\n\n                    return transformResponse.call(this, resp.data);\n\n                } else {\n\n                    return resp;\n\n                }\n\n            })\n        })\n            .success((data) => {\n\n                deferred.resolve(data);\n\n            })\n            .error(() => {\n\n                deferred.reject();\n\n            });\n\n        return deferred.promise;\n\n    }\n\n    /**\n     * @description Send request to get specific entity\n     *\n     * @returns {deferred.promise}\n     */\n    getMe () {\n\n        var deferred = this.q.defer();\n\n        this.http({\n            method: 'GET',\n            url: '/api/users/me',\n            transformResponse: appendTransform(this.http.defaults.transformResponse, (resp, header, status) => {\n\n                if (status < 400) {\n\n                    return transformResponse.call(this, resp.data);\n\n                } else {\n\n                    return resp;\n\n                }\n\n            })\n        })\n            .success((resp) => {\n\n                deferred.resolve(resp);\n\n            })\n            .error((err) => {\n\n                deferred.reject(err);\n\n            });\n\n        return deferred.promise;\n\n    }\n\n    /**\n     * @description Send request to get list of entity\n     *\n     * @param {Object} params\n     *\n     * @returns {deferred.promise}\n     */\n    query (params) {\n\n        var deferred = this.q.defer();\n\n        this.http({\n            method: 'GET',\n            url: `/api/users`,\n            params: params,\n            transformResponse: appendTransform(this.http.defaults.transformResponse, (resp) => {\n\n                if (status < 400) {\n\n                    for (var element in resp.data) {\n\n                        if (resp.data[element] instanceof Object) {\n\n                            resp.data[element] = transformResponse.call(this, resp.data[element]);\n\n                        }\n\n                    }\n\n                }\n\n                return resp;\n\n            })\n        })\n            .success((data) => {\n\n                deferred.resolve(data);\n\n            })\n            .error((err) => {\n\n                deferred.reject(err);\n\n            });\n\n        return deferred.promise;\n\n    }\n\n    /**\n     * @description Send request to delete entity\n     *\n     * @param {number} id\n     *\n     * @returns {deferred.promise}\n     */\n    delete (id) {\n\n        var deferred = this.q.defer();\n\n        this.http({\n            method: 'DELETE',\n            url: `/api/users/${id}`\n        })\n            .success((resp) => {\n\n                deferred.resolve(resp);\n\n            })\n            .error((err) => {\n\n                deferred.reject(err);\n\n            });\n\n        return deferred.promise;\n\n    }\n\n    /**\n     * @description Send request to create entity\n     *\n     * @param {object} entity\n     */\n    post (entity) {\n\n        var deferred = this.q.defer();\n\n        this.http({\n            method: 'POST',\n            url: `/api/users`,\n            data: entity,\n            transformResponse: appendTransform(this.http.defaults.transformResponse, (resp, header, status) => {\n\n                if (status < 400) {\n\n                    return transformResponse.call(this, resp.data);\n\n                } else {\n\n                    return resp;\n\n                }\n\n            })\n        })\n            .success((resp) => {\n\n                deferred.resolve(resp);\n\n            })\n            .error((err) => {\n\n                deferred.reject(err);\n\n            });\n\n        return deferred.promise;\n\n    }\n\n    /**\n     * Send request to update entity\n     *\n     * @param {number} id\n     * @param {object} entity\n     *\n     * @returns {deferred.promise}\n     */\n    put (id, entity) {\n\n        var deferred = this.q.defer();\n\n        this.http({\n            method: 'PUT',\n            url: `/api/users/${id}`,\n            data: entity,\n            transformResponse: appendTransform(this.http.defaults.transformResponse, (resp, header, status) => {\n\n                if (status < 400) {\n\n                    return transformResponse.call(this, resp.data);\n\n                } else {\n\n                    return resp;\n\n                }\n\n            })\n        })\n            .success((resp) => {\n\n                deferred.resolve(resp);\n\n            })\n            .error((err) => {\n\n                deferred.reject(err);\n\n            });\n\n        return deferred.promise;\n\n    }\n\n    /**\n     * Send request to update entity\n     *\n     * @param {number} id\n     * @param {object} entity\n     *\n     * @returns {deferred.promise}\n     */\n    putMe (entity) {\n\n        var deferred = this.q.defer();\n\n        this.http({\n            method: 'PUT',\n            url: `/api/users/me`,\n            data: entity,\n            transformResponse: appendTransform(this.http.defaults.transformResponse, (resp, header, status) => {\n\n                if (status < 400) {\n\n                    return transformResponse.call(this, resp.data);\n\n                } else {\n\n                    return resp;\n\n                }\n\n            })\n        })\n            .success((resp) => {\n\n                deferred.resolve(resp);\n\n            })\n            .error((err) => {\n\n                deferred.reject(err);\n\n            });\n\n        return deferred.promise;\n\n    }\n\n    /**\n     * Send request to update entity\n     *\n     * @param {number} id\n     * @param {object} entity\n     *\n     * @returns {deferred.promise}\n     */\n    othersSettingsMe (entity) {\n\n        var deferred = this.q.defer();\n\n        this.http({\n                method: 'PUT',\n                url: `/api/users/me/others-settings`,\n                data: entity,\n                transformResponse: appendTransform(this.http.defaults.transformResponse, (resp, header, status) => {\n\n                    if (status < 400) {\n\n                        return transformResponse.call(this, resp.data);\n\n                    } else {\n\n                        return resp;\n\n                    }\n\n                })\n            })\n            .success((resp) => {\n\n                deferred.resolve(resp);\n\n            })\n            .error((err) => {\n\n                deferred.reject(err);\n\n            });\n\n        return deferred.promise;\n\n    }\n\n    /**\n     * @description Send request to change password\n     *\n     * @param {Object} data\n     * @returns {deferred.promise|*}\n     */\n    changePassword (data) {\n\n        var deferred = this.q.defer();\n\n        this.http({\n            method: 'POST',\n            data: data,\n            url: CHANGE_PASSWORD_ROUTE\n        })\n            .success((resp) => {\n\n                deferred.resolve(resp);\n\n            })\n            .error((err) => {\n\n                deferred.reject(err);\n\n            });\n\n        return deferred.promise;\n\n    }\n\n    /**\n     * @description Send request to reset password\n     *\n     * @param {Object} data\n     * @returns {deferred.promise|*}\n     */\n    resetPassword (data) {\n\n        var deferred = this.q.defer();\n\n        this.http({\n            method: 'POST',\n            data: data,\n            url: RESET_REQUEST_ROUTE\n        })\n            .success((resp) => {\n\n                deferred.resolve(resp);\n\n            })\n            .error((err) => {\n\n                deferred.reject(err);\n\n            });\n\n        return deferred.promise;\n\n    }\n\n    /**\n     * @description Send request to confirm password with the new one\n     *\n     * @param {Object} data\n     * @param {String} token\n     * @returns {deferred.promise|*}\n     */\n    setPassword (data, token) {\n\n        var deferred = this.q.defer();\n\n        this.http({\n            method: 'POST',\n            data: data,\n            url: RESET_PASSWORD_ROUTE + token\n        })\n            .success((resp) => {\n\n                deferred.resolve(resp);\n\n            })\n            .error((err) => {\n\n                deferred.reject(err);\n\n            });\n\n        return deferred.promise;\n\n    }\n\n}\n\nexport default UserResource;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport CreateController from './controllers/CreateController.js';\nimport EditController from './controllers/EditController.js';\nimport ManageController from './controllers/ManageController.js';\n\nimport OthersSettingsController from './controllers/OthersSettingsController.js';\nimport ChangePasswordController from './controllers/ChangePasswordController.js';\nimport ResetRequestController from './controllers/ResetRequestController.js';\nimport SetPasswordController from './controllers/SetPasswordController.js';\n\nimport UserResource from './resources/UserResource.js';\n\nconst MODULE_NAME = 'clearcode.tm.user';\nconst MODULE_DIR = 'app/modules/user';\n\nCreateController.$inject = [\n    `${MODULE_NAME}.userResource`,\n    'clearcode.tm.alert.alert',\n    'clearcode.tm.pageInfo.pageInfo',\n    '$state',\n    '$scope',\n    '$translate',\n    'clearcode.tm.alert.refreshAlert'\n];\n\nEditController.$inject = [\n    `${MODULE_NAME}.userResource`,\n    '$stateParams',\n    'clearcode.tm.alert.alert',\n    'clearcode.tm.pageInfo.pageInfo',\n    '$state',\n    '$scope',\n    '$translate',\n    'clearcode.tm.alert.refreshAlert',\n    'clearcode.tm.security.security'\n];\n\nManageController.$inject = [\n    'ngTableParams',\n    `${MODULE_NAME}.userResource`,\n    'clearcode.tm.alert.alert',\n    'clearcode.tm.tagContainer.paramConverter',\n    'clearcode.tm.tagContainer.currentContainer',\n    'clearcode.tm.pageInfo.pageInfo',\n    '$translate'\n];\n\nChangePasswordController.$inject = [\n    'clearcode.tm.user.userResource',\n    'clearcode.tm.alert.alert',\n    '$state',\n    'clearcode.tm.pageInfo.pageInfo',\n    '$scope',\n    '$translate'\n];\n\nOthersSettingsController.$inject = [\n    'clearcode.tm.alert.alert',\n    '$scope',\n    '$translate',\n    'clearcode.tm.translation.translation',\n    '$window',\n    'clearcode.tm.pageInfo.pageInfo'\n];\n\nResetRequestController.$inject = [\n    `${MODULE_NAME}.userResource`,\n    'clearcode.tm.form.alertForm',\n    'clearcode.tm.alert.alert',\n    'clearcode.tm.pageInfo.pageInfo',\n    '$translate'\n];\n\nSetPasswordController.$inject = [\n    `${MODULE_NAME}.userResource`,\n    '$state',\n    '$stateParams',\n    'clearcode.tm.alert.alert',\n    'clearcode.tm.pageInfo.pageInfo',\n    '$scope',\n    '$translate'\n];\n\nUserResource.$inject = [\n    '$http',\n    '$q'\n];\n\nangular\n    .module(MODULE_NAME, [\n        'pascalprecht.translate',\n        'ui.router',\n        'ngTable',\n        'clearcode.tm.alert',\n        'clearcode.tm.pageInfo',\n        'clearcode.tm.form',\n        'clearcode.tm.tagContainer',\n        'clearcode.tm.security'\n    ])\n    .run([\n\n        'clearcode.tm.alert.$alert',\n\n        ($alertProvider) => {\n\n            $alertProvider.addMessagePattern(\n                'user.save',\n                'User account has been saved successfully.'\n            );\n\n            $alertProvider.addMessagePattern(\n                'user.change_language',\n                'The language has been changed'\n            );\n\n            $alertProvider.addMessagePattern(\n                'password.change',\n                'Your password has been changed successfully.'\n            );\n\n            $alertProvider.addMessagePattern(\n                'user.invalid',\n                'Sorry, something went wrong.'\n            );\n\n            $alertProvider.addMessagePattern(\n                'user.reset',\n                'Email with activation link has been sent.'\n            );\n\n            $alertProvider.addMessagePattern(\n                'user.others',\n                'Other settings has been saved successfully.'\n            );\n\n        }\n    ])\n    .config([\n\n        '$stateProvider',\n\n        ($stateProvider) => {\n\n            $stateProvider\n                .state('users', {\n                    url: '/users',\n                    controller: `${MODULE_NAME}.ManageController as view`,\n                    templateUrl: `${MODULE_DIR}/views/manage.html`,\n                    data: {\n                        roles: [\n                            'ROLE_SUPER_ADMIN'\n                        ],\n                        hasContainerList: false\n                    }\n                })\n                .state('userCreate', {\n                    url: '/users-create',\n                    controller: `${MODULE_NAME}.CreateController as view`,\n                    templateUrl: `${MODULE_DIR}/views/create.html`,\n                    data: {\n                        roles: [\n                            'ROLE_SUPER_ADMIN'\n                        ],\n                        hasContainerList: false\n                    }\n                })\n                .state('userEdit', {\n                    url: '/users-edit/{userId}',\n                    controller: `${MODULE_NAME}.EditController as view`,\n                    templateUrl: `${MODULE_DIR}/views/edit.html`,\n                    data: {\n                        roles: [\n                            'ROLE_SUPER_ADMIN'\n                        ],\n                        hasContainerList: false\n                    }\n                })\n                .state('editProfile', {\n                    url: '/profile',\n                    controller: `${MODULE_NAME}.EditController as view`,\n                    controllerAs: 'view',\n                    data: {\n                        roles: ['ROLE_SUPER_ADMIN'],\n                        secure: true\n                    },\n                    templateUrl: '/app/modules/user/views/profile.html'\n                })\n                .state('resetPassword', {\n                    url: '/reset-password',\n                    controller: `${MODULE_NAME}.ResetRequestController`,\n                    controllerAs: 'view',\n                    data: {\n                        roles: [],\n                        secure: false\n                    },\n                    templateUrl: '/app/modules/user/views/resetPassword.html'\n                })\n                .state('resetConfirm', {\n                    url: '/reset-password/token/{token}',\n                    controller: `${MODULE_NAME}.SetPasswordController`,\n                    controllerAs: 'view',\n                    data: {\n                        roles: [],\n                        secure: false\n                    },\n                    templateUrl: '/app/modules/user/views/setPassword.html'\n                });\n\n        }\n    ])\n    .controller(`${MODULE_NAME}.CreateController`, CreateController)\n    .controller(`${MODULE_NAME}.EditController`, EditController)\n    .controller(`${MODULE_NAME}.ManageController`, ManageController)\n    .controller(`${MODULE_NAME}.OthersSettingsController`, OthersSettingsController)\n    .controller(`${MODULE_NAME}.ChangePasswordController`, ChangePasswordController)\n    .controller(`${MODULE_NAME}.ResetRequestController`, ResetRequestController)\n    .controller(`${MODULE_NAME}.SetPasswordController`, SetPasswordController)\n    .service(`${MODULE_NAME}.userResource`, UserResource);\n\nmodule.exports = {MODULE_NAME};\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @name BaseController\n */\nclass BaseController {\n\n    /**\n     * @param {VariableResource} $variableResource\n     * @param {VariableTypeResource} $typeResource\n     * @param {PageInfo} PageInfo\n     * @param $scope\n     * @param {VariableFormProvider} $variableFormProvider\n     * @param {CurrentContainer} currentContainer\n     * @param {$stateParams} $stateParams\n     * @param {Alert} $alert\n     * @param {$state} $state\n     * @param {$translate} $translate\n     */\n    constructor (\n        $variableResource,\n        $typeResource,\n        $PageInfo,\n        $scope,\n        $variableFormProvider,\n        currentContainer,\n        $stateParams,\n        $alert,\n        $state,\n        $translate,\n        $condition\n        ) {\n\n        this.variable = $variableResource.getEntityObject();\n\n        this.typeResource = $typeResource;\n\n        $scope.$on('pageInfo.reload', (event, args) => {\n\n            $translate([this.getBreadcrumbText()]).then((translations) => {\n\n                $PageInfo.clear()\n                    .add(args.name, 'tags', {\n                        containerId: args.id\n                    })\n                    .add(translations[this.getBreadcrumbText()], 'variables', {\n                        containerId: args.id\n                    })\n                    .broadcast();\n\n            });\n\n        });\n\n        this.variableFormProvider = $variableFormProvider;\n\n        this.currentContainer = currentContainer;\n        this.condition = $condition;\n        this.stateParams = $stateParams;\n        this.alert = $alert;\n        this.state = $state;\n        this.translate = $translate;\n\n        this.formTouched = false;\n\n    }\n\n    getVariableTypes() {\n\n        this.typesPromise = this.typeResource.query();\n\n        this.typesPromise.then(\n                resp => {\n\n                this.types = resp.data;\n\n                if (this.variable.type && this.variable.type.id === undefined) {\n\n                    for (let i = 0; i < this.types.length; i++) {\n                        if (this.variable.type === this.types[i].id) {\n                            this.variable.type = this.types[i];\n                            this.formTouched = true;\n                            break;\n                        }\n                    }\n\n                }\n\n\n            }\n        );\n\n    }\n\n    /**\n     * @param {VariableType} type\n     */\n    setVariableType (type) {\n\n        this.variable.type = type;\n        this.variable.value = '';\n\n        this.formTouched = true;\n    }\n\n    /**\n     * @returns {String} url for active type\n     */\n    getConfigurationTemplate () {\n\n        let typeId = (this.variable.type.id !== undefined) ? this.variable.type.id : this.variable.type;\n\n        return this.variableFormProvider.getType(typeId).templateUrl;\n\n    }\n\n    /**\n     * Handle form submit action\n     *\n     * @param {Variable} variable\n     */\n    submitForm (variable) {\n\n        this.variablePromise = variable.save(this.stateParams.containerId);\n\n        this.variablePromise.then(\n            () => {\n\n                this.currentContainer.makeChanges();\n                this.condition.refresh();\n                this.alert.success(this.getAlertType());\n\n                this.state.go('variables', {\n                    containerId: this.stateParams.containerId\n                });\n\n            },\n            () => {\n\n                this.alert.error('error.invalid');\n\n            }\n        );\n\n    }\n\n    /**\n     * Display error if form is invalid\n     */\n    displayInvalidFormMessage () {\n\n        this.validateVariable = true;\n        this.alert.error('error.invalid');\n\n    }\n\n}\n\nexport default BaseController;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport BaseController from './BaseController.js';\n\nconst BREADCRUMB_GLOBAL = 'Variables';\n\n/**\n * @name CreateController\n */\nclass CreateController extends BaseController {\n\n    /**\n     * @param {VariableResource} $variableResource\n     * @param {VariableTypeResource} $typeResource\n     * @param {PageInfo} $PageInfo\n     * @param $scope\n     * @param {VariableFormProvider} $variableFormProvider\n     * @param {CurrentContainer} currentContainer\n     * @param {$stateParams} $stateParams\n     * @param {Alert} $alert\n     * @param {$state} $state\n     * @param {$translate} $translate\n     * @param {$condition} $condition\n     */\n    constructor (\n            $variableResource,\n            $typeResource,\n            $PageInfo,\n            $scope,\n            $variableFormProvider,\n            currentContainer,\n            $stateParams,\n            $alert,\n            $state,\n            $translate,\n            $condition\n        ) {\n\n        super(\n            $variableResource,\n            $typeResource,\n            $PageInfo,\n            $scope,\n            $variableFormProvider,\n            currentContainer,\n            $stateParams,\n            $alert,\n            $state,\n            $translate,\n            $condition\n        );\n\n        this.variable = $variableResource.getEntityObject();\n\n        this.getVariableTypes();\n\n        currentContainer.getContainer().then( () => {\n\n            if (!currentContainer.$container.hasPermission('edit')) {\n\n                $state.go('triggers', {containerId: $stateParams.containerId});\n\n            }\n\n            this\n                .translate([this.getBreadcrumbText(), BREADCRUMB_GLOBAL])\n                .then((translations) => {\n\n                    $PageInfo.clear()\n                        .add(currentContainer.$container.name, 'tags', {\n                            containerId: currentContainer.$container.id\n                        })\n                        .add(translations[BREADCRUMB_GLOBAL], 'variables', {\n                            containerId: currentContainer.$container.id\n                        })\n                        .add(translations[this.getBreadcrumbText()])\n                        .broadcast();\n\n                });\n\n        });\n\n    }\n\n    /**\n     * Get breadcrumb text\n     *\n     */\n    getBreadcrumbText () {\n\n        return 'Add a new variable';\n\n    }\n\n    /**\n     * Get alert type\n     *\n     */\n    getAlertType () {\n\n        return 'success.create';\n\n    }\n\n}\n\nexport default CreateController;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport BaseController from './BaseController.js';\n\nconst BREADCRUMB_GLOBAL = 'Variables';\n\n/**\n * @name EditController\n */\nclass EditController extends BaseController {\n\n    /**\n     * @param {VariableResource} $variableResource\n     * @param {VariableTypeResource} $typeResource\n     * @param {PageInfo} PageInfo\n     * @param $scope\n     * @param {VariableFormProvider} $variableFormProvider\n     * @param {CurrentContainer} currentContainer\n     * @param {$stateParams} $stateParams\n     * @param {Alert} $alert\n     * @param {$state} $state\n     * @param {$translate} $translate\n     * @param {$condition} $condition\n     */\n    constructor (\n        $variableResource,\n        $typeResource,\n        $PageInfo,\n        $scope,\n        $variableFormProvider,\n        currentContainer,\n        $stateParams,\n        $alert,\n        $state,\n        $translate,\n        $condition\n        ) {\n\n        super(\n            $variableResource,\n            $typeResource,\n            $PageInfo,\n            $scope,\n            $variableFormProvider,\n            currentContainer,\n            $stateParams,\n            $alert,\n            $state,\n            $translate,\n            $condition\n        );\n\n        this.variablePromise = $variableResource.get($stateParams.variableId);\n\n        this.variablePromise.then(\n            resp => {\n                this.variable = resp;\n\n                this.getVariableTypes();\n            }\n        );\n\n        this.currentContainer.getContainer().then(() => {\n\n            if (this.currentContainer.$container.hasPermission('noaccess')) {\n\n                this.state.go('container');\n\n            }\n\n            this\n                .translate([this.getBreadcrumbText(), BREADCRUMB_GLOBAL])\n                .then((translations) => {\n\n                    $PageInfo.clear()\n                        .add(this.currentContainer.$container.name, 'tags', {\n                            containerId: this.currentContainer.$container.id\n                        })\n                        .add(translations[BREADCRUMB_GLOBAL], 'variables', {\n                            containerId: this.currentContainer.$container.id\n                        })\n                        .add(translations[this.getBreadcrumbText()])\n                        .broadcast();\n\n                });\n\n        });\n\n        this.formTouched = true;\n    }\n\n    /**\n     * Get breadcrumb text\n     *\n     */\n    getBreadcrumbText () {\n\n        return 'Configure variable';\n\n    }\n\n    /**\n     * Get alert type\n     *\n     */\n    getAlertType () {\n\n        return 'success.edit';\n\n    }\n\n}\n\nexport default EditController;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @type {Alert}\n */\nvar $alert;\n\n/**\n * @type {$stateParams}\n */\nvar stateParams;\n\n/**\n * @type {CurrentContainer}\n */\nvar currentContainer;\n\n/**\n * @type {$scope}\n */\nvar scope;\n\n/**\n * @type {String}\n */\nconst BREADCRUMB_TEXT = 'Variables';\n\n/**\n * @name ManageController\n */\nclass ManageController {\n\n    /**\n     * @param {ngTableParams} TableParams\n     * @param {$stateParams} $stateParams\n     * @param {VariableResource} variableResource\n     * @param {Alert} alert\n     * @param {ParamConverter} paramConverter\n     * @param {CurrentContainer} CurrentContainer\n     * @param {PageInfo} PageInfo\n     * @param {$scope} $scope\n     * @param {$translate} $translate\n     */\n        constructor (\n            TableParams,\n            $stateParams,\n            variableResource,\n            alert,\n            paramConverter,\n            CurrentContainer,\n            PageInfo,\n            $scope,\n            state,\n            $translate\n        ) {\n\n        $alert = alert;\n        stateParams = $stateParams;\n        currentContainer = CurrentContainer;\n        scope = $scope;\n\n        this.permissions = [];\n        this.containerId = stateParams.containerId;\n\n        currentContainer.getContainer().then((container) => {\n\n            if (!currentContainer.$container.hasPermission('view')) {\n\n                state.go('container');\n\n            } else {\n\n                this.permissions = currentContainer.$container.permissions;\n\n            }\n\n            $translate([BREADCRUMB_TEXT]).then((translations) => {\n\n                PageInfo.clear()\n                    .add(container.name, 'variable', {\n                        containerId: container.id\n                    })\n                    .add(translations[BREADCRUMB_TEXT])\n                    .broadcast();\n\n            });\n\n        });\n\n        this.tableParams = new TableParams({\n            page: 1,\n            count: 10,\n            sorting: {\n                name: 'asc'\n            }\n        }, {\n            total: 0,\n            getData: ($defer, params) => {\n\n                variableResource.query(stateParams.containerId, paramConverter.list(params.url())).then((resp) => {\n\n                    params.total(resp.total);\n\n                    $defer.resolve(resp.data);\n\n                });\n\n            }\n        });\n\n\n        scope.$on('pageInfo.reload', (event, args) => {\n\n            $translate([BREADCRUMB_TEXT]).then((translations) => {\n\n                PageInfo.clear()\n                    .add(args.name, 'variables', {\n                        containerId: args.id\n                    })\n                    .add(translations[BREADCRUMB_TEXT])\n                    .broadcast();\n\n            });\n\n        });\n\n    }\n\n    removeVariable (variable) {\n\n        variable.remove().then(\n            () => {\n\n                $alert.success('success.remove');\n                currentContainer.makeChanges();\n\n                if (this.tableParams.data.length === 1 && this.tableParams.page() > 1) {\n\n                    this.tableParams.page(this.tableParams.page() - 1);\n\n                } else {\n\n                    this.tableParams.reload();\n\n                }\n\n            },\n            () => {\n\n                $alert.error('error.remove');\n\n                this.tableParams.reload();\n\n            }\n        );\n\n    }\n\n}\n\nexport default ManageController;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n let variableSelector,\n\tscope,\n\tcompile;\n\nclass SelectorController {\n\tconstructor($compile, $stateParams, $scope, $variableSelector, condition) {\n\t\tcompile = $compile;\n\t\tscope = $scope;\n\t\tvariableSelector = $variableSelector;\n\n        condition.allVariables().then(resp => {\n            this.variables = resp;\n        });\n\t}\n\n\tinit ($element, $ngModel) {\n\t\tthis.element = $element;\n\t\tthis.ngModel = $ngModel;\n\n\t\tlet listElement = compileListView();\n\t\tthis.ulElement = listElement.children();\n\t\tcreateWrapper(this.element, listElement);\n    }\n\n\ttoggleVariablesList (event) {\n\t\tlet elementValue = this.element.val().trim();\n\n        this.isVariablesListVisible()\n            ? this.element.val(variableSelector.removeVariablePrompt(elementValue))\n            : this.element.val(variableSelector.addVariablePrompt(elementValue));\n\n        this.ulElement.toggleClass('show');\n        stopBubblingEvent(event);\n    }\n\n    addVariable (variable) {\n    \tlet elementValue = this.element.val().trim();\n        this.ulElement.removeClass('show');\n\n        this.ngModel.$setViewValue(variableSelector.selectVariable(elementValue, variable));\n        this.ngModel.$render();\n        this.element[0].focus();\n    }\n\n    closeVariablePrompt (event) {\n    \tlet elementValue = this.element.val().trim();\n\n        if (!this.isVariablesListVisible()) {\n            return;\n        }\n\n        this.ulElement.removeClass('show');\n        this.element.val(variableSelector.removeVariablePrompt(elementValue));\n        stopBubblingEvent(event);\n    }\n\n    isVariablesListVisible () {\n        return this.ulElement.hasClass('show');\n    }\n}\n\nfunction stopBubblingEvent (event) {\n\tevent.stopPropagation();\n    event.cancelBubble = true;\n}\n\nfunction compileListView() {\n\tlet listTemplate = angular.element(document.getElementById('variables-list.html')).html();\n\n\treturn compile(listTemplate)(scope);\n}\n\nfunction createWrapper(element, listElement) {\n    let btnElement = compile(variableSelector.getTemplate())(scope),\n        inputGroupWrapper;\n\n\telement.wrap(variableSelector.getElementWrapper());\n\n    inputGroupWrapper = element.parent();\n    inputGroupWrapper.append(btnElement);\n    inputGroupWrapper.append(listElement);\n}\n\n\nexport default SelectorController;","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar variableClickOutside = ($document) => {\n\n    return {\n        restrict: 'A',\n        require: 'variableSelector',\n        link: link\n    };\n\n    function link(scope, element, attrs, selectorCtrl) {\n        $document.on('click', documentOnClick);\n\n        scope.$on('$destroy', function() {\n            $document.off('click', documentOnClick);\n        });\n\n        function documentOnClick (event){\n            let outside = !element[0].contains(event.target),\n                listVisible = selectorCtrl.isVariablesListVisible();\n\n            if (outside && listVisible) {\n                element.val(selectorCtrl.closeVariablePrompt(event));\n            }\n        }\n    }\n};\n\nexport default variableClickOutside;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport SelectorController from '../controllers/SelectorController.js';\n\nvar variableSelectorDirective = () => {\n\n    return {\n        restrict: 'A',\n        require: ['variableSelector', 'ngModel'],\n        scope: {},\n        link: link,\n        controller: SelectorController,\n        controllerAs: 'selectorCtrl',\n        bindToController: true\n    };\n\n    function link(scope, element, attrs, controllers) {\n        let selectorController = controllers[0];\n        let ngModel = controllers[1];\n\n        selectorController.init(element, ngModel);\n    }\n};\n\nexport default variableSelectorDirective;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar variableFactory = (resource) => {\n\n    /**\n     * @name Variable\n     * @description Variable entity\n     */\n    class Variable {\n\n        constructor () {\n\n            /**\n             * @type {number}\n             */\n            this.id = undefined;\n\n            /**\n             * @type {string}\n             */\n            this.name = undefined;\n\n            /**\n             * @type {string}\n             */\n            this.description = undefined;\n\n            /**\n             * @type {string}\n             */\n            this.type = undefined;\n\n            /**\n             * @type {string}\n             */\n            this.value = undefined;\n\n            /**\n             * @type {Object}\n             */\n            this.options = [];\n\n            /**\n             * @type {string}\n             */\n            this.updatedAt = undefined;\n\n        }\n\n        /**\n         * @param {number} containerId\n         *\n         * @returns {deferred.promise}\n         */\n        save (containerId) {\n\n            var result = {}, promise;\n\n            var excludedProperty = ['id', 'updatedAt'];\n\n            for (var property in this) {\n\n                if (\n                    !angular.isFunction(this[property]) &&\n                    this.hasOwnProperty(property) &&\n                    excludedProperty.indexOf(property) === -1\n                ) {\n\n                    if (property === 'type') {\n\n                        result[property] = this[property].id;\n\n                    } else {\n\n                        result[property] = this[property];\n\n                    }\n\n                }\n\n            }\n\n            if (this.id === undefined) {\n\n                promise = resource.post(containerId, result);\n\n            } else {\n\n                promise = resource.put(this.id, result);\n\n            }\n\n            return promise;\n\n        }\n\n        /**\n         * @returns {deferred.promise|Boolean}\n         */\n        remove () {\n\n            if (this.id === undefined) {\n\n                return false;\n\n            }\n\n            return resource.delete(this.id);\n\n        }\n\n    }\n\n    return Variable;\n\n};\n\n\nexport default variableFactory;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar variableTypeFactory = (resource) => {\n\n    /**\n     * @name Variable\n     * @description Variable entity\n     */\n    class VariableType {\n\n        constructor () {\n\n            /**\n             * @type {number}\n             */\n            this.id = undefined;\n\n            /**\n             * @type {string}\n             */\n            this.name = undefined;\n\n            /**\n             * @type {string}\n             */\n            this.helper = undefined;\n        }\n\n    }\n\n    return VariableType;\n\n};\n\n\nexport default variableTypeFactory;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @name variable#VariableFormProvider\n * @namespace clearcode.tm.variable\n */\n/* eslint-disable */\nclass VariableFormProvider {\n\n    constructor () {\n\n        this.collection = {};\n\n    }\n\n    /**\n     * @description Add variable form template for specific type\n     *\n     * @param {String} name\n     * @param {Object} settings\n     * @returns {VariableFormProvider}\n     */\n    addType (name, settings) {\n\n        var self = this;\n\n        if (self.collection[name] !== undefined) {\n\n            throw new Error('Form type with provided name already exist');\n\n        }\n\n        self.collection[name] = settings;\n\n        return self;\n\n    }\n\n    /**\n     * @description Get specific form template by name of variable type\n     *\n     * @param {String} name\n     * @returns {String|Boolean}\n     */\n    getType (name) {\n\n        var self = this;\n\n        if (self.collection[name] !== undefined) {\n\n            return self.collection[name];\n\n        }\n\n        return false;\n\n    }\n\n    $get () {\n\n        return this;\n\n    }\n}\n/* eslint-enable */\nexport default VariableFormProvider;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport variableFactory from '../entity/Variable.js';\n\nvar transformResponse = function (resp) {\n\n    var Variable = variableFactory(this);\n\n    var variable = new Variable();\n\n    variable.id = resp.id;\n    variable.name = resp.name;\n    variable.description = resp.description;\n    variable.type = resp.type;\n    variable.value = resp.value;\n    variable.options = resp.options;\n    variable.updatedAt = resp.updated_at;\n\n    return variable;\n\n};\n\n\nvar appendTransform = function (defaults, transform) {\n\n    // We can't guarantee that the default transformation is an array\n    defaults = angular.isArray(defaults) ? defaults : [defaults];\n\n    // Append the new transformation to the defaults\n    return defaults.concat(transform);\n\n};\n\n/**\n * @name VariableResource\n */\nclass VariableResource {\n    /**\n     * @param {$http} $http\n     * @param {$q} $q\n     */\n    constructor ($http, $q) {\n\n        this.http = $http;\n        this.q = $q;\n\n    }\n\n    /**\n     * @returns {Variable}\n     */\n    getEntityObject () {\n\n        var Variable = variableFactory(this);\n\n        return new Variable();\n\n    }\n\n    /**\n     * @description Send request to get specific entity\n     *\n     * @param {number} id\n     *\n     * @returns {deferred.promise}\n     */\n    get (id) {\n\n        var deferred = this.q.defer();\n\n        this.http({\n            method: 'GET',\n            url: `/api/variables/${id}`,\n            transformResponse: appendTransform(this.http.defaults.transformResponse, (resp, header, status) => {\n\n                if (status < 400) {\n\n                    return transformResponse.call(this, resp.data);\n\n                } else {\n\n                    return resp;\n\n                }\n\n            })\n        })\n            .success((resp) => {\n\n                deferred.resolve(resp);\n\n            })\n            .error((err) => {\n\n                deferred.reject(err);\n\n            });\n\n        return deferred.promise;\n\n    }\n\n    /**\n     * @description Send request to get list of entity\n     *\n     * @param {number} containerId\n     * @param {Object} params\n     *\n     * @returns {deferred.promise}\n     */\n    query (containerId, params) {\n\n        var deferred = this.q.defer();\n\n        this.http({\n            method: 'GET',\n            url: `/api/containers/${containerId}/variables`,\n            params: params,\n            transformResponse: appendTransform(this.http.defaults.transformResponse, (resp) => {\n\n                for (var element in resp.data) {\n\n                    if (resp.data[element] instanceof Object) {\n\n                        resp.data[element] = transformResponse.call(this, resp.data[element]);\n\n                    }\n\n                }\n\n                return resp;\n\n            })\n        })\n            .success((resp) => {\n\n                deferred.resolve(resp);\n\n            })\n            .error((err) => {\n\n                deferred.reject(err);\n\n            });\n\n        return deferred.promise;\n\n    }\n\n    /**\n     * @description Send request to get list of entity\n     *\n     * @param {number} containerId\n     * @param {Object} params\n     *\n     * @returns {deferred.promise}\n     */\n    queryAllAvailable (containerId, params) {\n\n        var deferred = this.q.defer();\n\n        this.http({\n            method: 'GET',\n            url: `/api/containers/${containerId}/available-variables`,\n            params: params,\n            transformResponse: appendTransform(this.http.defaults.transformResponse, (resp) => {\n\n                for (var element in resp.data) {\n\n                    if (resp.data[element] instanceof Object) {\n\n                        resp.data[element] = transformResponse.call(this, resp.data[element]);\n\n                    }\n\n                }\n\n                return resp;\n\n            })\n        })\n            .success((resp) => {\n\n                deferred.resolve(resp);\n\n            })\n            .error((err) => {\n\n                deferred.reject(err);\n\n            });\n\n        return deferred.promise;\n\n    }\n\n    /**\n     * @description Send request to delete entity\n     *\n     * @param {number} id\n     *\n     * @returns {deferred.promise}\n     */\n    delete (id) {\n\n        var deferred = this.q.defer();\n\n        this.http({\n            method: 'DELETE',\n            url: `/api/variables/${id}`\n        })\n            .success((data) => {\n\n                deferred.resolve(data);\n\n            })\n            .error((err) => {\n\n                deferred.reject(err);\n\n            });\n\n        return deferred.promise;\n\n    }\n\n    /**\n     * @description Send request to create entity\n     *\n     * @param {number} containerId\n     * @param {object} entity\n     *\n     * @returns {deferred.promise}\n     */\n    post (containerId, entity) {\n\n        var deferred = this.q.defer();\n\n        this.http({\n            method: 'POST',\n            url: `/api/containers/${containerId}/variables`,\n            data: entity,\n            transformResponse: appendTransform(this.http.defaults.transformResponse, (resp, header, status) => {\n\n                if (status < 400) {\n\n                    return transformResponse.call(this, resp.data);\n\n                } else {\n\n                    return resp;\n\n                }\n\n            })\n        })\n            .success((resp) => {\n\n                deferred.resolve(resp);\n\n            })\n            .error((err) => {\n\n                deferred.reject(err);\n\n            });\n\n        return deferred.promise;\n\n    }\n\n    /**\n     * Send request to update entity\n     *\n     * @param {number} id\n     * @param {object} entity\n     *\n     * @returns {deferred.promise}\n     */\n    put (id, entity) {\n\n        var deferred = this.q.defer();\n\n        this.http({\n            method: 'PUT',\n            url: `/api/variables/${id}`,\n            data: entity,\n            transformResponse: appendTransform(this.http.defaults.transformResponse, (resp, header, status) => {\n\n                if (status < 400) {\n\n                    return transformResponse.call(this, resp.data);\n\n                } else {\n\n                    return resp;\n\n                }\n\n            })\n        })\n            .success((resp) => {\n\n                deferred.resolve(resp);\n\n            })\n            .error((err) => {\n\n                deferred.reject(err);\n\n            });\n\n        return deferred.promise;\n\n    }\n}\n\nexport default VariableResource;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport variableTypeFactory from '../entity/VariableType.js';\n\nvar transformResponse = function (resp) {\n\n    var VariableType = variableTypeFactory(this);\n\n    var type = new VariableType();\n\n    type.id = resp.id;\n    type.name = resp.name;\n    type.helper = resp.helper;\n\n    return type;\n\n};\n\n\nvar appendTransform = function (defaults, transform) {\n\n    // We can't guarantee that the default transformation is an array\n    defaults = angular.isArray(defaults) ? defaults : [defaults];\n\n    // Append the new transformation to the defaults\n    return defaults.concat(transform);\n\n};\n\n/**\n * @name VariableResource\n */\nclass VariableTypeResource {\n    /**\n     * @param {$http} $http\n     * @param {$q} $q\n     */\n    constructor ($http, $q) {\n\n        this.http = $http;\n        this.q = $q;\n\n    }\n\n    /**\n     * @returns {Variable}\n     */\n    getEntityObject () {\n\n        var VariableType = variableTypeFactory(this);\n\n        return new VariableType();\n\n    }\n\n    /**\n     * @description Send request to get list of entity\n     *\n     * @param {Object} params\n     *\n     * @returns {deferred.promise}\n     */\n    query (params) {\n\n        var deferred = this.q.defer();\n\n        this.http({\n            method: 'GET',\n            url: `/api/variable-types`,\n            params: params,\n            transformResponse: appendTransform(this.http.defaults.transformResponse, (resp) => {\n\n                for (var element in resp.data) {\n\n                    if (resp.data[element] instanceof Object) {\n\n                        resp.data[element] = transformResponse.call(this, resp.data[element]);\n\n                    }\n\n                }\n\n                return resp;\n\n            })\n        })\n            .success((resp) => {\n\n                deferred.resolve(resp);\n\n            })\n            .error((err) => {\n\n                deferred.reject(err);\n\n            });\n\n        return deferred.promise;\n\n    }\n}\n\nexport default VariableTypeResource;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nlet scope,\n    compile;\n\nconst template = `\n    <span class=\"input-group-addon\" ng-click=\"selectorCtrl.toggleVariablesList($event)\" style=\"cursor: pointer;\">\n        <i class=\"icon-variable-insert\"></i>\n    </span>`;\n\nconst elementWrapper = '<div class=\"input-group cc-select\"></div>';\n\n/**\n * @name VariableSelector\n */\nclass VariableSelector {\n    getTemplate () {\n        return template;\n    }\n\n    getElementWrapper () {\n        return elementWrapper;\n    }\n\n    addVariablePrompt (elementValue) {\n        let text = !isVariablePromptOpen(elementValue)\n            ? openVariablePrompt(elementValue)\n            : elementValue;\n\n        return text;\n    }\n\n    selectVariable (elementValue, variable) {\n        return `${elementValue} ${variable.name} }}`.trim();\n    }\n\n    removeVariablePrompt (elementValue) {\n        return isVariablePromptOpen(elementValue)\n            ? removeVariablePrompt(elementValue)\n            : elementValue;\n    }\n\n    static selectorFactory () {\n        return new VariableSelector();\n    }\n}\n\nfunction isVariablePromptOpen (elementValue) {\n    return elementValue.slice(-2) === '{{';\n}\n\nfunction openVariablePrompt (elementValue) {\n    return `${elementValue} {{`.trim();\n}\n\nfunction removeVariablePrompt (elementValue) {\n    return elementValue.substring(0, elementValue.length-2).trim();\n}\n\nexport default VariableSelector;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport ManageController from './controllers/ManageController.js';\nimport CreateController from './controllers/CreateController.js';\nimport EditController from './controllers/EditController.js';\nimport SelectorController from './controllers/SelectorController';\n\nimport VariableResource from './resource/VariableResource.js';\nimport VariableTypeResource from './resource/VariableTypeResource.js';\nimport VariableFormProvider from './providers/VariableFormProvider.js';\nimport VariableSelector from './services/VariableSelector.js';\n\nimport variableSelectorDirective from './directives/variableSelector.js';\nimport clickOutsideElement from './directives/variableClickOutside.js';\n\nconst MODULE_NAME = 'clearcode.tm.variable';\nconst MODULE_DIR = 'app/modules/variable';\n\nconst CONDITION_MODULE_NAME = 'clearcode.tm.condition';\n\nManageController.$inject = [\n    'ngTableParams',\n    '$stateParams',\n    `${MODULE_NAME}.variableResource`,\n    'clearcode.tm.alert.alert',\n    'clearcode.tm.tagContainer.paramConverter',\n    'clearcode.tm.tagContainer.currentContainer',\n    'clearcode.tm.pageInfo.pageInfo',\n    '$scope',\n    '$state',\n    '$translate'\n];\n\nSelectorController.$inject = [\n    '$compile',\n    '$stateParams',\n    '$scope',\n    `${MODULE_NAME}.variableSelector`,\n    `${CONDITION_MODULE_NAME}.condition`\n];\n\nCreateController.$inject = [\n    `${MODULE_NAME}.variableResource`,\n    `${MODULE_NAME}.variableTypeResource`,\n    'clearcode.tm.pageInfo.pageInfo',\n    '$scope',\n    `${MODULE_NAME}.$variableForm`,\n    'clearcode.tm.tagContainer.currentContainer',\n    '$stateParams',\n    'clearcode.tm.alert.alert',\n    '$state',\n    '$translate',\n    'clearcode.tm.condition.condition'\n];\n\nEditController.$inject = [\n    `${MODULE_NAME}.variableResource`,\n    `${MODULE_NAME}.variableTypeResource`,\n    'clearcode.tm.pageInfo.pageInfo',\n    '$scope',\n    `${MODULE_NAME}.$variableForm`,\n    'clearcode.tm.tagContainer.currentContainer',\n    '$stateParams',\n    'clearcode.tm.alert.alert',\n    '$state',\n    '$translate',\n    'clearcode.tm.condition.condition'\n];\n\nVariableResource.$inject = [\n    '$http',\n    '$q'\n];\n\nclickOutsideElement.$inject = [\n    '$document'\n];\n\nVariableTypeResource.$inject = [\n    '$http',\n    '$q'\n];\n\nangular\n    .module(MODULE_NAME, [\n        'pascalprecht.translate',\n        'ui.router',\n        'ngTable',\n        'clearcode.tm.alert',\n        'clearcode.tm.pageInfo',\n        'clearcode.tm.tagContainer'\n    ])\n    .config([\n\n        '$stateProvider',\n\n        ($stateProvider) => {\n\n            $stateProvider\n                .state('variables', {\n                    url: '/containers/{containerId}/variables',\n                    controller: `${MODULE_NAME}.ManageController as view`,\n                    templateUrl: `${MODULE_DIR}/views/manage.html`,\n                    data: {\n                        roles: [\n                            'ROLE_SUPER_ADMIN'\n                        ],\n                        hasContainerList: true\n                    }\n                })\n                .state('variableCreate', {\n                    url: '/containers/{containerId}/variable-create',\n                    controller: `${MODULE_NAME}.CreateController as view`,\n                    templateUrl: `${MODULE_DIR}/views/create.html`,\n                    data: {\n                        roles: [\n                            'ROLE_SUPER_ADMIN'\n                        ],\n                        hasContainerList: true\n                    }\n                })\n                .state('variableEdit', {\n                    url: '/containers/{containerId}/variable-edit/{variableId}',\n                    controller: `${MODULE_NAME}.EditController as view`,\n                    templateUrl: `${MODULE_DIR}/views/edit.html`,\n                    data: {\n                        roles: [\n                            'ROLE_SUPER_ADMIN'\n                        ],\n                        hasContainerList: true\n                    }\n                });\n\n        }\n    ])\n    .run([\n        'clearcode.tm.alert.$alert',\n        ($alertProvider) => {\n\n            $alertProvider.addMessagePattern(\n                'variables.close',\n                'You are trying to close unsaved variable.'\n            );\n\n        }\n    ])\n    .controller(`${MODULE_NAME}.ManageController`, ManageController)\n    .controller(`${MODULE_NAME}.CreateController`, CreateController)\n    .controller(`${MODULE_NAME}.EditController`, EditController)\n    .controller(`${MODULE_NAME}.SelectorController`, SelectorController)\n    .service(`${MODULE_NAME}.variableResource`, VariableResource)\n    .service(`${MODULE_NAME}.variableTypeResource`, VariableTypeResource)\n    .provider(`${MODULE_NAME}.$variableForm`, VariableFormProvider)\n    .service(`${MODULE_NAME}.variableSelector`, VariableSelector)\n    .directive('variableSelector', variableSelectorDirective)\n    .directive('variableClickOutside', clickOutsideElement);\n\nmodule.exports = {MODULE_NAME};\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport AlertProvider from './providers/AlertProvider.js';\nimport AlertController from './controllers/AlertController.js';\nimport AlertDirective from './directives/AlertDirective.js';\nimport Alert from './services/Alert.js';\nimport RefreshAlert from './services/RefreshAlert.js';\nimport AlertStorage from './services/AlertStorage.js';\nimport UniqueStorage from './services/UniqueStorage.js';\n\nconst MODULE_NAME = 'clearcode.tm.alert';\n\n\nAlert.$inject = [\n    '$timeout',\n    `${MODULE_NAME}.alertStorage`,\n    `${MODULE_NAME}.$alert`,\n    '$translate'\n];\n\nRefreshAlert.$inject = [\n    '$timeout',\n    `${MODULE_NAME}.alertStorage`,\n    `${MODULE_NAME}.$alert`,\n    '$translate',\n    '$window'\n];\n\nAlertDirective.$inject = [\n    `${MODULE_NAME}.alert`,\n    `${MODULE_NAME}.$alert`,\n    '$window'\n];\n\nAlertController.$inject = [\n    `${MODULE_NAME}.alertStorage`\n];\n\nangular\n    .module(MODULE_NAME, ['pascalprecht.translate', 'ngSanitize', 'ngAnimate'])\n    .provider(`${MODULE_NAME}.$alert`, AlertProvider)\n    .factory(`${MODULE_NAME}.alertStorage`, () => {\n\n        return new AlertStorage();\n\n    })\n    .factory(`${MODULE_NAME}.alertUniqueStorage`, () => {\n\n        return new UniqueStorage();\n\n    })\n    .service(`${MODULE_NAME}.alert`, Alert)\n    .service(`${MODULE_NAME}.refreshAlert`, RefreshAlert)\n    .directive('ccNotification', AlertDirective)\n    .controller(`${MODULE_NAME}.AlertController`, AlertController);\n\nmodule.exports = {MODULE_NAME};\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @name alert#AlertController\n * @namespace clearcode.tm.form\n */\n\nclass AlertController {\n\n    /**\n     * @param {AlertStorage} storage\n     */\n    constructor (AlertStorage) {\n\n        this.storage = AlertStorage;\n\n    }\n\n    /**\n     * @description Get all alerts\n     * @returns {Object}\n     */\n    getAll () {\n\n        return this.storage.getAlerts();\n\n    }\n\n    /**\n     * @description Delete alert\n     * @param id\n     */\n    remove (id) {\n\n        this.storage.remove(id);\n\n    }\n\n    /**\n     * @description Clear alert\n     * @param id\n     */\n    clear () {\n\n        this.storage.clean();\n\n    }\n\n}\n\nexport default AlertController;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @name alert#AlertDirective\n * @namespace clearcode.tm.alert\n */\n\nvar alertDirective = (Alert, alertProvider) => {\n\n    return {\n        restrict: 'E',\n        templateUrl: 'modules/alert/views/alert.html',\n        scope: {\n            interval: '='\n        },\n        controller: 'clearcode.tm.alert.AlertController',\n        controllerAs: 'alertCtrl',\n        link: (scope) => {\n\n            Alert.settings.interval = angular.isDefined(scope.interval) ? scope.interval : alertProvider.interval;\n\n        }\n    };\n\n};\n\nexport default alertDirective;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @name alert#AlertProvider\n * @namespace clearcode.tm.alert\n */\n/* eslint-disable */\nclass AlertProvider {\n\n    constructor () {\n\n        this.interval = 6000;\n        this.messagePatterns = {};\n\n    }\n\n    /**\n     * @description Add message pattern\n     *\n     * @param {String} id\n     * @param {String} pattern\n     * @returns {AlertProvider}\n     */\n    addMessagePattern (id, pattern) {\n\n        var self = this;\n\n        if (self.messagePatterns[id] !== undefined) {\n\n            throw new Error('Pattern with provided id already exist');\n\n        }\n\n        self.messagePatterns[id] = pattern;\n\n        return self;\n\n    }\n\n    /**\n     * @description Add message patterns from array of objects\n     *\n     * @param {Array} patterns\n     * @returns {AlertProvider}\n     */\n     addMessagesPattern (patterns) {\n\n        var self = this;\n\n        if (!angular.isArray(patterns)) {\n\n            throw new Error(\n                `AlertProvider.addMessagesPattern expects\n                 first argument to be Array but received ${(typeof patterns)}`\n            );\n\n        }\n\n        angular.forEach(patterns, (obj) => {\n\n            if (angular.isObject(obj)) {\n\n                angular.forEach(obj, (elem, key) => {\n\n                    self.addMessagePattern(key, elem);\n\n                });\n\n            }\n\n        });\n\n        return self;\n\n    }\n\n    /**\n     * @description Get specific message pattern by id\n     *\n     * @param {String} id\n     * @returns {String|Boolean}\n     */\n    getMessagePattern (id) {\n\n        var self = this;\n\n        if (self.messagePatterns[id] !== undefined) {\n\n            return self.messagePatterns[id];\n\n        }\n\n        return false;\n\n    }\n\n    $get () {\n\n        return this;\n\n    }\n}\n/* eslint-enable */\nexport default AlertProvider;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @name alert#Alert\n * @namespace clearcode.tm.alert\n */\n\n/**\n* @description Remove Alert after Timeout\n*\n* @param {Integer} id from storage\n*/\nvar removeAfterTimeout = function (id) {\n\n    var self = this;\n\n    if (self.settings.interval > 0) {\n\n        return self.$timeout(() => {\n\n            self.storage.remove(id);\n\n        }, self.settings.interval);\n\n    }\n\n};\n\n/**\n* @description Add alert to storage\n*\n* @param {String} type\n* @param {String} pattern\n* @param {Array} params\n* @returns {Number}\n*/\nvar addAlert = function (type, pattern, params) {\n\n    var message, id, self = this;\n    message = self.convertToMessage(pattern, params);\n\n    self\n        .translate([message])\n        .then((translations) => {\n\n            id = self.storage.add(type, translations[message]);\n            removeAfterTimeout.call(self, id);\n\n            return id;\n\n        });\n\n};\n\nclass Alert {\n\n    constructor ($timeout, storage, provider, $translate) {\n\n        /**\n         * @type {AlertStorage}\n         */\n        this.storage = storage;\n        /**\n         * @type {Object}\n         */\n        this.$timeout = $timeout;\n        /**\n         * @type {TranslationProvider}\n         */\n        this.settings = this.settings === undefined ? provider\n            : angular.extend(this.settings, provider);\n\n        /**\n         * @readonly\n         * @type {string}\n         */\n        this.INFO_TYPE = 'info';\n\n        /**\n         * @readonly\n         * @type {string}\n         */\n        this.ERROR_TYPE = 'danger';\n\n        /**\n         * @readonly\n         * @type {string}\n         */\n        this.SUCCESS_TYPE = 'success';\n\n        /**\n         * @readonly\n         * @type {$translate}\n         */\n        this.translate = $translate;\n    }\n\n    /**\n     * @description Add success type alert\n     *\n     * @param {String} id\n     * @param {Array} params\n     */\n    success (id, params = []) {\n\n        addAlert.call(this, this.SUCCESS_TYPE, id, params);\n\n    }\n\n    /**\n     * @description Add error type alert\n     *\n     * @param {String} id\n     * @param {Array} params\n     */\n    error (id, params = []) {\n\n        addAlert.call(this, this.ERROR_TYPE, id, params);\n\n    }\n\n    /**\n     * @description Add info type alert\n     *\n     * @param {String} id\n     * @param {Array} params\n     */\n    info (id, params = []) {\n\n        addAlert.call(this, this.INFO_TYPE, id, params);\n\n    }\n\n    /**\n     * @returns {AlertStorage}\n     */\n    getStorage () {\n\n        return this.storage;\n\n    }\n\n    /**\n     * @description Convert message if is a pattern\n     *\n     * @param {Object|String} pattern\n     * @param {Array} params\n     * @returns {String}\n     */\n    convertToMessage (pattern, params) {\n\n        var self, message;\n\n        self = this;\n\n        if (angular.isDefined(pattern)) {\n\n            pattern = self.settings.getMessagePattern(pattern);\n\n        }\n\n        message = vsprintf(pattern, params);\n\n        return message;\n\n    }\n\n}\n\nexport default Alert;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @name alert#AlertStorage\n * @namespace clearcode.tm.alert\n */\n\nvar indicator;\n\nclass AlertStorage {\n\n    constructor () {\n\n        indicator = 0;\n        this.collection = {};\n\n    }\n\n    /**\n     * @description Returns all alerts objects\n     *\n     * @returns {Object}\n     */\n    getAlerts () {\n\n        return this.collection;\n\n    }\n\n    /**\n     * @description Returns specific alert object\n     *\n     * @param {String} id\n     * @returns {Object}\n     */\n    getAlert (id) {\n\n        return this.collection[id];\n\n    }\n\n    /**\n     * @description Add alert to collection\n     *\n     * @param {String} type\n     * @param {String} message\n     * @returns {Number}\n     */\n    add (type, message) {\n\n        this.collection[indicator] = {\n            type: type,\n            message: message\n        };\n\n        return indicator++;\n\n    }\n\n    /**\n     * @description Check whether collection contains alert\n     *\n     * @param {String} type\n     * @param {String} message\n     * @returns {Boolean}\n     */\n    has (type, message) {\n\n        for (var alert in this.collection) {\n\n            if (type === this.collection[alert].type && message === this.collection[alert].message) {\n\n                return true;\n\n            }\n\n        }\n\n        return false;\n\n    }\n\n    /**\n     * @description Remove alert from collection\n     *\n     * @param {Number} id\n     * @returns {Boolean}\n     */\n    remove (id) {\n\n        var self = this;\n\n        if (self.collection[id] !== undefined) {\n\n            delete self.collection[id];\n\n            return true;\n\n        }\n\n        return false;\n\n    }\n\n    /**\n     * @description Remove all alerts from collection\n     */\n    clean () {\n\n        this.collection = {};\n\n    }\n\n}\n\nexport default AlertStorage;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport Alert from './Alert.js';\n\n/**\n * @name alert#RefreshAlert\n * @namespace clearcode.tm.alert\n */\nclass RefreshAlert extends Alert {\n\n    /**\n     * @param {$timeout} $timeout\n     * @param {storage} storage\n     * @param {provider} provider\n     * @param {$translate} $translate\n     * @param {$window} $window\n     */\n    constructor ($timeout, storage, provider, $translate, $window) {\n\n        super ($timeout, storage, provider, $translate);\n\n        this.window = $window;\n\n    }\n\n    /**\n     * Add success message after refresh page\n     *\n     * @param localStorageKey\n     * @param message\n     */\n    success (localStorageKey, message) {\n\n        if (this.window.localStorage[localStorageKey]) {\n\n            super.success(message);\n\n            this.window.localStorage.removeItem(localStorageKey);\n\n        }\n\n    }\n\n}\n\nexport default RefreshAlert;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport AlertStorage from './AlertStorage.js';\n\n/**\n * @name alert#UniqueStorage\n * @namespace clearcode.tm.alert\n */\n\nclass UniqueStorage extends AlertStorage {\n\n    /**\n     * @description Add alert to collection\n     *\n     * @param {String} type\n     * @param {String} message\n     * @returns {Number}\n     */\n    add (type, message) {\n\n        if (this.has(type, message)) {\n\n            return -1;\n\n        }\n\n        return super.add(type, message);\n\n    }\n\n}\n\nexport default UniqueStorage;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport clipboard from './directives/clipboardDirective.js';\n\nconst MODULE_NAME = 'clearcode.tm.clipboard';\n\nclipboard.$inject = [\n  '$compile'\n];\n\nangular\n    .module(MODULE_NAME, ['ngClipboard'])\n    .directive('ccClipboard', clipboard);\n\nmodule.exports = {MODULE_NAME};\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar clipboardDirective = ($compile) => {\n\n    return {\n        restrict: 'A',\n        scope: {\n            ngModel: '='\n        },\n        link: (scope, element) => {\n\n            element.wrap('<div class=\"cc-clipboard\"></div>');\n\n            var template = angular.element(document.getElementById('clipboard.html')).html();\n            var tplElement = $compile(template)(scope);\n            var clipboard = element.parent();\n\n            clipboard.append(tplElement);\n\n            var button = clipboard.find('button');\n\n            button.addClass('hidden');\n\n            clipboard.on('mouseenter', () => {\n\n                button.removeClass('hidden');\n\n            }).on('mouseleave', () => {\n\n                button.addClass('hidden');\n\n            });\n\n            scope.copyToClipboard = () => {\n\n                return scope.ngModel;\n\n            };\n\n        }\n    };\n\n};\n\nexport default clipboardDirective;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport confirmDirective from './directives/ConfirmDirective.js';\n\nconst MODULE_NAME = 'clearcode.tm.confirm';\n\nangular\n    .module(MODULE_NAME, [])\n    .directive('ccConfirm', confirmDirective);\n\nmodule.exports = {MODULE_NAME};\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar confirmDirective = () => {\n\n    return {\n        restrict: 'A',\n        templateUrl: 'modules/confirm/views/confirm.html',\n        transclude: true,\n        replace: true,\n        scope: {\n            ccConfirm: '&'\n        },\n        link: (scope) => {\n\n            scope.turnOn = false;\n\n            scope.approve = () => {\n\n                scope.ccConfirm();\n\n            };\n\n            scope.cancel = () => {\n\n                scope.turnOn = false;\n\n            };\n\n            scope.confirm = () => {\n\n                scope.turnOn = true;\n\n            };\n\n        }\n    };\n\n};\n\nexport default confirmDirective;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport AlertController from '../../alert/controllers/AlertController.js';\n\n/**\n * @name alert#AlertFormController\n * @namespace clearcode.tm.alert\n */\nclass AlertFormController extends AlertController {\n}\n\nexport default AlertFormController;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @name form#AlertFormDirective\n * @namespace clearcode.tm.form\n */\n\nvar alertFormDirective = (Alert, alertProvider) => {\n\n    return {\n        restrict: 'E',\n        templateUrl: 'modules/form/views/alertForm.html',\n        scope: {\n            interval: '='\n        },\n        controller: 'clearcode.tm.form.AlertFormController',\n        controllerAs: 'alertFormCtrl',\n        link: (scope) => {\n\n            Alert.settings.interval = angular.isDefined(scope.interval) ? scope.interval : alertProvider.interval;\n\n        }\n    };\n\n};\n\nexport default alertFormDirective;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @name form#CheckboxDirective\n * @namespace clearcode.tm.form\n */\n/* eslint-disable */\nvar CheckboxDirective = () => {\n\n\treturn {\n\t\trestrict: 'A',\n\t\trequire: '?ngModel',\n\t\tscope: {\n        \tngModel: '=',\n        },\n        link: (scope, element, attrs) => {\n\n        \tvar checkedClass = 'cc-checkbox-checked';\n\n\t\t\telement.wrap('<div class=\"cc-checkbox\"></div>');\n\n\t\t\tif (scope.ngModel !== undefined) {\n\n\t\t\t\tif (scope.ngModel || (attrs.ngTrueValue !== undefined && scope.ngModel === attrs.ngTrueValue)) {\n\n\t\t\t  \t\telement.parent().addClass(checkedClass);\n\n\t\t\t\t} else {\n\n\t\t\t\t  \telement.parent().removeClass(checkedClass);\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tscope.$watch('ngModel', (value) => {\n\n\t\t\t\tif (value === true || (attrs.ngTrueValue !== undefined && value === attrs.ngTrueValue)) {\n\n\t\t\t\t  \telement.parent().addClass(checkedClass);\n\n\t\t\t\t} else {\n\n\t\t\t\t  \telement.parent().removeClass(checkedClass);\n\n\t\t\t\t}\n\n\t\t\t});\n\n        }\n\t};\n\n};\n/* eslint-enable */\n\nexport default CheckboxDirective;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @name form#CheckboxDirective\n * @namespace clearcode.tm.form\n */\n/* eslint-disable */\nvar RadioButtonDirective = () => {\n\n    return {\n        restrict: 'A',\n        require: '?ccRadioModel',\n        scope: {\n            ccRadioModel: '=',\n            ccDisabled: '='\n        },\n        link: (scope, element, attrs) => {\n\n            element.wrap('<div class=\"cc-radio\"></div>');\n\n            if (scope.ccRadioModel !== undefined) {\n\n                if(scope.ccDisabled) {\n\n                    element.parent().addClass('radioDisabled');\n\n                }\n\n                if (scope.ccRadioModel === element[0].defaultValue) {\n\n                    element.parent().addClass('radioSelected');\n\n                } else {\n\n                    element.parent().removeClass('radioSelected');\n\n                }\n\n            }\n\n            scope.$watch('ccRadioModel', (value) => {\n\n                if (value === element[0].defaultValue) {\n\n                    element.parent().addClass('radioSelected');\n\n                } else {\n\n                    element.parent().removeClass('radioSelected');\n\n                }\n\n            });\n\n        }\n    };\n\n};\n/* eslint-enable */\n\nexport default RadioButtonDirective;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @name form#SelectDirective\n * @namespace clearcode.tm.form\n */\n\nvar SelectDirective = ($compile) => {\n\n\t/* eslint-disable */\n\treturn {\n\t\trestrict: 'A',\n\t\tpriority: 1,\n\t\tscope: {\n\t\t\tngModel: '=',\n\t\t\tccSelectOptions: '=',\n\t\t\tccSelectValue: '@',\n\t\t\tccSelectLabel: '@'\n\t\t},\n\t\tlink: (scope, element, attrs) => {\n\n\t\t\telement.wrap('<div class=\"cc-select\"></div>');\n\t\t\telement.addClass('ng-hide');\n\n\t\t\tvar template = angular.element(document.getElementById('select-template.html')).html();\n\t\t\tvar tmpElement = $compile(template)(scope);\n\n\t\t\telement.parent().append(tmpElement);\n\n            scope.id = attrs.id;\n\n\t\t\tvar searchByValue = (value) => {\n\n\t\t        for (var index in scope.ccSelectOptions) {\n\n\t\t            if (scope.ccSelectOptions[index][scope.ccSelectValue] === value) {\n\n\t\t                return index;\n\n\t\t            }\n\n\t\t        }\n\n\t\t        return false;\n\n\t\t    };\n\n\t\t\tscope.getActiveOptionLabel = () => {\n\n\t\t\t\tvar index = searchByValue(scope.ngModel);\n\n\t\t\t\tif (index !== false) {\n\n\t\t\t\t\treturn scope.ccSelectOptions[index][scope.ccSelectLabel];\n\n\t\t\t\t} else {\n\n\t\t\t\t\treturn '';\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t\tscope.changeSelection = (element) => {\n\n\t\t\t\tscope.ngModel = element[scope.ccSelectValue];\n\n\t\t\t};\n\n\t\t}\n\t};\n\t/* eslint-enable */\n\n};\n\nexport default SelectDirective;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport CheckboxDirective from './directives/CheckboxDirective.js';\nimport RadioButtonDirective from './directives/RadioButtonDirective.js';\nimport SelectDirective from './directives/SelectDirective.js';\nimport AlertForm from './services/AlertForm.js';\nimport AlertFormDirective from './directives/AlertFormDirective.js';\nimport AlertFormController from './controller/AlertFormController.js';\n\nconst MODULE_NAME = 'clearcode.tm.form';\n\nAlertForm.$inject = [\n    '$timeout',\n    `clearcode.tm.alert.alertUniqueStorage`,\n    `clearcode.tm.alert.$alert`,\n    '$translate'\n];\n\nAlertFormDirective.$inject = [\n    `${MODULE_NAME}.alertForm`,\n    `clearcode.tm.alert.$alert`\n];\n\nAlertFormController.$inject = [\n    `clearcode.tm.alert.alertUniqueStorage`\n];\n\nSelectDirective.$inject = [\n    '$compile'\n];\n\nangular\n    .module(MODULE_NAME, [\n      'pascalprecht.translate',\n      'clearcode.tm.alert'\n    ])\n    .service(`${MODULE_NAME}.alertForm`, AlertForm)\n    .directive('ccSelect', SelectDirective)\n    .directive('ccCheckbox', CheckboxDirective)\n    .directive('ccRadio', RadioButtonDirective)\n    .directive('ccNotificationForm', AlertFormDirective)\n    .controller(`${MODULE_NAME}.AlertFormController`, AlertFormController);\n\nmodule.exports = {MODULE_NAME};\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport Alert from '../../alert/services/Alert.js';\n\n/**\n * @name alert#AlertForm\n * @namespace clearcode.tm.form\n */\n\nclass AlertForm extends Alert {\n}\n\nexport default AlertForm;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @name helpSystem#HelpSystemDirective\n * @namespace clearcode.tm.helpSystem\n */\n\nvar helpSystemDirective = () => {\n\n    return {\n        restrict: 'EA',\n        replace: true,\n        scope: { content: '@', placement: '@' },\n        templateUrl: 'modules/helpSystem/views/helpSystem.html'\n    };\n\n};\n\nexport default helpSystemDirective;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport HelpSystemDirective from './directives/HelpSystemDirective.js';\n\nconst MODULE_NAME = 'clearcode.tm.helpSystem';\n\nangular\n    .module(MODULE_NAME, [])\n    .directive( 'ccHelp', HelpSystemDirective);\n\nmodule.exports = {MODULE_NAME};\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @type {$state}\n */\nvar state;\n\nclass BreadcrumbController {\n\n    /**\n     * @param PageInfo\n     */\n    constructor (scope, $state, PageInfo) {\n\n        this.breadcrumb = PageInfo.get();\n        state = $state;\n\n        scope.$on('page.info', () => {\n\n            this.breadcrumb = PageInfo.get();\n\n        });\n\n    }\n\n    /**\n     * @param breadcrumb\n     */\n    stateGo (breadcrumb) {\n\n        state.go(breadcrumb.state, breadcrumb.params);\n\n    }\n\n}\n\nexport default BreadcrumbController;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @type {String}\n */\nconst DEFAULT_TITLE = '7tag Welcome';\n\nclass TitleController {\n\n    /**\n     * @param {Object} scope\n     * @param PageInfo\n     */\n    constructor (scope, PageInfo) {\n\n        this.title = DEFAULT_TITLE;\n        this.default = DEFAULT_TITLE;\n\n        scope.$on('page.info', () => {\n\n            this.info = PageInfo.get();\n            this.setTitle();\n\n        });\n\n    }\n\n    setTitle () {\n\n        this.title = this.info.map(element => element.name).reduce((previous, current) => previous += ' - ' + current);\n\n    }\n\n}\n\nexport default TitleController;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @name pageInfo#BreadcrumbDirective\n * @namespace clearcode.tm.pageInfo\n */\n\nvar breadcrumbDirective = () => {\n\n    return {\n        restrict: 'E',\n        templateUrl: 'modules/pageInfo/views/breadcrumb.html',\n        controller: 'clearcode.tm.pageInfo.BreadcrumbController',\n        controllerAs: 'breadcrumbCtrl'\n    };\n\n};\n\nexport default breadcrumbDirective;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @name pageInfo#TitleDirective\n * @namespace clearcode.tm.pageInfo\n */\nvar titleDirective = () => {\n\n    return {\n        restrict: 'A',\n        controller: 'clearcode.tm.pageInfo.TitleController',\n        controllerAs: 'titleCtrl'\n    };\n\n};\n\nexport default titleDirective;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport BreadcrumbController from './controllers/BreadcrumbController.js';\nimport TitleController from './controllers/TitleController.js';\nimport BreadcrumbDirective from './directives/BreadcrumbDirective.js';\nimport PageInfo from './services/PageInfo.js';\nimport TitleDirective from './directives/TitleDirective.js';\n\nconst MODULE_NAME = 'clearcode.tm.pageInfo';\n\nBreadcrumbController.$inject = [\n    '$scope',\n    '$state',\n    `${MODULE_NAME}.pageInfo`\n];\n\nTitleController.$inject = [\n    '$scope',\n    `${MODULE_NAME}.pageInfo`\n];\n\nPageInfo.$inject = [\n    '$rootScope'\n];\n\nangular\n    .module(MODULE_NAME, [])\n    .controller(`${MODULE_NAME}.BreadcrumbController`, BreadcrumbController)\n    .controller(`${MODULE_NAME}.TitleController`, TitleController)\n    .directive('ccBreadcrumb', BreadcrumbDirective)\n    .directive('ccTitle', TitleDirective)\n    .service(`${MODULE_NAME}.pageInfo`, PageInfo);\n\nmodule.exports = {MODULE_NAME};\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @type {rootScope}\n */\nvar rootScope;\n\nclass PageInfo {\n\n    /**\n     * @param $rootScope\n     */\n    constructor ($rootScope) {\n\n        this.navigation = [];\n\n        rootScope = $rootScope;\n\n    }\n\n    /**\n     * @param name\n     * @param state\n     * @param params\n     *\n     * @return {PageInfo}\n     */\n    add (name, state, params) {\n\n        this.navigation.push({\n            name: name,\n            state: state,\n            params: params\n        });\n\n        return this;\n\n    }\n\n    /**\n     * @return {PageInfo}\n     */\n    clear () {\n\n        this.navigation = [];\n\n        return this;\n\n    }\n\n\n    /**\n     * Gives signal into breadcrumb and title\n     */\n    broadcast () {\n\n        rootScope.$broadcast('page.info');\n\n    }\n\n    /**\n     * @return {Array}\n     */\n    get () {\n\n        return this.navigation;\n\n    }\n\n}\n\nexport default PageInfo;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * Math.ceil in angular filter\n *\n * @returns {Function}\n *\n * @author Arek Zajc <a.zajac@clearcode.cc>\n */\nvar tmCeilFilter = () => {\n\n    return (number) => {\n\n        return Math.ceil(number);\n\n    };\n\n};\n\nexport default tmCeilFilter;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar tmDateFilter = ($filter, defaultDateFormat) => {\n\n    var angularDateFilter = $filter('date');\n\n    return (theDate, format = null) => {\n\n        if (format === null) {\n\n            format = defaultDateFormat;\n\n        }\n\n        return angularDateFilter(theDate, format);\n\n    };\n\n};\n\nexport default tmDateFilter;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport tmDateFilter from './filters/tmDateFilter.js';\nimport tmCeilFilter from './filters/tmCeilFilter.js';\n\nconst MODULE_NAME = 'clearcode.tm.sanitize';\n\ntmDateFilter.$inject = [\n    '$filter',\n    `defaultDateFormat`\n];\n\nangular\n    .module(MODULE_NAME, [])\n    .filter('tmDate', tmDateFilter)\n    .filter('tmCeil', tmCeilFilter);\n\nmodule.exports = {MODULE_NAME};\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n/**\n * @name HTMLLinter\n */\nclass HTMLLinter {\n\n    constructor ($window) {\n\n        this.$window = $window;\n\n    }\n\n    lint(text, lintRules) {\n\n        return this.$window.HTMLHint ? this.$window.HTMLHint.verify(text, lintRules) : [];\n\n    }\n\n}\n\nexport default HTMLLinter;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nconst HTML_LINT_RULES = {\n    'tagname-lowercase': false,\n    'attr-lowercase': false,\n    'attr-value-double-quotes': false,\n    'attr-value-not-empty': false,\n    'attr-no-duplication': false,\n    'doctype-first': false,\n    'tag-pair': false,\n    'tag-self-close': false,\n    'spec-char-escape': false,\n    'id-unique': false,\n    'src-not-empty': false,\n    'title-require': false,\n    'head-script-disabled': false,\n    'doctype-html5': false,\n    'id-class-value': false,\n    'style-disabled': false,\n    'inline-style-disabled': false,\n    'inline-script-disabled': false,\n    'space-tab-mixed-disabled': false,\n    'id-class-ad-disabled': false,\n    'href-abs-or-rel': false,\n    'attr-unsafe-chars': false,\n};\n\nconst JS_LINT_RULES = {\n    'browser': true,\n    'devel': true,\n    'dojo': true,\n    'jquery': true,\n    'mootools': true,\n    'nonstandard': true,\n    'prototypejs': true,\n    'yui': true,\n    'bitwise': false,\n    'camelcase': false,\n    'curly': true,\n    'enforceall': false,\n    'eqeqeq': true,\n    'es3': false,\n    'es5': false,\n    'forin': false,\n    'freeze': false,\n    'funcscope': true,\n    'futurehostile': true,\n    'immed': false,\n    'latedef': false,\n    'nocomma': true,\n    'nonew': true,\n    'notypeof': true,\n    'shadow': 'inner',\n    'strict': false,\n    'sub': false,\n    'undef': true,\n    'unused': true,\n    'asi': true\n};\n\n\n/**\n * @name LintingRules\n */\nclass LintingRules {\n\n    getLintingRules() {\n        var jsHintRules = angular.copy(JS_LINT_RULES),\n            htmlHintRules = angular.copy(HTML_LINT_RULES);\n\n        htmlHintRules.jshint = jsHintRules;\n\n        return htmlHintRules;\n    }\n\n}\n\nexport default LintingRules;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nconst HTML_HEAD_WRAP_START = '<!DOCTYPE HTML><html><head>';\nconst HTML_HEAD_WRAP_END = '</head><body></body></html>';\n\n/**\n * @name TagTemplateLinter\n */\nclass TagTemplateLinter {\n\n    /**\n     * @param  TagTemplateToJsConverter tagTemplateToJsConverter\n     * @param  LintingRules lintingRules\n     * @param  HtmlLinter htmlLinter\n     */\n    constructor (tagTemplateToJsConverter, lintingRules, htmlLinter) {\n\n          this.tagTemplateToJsConverter = tagTemplateToJsConverter;\n          this.lintingRules = lintingRules;\n          this.htmlLinter = htmlLinter;\n\n    }\n\n    /**\n     * @param  {string} text\n     * @param  {object} options\n     * @param  {object} cm\n     * @return {[object]}\n     */\n    validate (text, options, cm) {\n\n        if (options.deactivate){\n            return [];\n        }\n\n        let htmlWrappedText = this.wrapInHtmlTag(text),\n            lines = htmlWrappedText.split('\\n');\n\n        this.tagTemplateToJsConverter.convert(lines, cm.options);\n\n        let tagTemplateWithFixedJsText = lines.join('\\n'),\n            allErrors = this.lint(tagTemplateWithFixedJsText, options),\n            jsErrors = this.filterOutHtmlErrors(allErrors, lines.length),\n            errors = [];\n\n        for (let i = 0; i < jsErrors.length; i++) {\n            errors.push(this.mapToLintRepresentation(jsErrors[i]));\n        }\n\n        return errors;\n\n    }\n\n    /**\n     * @param  {string} text\n     * @return {string}\n     */\n    wrapInHtmlTag (text) {\n\n        return `${HTML_HEAD_WRAP_START}\n                ${text}\n                ${HTML_HEAD_WRAP_END}`;\n\n    }\n\n    /**\n     * @param  {[object]} errors\n     * @param  {number} lineCount\n     * @return {[object]}\n     */\n    filterOutHtmlErrors (errors, lineCount) {\n\n        let jsErrors = [];\n\n        for (let i = 0; i < errors.length; i++) {\n            let error = errors[i];\n\n            if (!this.isHtmlError(error, lineCount)){\n\n                error.line -= 1;\n                jsErrors.push(error);\n            }\n        }\n\n        return jsErrors;\n\n    }\n\n    /**\n     * @param  {object}  error\n     * @param  {number}  lastLine\n     * @return {Boolean}\n     */\n    isHtmlError (error, lastLineIdx) {\n\n        return error.line === 0 || error.line === lastLineIdx;\n\n    }\n\n    /**\n     * @param  {string} text\n     * @param  {object} options\n     * @return {[object]}\n     */\n    lint (text, options) {\n\n        options = options || {};\n\n        let lintRules = angular.extend({}, this.lintingRules.getLintingRules(), options);\n\n        return this.htmlLinter.lint(text, lintRules);\n\n    }\n\n    /**\n     * @param  {object} message\n     * @return {object}\n     */\n    mapToLintRepresentation (message) {\n\n        return {\n            from: CodeMirror.Pos(message.line - 1, 0),\n            to: CodeMirror.Pos(message.line - 1, 0),\n            message: message.message,\n            severity : message.type\n        };\n\n    }\n\n}\n\nexport default TagTemplateLinter;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nconst TAG_TEMPLATE_VARIABLE_START = '{{';\nconst TAG_TEMPLATE_VARIABLE_END = '}}';\n\n\nclass TagTemplateToJsConverter {\n\n    /**\n     * @param  {[string]} textLines\n     * @param  {object} options\n     * @return {[string]}\n     */\n    convert (textLines, options) {\n\n        if (!options || !options.variables){\n          return textLines;\n        }\n\n        let variables = this.getVariables(options),\n            lineIdx = 0;\n\n        while (!this.isCursorAfterTheEndOfText(textLines.length, lineIdx)){\n            let line = textLines[lineIdx],\n                lineContainsVariable = line.indexOf(TAG_TEMPLATE_VARIABLE_START) !== -1;\n\n            if (lineContainsVariable){\n                textLines[lineIdx] = this.replaceVariablesExpressions(variables, line);\n            }\n\n            ++lineIdx;\n\n        }\n\n        return textLines;\n\n    }\n\n    /**\n     * @param  {number}  totalLines\n     * @param  {number}  line\n     * @return {Boolean}\n     */\n    isCursorAfterTheEndOfText (totalLines, line) {\n\n        return line >= totalLines\n\n    }\n\n    /**\n     * @param  {object} options\n     * @return {[object]}\n     */\n    getVariables (options) {\n\n        let variables = [];\n\n        for (let i = 0; i < options.variables.length; i++) {\n\n            let variable = options.variables[i],\n                words = variable.name.trim().split(/\\s+/),\n                variableObj = {\n                    name: variable.name,\n                    pattern: this.createVariableSearchPattern(variable.name),\n                    replacement: `'${words.join('_')}'`\n                };\n\n            variables.push(variableObj);\n\n        }\n\n        return variables;\n\n    }\n\n    /**\n     * @param  {string} variableName\n     * @return {RegExp}\n     */\n    createVariableSearchPattern (variableName) {\n\n        let whitespace = '[\\\\s]',\n            words = variableName.split(/[\\s]+/),\n            regexStr = words.join(`${whitespace}+`);\n\n        regexStr = `${TAG_TEMPLATE_VARIABLE_START}${whitespace}*${regexStr}${whitespace}*${TAG_TEMPLATE_VARIABLE_END}`;\n\n        return new RegExp(regexStr, \"g\");\n\n    }\n\n    /**\n     * @param  {[object]} variables\n     * @param  {[string]} line\n     * @return {string}\n     */\n    replaceVariablesExpressions (variables, line) {\n\n        for (let i = 0; i < variables.length; i++) {\n            let variable = variables[i];\n            line = line.replace(variable.pattern, variable.replacement);\n        }\n\n        return line;\n\n    }\n\n}\n\nexport default TagTemplateToJsConverter;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nconst DEFAULT_CONFIG = {\n    mode: {\n        name: \"htmlmixed\"\n    },\n    lineNumbers: true,\n    styleActiveLine: true,\n    matchBrackets: true,\n    theme: 'stg',\n    gutters: [\"CodeMirror-lint-markers\"],\n    lint: {}\n};\n\n/**\n * @name TextEditorConfig\n */\nclass TextEditorConfig {\n\n  /**\n   * @param {TagTemplateLinter} tagTemplateLinter\n   */\n    constructor (tagTemplateLinter) {\n\n        this.tagTemplateLinter = tagTemplateLinter;\n\n    }\n\n    /**\n     * @param {Object} configOverrides\n     *\n     * @return {Object}\n     */\n    getConfig (configOverrides) {\n\n        var overrides = angular.isObject(configOverrides) ? configOverrides : {},\n            cfg = angular.extend({}, DEFAULT_CONFIG, overrides);\n\n        cfg.lint.getAnnotations = (value, opt, cm) => {\n            return this.tagTemplateLinter.validate(value, opt, cm)\n        }\n\n        return cfg;\n\n    }\n\n}\n\nexport default TextEditorConfig;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport TextEditorConfig from './service/TextEditorConfig.js';\nimport TagTemplateLinter from './service/TagTemplateLinter.js';\nimport TagTemplateToJsConverter from './service/TagTemplateToJsConverter.js';\nimport LintingRules from './service/LintingRules.js';\nimport HTMLLinter from './service/HTMLLinter.js';\n\nconst MODULE_NAME = 'clearcode.tm.textEditor';\n\nTextEditorConfig.$inject = [\n    `${MODULE_NAME}.TagTemplateLinter`\n];\n\nTagTemplateLinter.$inject = [\n    `${MODULE_NAME}.TagTemplateToJsConverter`,\n    `${MODULE_NAME}.LintingRules`,\n    `${MODULE_NAME}.HTMLLinter`\n];\n\nHTMLLinter.$inject = [\n    '$window'\n];\n\n\nangular\n    .module(MODULE_NAME, [])\n    .service(`${MODULE_NAME}.LintingRules`, LintingRules)\n    .service(`${MODULE_NAME}.HTMLLinter`, HTMLLinter)\n    .service(`${MODULE_NAME}.TagTemplateToJsConverter`, TagTemplateToJsConverter)\n    .service(`${MODULE_NAME}.TagTemplateLinter`, TagTemplateLinter)\n    .service(`${MODULE_NAME}.TextEditorConfig`, TextEditorConfig)\n    .run([\n\n        '$rootScope',\n        `${MODULE_NAME}.TextEditorConfig`,\n\n        ($rootScope, TextEditorConfig) => {\n\n          $rootScope.TextEditorConfig = TextEditorConfig;\n\n    }]);\n\nmodule.exports = {MODULE_NAME};\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n var translationFactory = ($http, $q) => {\n\n    return function (options) {\n\n        var deferred = $q.defer();\n\n        $http({\n            method: 'GET',\n            url: options.url,\n            cache: options.cache\n        })\n            .success((data) => {\n\n                deferred.resolve(data);\n\n            })\n            .error(() => {\n\n                deferred.reject();\n\n            });\n\n        return deferred.promise;\n\n    };\n\n};\n\nexport default translationFactory;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nclass Translation {\n\n    constructor(translationFactory) {\n\n        this.languages = [];\n        this.translationFactory = translationFactory;\n\n    }\n\n    /**\n     * @returns {*}\n     */\n    getLanguages() {\n\n        return this.languages;\n\n    }\n\n    /**\n     * @param language\n     * @returns {boolean}\n     */\n    hasLanguage(language) {\n\n        return this.languages.hasOwnProperty(language);\n\n    }\n\n    loadAvailableTranslations() {\n\n        return this.translationFactory({\n            'url': '/api/translations',\n            'cache': false\n        }).then((data) => {\n\n            for (let key in data) {\n\n                this.languages.push({\n                    id: key,\n                    name: data[key]\n                });\n\n            }\n\n        });\n\n    }\n}\n\nexport default Translation;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport TranslationFactory from './factory/TranslationFactory.js';\nimport Translation from './services/Translation.js';\n\nconst MODULE_NAME = 'clearcode.tm.translation';\n\nTranslationFactory.$inject = [\n    '$http',\n    '$q'\n];\n\nTranslation.$inject = [\n    `${MODULE_NAME}.translationFactory`\n];\n\nangular\n    .module(MODULE_NAME, [])\n    .factory(`${MODULE_NAME}.translationFactory`, TranslationFactory)\n    .service(`${MODULE_NAME}.translation`, Translation);\n\nmodule.exports = {MODULE_NAME};\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @name validator#stgFormDirective\n * @namespace clearcode.tm.validator\n */\n\nvar isPromise = function (promise) {\n\n    if (typeof promise === 'object' && typeof promise.then === 'function') {\n\n        return true;\n\n    }\n\n    return false;\n\n};\n\nvar stgFormDirective = function ($alertProvider, $alertForm) {\n\n    return {\n\n        restrict: 'A',\n        scope: {\n            formResource: '='\n        },\n        link: (scope, element) => {\n\n            scope.$watch('formResource', (formPromise) => {\n\n                if (formPromise && isPromise(formPromise)) {\n\n                    formPromise.then(\n                        () => {},\n                        (resp) => {\n\n                            if (resp.errors.hasOwnProperty('form')) {\n\n                                if (!$alertProvider.getMessagePattern('login.server')) {\n\n                                    $alertProvider.addMessagePattern(\n                                        'login.server',\n                                        resp.errors.form[0]\n                                    );\n\n                                }\n\n                                $alertForm.getStorage().clean();\n                                $alertForm.error('login.server');\n\n                            }\n\n                            for (let field in resp.errors.fields) {\n\n                                if (resp.errors.fields.hasOwnProperty(field)) {\n\n                                    let form = scope.$parent[element[0].attributes.name.value];\n\n                                    if (resp.errors.fields[field] instanceof Array &&\n                                        resp.errors.fields[field].length !== 0) {\n\n                                        form[field].$invalid = true;\n                                        form[field].$setDirty();\n                                        form[field].$error[field] = resp.errors.fields[field];\n\n                                    } else {\n\n                                        for (let nested in resp.errors.fields[field].fields) {\n\n                                            if (resp.errors.fields[field].fields.hasOwnProperty(nested) &&\n                                                resp.errors.fields[field].fields[nested].length !== 0) {\n\n                                                form[nested].$invalid = true;\n                                                form[nested].$error[nested] = resp.errors.fields[field].fields[nested];\n\n                                            }\n\n                                        }\n\n                                    }\n\n                                }\n\n                            }\n\n                        }\n\n                    );\n\n                }\n\n            }, false);\n\n        }\n\n    };\n\n};\n\nexport default stgFormDirective;\n","/**\n * Copyright (C) 2015 Digimedia Sp. z.o.o. d/b/a Clearcode\n *\n * This program is free software: you can redistribute it and/or modify it under\n * the terms of the GNU Affero General Public License as published by the Free\n * Software Foundation, either version 3 of the License, or (at your option) any\n * later version.\n *\n * This program is distrubuted in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport stgFormDirective from './directives/stgFormDirective.js';\n\nconst MODULE_NAME = 'clearcode.tm.validator';\n\nstgFormDirective.$inject = [\n    'clearcode.tm.alert.$alert',\n    'clearcode.tm.form.alertForm'\n];\n\nangular\n    .module(MODULE_NAME, [\n        'clearcode.tm.alert',\n        'clearcode.tm.form'\n    ])\n    .directive('stgForm', stgFormDirective);\n\nmodule.exports = {MODULE_NAME};\n"],"sourceRoot":"/source/"}